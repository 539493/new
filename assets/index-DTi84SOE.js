(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ux={exports:{}},we={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Bl=Symbol.for("react.element"),s1=Symbol.for("react.portal"),a1=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),o1=Symbol.for("react.profiler"),i1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),u1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),f1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),ah=Symbol.iterator;function h1(e){return e===null||typeof e!="object"?null:(e=ah&&e[ah]||e["@@iterator"],typeof e=="function"?e:null)}var dx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fx=Object.assign,mx={};function ca(e,t,r){this.props=e,this.context=t,this.refs=mx,this.updater=r||dx}ca.prototype.isReactComponent={};ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hx(){}hx.prototype=ca.prototype;function Zd(e,t,r){this.props=e,this.context=t,this.refs=mx,this.updater=r||dx}var ef=Zd.prototype=new hx;ef.constructor=Zd;fx(ef,ca.prototype);ef.isPureReactComponent=!0;var lh=Array.isArray,px=Object.prototype.hasOwnProperty,tf={current:null},gx={key:!0,ref:!0,__self:!0,__source:!0};function xx(e,t,r){var s,a={},l=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)px.call(t,s)&&!gx.hasOwnProperty(s)&&(a[s]=t[s]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var i=Array(c),u=0;u<c;u++)i[u]=arguments[u+2];a.children=i}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:Bl,type:e,key:l,ref:o,props:a,_owner:tf.current}}function p1(e,t){return{$$typeof:Bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function rf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bl}function g1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oh=/\/+/g;function Fc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?g1(""+e.key):t.toString(36)}function zo(e,t,r,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bl:case s1:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Fc(o,0):s,lh(a)?(r="",e!=null&&(r=e.replace(oh,"$&/")+"/"),zo(a,t,r,"",function(u){return u})):a!=null&&(rf(a)&&(a=p1(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(oh,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",lh(e))for(var c=0;c<e.length;c++){l=e[c];var i=s+Fc(l,c);o+=zo(l,t,r,i,a)}else if(i=h1(e),typeof i=="function")for(e=i.call(e),c=0;!(l=e.next()).done;)l=l.value,i=s+Fc(l,c++),o+=zo(l,t,r,i,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function co(e,t,r){if(e==null)return e;var s=[],a=0;return zo(e,s,"","",function(l){return t.call(r,l,a++)}),s}function x1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},Fo={transition:null},v1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Fo,ReactCurrentOwner:tf};function vx(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:co,forEach:function(e,t,r){co(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return co(e,function(){t++}),t},toArray:function(e){return co(e,function(t){return t})||[]},only:function(e){if(!rf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=ca;we.Fragment=a1;we.Profiler=o1;we.PureComponent=Zd;we.StrictMode=l1;we.Suspense=d1;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v1;we.act=vx;we.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=fx({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=tf.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in t)px.call(t,i)&&!gx.hasOwnProperty(i)&&(s[i]=t[i]===void 0&&c!==void 0?c[i]:t[i])}var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){c=Array(i);for(var u=0;u<i;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:Bl,type:e.type,key:a,ref:l,props:s,_owner:o}};we.createContext=function(e){return e={$$typeof:c1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:i1,_context:e},e.Consumer=e};we.createElement=xx;we.createFactory=function(e){var t=xx.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:u1,render:e}};we.isValidElement=rf;we.lazy=function(e){return{$$typeof:m1,_payload:{_status:-1,_result:e},_init:x1}};we.memo=function(e,t){return{$$typeof:f1,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Fo.transition;Fo.transition={};try{e()}finally{Fo.transition=t}};we.unstable_act=vx;we.useCallback=function(e,t){return It.current.useCallback(e,t)};we.useContext=function(e){return It.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return It.current.useDeferredValue(e)};we.useEffect=function(e,t){return It.current.useEffect(e,t)};we.useId=function(){return It.current.useId()};we.useImperativeHandle=function(e,t,r){return It.current.useImperativeHandle(e,t,r)};we.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return It.current.useMemo(e,t)};we.useReducer=function(e,t,r){return It.current.useReducer(e,t,r)};we.useRef=function(e){return It.current.useRef(e)};we.useState=function(e){return It.current.useState(e)};we.useSyncExternalStore=function(e,t,r){return It.current.useSyncExternalStore(e,t,r)};we.useTransition=function(){return It.current.useTransition()};we.version="18.3.1";ux.exports=we;var N=ux.exports;const A=Yt(N);var bx={exports:{}},rr={},yx={exports:{}},jx={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(e){function t(B,G){var ae=B.length;B.push(G);e:for(;0<ae;){var q=ae-1>>>1,ie=B[q];if(0<a(ie,G))B[q]=G,B[ae]=ie,ae=q;else break e}}function r(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var G=B[0],ae=B.pop();if(ae!==G){B[0]=ae;e:for(var q=0,ie=B.length,Se=ie>>>1;q<Se;){var he=2*(q+1)-1,je=B[he],J=he+1,Y=B[J];if(0>a(je,ae))J<ie&&0>a(Y,je)?(B[q]=Y,B[J]=ae,q=J):(B[q]=je,B[he]=ae,q=he);else if(J<ie&&0>a(Y,ae))B[q]=Y,B[J]=ae,q=J;else break e}}return G}function a(B,G){var ae=B.sortIndex-G.sortIndex;return ae!==0?ae:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var i=[],u=[],f=1,h=null,d=3,v=!1,j=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var G=r(u);G!==null;){if(G.callback===null)s(u);else if(G.startTime<=B)s(u),G.sortIndex=G.expirationTime,t(i,G);else break;G=r(u)}}function x(B){if(m=!1,b(B),!j)if(r(i)!==null)j=!0,R(C);else{var G=r(u);G!==null&&F(x,G.startTime-B)}}function C(B,G){j=!1,m&&(m=!1,g(_),_=-1),v=!0;var ae=d;try{for(b(G),h=r(i);h!==null&&(!(h.expirationTime>G)||B&&!L());){var q=h.callback;if(typeof q=="function"){h.callback=null,d=h.priorityLevel;var ie=q(h.expirationTime<=G);G=e.unstable_now(),typeof ie=="function"?h.callback=ie:h===r(i)&&s(i),b(G)}else s(i);h=r(i)}if(h!==null)var Se=!0;else{var he=r(u);he!==null&&F(x,he.startTime-G),Se=!1}return Se}finally{h=null,d=ae,v=!1}}var O=!1,D=null,_=-1,P=5,z=-1;function L(){return!(e.unstable_now()-z<P)}function H(){if(D!==null){var B=e.unstable_now();z=B;var G=!0;try{G=D(!0,B)}finally{G?T():(O=!1,D=null)}}else O=!1}var T;if(typeof p=="function")T=function(){p(H)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ee=V.port2;V.port1.onmessage=H,T=function(){ee.postMessage(null)}}else T=function(){y(H,0)};function R(B){D=B,O||(O=!0,T())}function F(B,G){_=y(function(){B(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,R(C))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(i)},e.unstable_next=function(B){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var ae=d;d=G;try{return B()}finally{d=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=d;d=B;try{return G()}finally{d=ae}},e.unstable_scheduleCallback=function(B,G,ae){var q=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?q+ae:q):ae=q,B){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ae+ie,B={id:f++,callback:G,priorityLevel:B,startTime:ae,expirationTime:ie,sortIndex:-1},ae>q?(B.sortIndex=ae,t(u,B),r(i)===null&&B===r(u)&&(m?(g(_),_=-1):m=!0,F(x,ae-q))):(B.sortIndex=ie,t(i,B),j||v||(j=!0,R(C))),B},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(B){var G=d;return function(){var ae=d;d=G;try{return B.apply(this,arguments)}finally{d=ae}}}})(jx);yx.exports=jx;var b1=yx.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var y1=N,er=b1;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wx=new Set,al={};function js(e,t){Js(e,t),Js(e+"Capture",t)}function Js(e,t){for(al[e]=t,e=0;e<t.length;e++)wx.add(t[e])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mu=Object.prototype.hasOwnProperty,j1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ih={},ch={};function w1(e){return Mu.call(ch,e)?!0:Mu.call(ih,e)?!1:j1.test(e)?ch[e]=!0:(ih[e]=!0,!1)}function N1(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k1(e,t,r,s){if(t===null||typeof t>"u"||N1(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(e,t,r,s,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new At(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new At(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new At(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new At(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new At(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new At(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new At(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new At(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new At(e,5,!1,e.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function sf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nf,sf);jt[t]=new At(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nf,sf);jt[t]=new At(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nf,sf);jt[t]=new At(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new At(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new At(e,1,!1,e.toLowerCase(),null,!0,!0)});function af(e,t,r,s){var a=jt.hasOwnProperty(t)?jt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k1(t,r,a,s)&&(r=null),s||a===null?w1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var gn=y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),Pu=Symbol.for("react.profiler"),Nx=Symbol.for("react.provider"),kx=Symbol.for("react.context"),of=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Iu=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Sx=Symbol.for("react.offscreen"),uh=Symbol.iterator;function Ca(e){return e===null||typeof e!="object"?null:(e=uh&&e[uh]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Uc;function Ua(e){if(Uc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Uc=t&&t[1]||""}return`
`+Uc+e}var Bc=!1;function Wc(e,t){if(!e||Bc)return"";Bc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=s.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var i=`
`+a[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=c);break}}}finally{Bc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ua(e):""}function S1(e){switch(e.tag){case 5:return Ua(e.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return e=Wc(e.type,!1),e;case 11:return e=Wc(e.type.render,!1),e;case 1:return e=Wc(e.type,!0),e;default:return""}}function Au(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ts:return"Fragment";case Os:return"Portal";case Pu:return"Profiler";case lf:return"StrictMode";case Ru:return"Suspense";case Iu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kx:return(e.displayName||"Context")+".Consumer";case Nx:return(e._context.displayName||"Context")+".Provider";case of:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cf:return t=e.displayName||null,t!==null?t:Au(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return Au(e(t))}catch{}}return null}function C1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Au(t);case 8:return t===lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function In(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E1(e){var t=Cx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fo(e){e._valueTracker||(e._valueTracker=E1(e))}function Ex(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Cx(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lu(e,t){var r=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function dh(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=In(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $x(e,t){t=t.checked,t!=null&&af(e,"checked",t,!1)}function zu(e,t){$x(e,t);var r=In(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fu(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fu(e,t.type,In(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fu(e,t,r){(t!=="number"||ui(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ba=Array.isArray;function Bs(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+In(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Uu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(se(92));if(Ba(r)){if(1<r.length)throw Error(se(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:In(r)}}function _x(e,t){var r=In(t.value),s=In(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function hh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ox(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ox(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mo,Tx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ll(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(e){$1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ya[t]=Ya[e]})});function Dx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ya.hasOwnProperty(e)&&Ya[e]?(""+t).trim():t+"px"}function Mx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Dx(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var _1=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wu(e,t){if(t){if(_1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Hu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=null;function uf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vu=null,Ws=null,Hs=null;function ph(e){if(e=ql(e)){if(typeof Vu!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Zi(t),Vu(e.stateNode,e.type,t))}}function Px(e){Ws?Hs?Hs.push(e):Hs=[e]:Ws=e}function Rx(){if(Ws){var e=Ws,t=Hs;if(Hs=Ws=null,ph(e),t)for(e=0;e<t.length;e++)ph(t[e])}}function Ix(e,t){return e(t)}function Ax(){}var Hc=!1;function Lx(e,t,r){if(Hc)return e(t,r);Hc=!0;try{return Ix(e,t,r)}finally{Hc=!1,(Ws!==null||Hs!==null)&&(Ax(),Rx())}}function ol(e,t){var r=e.stateNode;if(r===null)return null;var s=Zi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(se(231,t,typeof r));return r}var Yu=!1;if(on)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Yu=!1}function O1(e,t,r,s,a,l,o,c,i){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Ga=!1,di=null,fi=!1,Gu=null,T1={onError:function(e){Ga=!0,di=e}};function D1(e,t,r,s,a,l,o,c,i){Ga=!1,di=null,O1.apply(T1,arguments)}function M1(e,t,r,s,a,l,o,c,i){if(D1.apply(this,arguments),Ga){if(Ga){var u=di;Ga=!1,di=null}else throw Error(se(198));fi||(fi=!0,Gu=u)}}function ws(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gh(e){if(ws(e)!==e)throw Error(se(188))}function P1(e){var t=e.alternate;if(!t){if(t=ws(e),t===null)throw Error(se(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return gh(a),e;if(l===s)return gh(a),t;l=l.sibling}throw Error(se(188))}if(r.return!==s.return)r=a,s=l;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,s=l;break}if(c===s){o=!0,s=a,r=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===r){o=!0,r=l,s=a;break}if(c===s){o=!0,s=l,r=a;break}c=c.sibling}if(!o)throw Error(se(189))}}if(r.alternate!==s)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?e:t}function Fx(e){return e=P1(e),e!==null?Ux(e):null}function Ux(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ux(e);if(t!==null)return t;e=e.sibling}return null}var Bx=er.unstable_scheduleCallback,xh=er.unstable_cancelCallback,R1=er.unstable_shouldYield,I1=er.unstable_requestPaint,et=er.unstable_now,A1=er.unstable_getCurrentPriorityLevel,df=er.unstable_ImmediatePriority,Wx=er.unstable_UserBlockingPriority,mi=er.unstable_NormalPriority,L1=er.unstable_LowPriority,Hx=er.unstable_IdlePriority,Ki=null,zr=null;function z1(e){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Ki,e,void 0,(e.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:B1,F1=Math.log,U1=Math.LN2;function B1(e){return e>>>=0,e===0?32:31-(F1(e)/U1|0)|0}var ho=64,po=4194304;function Wa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hi(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?s=Wa(c):(l&=o,l!==0&&(s=Wa(l)))}else o=r&~a,o!==0?s=Wa(o):l!==0&&(s=Wa(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Er(t),a=1<<r,s|=e[r],t&=~a;return s}function W1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H1(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Er(l),c=1<<o,i=a[o];i===-1?(!(c&r)||c&s)&&(a[o]=W1(c,t)):i<=t&&(e.expiredLanes|=c),l&=~c}}function Ku(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qx(){var e=ho;return ho<<=1,!(ho&4194240)&&(ho=64),e}function qc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Er(t),e[t]=r}function q1(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Er(r),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~l}}function ff(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Er(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Oe=0;function Vx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yx,mf,Gx,Kx,Jx,Ju=!1,go=[],En=null,$n=null,_n=null,il=new Map,cl=new Map,Nn=[],V1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":il.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(t.pointerId)}}function $a(e,t,r,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=ql(t),t!==null&&mf(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Y1(e,t,r,s,a){switch(t){case"focusin":return En=$a(En,e,t,r,s,a),!0;case"dragenter":return $n=$a($n,e,t,r,s,a),!0;case"mouseover":return _n=$a(_n,e,t,r,s,a),!0;case"pointerover":var l=a.pointerId;return il.set(l,$a(il.get(l)||null,e,t,r,s,a)),!0;case"gotpointercapture":return l=a.pointerId,cl.set(l,$a(cl.get(l)||null,e,t,r,s,a)),!0}return!1}function Xx(e){var t=es(e.target);if(t!==null){var r=ws(t);if(r!==null){if(t=r.tag,t===13){if(t=zx(r),t!==null){e.blockedOn=t,Jx(e.priority,function(){Gx(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);qu=s,r.target.dispatchEvent(s),qu=null}else return t=ql(r),t!==null&&mf(t),e.blockedOn=r,!1;t.shift()}return!0}function bh(e,t,r){Uo(e)&&r.delete(t)}function G1(){Ju=!1,En!==null&&Uo(En)&&(En=null),$n!==null&&Uo($n)&&($n=null),_n!==null&&Uo(_n)&&(_n=null),il.forEach(bh),cl.forEach(bh)}function _a(e,t){e.blockedOn===t&&(e.blockedOn=null,Ju||(Ju=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,G1)))}function ul(e){function t(a){return _a(a,e)}if(0<go.length){_a(go[0],e);for(var r=1;r<go.length;r++){var s=go[r];s.blockedOn===e&&(s.blockedOn=null)}}for(En!==null&&_a(En,e),$n!==null&&_a($n,e),_n!==null&&_a(_n,e),il.forEach(t),cl.forEach(t),r=0;r<Nn.length;r++)s=Nn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Nn.length&&(r=Nn[0],r.blockedOn===null);)Xx(r),r.blockedOn===null&&Nn.shift()}var qs=gn.ReactCurrentBatchConfig,pi=!0;function K1(e,t,r,s){var a=Oe,l=qs.transition;qs.transition=null;try{Oe=1,hf(e,t,r,s)}finally{Oe=a,qs.transition=l}}function J1(e,t,r,s){var a=Oe,l=qs.transition;qs.transition=null;try{Oe=4,hf(e,t,r,s)}finally{Oe=a,qs.transition=l}}function hf(e,t,r,s){if(pi){var a=Xu(e,t,r,s);if(a===null)tu(e,t,s,gi,r),vh(e,s);else if(Y1(a,e,t,r,s))s.stopPropagation();else if(vh(e,s),t&4&&-1<V1.indexOf(e)){for(;a!==null;){var l=ql(a);if(l!==null&&Yx(l),l=Xu(e,t,r,s),l===null&&tu(e,t,s,gi,r),l===a)break;a=l}a!==null&&s.stopPropagation()}else tu(e,t,s,null,r)}}var gi=null;function Xu(e,t,r,s){if(gi=null,e=uf(s),e=es(e),e!==null)if(t=ws(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gi=e,null}function Qx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A1()){case df:return 1;case Wx:return 4;case mi:case L1:return 16;case Hx:return 536870912;default:return 16}default:return 16}}var Sn=null,pf=null,Bo=null;function Zx(){if(Bo)return Bo;var e,t=pf,r=t.length,s,a="value"in Sn?Sn.value:Sn.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[l-s];s++);return Bo=a.slice(e,1<s?1-s:void 0)}function Wo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xo(){return!0}function yh(){return!1}function nr(e){function t(r,s,a,l,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?xo:yh,this.isPropagationStopped=yh,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xo)},persist:function(){},isPersistent:xo}),t}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=nr(ua),Hl=Ye({},ua,{view:0,detail:0}),X1=nr(Hl),Vc,Yc,Oa,Ji=Ye({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oa&&(Oa&&e.type==="mousemove"?(Vc=e.screenX-Oa.screenX,Yc=e.screenY-Oa.screenY):Yc=Vc=0,Oa=e),Vc)},movementY:function(e){return"movementY"in e?e.movementY:Yc}}),jh=nr(Ji),Q1=Ye({},Ji,{dataTransfer:0}),Z1=nr(Q1),ej=Ye({},Hl,{relatedTarget:0}),Gc=nr(ej),tj=Ye({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),rj=nr(tj),nj=Ye({},ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sj=nr(nj),aj=Ye({},ua,{data:0}),wh=nr(aj),lj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ij={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ij[e])?!!t[e]:!1}function xf(){return cj}var uj=Ye({},Hl,{key:function(e){if(e.key){var t=lj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(e){return e.type==="keypress"?Wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dj=nr(uj),fj=Ye({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=nr(fj),mj=Ye({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),hj=nr(mj),pj=Ye({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),gj=nr(pj),xj=Ye({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vj=nr(xj),bj=[9,13,27,32],vf=on&&"CompositionEvent"in window,Ka=null;on&&"documentMode"in document&&(Ka=document.documentMode);var yj=on&&"TextEvent"in window&&!Ka,e0=on&&(!vf||Ka&&8<Ka&&11>=Ka),kh=" ",Sh=!1;function t0(e,t){switch(e){case"keyup":return bj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ds=!1;function jj(e,t){switch(e){case"compositionend":return r0(t);case"keypress":return t.which!==32?null:(Sh=!0,kh);case"textInput":return e=t.data,e===kh&&Sh?null:e;default:return null}}function wj(e,t){if(Ds)return e==="compositionend"||!vf&&t0(e,t)?(e=Zx(),Bo=pf=Sn=null,Ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return e0&&t.locale!=="ko"?null:t.data;default:return null}}var Nj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ch(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nj[e.type]:t==="textarea"}function n0(e,t,r,s){Px(s),t=xi(t,"onChange"),0<t.length&&(r=new gf("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ja=null,dl=null;function kj(e){h0(e,0)}function Xi(e){var t=Rs(e);if(Ex(t))return e}function Sj(e,t){if(e==="change")return t}var s0=!1;if(on){var Kc;if(on){var Jc="oninput"in document;if(!Jc){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),Jc=typeof Eh.oninput=="function"}Kc=Jc}else Kc=!1;s0=Kc&&(!document.documentMode||9<document.documentMode)}function $h(){Ja&&(Ja.detachEvent("onpropertychange",a0),dl=Ja=null)}function a0(e){if(e.propertyName==="value"&&Xi(dl)){var t=[];n0(t,dl,e,uf(e)),Lx(kj,t)}}function Cj(e,t,r){e==="focusin"?($h(),Ja=t,dl=r,Ja.attachEvent("onpropertychange",a0)):e==="focusout"&&$h()}function Ej(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(dl)}function $j(e,t){if(e==="click")return Xi(t)}function _j(e,t){if(e==="input"||e==="change")return Xi(t)}function Oj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _r=typeof Object.is=="function"?Object.is:Oj;function fl(e,t){if(_r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Mu.call(t,a)||!_r(e[a],t[a]))return!1}return!0}function _h(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oh(e,t){var r=_h(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_h(r)}}function l0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?l0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function o0(){for(var e=window,t=ui();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ui(e.document)}return t}function bf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tj(e){var t=o0(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&l0(r.ownerDocument.documentElement,r)){if(s!==null&&bf(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Oh(r,l);var o=Oh(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dj=on&&"documentMode"in document&&11>=document.documentMode,Ms=null,Qu=null,Xa=null,Zu=!1;function Th(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zu||Ms==null||Ms!==ui(s)||(s=Ms,"selectionStart"in s&&bf(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Xa&&fl(Xa,s)||(Xa=s,s=xi(Qu,"onSelect"),0<s.length&&(t=new gf("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Ms)))}function vo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ps={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},Xc={},i0={};on&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function Qi(e){if(Xc[e])return Xc[e];if(!Ps[e])return e;var t=Ps[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in i0)return Xc[e]=t[r];return e}var c0=Qi("animationend"),u0=Qi("animationiteration"),d0=Qi("animationstart"),f0=Qi("transitionend"),m0=new Map,Dh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){m0.set(e,t),js(t,[e])}for(var Qc=0;Qc<Dh.length;Qc++){var Zc=Dh[Qc],Mj=Zc.toLowerCase(),Pj=Zc[0].toUpperCase()+Zc.slice(1);Bn(Mj,"on"+Pj)}Bn(c0,"onAnimationEnd");Bn(u0,"onAnimationIteration");Bn(d0,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(f0,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function Mh(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,M1(s,t,void 0,e),e.currentTarget=null}function h0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var o=s.length-1;0<=o;o--){var c=s[o],i=c.instance,u=c.currentTarget;if(c=c.listener,i!==l&&a.isPropagationStopped())break e;Mh(a,c,u),l=i}else for(o=0;o<s.length;o++){if(c=s[o],i=c.instance,u=c.currentTarget,c=c.listener,i!==l&&a.isPropagationStopped())break e;Mh(a,c,u),l=i}}}if(fi)throw e=Gu,fi=!1,Gu=null,e}function Re(e,t){var r=t[sd];r===void 0&&(r=t[sd]=new Set);var s=e+"__bubble";r.has(s)||(p0(t,e,2,!1),r.add(s))}function eu(e,t,r){var s=0;t&&(s|=4),p0(r,e,s,t)}var bo="_reactListening"+Math.random().toString(36).slice(2);function ml(e){if(!e[bo]){e[bo]=!0,wx.forEach(function(r){r!=="selectionchange"&&(Rj.has(r)||eu(r,!1,e),eu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bo]||(t[bo]=!0,eu("selectionchange",!1,t))}}function p0(e,t,r,s){switch(Qx(t)){case 1:var a=K1;break;case 4:a=J1;break;default:a=hf}r=a.bind(null,t,r,e),a=void 0,!Yu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function tu(e,t,r,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===a||i.nodeType===8&&i.parentNode===a))return;o=o.return}for(;c!==null;){if(o=es(c),o===null)return;if(i=o.tag,i===5||i===6){s=l=o;continue e}c=c.parentNode}}s=s.return}Lx(function(){var u=l,f=uf(r),h=[];e:{var d=m0.get(e);if(d!==void 0){var v=gf,j=e;switch(e){case"keypress":if(Wo(r)===0)break e;case"keydown":case"keyup":v=dj;break;case"focusin":j="focus",v=Gc;break;case"focusout":j="blur",v=Gc;break;case"beforeblur":case"afterblur":v=Gc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Z1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=hj;break;case c0:case u0:case d0:v=rj;break;case f0:v=gj;break;case"scroll":v=X1;break;case"wheel":v=vj;break;case"copy":case"cut":case"paste":v=sj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Nh}var m=(t&4)!==0,y=!m&&e==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var p=u,b;p!==null;){b=p;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,g!==null&&(x=ol(p,g),x!=null&&m.push(hl(p,x,b)))),y)break;p=p.return}0<m.length&&(d=new v(d,j,null,r,f),h.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",d&&r!==qu&&(j=r.relatedTarget||r.fromElement)&&(es(j)||j[cn]))break e;if((v||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,v?(j=r.relatedTarget||r.toElement,v=u,j=j?es(j):null,j!==null&&(y=ws(j),j!==y||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=u),v!==j)){if(m=jh,x="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(m=Nh,x="onPointerLeave",g="onPointerEnter",p="pointer"),y=v==null?d:Rs(v),b=j==null?d:Rs(j),d=new m(x,p+"leave",v,r,f),d.target=y,d.relatedTarget=b,x=null,es(f)===u&&(m=new m(g,p+"enter",j,r,f),m.target=b,m.relatedTarget=y,x=m),y=x,v&&j)t:{for(m=v,g=j,p=0,b=m;b;b=Ss(b))p++;for(b=0,x=g;x;x=Ss(x))b++;for(;0<p-b;)m=Ss(m),p--;for(;0<b-p;)g=Ss(g),b--;for(;p--;){if(m===g||g!==null&&m===g.alternate)break t;m=Ss(m),g=Ss(g)}m=null}else m=null;v!==null&&Ph(h,d,v,m,!1),j!==null&&y!==null&&Ph(h,y,j,m,!0)}}e:{if(d=u?Rs(u):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var C=Sj;else if(Ch(d))if(s0)C=_j;else{C=Ej;var O=Cj}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=$j);if(C&&(C=C(e,u))){n0(h,C,r,f);break e}O&&O(e,d,u),e==="focusout"&&(O=d._wrapperState)&&O.controlled&&d.type==="number"&&Fu(d,"number",d.value)}switch(O=u?Rs(u):window,e){case"focusin":(Ch(O)||O.contentEditable==="true")&&(Ms=O,Qu=u,Xa=null);break;case"focusout":Xa=Qu=Ms=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,Th(h,r,f);break;case"selectionchange":if(Dj)break;case"keydown":case"keyup":Th(h,r,f)}var D;if(vf)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ds?t0(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(e0&&r.locale!=="ko"&&(Ds||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ds&&(D=Zx()):(Sn=f,pf="value"in Sn?Sn.value:Sn.textContent,Ds=!0)),O=xi(u,_),0<O.length&&(_=new wh(_,e,null,r,f),h.push({event:_,listeners:O}),D?_.data=D:(D=r0(r),D!==null&&(_.data=D)))),(D=yj?jj(e,r):wj(e,r))&&(u=xi(u,"onBeforeInput"),0<u.length&&(f=new wh("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:u}),f.data=D))}h0(h,t)})}function hl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xi(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ol(e,r),l!=null&&s.unshift(hl(e,l,a)),l=ol(e,t),l!=null&&s.push(hl(e,l,a))),e=e.return}return s}function Ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ph(e,t,r,s,a){for(var l=t._reactName,o=[];r!==null&&r!==s;){var c=r,i=c.alternate,u=c.stateNode;if(i!==null&&i===s)break;c.tag===5&&u!==null&&(c=u,a?(i=ol(r,l),i!=null&&o.unshift(hl(r,i,c))):a||(i=ol(r,l),i!=null&&o.push(hl(r,i,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Ij=/\r\n?/g,Aj=/\u0000|\uFFFD/g;function Rh(e){return(typeof e=="string"?e:""+e).replace(Ij,`
`).replace(Aj,"")}function yo(e,t,r){if(t=Rh(t),Rh(e)!==t&&r)throw Error(se(425))}function vi(){}var ed=null,td=null;function rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nd=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(e){return Ih.resolve(null).then(e).catch(Fj)}:nd;function Fj(e){setTimeout(function(){throw e})}function ru(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),ul(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);ul(t)}function On(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ah(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Ir="__reactFiber$"+da,pl="__reactProps$"+da,cn="__reactContainer$"+da,sd="__reactEvents$"+da,Uj="__reactListeners$"+da,Bj="__reactHandles$"+da;function es(e){var t=e[Ir];if(t)return t;for(var r=e.parentNode;r;){if(t=r[cn]||r[Ir]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ah(e);e!==null;){if(r=e[Ir])return r;e=Ah(e)}return t}e=r,r=e.parentNode}return null}function ql(e){return e=e[Ir]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Zi(e){return e[pl]||null}var ad=[],Is=-1;function Wn(e){return{current:e}}function Le(e){0>Is||(e.current=ad[Is],ad[Is]=null,Is--)}function Pe(e,t){Is++,ad[Is]=e.current,e.current=t}var An={},Et=Wn(An),Ut=Wn(!1),is=An;function Xs(e,t){var r=e.type.contextTypes;if(!r)return An;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Bt(e){return e=e.childContextTypes,e!=null}function bi(){Le(Ut),Le(Et)}function Lh(e,t,r){if(Et.current!==An)throw Error(se(168));Pe(Et,t),Pe(Ut,r)}function g0(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(se(108,C1(e)||"Unknown",a));return Ye({},r,s)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||An,is=Et.current,Pe(Et,e),Pe(Ut,Ut.current),!0}function zh(e,t,r){var s=e.stateNode;if(!s)throw Error(se(169));r?(e=g0(e,t,is),s.__reactInternalMemoizedMergedChildContext=e,Le(Ut),Le(Et),Pe(Et,e)):Le(Ut),Pe(Ut,r)}var en=null,ec=!1,nu=!1;function x0(e){en===null?en=[e]:en.push(e)}function Wj(e){ec=!0,x0(e)}function Hn(){if(!nu&&en!==null){nu=!0;var e=0,t=Oe;try{var r=en;for(Oe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}en=null,ec=!1}catch(a){throw en!==null&&(en=en.slice(e+1)),Bx(df,Hn),a}finally{Oe=t,nu=!1}}return null}var As=[],Ls=0,ji=null,wi=0,ir=[],cr=0,cs=null,tn=1,rn="";function Kn(e,t){As[Ls++]=wi,As[Ls++]=ji,ji=e,wi=t}function v0(e,t,r){ir[cr++]=tn,ir[cr++]=rn,ir[cr++]=cs,cs=e;var s=tn;e=rn;var a=32-Er(s)-1;s&=~(1<<a),r+=1;var l=32-Er(t)+a;if(30<l){var o=a-a%5;l=(s&(1<<o)-1).toString(32),s>>=o,a-=o,tn=1<<32-Er(t)+a|r<<a|s,rn=l+e}else tn=1<<l|r<<a|s,rn=e}function yf(e){e.return!==null&&(Kn(e,1),v0(e,1,0))}function jf(e){for(;e===ji;)ji=As[--Ls],As[Ls]=null,wi=As[--Ls],As[Ls]=null;for(;e===cs;)cs=ir[--cr],ir[cr]=null,rn=ir[--cr],ir[cr]=null,tn=ir[--cr],ir[cr]=null}var Xt=null,Jt=null,Ue=!1,Cr=null;function b0(e,t){var r=mr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Fh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xt=e,Jt=On(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xt=e,Jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cs!==null?{id:tn,overflow:rn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xt=e,Jt=null,!0):!1;default:return!1}}function ld(e){return(e.mode&1)!==0&&(e.flags&128)===0}function od(e){if(Ue){var t=Jt;if(t){var r=t;if(!Fh(e,t)){if(ld(e))throw Error(se(418));t=On(r.nextSibling);var s=Xt;t&&Fh(e,t)?b0(s,r):(e.flags=e.flags&-4097|2,Ue=!1,Xt=e)}}else{if(ld(e))throw Error(se(418));e.flags=e.flags&-4097|2,Ue=!1,Xt=e}}}function Uh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xt=e}function jo(e){if(e!==Xt)return!1;if(!Ue)return Uh(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rd(e.type,e.memoizedProps)),t&&(t=Jt)){if(ld(e))throw y0(),Error(se(418));for(;t;)b0(e,t),t=On(t.nextSibling)}if(Uh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jt=On(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jt=null}}else Jt=Xt?On(e.stateNode.nextSibling):null;return!0}function y0(){for(var e=Jt;e;)e=On(e.nextSibling)}function Qs(){Jt=Xt=null,Ue=!1}function wf(e){Cr===null?Cr=[e]:Cr.push(e)}var Hj=gn.ReactCurrentBatchConfig;function Ta(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var s=r.stateNode}if(!s)throw Error(se(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bh(e){var t=e._init;return t(e._payload)}function j0(e){function t(g,p){if(e){var b=g.deletions;b===null?(g.deletions=[p],g.flags|=16):b.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function s(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=Pn(g,p),g.index=0,g.sibling=null,g}function l(g,p,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<p?(g.flags|=2,p):b):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,p,b,x){return p===null||p.tag!==6?(p=uu(b,g.mode,x),p.return=g,p):(p=a(p,b),p.return=g,p)}function i(g,p,b,x){var C=b.type;return C===Ts?f(g,p,b.props.children,x,b.key):p!==null&&(p.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Bh(C)===p.type)?(x=a(p,b.props),x.ref=Ta(g,p,b),x.return=g,x):(x=Jo(b.type,b.key,b.props,null,g.mode,x),x.ref=Ta(g,p,b),x.return=g,x)}function u(g,p,b,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==b.containerInfo||p.stateNode.implementation!==b.implementation?(p=du(b,g.mode,x),p.return=g,p):(p=a(p,b.children||[]),p.return=g,p)}function f(g,p,b,x,C){return p===null||p.tag!==7?(p=ss(b,g.mode,x,C),p.return=g,p):(p=a(p,b),p.return=g,p)}function h(g,p,b){if(typeof p=="string"&&p!==""||typeof p=="number")return p=uu(""+p,g.mode,b),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uo:return b=Jo(p.type,p.key,p.props,null,g.mode,b),b.ref=Ta(g,null,p),b.return=g,b;case Os:return p=du(p,g.mode,b),p.return=g,p;case jn:var x=p._init;return h(g,x(p._payload),b)}if(Ba(p)||Ca(p))return p=ss(p,g.mode,b,null),p.return=g,p;wo(g,p)}return null}function d(g,p,b,x){var C=p!==null?p.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:c(g,p,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case uo:return b.key===C?i(g,p,b,x):null;case Os:return b.key===C?u(g,p,b,x):null;case jn:return C=b._init,d(g,p,C(b._payload),x)}if(Ba(b)||Ca(b))return C!==null?null:f(g,p,b,x,null);wo(g,b)}return null}function v(g,p,b,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(b)||null,c(p,g,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uo:return g=g.get(x.key===null?b:x.key)||null,i(p,g,x,C);case Os:return g=g.get(x.key===null?b:x.key)||null,u(p,g,x,C);case jn:var O=x._init;return v(g,p,b,O(x._payload),C)}if(Ba(x)||Ca(x))return g=g.get(b)||null,f(p,g,x,C,null);wo(p,x)}return null}function j(g,p,b,x){for(var C=null,O=null,D=p,_=p=0,P=null;D!==null&&_<b.length;_++){D.index>_?(P=D,D=null):P=D.sibling;var z=d(g,D,b[_],x);if(z===null){D===null&&(D=P);break}e&&D&&z.alternate===null&&t(g,D),p=l(z,p,_),O===null?C=z:O.sibling=z,O=z,D=P}if(_===b.length)return r(g,D),Ue&&Kn(g,_),C;if(D===null){for(;_<b.length;_++)D=h(g,b[_],x),D!==null&&(p=l(D,p,_),O===null?C=D:O.sibling=D,O=D);return Ue&&Kn(g,_),C}for(D=s(g,D);_<b.length;_++)P=v(D,g,_,b[_],x),P!==null&&(e&&P.alternate!==null&&D.delete(P.key===null?_:P.key),p=l(P,p,_),O===null?C=P:O.sibling=P,O=P);return e&&D.forEach(function(L){return t(g,L)}),Ue&&Kn(g,_),C}function m(g,p,b,x){var C=Ca(b);if(typeof C!="function")throw Error(se(150));if(b=C.call(b),b==null)throw Error(se(151));for(var O=C=null,D=p,_=p=0,P=null,z=b.next();D!==null&&!z.done;_++,z=b.next()){D.index>_?(P=D,D=null):P=D.sibling;var L=d(g,D,z.value,x);if(L===null){D===null&&(D=P);break}e&&D&&L.alternate===null&&t(g,D),p=l(L,p,_),O===null?C=L:O.sibling=L,O=L,D=P}if(z.done)return r(g,D),Ue&&Kn(g,_),C;if(D===null){for(;!z.done;_++,z=b.next())z=h(g,z.value,x),z!==null&&(p=l(z,p,_),O===null?C=z:O.sibling=z,O=z);return Ue&&Kn(g,_),C}for(D=s(g,D);!z.done;_++,z=b.next())z=v(D,g,_,z.value,x),z!==null&&(e&&z.alternate!==null&&D.delete(z.key===null?_:z.key),p=l(z,p,_),O===null?C=z:O.sibling=z,O=z);return e&&D.forEach(function(H){return t(g,H)}),Ue&&Kn(g,_),C}function y(g,p,b,x){if(typeof b=="object"&&b!==null&&b.type===Ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case uo:e:{for(var C=b.key,O=p;O!==null;){if(O.key===C){if(C=b.type,C===Ts){if(O.tag===7){r(g,O.sibling),p=a(O,b.props.children),p.return=g,g=p;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Bh(C)===O.type){r(g,O.sibling),p=a(O,b.props),p.ref=Ta(g,O,b),p.return=g,g=p;break e}r(g,O);break}else t(g,O);O=O.sibling}b.type===Ts?(p=ss(b.props.children,g.mode,x,b.key),p.return=g,g=p):(x=Jo(b.type,b.key,b.props,null,g.mode,x),x.ref=Ta(g,p,b),x.return=g,g=x)}return o(g);case Os:e:{for(O=b.key;p!==null;){if(p.key===O)if(p.tag===4&&p.stateNode.containerInfo===b.containerInfo&&p.stateNode.implementation===b.implementation){r(g,p.sibling),p=a(p,b.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=du(b,g.mode,x),p.return=g,g=p}return o(g);case jn:return O=b._init,y(g,p,O(b._payload),x)}if(Ba(b))return j(g,p,b,x);if(Ca(b))return m(g,p,b,x);wo(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,p!==null&&p.tag===6?(r(g,p.sibling),p=a(p,b),p.return=g,g=p):(r(g,p),p=uu(b,g.mode,x),p.return=g,g=p),o(g)):r(g,p)}return y}var Zs=j0(!0),w0=j0(!1),Ni=Wn(null),ki=null,zs=null,Nf=null;function kf(){Nf=zs=ki=null}function Sf(e){var t=Ni.current;Le(Ni),e._currentValue=t}function id(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Vs(e,t){ki=e,Nf=zs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ft=!0),e.firstContext=null)}function pr(e){var t=e._currentValue;if(Nf!==e)if(e={context:e,memoizedValue:t,next:null},zs===null){if(ki===null)throw Error(se(308));zs=e,ki.dependencies={lanes:0,firstContext:e}}else zs=zs.next=e;return t}var ts=null;function Cf(e){ts===null?ts=[e]:ts.push(e)}function N0(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Cf(t)):(r.next=a.next,a.next=r),t.interleaved=r,un(e,s)}function un(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wn=!1;function Ef(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,un(e,r)}return a=s.interleaved,a===null?(t.next=t,Cf(s)):(t.next=a.next,a.next=t),s.interleaved=t,un(e,r)}function Ho(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ff(e,r)}}function Wh(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Si(e,t,r,s){var a=e.updateQueue;wn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var i=c,u=i.next;i.next=null,o===null?l=u:o.next=u,o=i;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=i))}if(l!==null){var h=a.baseState;o=0,f=u=i=null,c=l;do{var d=c.lane,v=c.eventTime;if((s&d)===d){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,m=c;switch(d=t,v=r,m.tag){case 1:if(j=m.payload,typeof j=="function"){h=j.call(v,h,d);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=m.payload,d=typeof j=="function"?j.call(v,h,d):j,d==null)break e;h=Ye({},h,d);break e;case 2:wn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[c]:d.push(c))}else v={eventTime:v,lane:d,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=v,i=h):f=f.next=v,o|=d;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;d=c,c=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(f===null&&(i=h),a.baseState=i,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);ds|=o,e.lanes=o,e.memoizedState=h}}function Hh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(se(191,a));a.call(s)}}}var Vl={},Fr=Wn(Vl),gl=Wn(Vl),xl=Wn(Vl);function rs(e){if(e===Vl)throw Error(se(174));return e}function $f(e,t){switch(Pe(xl,t),Pe(gl,e),Pe(Fr,Vl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bu(t,e)}Le(Fr),Pe(Fr,t)}function ea(){Le(Fr),Le(gl),Le(xl)}function S0(e){rs(xl.current);var t=rs(Fr.current),r=Bu(t,e.type);t!==r&&(Pe(gl,e),Pe(Fr,r))}function _f(e){gl.current===e&&(Le(Fr),Le(gl))}var He=Wn(0);function Ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var su=[];function Of(){for(var e=0;e<su.length;e++)su[e]._workInProgressVersionPrimary=null;su.length=0}var qo=gn.ReactCurrentDispatcher,au=gn.ReactCurrentBatchConfig,us=0,qe=null,at=null,ut=null,Ei=!1,Qa=!1,vl=0,qj=0;function Nt(){throw Error(se(321))}function Tf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_r(e[r],t[r]))return!1;return!0}function Df(e,t,r,s,a,l){if(us=l,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qo.current=e===null||e.memoizedState===null?Kj:Jj,e=r(s,a),Qa){l=0;do{if(Qa=!1,vl=0,25<=l)throw Error(se(301));l+=1,ut=at=null,t.updateQueue=null,qo.current=Xj,e=r(s,a)}while(Qa)}if(qo.current=$i,t=at!==null&&at.next!==null,us=0,ut=at=qe=null,Ei=!1,t)throw Error(se(300));return e}function Mf(){var e=vl!==0;return vl=0,e}function Pr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?qe.memoizedState=ut=e:ut=ut.next=e,ut}function gr(){if(at===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=ut===null?qe.memoizedState:ut.next;if(t!==null)ut=t,at=e;else{if(e===null)throw Error(se(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ut===null?qe.memoizedState=ut=e:ut=ut.next=e}return ut}function bl(e,t){return typeof t=="function"?t(e):t}function lu(e){var t=gr(),r=t.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=e;var s=at,a=s.baseQueue,l=r.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}s.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,s=s.baseState;var c=o=null,i=null,u=l;do{var f=u.lane;if((us&f)===f)i!==null&&(i=i.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};i===null?(c=i=h,o=s):i=i.next=h,qe.lanes|=f,ds|=f}u=u.next}while(u!==null&&u!==l);i===null?o=s:i.next=c,_r(s,t.memoizedState)||(Ft=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=i,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do l=a.lane,qe.lanes|=l,ds|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ou(e){var t=gr(),r=t.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);_r(l,t.memoizedState)||(Ft=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,s]}function C0(){}function E0(e,t){var r=qe,s=gr(),a=t(),l=!_r(s.memoizedState,a);if(l&&(s.memoizedState=a,Ft=!0),s=s.queue,Pf(O0.bind(null,r,s,e),[e]),s.getSnapshot!==t||l||ut!==null&&ut.memoizedState.tag&1){if(r.flags|=2048,yl(9,_0.bind(null,r,s,a,t),void 0,null),mt===null)throw Error(se(349));us&30||$0(r,t,a)}return a}function $0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function _0(e,t,r,s){t.value=r,t.getSnapshot=s,T0(t)&&D0(e)}function O0(e,t,r){return r(function(){T0(t)&&D0(e)})}function T0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_r(e,r)}catch{return!0}}function D0(e){var t=un(e,1);t!==null&&$r(t,e,1,-1)}function qh(e){var t=Pr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:e},t.queue=e,e=e.dispatch=Gj.bind(null,qe,e),[t.memoizedState,e]}function yl(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function M0(){return gr().memoizedState}function Vo(e,t,r,s){var a=Pr();qe.flags|=e,a.memoizedState=yl(1|t,r,void 0,s===void 0?null:s)}function tc(e,t,r,s){var a=gr();s=s===void 0?null:s;var l=void 0;if(at!==null){var o=at.memoizedState;if(l=o.destroy,s!==null&&Tf(s,o.deps)){a.memoizedState=yl(t,r,l,s);return}}qe.flags|=e,a.memoizedState=yl(1|t,r,l,s)}function Vh(e,t){return Vo(8390656,8,e,t)}function Pf(e,t){return tc(2048,8,e,t)}function P0(e,t){return tc(4,2,e,t)}function R0(e,t){return tc(4,4,e,t)}function I0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A0(e,t,r){return r=r!=null?r.concat([e]):null,tc(4,4,I0.bind(null,t,e),r)}function Rf(){}function L0(e,t){var r=gr();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Tf(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function z0(e,t){var r=gr();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Tf(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function F0(e,t,r){return us&21?(_r(r,t)||(r=qx(),qe.lanes|=r,ds|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ft=!0),e.memoizedState=r)}function Vj(e,t){var r=Oe;Oe=r!==0&&4>r?r:4,e(!0);var s=au.transition;au.transition={};try{e(!1),t()}finally{Oe=r,au.transition=s}}function U0(){return gr().memoizedState}function Yj(e,t,r){var s=Mn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},B0(e))W0(t,r);else if(r=N0(e,t,r,s),r!==null){var a=Rt();$r(r,e,s,a),H0(r,t,s)}}function Gj(e,t,r){var s=Mn(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(B0(e))W0(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,r);if(a.hasEagerState=!0,a.eagerState=c,_r(c,o)){var i=t.interleaved;i===null?(a.next=a,Cf(t)):(a.next=i.next,i.next=a),t.interleaved=a;return}}catch{}finally{}r=N0(e,t,a,s),r!==null&&(a=Rt(),$r(r,e,s,a),H0(r,t,s))}}function B0(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function W0(e,t){Qa=Ei=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function H0(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ff(e,r)}}var $i={readContext:pr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},Kj={readContext:pr,useCallback:function(e,t){return Pr().memoizedState=[e,t===void 0?null:t],e},useContext:pr,useEffect:Vh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Vo(4194308,4,I0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var r=Pr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Pr();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Yj.bind(null,qe,e),[s.memoizedState,e]},useRef:function(e){var t=Pr();return e={current:e},t.memoizedState=e},useState:qh,useDebugValue:Rf,useDeferredValue:function(e){return Pr().memoizedState=e},useTransition:function(){var e=qh(!1),t=e[0];return e=Vj.bind(null,e[1]),Pr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=qe,a=Pr();if(Ue){if(r===void 0)throw Error(se(407));r=r()}else{if(r=t(),mt===null)throw Error(se(349));us&30||$0(s,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Vh(O0.bind(null,s,l,e),[e]),s.flags|=2048,yl(9,_0.bind(null,s,l,r,t),void 0,null),r},useId:function(){var e=Pr(),t=mt.identifierPrefix;if(Ue){var r=rn,s=tn;r=(s&~(1<<32-Er(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=vl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qj++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jj={readContext:pr,useCallback:L0,useContext:pr,useEffect:Pf,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:R0,useMemo:z0,useReducer:lu,useRef:M0,useState:function(){return lu(bl)},useDebugValue:Rf,useDeferredValue:function(e){var t=gr();return F0(t,at.memoizedState,e)},useTransition:function(){var e=lu(bl)[0],t=gr().memoizedState;return[e,t]},useMutableSource:C0,useSyncExternalStore:E0,useId:U0,unstable_isNewReconciler:!1},Xj={readContext:pr,useCallback:L0,useContext:pr,useEffect:Pf,useImperativeHandle:A0,useInsertionEffect:P0,useLayoutEffect:R0,useMemo:z0,useReducer:ou,useRef:M0,useState:function(){return ou(bl)},useDebugValue:Rf,useDeferredValue:function(e){var t=gr();return at===null?t.memoizedState=e:F0(t,at.memoizedState,e)},useTransition:function(){var e=ou(bl)[0],t=gr().memoizedState;return[e,t]},useMutableSource:C0,useSyncExternalStore:E0,useId:U0,unstable_isNewReconciler:!1};function Nr(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function cd(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var rc={isMounted:function(e){return(e=e._reactInternals)?ws(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Rt(),a=Mn(e),l=nn(s,a);l.payload=t,r!=null&&(l.callback=r),t=Tn(e,l,a),t!==null&&($r(t,e,a,s),Ho(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Rt(),a=Mn(e),l=nn(s,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Tn(e,l,a),t!==null&&($r(t,e,a,s),Ho(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Rt(),s=Mn(e),a=nn(r,s);a.tag=2,t!=null&&(a.callback=t),t=Tn(e,a,s),t!==null&&($r(t,e,s,r),Ho(t,e,s))}};function Yh(e,t,r,s,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):t.prototype&&t.prototype.isPureReactComponent?!fl(r,s)||!fl(a,l):!0}function q0(e,t,r){var s=!1,a=An,l=t.contextType;return typeof l=="object"&&l!==null?l=pr(l):(a=Bt(t)?is:Et.current,s=t.contextTypes,l=(s=s!=null)?Xs(e,a):An),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rc,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Gh(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&rc.enqueueReplaceState(t,t.state,null)}function ud(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ef(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=pr(l):(l=Bt(t)?is:Et.current,a.context=Xs(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(cd(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&rc.enqueueReplaceState(a,a.state,null),Si(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ta(e,t){try{var r="",s=t;do r+=S1(s),s=s.return;while(s);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function iu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Qj=typeof WeakMap=="function"?WeakMap:Map;function V0(e,t,r){r=nn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Oi||(Oi=!0,yd=s),dd(e,t)},r}function Y0(e,t,r){r=nn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){dd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){dd(e,t),typeof s!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Kh(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Qj;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=fw.bind(null,e,t,r),t.then(e,e))}function Jh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xh(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=nn(-1,1),t.tag=2,Tn(r,t,1))),r.lanes|=1),e)}var Zj=gn.ReactCurrentOwner,Ft=!1;function Mt(e,t,r,s){t.child=e===null?w0(t,null,r,s):Zs(t,e.child,r,s)}function Qh(e,t,r,s,a){r=r.render;var l=t.ref;return Vs(t,a),s=Df(e,t,r,s,l,a),r=Mf(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,dn(e,t,a)):(Ue&&r&&yf(t),t.flags|=1,Mt(e,t,s,a),t.child)}function Zh(e,t,r,s,a){if(e===null){var l=r.type;return typeof l=="function"&&!Wf(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,G0(e,t,l,s,a)):(e=Jo(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:fl,r(o,s)&&e.ref===t.ref)return dn(e,t,a)}return t.flags|=1,e=Pn(l,s),e.ref=t.ref,e.return=t,t.child=e}function G0(e,t,r,s,a){if(e!==null){var l=e.memoizedProps;if(fl(l,s)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(Ft=!0);else return t.lanes=e.lanes,dn(e,t,a)}return fd(e,t,r,s,a)}function K0(e,t,r){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Us,Kt),Kt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(Us,Kt),Kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:r,Pe(Us,Kt),Kt|=s}else l!==null?(s=l.baseLanes|r,t.memoizedState=null):s=r,Pe(Us,Kt),Kt|=s;return Mt(e,t,a,r),t.child}function J0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fd(e,t,r,s,a){var l=Bt(r)?is:Et.current;return l=Xs(t,l),Vs(t,a),r=Df(e,t,r,s,l,a),s=Mf(),e!==null&&!Ft?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,dn(e,t,a)):(Ue&&s&&yf(t),t.flags|=1,Mt(e,t,r,a),t.child)}function ep(e,t,r,s,a){if(Bt(r)){var l=!0;yi(t)}else l=!1;if(Vs(t,a),t.stateNode===null)Yo(e,t),q0(t,r,s),ud(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var i=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=pr(u):(u=Bt(r)?is:Et.current,u=Xs(t,u));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||i!==u)&&Gh(t,o,s,u),wn=!1;var d=t.memoizedState;o.state=d,Si(t,s,o,a),i=t.memoizedState,c!==s||d!==i||Ut.current||wn?(typeof f=="function"&&(cd(t,r,f,s),i=t.memoizedState),(c=wn||Yh(t,r,c,s,d,i,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=i),o.props=s,o.state=i,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,k0(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Nr(t.type,c),o.props=u,h=t.pendingProps,d=o.context,i=r.contextType,typeof i=="object"&&i!==null?i=pr(i):(i=Bt(r)?is:Et.current,i=Xs(t,i));var v=r.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==h||d!==i)&&Gh(t,o,s,i),wn=!1,d=t.memoizedState,o.state=d,Si(t,s,o,a);var j=t.memoizedState;c!==h||d!==j||Ut.current||wn?(typeof v=="function"&&(cd(t,r,v,s),j=t.memoizedState),(u=wn||Yh(t,r,u,s,d,j,i)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,j,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,j,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=j),o.props=s,o.state=j,o.context=i,s=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),s=!1)}return md(e,t,r,s,l,a)}function md(e,t,r,s,a,l){J0(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&zh(t,r,!1),dn(e,t,l);s=t.stateNode,Zj.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Zs(t,e.child,null,l),t.child=Zs(t,null,c,l)):Mt(e,t,c,l),t.memoizedState=s.state,a&&zh(t,r,!0),t.child}function X0(e){var t=e.stateNode;t.pendingContext?Lh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lh(e,t.context,!1),$f(e,t.containerInfo)}function tp(e,t,r,s,a){return Qs(),wf(a),t.flags|=256,Mt(e,t,r,s),t.child}var hd={dehydrated:null,treeContext:null,retryLane:0};function pd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Q0(e,t,r){var s=t.pendingProps,a=He.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Pe(He,a&1),e===null)return od(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=ac(o,s,0,null),e=ss(e,s,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=pd(r),t.memoizedState=hd,e):If(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return ew(e,t,o,s,c,a,r);if(l){l=s.fallback,o=t.mode,a=e.child,c=a.sibling;var i={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=i,t.deletions=null):(s=Pn(a,i),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Pn(c,l):(l=ss(l,o,r,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=e.child.memoizedState,o=o===null?pd(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=hd,s}return l=e.child,e=l.sibling,s=Pn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function If(e,t){return t=ac({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function No(e,t,r,s){return s!==null&&wf(s),Zs(t,e.child,null,r),e=If(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ew(e,t,r,s,a,l,o){if(r)return t.flags&256?(t.flags&=-257,s=iu(Error(se(422))),No(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=ac({mode:"visible",children:s.children},a,0,null),l=ss(l,a,o,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&Zs(t,e.child,null,o),t.child.memoizedState=pd(o),t.memoizedState=hd,l);if(!(t.mode&1))return No(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,l=Error(se(419)),s=iu(l,s,void 0),No(e,t,o,s)}if(c=(o&e.childLanes)!==0,Ft||c){if(s=mt,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,un(e,a),$r(s,e,a,-1))}return Bf(),s=iu(Error(se(421))),No(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mw.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Jt=On(a.nextSibling),Xt=t,Ue=!0,Cr=null,e!==null&&(ir[cr++]=tn,ir[cr++]=rn,ir[cr++]=cs,tn=e.id,rn=e.overflow,cs=t),t=If(t,s.children),t.flags|=4096,t)}function rp(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),id(e.return,t,r)}function cu(e,t,r,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=r,l.tailMode=a)}function Z0(e,t,r){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(Mt(e,t,s.children,r),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rp(e,r,t);else if(e.tag===19)rp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pe(He,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ci(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),cu(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ci(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}cu(t,!0,r,null,l);break;case"together":cu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ds|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,r=Pn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Pn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tw(e,t,r){switch(t.tag){case 3:X0(t),Qs();break;case 5:S0(t);break;case 1:Bt(t.type)&&yi(t);break;case 4:$f(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Pe(Ni,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Pe(He,He.current&1),t.flags|=128,null):r&t.child.childLanes?Q0(e,t,r):(Pe(He,He.current&1),e=dn(e,t,r),e!==null?e.sibling:null);Pe(He,He.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Z0(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pe(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,K0(e,t,r)}return dn(e,t,r)}var ev,gd,tv,rv;ev=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gd=function(){};tv=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,rs(Fr.current);var l=null;switch(r){case"input":a=Lu(e,a),s=Lu(e,s),l=[];break;case"select":a=Ye({},a,{value:void 0}),s=Ye({},s,{value:void 0}),l=[];break;case"textarea":a=Uu(e,a),s=Uu(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=vi)}Wu(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(al.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in s){var i=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&i!==c&&(i!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in i)i.hasOwnProperty(o)&&c[o]!==i[o]&&(r||(r={}),r[o]=i[o])}else r||(l||(l=[]),l.push(u,r)),r=i;else u==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(l=l||[]).push(u,i)):u==="children"?typeof i!="string"&&typeof i!="number"||(l=l||[]).push(u,""+i):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(al.hasOwnProperty(u)?(i!=null&&u==="onScroll"&&Re("scroll",e),l||c===i||(l=[])):(l=l||[]).push(u,i))}r&&(l=l||[]).push("style",r);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};rv=function(e,t,r,s){r!==s&&(t.flags|=4)};function Da(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function rw(e,t,r){var s=t.pendingProps;switch(jf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return Bt(t.type)&&bi(),kt(t),null;case 3:return s=t.stateNode,ea(),Le(Ut),Le(Et),Of(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(jo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cr!==null&&(Nd(Cr),Cr=null))),gd(e,t),kt(t),null;case 5:_f(t);var a=rs(xl.current);if(r=t.type,e!==null&&t.stateNode!=null)tv(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(se(166));return kt(t),null}if(e=rs(Fr.current),jo(t)){s=t.stateNode,r=t.type;var l=t.memoizedProps;switch(s[Ir]=t,s[pl]=l,e=(t.mode&1)!==0,r){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(a=0;a<Ha.length;a++)Re(Ha[a],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":dh(s,l),Re("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Re("invalid",s);break;case"textarea":mh(s,l),Re("invalid",s)}Wu(r,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?s.textContent!==c&&(l.suppressHydrationWarning!==!0&&yo(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&yo(s.textContent,c,e),a=["children",""+c]):al.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Re("scroll",s)}switch(r){case"input":fo(s),fh(s,l,!0);break;case"textarea":fo(s),hh(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=vi)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ox(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[Ir]=t,e[pl]=s,ev(e,t,!1,!1),t.stateNode=e;e:{switch(o=Hu(r,s),r){case"dialog":Re("cancel",e),Re("close",e),a=s;break;case"iframe":case"object":case"embed":Re("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ha.length;a++)Re(Ha[a],e);a=s;break;case"source":Re("error",e),a=s;break;case"img":case"image":case"link":Re("error",e),Re("load",e),a=s;break;case"details":Re("toggle",e),a=s;break;case"input":dh(e,s),a=Lu(e,s),Re("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ye({},s,{value:void 0}),Re("invalid",e);break;case"textarea":mh(e,s),a=Uu(e,s),Re("invalid",e);break;default:a=s}Wu(r,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var i=c[l];l==="style"?Mx(e,i):l==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Tx(e,i)):l==="children"?typeof i=="string"?(r!=="textarea"||i!=="")&&ll(e,i):typeof i=="number"&&ll(e,""+i):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(al.hasOwnProperty(l)?i!=null&&l==="onScroll"&&Re("scroll",e):i!=null&&af(e,l,i,o))}switch(r){case"input":fo(e),fh(e,s,!1);break;case"textarea":fo(e),hh(e);break;case"option":s.value!=null&&e.setAttribute("value",""+In(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Bs(e,!!s.multiple,l,!1):s.defaultValue!=null&&Bs(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=vi)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)rv(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(se(166));if(r=rs(xl.current),rs(Fr.current),jo(t)){if(s=t.stateNode,r=t.memoizedProps,s[Ir]=t,(l=s.nodeValue!==r)&&(e=Xt,e!==null))switch(e.tag){case 3:yo(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yo(s.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Ir]=t,t.stateNode=s}return kt(t),null;case 13:if(Le(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&Jt!==null&&t.mode&1&&!(t.flags&128))y0(),Qs(),t.flags|=98560,l=!1;else if(l=jo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(se(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(se(317));l[Ir]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),l=!1}else Cr!==null&&(Nd(Cr),Cr=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?lt===0&&(lt=3):Bf())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return ea(),gd(e,t),e===null&&ml(t.stateNode.containerInfo),kt(t),null;case 10:return Sf(t.type._context),kt(t),null;case 17:return Bt(t.type)&&bi(),kt(t),null;case 19:if(Le(He),l=t.memoizedState,l===null)return kt(t),null;if(s=(t.flags&128)!==0,o=l.rendering,o===null)if(s)Da(l,!1);else{if(lt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ci(e),o!==null){for(t.flags|=128,Da(l,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)l=r,e=s,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pe(He,He.current&1|2),t.child}e=e.sibling}l.tail!==null&&et()>ra&&(t.flags|=128,s=!0,Da(l,!1),t.lanes=4194304)}else{if(!s)if(e=Ci(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Da(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ue)return kt(t),null}else 2*et()-l.renderingStartTime>ra&&r!==1073741824&&(t.flags|=128,s=!0,Da(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=et(),t.sibling=null,r=He.current,Pe(He,s?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return Uf(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Kt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function nw(e,t){switch(jf(t),t.tag){case 1:return Bt(t.type)&&bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ea(),Le(Ut),Le(Et),Of(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _f(t),null;case 13:if(Le(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Le(He),null;case 4:return ea(),null;case 10:return Sf(t.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var ko=!1,Ct=!1,sw=typeof WeakSet=="function"?WeakSet:Set,de=null;function Fs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ke(e,t,s)}else r.current=null}function nv(e,t,r){try{r()}catch(s){Ke(e,t,s)}}var np=!1;function aw(e,t){if(ed=pi,e=o0(),bf(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,c=-1,i=-1,u=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==r||a!==0&&h.nodeType!==3||(c=o+a),h!==l||s!==0&&h.nodeType!==3||(i=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)d=h,h=v;for(;;){if(h===e)break t;if(d===r&&++u===a&&(c=o),d===l&&++f===s&&(i=o),(v=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=v}r=c===-1||i===-1?null:{start:c,end:i}}else r=null}r=r||{start:0,end:0}}else r=null;for(td={focusedElem:e,selectionRange:r},pi=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var m=j.memoizedProps,y=j.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Nr(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(x){Ke(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return j=np,np=!1,j}function Za(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&nv(t,r,l)}a=a.next}while(a!==s)}}function nc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function xd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function sv(e){var t=e.alternate;t!==null&&(e.alternate=null,sv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ir],delete t[pl],delete t[sd],delete t[Uj],delete t[Bj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function av(e){return e.tag===5||e.tag===3||e.tag===4}function sp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||av(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vd(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vi));else if(s!==4&&(e=e.child,e!==null))for(vd(e,t,r),e=e.sibling;e!==null;)vd(e,t,r),e=e.sibling}function bd(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(bd(e,t,r),e=e.sibling;e!==null;)bd(e,t,r),e=e.sibling}var vt=null,kr=!1;function bn(e,t,r){for(r=r.child;r!==null;)lv(e,t,r),r=r.sibling}function lv(e,t,r){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Ki,r)}catch{}switch(r.tag){case 5:Ct||Fs(r,t);case 6:var s=vt,a=kr;vt=null,bn(e,t,r),vt=s,kr=a,vt!==null&&(kr?(e=vt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):vt.removeChild(r.stateNode));break;case 18:vt!==null&&(kr?(e=vt,r=r.stateNode,e.nodeType===8?ru(e.parentNode,r):e.nodeType===1&&ru(e,r),ul(e)):ru(vt,r.stateNode));break;case 4:s=vt,a=kr,vt=r.stateNode.containerInfo,kr=!0,bn(e,t,r),vt=s,kr=a;break;case 0:case 11:case 14:case 15:if(!Ct&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&nv(r,t,o),a=a.next}while(a!==s)}bn(e,t,r);break;case 1:if(!Ct&&(Fs(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){Ke(r,t,c)}bn(e,t,r);break;case 21:bn(e,t,r);break;case 22:r.mode&1?(Ct=(s=Ct)||r.memoizedState!==null,bn(e,t,r),Ct=s):bn(e,t,r);break;default:bn(e,t,r)}}function ap(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new sw),t.forEach(function(s){var a=hw.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function wr(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:vt=c.stateNode,kr=!1;break e;case 3:vt=c.stateNode.containerInfo,kr=!0;break e;case 4:vt=c.stateNode.containerInfo,kr=!0;break e}c=c.return}if(vt===null)throw Error(se(160));lv(l,o,a),vt=null,kr=!1;var i=a.alternate;i!==null&&(i.return=null),a.return=null}catch(u){Ke(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ov(t,e),t=t.sibling}function ov(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wr(t,e),Mr(e),s&4){try{Za(3,e,e.return),nc(3,e)}catch(m){Ke(e,e.return,m)}try{Za(5,e,e.return)}catch(m){Ke(e,e.return,m)}}break;case 1:wr(t,e),Mr(e),s&512&&r!==null&&Fs(r,r.return);break;case 5:if(wr(t,e),Mr(e),s&512&&r!==null&&Fs(r,r.return),e.flags&32){var a=e.stateNode;try{ll(a,"")}catch(m){Ke(e,e.return,m)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=r!==null?r.memoizedProps:l,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&$x(a,l),Hu(c,o);var u=Hu(c,l);for(o=0;o<i.length;o+=2){var f=i[o],h=i[o+1];f==="style"?Mx(a,h):f==="dangerouslySetInnerHTML"?Tx(a,h):f==="children"?ll(a,h):af(a,f,h,u)}switch(c){case"input":zu(a,l);break;case"textarea":_x(a,l);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Bs(a,!!l.multiple,v,!1):d!==!!l.multiple&&(l.defaultValue!=null?Bs(a,!!l.multiple,l.defaultValue,!0):Bs(a,!!l.multiple,l.multiple?[]:"",!1))}a[pl]=l}catch(m){Ke(e,e.return,m)}}break;case 6:if(wr(t,e),Mr(e),s&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(m){Ke(e,e.return,m)}}break;case 3:if(wr(t,e),Mr(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(m){Ke(e,e.return,m)}break;case 4:wr(t,e),Mr(e);break;case 13:wr(t,e),Mr(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(zf=et())),s&4&&ap(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Ct=(u=Ct)||f,wr(t,e),Ct=u):wr(t,e),Mr(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(de=e,f=e.child;f!==null;){for(h=de=f;de!==null;){switch(d=de,v=d.child,d.tag){case 0:case 11:case 14:case 15:Za(4,d,d.return);break;case 1:Fs(d,d.return);var j=d.stateNode;if(typeof j.componentWillUnmount=="function"){s=d,r=d.return;try{t=s,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(m){Ke(s,r,m)}}break;case 5:Fs(d,d.return);break;case 22:if(d.memoizedState!==null){op(h);continue}}v!==null?(v.return=d,de=v):op(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{a=h.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=h.stateNode,i=h.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=Dx("display",o))}catch(m){Ke(e,e.return,m)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Ke(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wr(t,e),Mr(e),s&4&&ap(e);break;case 21:break;default:wr(t,e),Mr(e)}}function Mr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(av(r)){var s=r;break e}r=r.return}throw Error(se(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ll(a,""),s.flags&=-33);var l=sp(e);bd(e,l,a);break;case 3:case 4:var o=s.stateNode.containerInfo,c=sp(e);vd(e,c,o);break;default:throw Error(se(161))}}catch(i){Ke(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lw(e,t,r){de=e,iv(e)}function iv(e,t,r){for(var s=(e.mode&1)!==0;de!==null;){var a=de,l=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||ko;if(!o){var c=a.alternate,i=c!==null&&c.memoizedState!==null||Ct;c=ko;var u=Ct;if(ko=o,(Ct=i)&&!u)for(de=a;de!==null;)o=de,i=o.child,o.tag===22&&o.memoizedState!==null?ip(a):i!==null?(i.return=o,de=i):ip(a);for(;l!==null;)de=l,iv(l),l=l.sibling;de=a,ko=c,Ct=u}lp(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,de=l):lp(e)}}function lp(e){for(;de!==null;){var t=de;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||nc(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ct)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Nr(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Hh(t,l,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hh(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break;case"img":i.src&&(r.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&ul(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Ct||t.flags&512&&xd(t)}catch(d){Ke(t,t.return,d)}}if(t===e){de=null;break}if(r=t.sibling,r!==null){r.return=t.return,de=r;break}de=t.return}}function op(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var r=t.sibling;if(r!==null){r.return=t.return,de=r;break}de=t.return}}function ip(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nc(4,t)}catch(i){Ke(t,r,i)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(i){Ke(t,a,i)}}var l=t.return;try{xd(t)}catch(i){Ke(t,l,i)}break;case 5:var o=t.return;try{xd(t)}catch(i){Ke(t,o,i)}}}catch(i){Ke(t,t.return,i)}if(t===e){de=null;break}var c=t.sibling;if(c!==null){c.return=t.return,de=c;break}de=t.return}}var ow=Math.ceil,_i=gn.ReactCurrentDispatcher,Af=gn.ReactCurrentOwner,hr=gn.ReactCurrentBatchConfig,Ee=0,mt=null,nt=null,yt=0,Kt=0,Us=Wn(0),lt=0,jl=null,ds=0,sc=0,Lf=0,el=null,zt=null,zf=0,ra=1/0,Zr=null,Oi=!1,yd=null,Dn=null,So=!1,Cn=null,Ti=0,tl=0,jd=null,Go=-1,Ko=0;function Rt(){return Ee&6?et():Go!==-1?Go:Go=et()}function Mn(e){return e.mode&1?Ee&2&&yt!==0?yt&-yt:Hj.transition!==null?(Ko===0&&(Ko=qx()),Ko):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:Qx(e.type)),e):1}function $r(e,t,r,s){if(50<tl)throw tl=0,jd=null,Error(se(185));Wl(e,r,s),(!(Ee&2)||e!==mt)&&(e===mt&&(!(Ee&2)&&(sc|=r),lt===4&&kn(e,yt)),Wt(e,s),r===1&&Ee===0&&!(t.mode&1)&&(ra=et()+500,ec&&Hn()))}function Wt(e,t){var r=e.callbackNode;H1(e,t);var s=hi(e,e===mt?yt:0);if(s===0)r!==null&&xh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&xh(r),t===1)e.tag===0?Wj(cp.bind(null,e)):x0(cp.bind(null,e)),zj(function(){!(Ee&6)&&Hn()}),r=null;else{switch(Vx(s)){case 1:r=df;break;case 4:r=Wx;break;case 16:r=mi;break;case 536870912:r=Hx;break;default:r=mi}r=gv(r,cv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cv(e,t){if(Go=-1,Ko=0,Ee&6)throw Error(se(327));var r=e.callbackNode;if(Ys()&&e.callbackNode!==r)return null;var s=hi(e,e===mt?yt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Di(e,s);else{t=s;var a=Ee;Ee|=2;var l=dv();(mt!==e||yt!==t)&&(Zr=null,ra=et()+500,ns(e,t));do try{uw();break}catch(c){uv(e,c)}while(!0);kf(),_i.current=l,Ee=a,nt!==null?t=0:(mt=null,yt=0,t=lt)}if(t!==0){if(t===2&&(a=Ku(e),a!==0&&(s=a,t=wd(e,a))),t===1)throw r=jl,ns(e,0),kn(e,s),Wt(e,et()),r;if(t===6)kn(e,s);else{if(a=e.current.alternate,!(s&30)&&!iw(a)&&(t=Di(e,s),t===2&&(l=Ku(e),l!==0&&(s=l,t=wd(e,l))),t===1))throw r=jl,ns(e,0),kn(e,s),Wt(e,et()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(se(345));case 2:Jn(e,zt,Zr);break;case 3:if(kn(e,s),(s&130023424)===s&&(t=zf+500-et(),10<t)){if(hi(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Rt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=nd(Jn.bind(null,e,zt,Zr),t);break}Jn(e,zt,Zr);break;case 4:if(kn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Er(s);l=1<<o,o=t[o],o>a&&(a=o),s&=~l}if(s=a,s=et()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ow(s/1960))-s,10<s){e.timeoutHandle=nd(Jn.bind(null,e,zt,Zr),s);break}Jn(e,zt,Zr);break;case 5:Jn(e,zt,Zr);break;default:throw Error(se(329))}}}return Wt(e,et()),e.callbackNode===r?cv.bind(null,e):null}function wd(e,t){var r=el;return e.current.memoizedState.isDehydrated&&(ns(e,t).flags|=256),e=Di(e,t),e!==2&&(t=zt,zt=r,t!==null&&Nd(t)),e}function Nd(e){zt===null?zt=e:zt.push.apply(zt,e)}function iw(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],l=a.getSnapshot;a=a.value;try{if(!_r(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~Lf,t&=~sc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Er(t),s=1<<r;e[r]=-1,t&=~s}}function cp(e){if(Ee&6)throw Error(se(327));Ys();var t=hi(e,0);if(!(t&1))return Wt(e,et()),null;var r=Di(e,t);if(e.tag!==0&&r===2){var s=Ku(e);s!==0&&(t=s,r=wd(e,s))}if(r===1)throw r=jl,ns(e,0),kn(e,t),Wt(e,et()),r;if(r===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jn(e,zt,Zr),Wt(e,et()),null}function Ff(e,t){var r=Ee;Ee|=1;try{return e(t)}finally{Ee=r,Ee===0&&(ra=et()+500,ec&&Hn())}}function fs(e){Cn!==null&&Cn.tag===0&&!(Ee&6)&&Ys();var t=Ee;Ee|=1;var r=hr.transition,s=Oe;try{if(hr.transition=null,Oe=1,e)return e()}finally{Oe=s,hr.transition=r,Ee=t,!(Ee&6)&&Hn()}}function Uf(){Kt=Us.current,Le(Us)}function ns(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Lj(r)),nt!==null)for(r=nt.return;r!==null;){var s=r;switch(jf(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&bi();break;case 3:ea(),Le(Ut),Le(Et),Of();break;case 5:_f(s);break;case 4:ea();break;case 13:Le(He);break;case 19:Le(He);break;case 10:Sf(s.type._context);break;case 22:case 23:Uf()}r=r.return}if(mt=e,nt=e=Pn(e.current,null),yt=Kt=t,lt=0,jl=null,Lf=sc=ds=0,zt=el=null,ts!==null){for(t=0;t<ts.length;t++)if(r=ts[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,l=r.pending;if(l!==null){var o=l.next;l.next=a,s.next=o}r.pending=s}ts=null}return e}function uv(e,t){do{var r=nt;try{if(kf(),qo.current=$i,Ei){for(var s=qe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ei=!1}if(us=0,ut=at=qe=null,Qa=!1,vl=0,Af.current=null,r===null||r.return===null){lt=1,jl=t,nt=null;break}e:{var l=e,o=r.return,c=r,i=t;if(t=yt,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var u=i,f=c,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Jh(o);if(v!==null){v.flags&=-257,Xh(v,o,c,l,t),v.mode&1&&Kh(l,u,t),t=v,i=u;var j=t.updateQueue;if(j===null){var m=new Set;m.add(i),t.updateQueue=m}else j.add(i);break e}else{if(!(t&1)){Kh(l,u,t),Bf();break e}i=Error(se(426))}}else if(Ue&&c.mode&1){var y=Jh(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Xh(y,o,c,l,t),wf(ta(i,c));break e}}l=i=ta(i,c),lt!==4&&(lt=2),el===null?el=[l]:el.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=V0(l,i,t);Wh(l,g);break e;case 1:c=i;var p=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Dn===null||!Dn.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=Y0(l,c,t);Wh(l,x);break e}}l=l.return}while(l!==null)}mv(r)}catch(C){t=C,nt===r&&r!==null&&(nt=r=r.return);continue}break}while(!0)}function dv(){var e=_i.current;return _i.current=$i,e===null?$i:e}function Bf(){(lt===0||lt===3||lt===2)&&(lt=4),mt===null||!(ds&268435455)&&!(sc&268435455)||kn(mt,yt)}function Di(e,t){var r=Ee;Ee|=2;var s=dv();(mt!==e||yt!==t)&&(Zr=null,ns(e,t));do try{cw();break}catch(a){uv(e,a)}while(!0);if(kf(),Ee=r,_i.current=s,nt!==null)throw Error(se(261));return mt=null,yt=0,lt}function cw(){for(;nt!==null;)fv(nt)}function uw(){for(;nt!==null&&!R1();)fv(nt)}function fv(e){var t=pv(e.alternate,e,Kt);e.memoizedProps=e.pendingProps,t===null?mv(e):nt=t,Af.current=null}function mv(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=nw(r,t),r!==null){r.flags&=32767,nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lt=6,nt=null;return}}else if(r=rw(r,t,Kt),r!==null){nt=r;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);lt===0&&(lt=5)}function Jn(e,t,r){var s=Oe,a=hr.transition;try{hr.transition=null,Oe=1,dw(e,t,r,s)}finally{hr.transition=a,Oe=s}return null}function dw(e,t,r,s){do Ys();while(Cn!==null);if(Ee&6)throw Error(se(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(q1(e,l),e===mt&&(nt=mt=null,yt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||So||(So=!0,gv(mi,function(){return Ys(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=hr.transition,hr.transition=null;var o=Oe;Oe=1;var c=Ee;Ee|=4,Af.current=null,aw(e,r),ov(r,e),Tj(td),pi=!!ed,td=ed=null,e.current=r,lw(r),I1(),Ee=c,Oe=o,hr.transition=l}else e.current=r;if(So&&(So=!1,Cn=e,Ti=a),l=e.pendingLanes,l===0&&(Dn=null),z1(r.stateNode),Wt(e,et()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,e=yd,yd=null,e;return Ti&1&&e.tag!==0&&Ys(),l=e.pendingLanes,l&1?e===jd?tl++:(tl=0,jd=e):tl=0,Hn(),null}function Ys(){if(Cn!==null){var e=Vx(Ti),t=hr.transition,r=Oe;try{if(hr.transition=null,Oe=16>e?16:e,Cn===null)var s=!1;else{if(e=Cn,Cn=null,Ti=0,Ee&6)throw Error(se(331));var a=Ee;for(Ee|=4,de=e.current;de!==null;){var l=de,o=l.child;if(de.flags&16){var c=l.deletions;if(c!==null){for(var i=0;i<c.length;i++){var u=c[i];for(de=u;de!==null;){var f=de;switch(f.tag){case 0:case 11:case 15:Za(8,f,l)}var h=f.child;if(h!==null)h.return=f,de=h;else for(;de!==null;){f=de;var d=f.sibling,v=f.return;if(sv(f),f===u){de=null;break}if(d!==null){d.return=v,de=d;break}de=v}}}var j=l.alternate;if(j!==null){var m=j.child;if(m!==null){j.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}de=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,de=o;else e:for(;de!==null;){if(l=de,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Za(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,de=g;break e}de=l.return}}var p=e.current;for(de=p;de!==null;){o=de;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,de=b;else e:for(o=p;de!==null;){if(c=de,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(C){Ke(c,c.return,C)}if(c===o){de=null;break e}var x=c.sibling;if(x!==null){x.return=c.return,de=x;break e}de=c.return}}if(Ee=a,Hn(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Ki,e)}catch{}s=!0}return s}finally{Oe=r,hr.transition=t}}return!1}function up(e,t,r){t=ta(r,t),t=V0(e,t,1),e=Tn(e,t,1),t=Rt(),e!==null&&(Wl(e,1,t),Wt(e,t))}function Ke(e,t,r){if(e.tag===3)up(e,e,r);else for(;t!==null;){if(t.tag===3){up(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Dn===null||!Dn.has(s))){e=ta(r,e),e=Y0(t,e,1),t=Tn(t,e,1),e=Rt(),t!==null&&(Wl(t,1,e),Wt(t,e));break}}t=t.return}}function fw(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&r,mt===e&&(yt&r)===r&&(lt===4||lt===3&&(yt&130023424)===yt&&500>et()-zf?ns(e,0):Lf|=r),Wt(e,t)}function hv(e,t){t===0&&(e.mode&1?(t=po,po<<=1,!(po&130023424)&&(po=4194304)):t=1);var r=Rt();e=un(e,t),e!==null&&(Wl(e,t,r),Wt(e,r))}function mw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),hv(e,r)}function hw(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(se(314))}s!==null&&s.delete(t),hv(e,r)}var pv;pv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Ft=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ft=!1,tw(e,t,r);Ft=!!(e.flags&131072)}else Ft=!1,Ue&&t.flags&1048576&&v0(t,wi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Yo(e,t),e=t.pendingProps;var a=Xs(t,Et.current);Vs(t,r),a=Df(null,t,s,e,a,r);var l=Mf();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(s)?(l=!0,yi(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ef(t),a.updater=rc,t.stateNode=a,a._reactInternals=t,ud(t,s,e,r),t=md(null,t,s,!0,l,r)):(t.tag=0,Ue&&l&&yf(t),Mt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Yo(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=gw(s),e=Nr(s,e),a){case 0:t=fd(null,t,s,e,r);break e;case 1:t=ep(null,t,s,e,r);break e;case 11:t=Qh(null,t,s,e,r);break e;case 14:t=Zh(null,t,s,Nr(s.type,e),r);break e}throw Error(se(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Nr(s,a),fd(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Nr(s,a),ep(e,t,s,a,r);case 3:e:{if(X0(t),e===null)throw Error(se(387));s=t.pendingProps,l=t.memoizedState,a=l.element,k0(e,t),Si(t,s,null,r);var o=t.memoizedState;if(s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=ta(Error(se(423)),t),t=tp(e,t,s,r,a);break e}else if(s!==a){a=ta(Error(se(424)),t),t=tp(e,t,s,r,a);break e}else for(Jt=On(t.stateNode.containerInfo.firstChild),Xt=t,Ue=!0,Cr=null,r=w0(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qs(),s===a){t=dn(e,t,r);break e}Mt(e,t,s,r)}t=t.child}return t;case 5:return S0(t),e===null&&od(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,rd(s,a)?o=null:l!==null&&rd(s,l)&&(t.flags|=32),J0(e,t),Mt(e,t,o,r),t.child;case 6:return e===null&&od(t),null;case 13:return Q0(e,t,r);case 4:return $f(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Zs(t,null,s,r):Mt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Nr(s,a),Qh(e,t,s,a,r);case 7:return Mt(e,t,t.pendingProps,r),t.child;case 8:return Mt(e,t,t.pendingProps.children,r),t.child;case 12:return Mt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,Pe(Ni,s._currentValue),s._currentValue=o,l!==null)if(_r(l.value,o)){if(l.children===a.children&&!Ut.current){t=dn(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var i=c.firstContext;i!==null;){if(i.context===s){if(l.tag===1){i=nn(-1,r&-r),i.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i}}l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),id(l.return,r,t),c.lanes|=r;break}i=i.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(se(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),id(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Mt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Vs(t,r),a=pr(a),s=s(a),t.flags|=1,Mt(e,t,s,r),t.child;case 14:return s=t.type,a=Nr(s,t.pendingProps),a=Nr(s.type,a),Zh(e,t,s,a,r);case 15:return G0(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Nr(s,a),Yo(e,t),t.tag=1,Bt(s)?(e=!0,yi(t)):e=!1,Vs(t,r),q0(t,s,a),ud(t,s,a,r),md(null,t,s,!0,e,r);case 19:return Z0(e,t,r);case 22:return K0(e,t,r)}throw Error(se(156,t.tag))};function gv(e,t){return Bx(e,t)}function pw(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(e,t,r,s){return new pw(e,t,r,s)}function Wf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gw(e){if(typeof e=="function")return Wf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===of)return 11;if(e===cf)return 14}return 2}function Pn(e,t){var r=e.alternate;return r===null?(r=mr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Jo(e,t,r,s,a,l){var o=2;if(s=e,typeof e=="function")Wf(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ts:return ss(r.children,a,l,t);case lf:o=8,a|=8;break;case Pu:return e=mr(12,r,t,a|2),e.elementType=Pu,e.lanes=l,e;case Ru:return e=mr(13,r,t,a),e.elementType=Ru,e.lanes=l,e;case Iu:return e=mr(19,r,t,a),e.elementType=Iu,e.lanes=l,e;case Sx:return ac(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nx:o=10;break e;case kx:o=9;break e;case of:o=11;break e;case cf:o=14;break e;case jn:o=16,s=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=mr(o,r,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function ss(e,t,r,s){return e=mr(7,e,s,t),e.lanes=r,e}function ac(e,t,r,s){return e=mr(22,e,s,t),e.elementType=Sx,e.lanes=r,e.stateNode={isHidden:!1},e}function uu(e,t,r){return e=mr(6,e,null,t),e.lanes=r,e}function du(e,t,r){return t=mr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xw(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qc(0),this.expirationTimes=qc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qc(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hf(e,t,r,s,a,l,o,c,i){return e=new xw(e,t,r,c,i),t===1?(t=1,l===!0&&(t|=8)):t=0,l=mr(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ef(l),e}function vw(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function xv(e){if(!e)return An;e=e._reactInternals;e:{if(ws(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var r=e.type;if(Bt(r))return g0(e,r,t)}return t}function vv(e,t,r,s,a,l,o,c,i){return e=Hf(r,s,!0,e,a,l,o,c,i),e.context=xv(null),r=e.current,s=Rt(),a=Mn(r),l=nn(s,a),l.callback=t??null,Tn(r,l,a),e.current.lanes=a,Wl(e,a,s),Wt(e,s),e}function lc(e,t,r,s){var a=t.current,l=Rt(),o=Mn(a);return r=xv(r),t.context===null?t.context=r:t.pendingContext=r,t=nn(l,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Tn(a,t,o),e!==null&&($r(e,a,o,l),Ho(e,a,o)),o}function Mi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qf(e,t){dp(e,t),(e=e.alternate)&&dp(e,t)}function bw(){return null}var bv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vf(e){this._internalRoot=e}oc.prototype.render=Vf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));lc(e,t,null,null)};oc.prototype.unmount=Vf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fs(function(){lc(null,e,null,null)}),t[cn]=null}};function oc(e){this._internalRoot=e}oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Nn.length&&t!==0&&t<Nn[r].priority;r++);Nn.splice(r,0,e),r===0&&Xx(e)}};function Yf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ic(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fp(){}function yw(e,t,r,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var u=Mi(o);l.call(u)}}var o=vv(t,s,e,0,null,!1,!1,"",fp);return e._reactRootContainer=o,e[cn]=o.current,ml(e.nodeType===8?e.parentNode:e),fs(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=Mi(i);c.call(u)}}var i=Hf(e,0,!1,null,null,!1,!1,"",fp);return e._reactRootContainer=i,e[cn]=i.current,ml(e.nodeType===8?e.parentNode:e),fs(function(){lc(t,i,r,s)}),i}function cc(e,t,r,s,a){var l=r._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var i=Mi(o);c.call(i)}}lc(t,o,e,a)}else o=yw(r,t,e,a,s);return Mi(o)}Yx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wa(t.pendingLanes);r!==0&&(ff(t,r|1),Wt(t,et()),!(Ee&6)&&(ra=et()+500,Hn()))}break;case 13:fs(function(){var s=un(e,1);if(s!==null){var a=Rt();$r(s,e,1,a)}}),qf(e,1)}};mf=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var r=Rt();$r(t,e,134217728,r)}qf(e,134217728)}};Gx=function(e){if(e.tag===13){var t=Mn(e),r=un(e,t);if(r!==null){var s=Rt();$r(r,e,t,s)}qf(e,t)}};Kx=function(){return Oe};Jx=function(e,t){var r=Oe;try{return Oe=e,t()}finally{Oe=r}};Vu=function(e,t,r){switch(t){case"input":if(zu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Zi(s);if(!a)throw Error(se(90));Ex(s),zu(s,a)}}}break;case"textarea":_x(e,r);break;case"select":t=r.value,t!=null&&Bs(e,!!r.multiple,t,!1)}};Ix=Ff;Ax=fs;var jw={usingClientEntryPoint:!1,Events:[ql,Rs,Zi,Px,Rx,Ff]},Ma={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ww={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fx(e),e===null?null:e.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||bw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{Ki=Co.inject(ww),zr=Co}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jw;rr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yf(t))throw Error(se(200));return vw(e,t,null,r)};rr.createRoot=function(e,t){if(!Yf(e))throw Error(se(299));var r=!1,s="",a=bv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Hf(e,1,!1,null,null,r,!1,s,a),e[cn]=t.current,ml(e.nodeType===8?e.parentNode:e),new Vf(t)};rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=Fx(t),e=e===null?null:e.stateNode,e};rr.flushSync=function(e){return fs(e)};rr.hydrate=function(e,t,r){if(!ic(t))throw Error(se(200));return cc(null,e,t,!0,r)};rr.hydrateRoot=function(e,t,r){if(!Yf(e))throw Error(se(405));var s=r!=null&&r.hydratedSources||null,a=!1,l="",o=bv;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=vv(t,null,e,1,r??null,a,!1,l,o),e[cn]=t.current,ml(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new oc(t)};rr.render=function(e,t,r){if(!ic(t))throw Error(se(200));return cc(null,e,t,!1,r)};rr.unmountComponentAtNode=function(e){if(!ic(e))throw Error(se(40));return e._reactRootContainer?(fs(function(){cc(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1};rr.unstable_batchedUpdates=Ff;rr.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ic(r))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return cc(e,t,r,!1,s)};rr.version="18.3.1-next-f1338f8080-20240426";function yv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yv)}catch(e){console.error(e)}}yv(),bx.exports=rr;var jv=bx.exports;const wv=Yt(jv),qr=Object.create(null);qr.open="0";qr.close="1";qr.ping="2";qr.pong="3";qr.message="4";qr.upgrade="5";qr.noop="6";const Xo=Object.create(null);Object.keys(qr).forEach(e=>{Xo[qr[e]]=e});const kd={type:"error",data:"parser error"},Nv=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kv=typeof ArrayBuffer=="function",Sv=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Gf=({type:e,data:t},r,s)=>Nv&&t instanceof Blob?r?s(t):mp(t,s):kv&&(t instanceof ArrayBuffer||Sv(t))?r?s(t):mp(new Blob([t]),s):s(qr[e]+(t||"")),mp=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function hp(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let fu;function Nw(e,t){if(Nv&&e.data instanceof Blob)return e.data.arrayBuffer().then(hp).then(t);if(kv&&(e.data instanceof ArrayBuffer||Sv(e.data)))return t(hp(e.data));Gf(e,!1,r=>{fu||(fu=new TextEncoder),t(fu.encode(r))})}const pp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qa=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<pp.length;e++)qa[pp.charCodeAt(e)]=e;const kw=e=>{let t=e.length*.75,r=e.length,s,a=0,l,o,c,i;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),f=new Uint8Array(u);for(s=0;s<r;s+=4)l=qa[e.charCodeAt(s)],o=qa[e.charCodeAt(s+1)],c=qa[e.charCodeAt(s+2)],i=qa[e.charCodeAt(s+3)],f[a++]=l<<2|o>>4,f[a++]=(o&15)<<4|c>>2,f[a++]=(c&3)<<6|i&63;return u},Sw=typeof ArrayBuffer=="function",Kf=(e,t)=>{if(typeof e!="string")return{type:"message",data:Cv(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Cw(e.substring(1),t)}:Xo[r]?e.length>1?{type:Xo[r],data:e.substring(1)}:{type:Xo[r]}:kd},Cw=(e,t)=>{if(Sw){const r=kw(e);return Cv(r,t)}else return{base64:!0,data:e}},Cv=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ev="",Ew=(e,t)=>{const r=e.length,s=new Array(r);let a=0;e.forEach((l,o)=>{Gf(l,!1,c=>{s[o]=c,++a===r&&t(s.join(Ev))})})},$w=(e,t)=>{const r=e.split(Ev),s=[];for(let a=0;a<r.length;a++){const l=Kf(r[a],t);if(s.push(l),l.type==="error")break}return s};function _w(){return new TransformStream({transform(e,t){Nw(e,r=>{const s=r.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const l=new DataView(a.buffer);l.setUint8(0,126),l.setUint16(1,s)}else{a=new Uint8Array(9);const l=new DataView(a.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let mu;function Eo(e){return e.reduce((t,r)=>t+r.length,0)}function $o(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)r[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function Ow(e,t){mu||(mu=new TextDecoder);const r=[];let s=0,a=-1,l=!1;return new TransformStream({transform(o,c){for(r.push(o);;){if(s===0){if(Eo(r)<1)break;const i=$o(r,1);l=(i[0]&128)===128,a=i[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Eo(r)<2)break;const i=$o(r,2);a=new DataView(i.buffer,i.byteOffset,i.length).getUint16(0),s=3}else if(s===2){if(Eo(r)<8)break;const i=$o(r,8),u=new DataView(i.buffer,i.byteOffset,i.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(kd);break}a=f*Math.pow(2,32)+u.getUint32(4),s=3}else{if(Eo(r)<a)break;const i=$o(r,a);c.enqueue(Kf(l?i:mu.decode(i),t)),s=0}if(a===0||a>e){c.enqueue(kd);break}}}})}const $v=4;function st(e){if(e)return Tw(e)}function Tw(e){for(var t in st.prototype)e[t]=st.prototype[t];return e}st.prototype.on=st.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};st.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};st.prototype.off=st.prototype.removeListener=st.prototype.removeAllListeners=st.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<r.length;a++)if(s=r[a],s===t||s.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};st.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,a=r.length;s<a;++s)r[s].apply(this,t)}return this};st.prototype.emitReserved=st.prototype.emit;st.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};st.prototype.hasListeners=function(e){return!!this.listeners(e).length};const uc=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ur=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Dw="arraybuffer";function _v(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const Mw=ur.setTimeout,Pw=ur.clearTimeout;function dc(e,t){t.useNativeTimers?(e.setTimeoutFn=Mw.bind(ur),e.clearTimeoutFn=Pw.bind(ur)):(e.setTimeoutFn=ur.setTimeout.bind(ur),e.clearTimeoutFn=ur.clearTimeout.bind(ur))}const Rw=1.33;function Iw(e){return typeof e=="string"?Aw(e):Math.ceil((e.byteLength||e.size)*Rw)}function Aw(e){let t=0,r=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Ov(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Lw(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function zw(e){let t={},r=e.split("&");for(let s=0,a=r.length;s<a;s++){let l=r[s].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}let Fw=class extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}};class Jf extends st{constructor(t){super(),this.writable=!1,dc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new Fw(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Kf(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Lw(t);return r.length?"?"+r:""}}let Uw=class extends Jf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};$w(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ew(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Ov()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}},Tv=!1;try{Tv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Bw=Tv;function Ww(){}let Hw=class extends Uw{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(a,l)=>{this.onError("xhr post error",a,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}};class Ur extends st{constructor(t,r,s){super(),this.createRequest=t,dc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=_v(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ur.requestsCount++,Ur.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ww,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ur.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ur.requestsCount=0;Ur.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",gp);else if(typeof addEventListener=="function"){const e="onpagehide"in ur?"pagehide":"unload";addEventListener(e,gp,!1)}}function gp(){for(let e in Ur.requests)Ur.requests.hasOwnProperty(e)&&Ur.requests[e].abort()}const qw=function(){const e=Dv({xdomain:!1});return e&&e.responseType!==null}();let Vw=class extends Hw{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=qw&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ur(Dv,this.uri(),t)}};function Dv(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Bw))return new XMLHttpRequest}catch{}if(!t)try{return new ur[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Mv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";let Yw=class extends Jf{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=Mv?{}:_v(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;Gf(s,this.supportsBinary,l=>{try{this.doWrite(s,l)}catch{}a&&uc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Ov()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}};const hu=ur.WebSocket||ur.MozWebSocket;let Gw=class extends Yw{createSocket(t,r,s){return Mv?new hu(t,r,s):r?new hu(t,r):new hu(t)}doWrite(t,r){this.ws.send(r)}},Kw=class extends Jf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=Ow(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),a=_w();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const l=()=>{s.read().then(({done:c,value:i})=>{c||(this.onPacket(i),l())}).catch(c=>{})};l();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;this._writer.write(s).then(()=>{a&&uc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};const Jw={websocket:Gw,webtransport:Kw,polling:Vw},Xw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Sd(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let a=Xw.exec(e||""),l={},o=14;for(;o--;)l[Qw[o]]=a[o]||"";return r!=-1&&s!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Zw(l,l.path),l.queryKey=eN(l,l.query),l}function Zw(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function eN(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,l){a&&(r[a]=l)}),r}const Cd=typeof addEventListener=="function"&&typeof removeEventListener=="function",Qo=[];Cd&&addEventListener("offline",()=>{Qo.forEach(e=>e())},!1);let Zo=class ei extends st{constructor(t,r){if(super(),this.binaryType=Dw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=Sd(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=Sd(r.host).host);dc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zw(this.opts.query)),Cd&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Qo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=$v,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ei.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ei.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(t+=Iw(s)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,uc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,a){if(typeof r=="function"&&(a=r,r=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const l={type:t,data:r,options:s};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(ei.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Cd&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Qo.indexOf(this._offlineEventListener);s!==-1&&Qo.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}};Zo.protocol=$v;let tN=class extends Zo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;Zo.priorWebsocketSuccess=!1;const a=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Zo.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function l(){s||(s=!0,f(),r.close(),r=null)}const o=h=>{const d=new Error("probe error: "+h);d.transport=r.name,l(),this.emitReserved("upgradeError",d)};function c(){o("transport closed")}function i(){o("socket closed")}function u(h){r&&h.name!==r.name&&l()}const f=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",c),this.off("close",i),this.off("upgrading",u)};r.once("open",a),r.once("error",o),r.once("close",c),this.once("close",i),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}},rN=class extends tN{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>Jw[a]).filter(a=>!!a)),super(t,s)}};function nN(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=Sd(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(r&&r.port===s.port?"":":"+s.port),s}const sN=typeof ArrayBuffer=="function",aN=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Pv=Object.prototype.toString,lN=typeof Blob=="function"||typeof Blob<"u"&&Pv.call(Blob)==="[object BlobConstructor]",oN=typeof File=="function"||typeof File<"u"&&Pv.call(File)==="[object FileConstructor]";function Xf(e){return sN&&(e instanceof ArrayBuffer||aN(e))||lN&&e instanceof Blob||oN&&e instanceof File}function ti(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(ti(e[r]))return!0;return!1}if(Xf(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ti(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ti(e[r]))return!0;return!1}function iN(e){const t=[],r=e.data,s=e;return s.data=Ed(r,t),s.attachments=t.length,{packet:s,buffers:t}}function Ed(e,t){if(!e)return e;if(Xf(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=Ed(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=Ed(e[s],t));return r}return e}function cN(e,t){return e.data=$d(e.data,t),delete e.attachments,e}function $d(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=$d(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=$d(e[r],t));return e}const uN=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],dN=5;var ke;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ke||(ke={}));let fN=class{constructor(t){this.replacer=t}encode(t){return(t.type===ke.EVENT||t.type===ke.ACK)&&ti(t)?this.encodeAsBinary({type:t.type===ke.EVENT?ke.BINARY_EVENT:ke.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ke.BINARY_EVENT||t.type===ke.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=iN(t),s=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(s),a}};function xp(e){return Object.prototype.toString.call(e)==="[object Object]"}class Qf extends st{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===ke.BINARY_EVENT;s||r.type===ke.BINARY_ACK?(r.type=s?ke.EVENT:ke.ACK,this.reconstructor=new mN(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Xf(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(ke[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ke.BINARY_EVENT||s.type===ke.BINARY_ACK){const l=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(l,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(l,r)}else s.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const l=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}s.id=Number(t.substring(l,r+1))}if(t.charAt(++r)){const l=this.tryParse(t.substr(r));if(Qf.isPayloadValid(s.type,l))s.data=l;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ke.CONNECT:return xp(r);case ke.DISCONNECT:return r===void 0;case ke.CONNECT_ERROR:return typeof r=="string"||xp(r);case ke.EVENT:case ke.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&uN.indexOf(r[0])===-1);case ke.ACK:case ke.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}let mN=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=cN(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};const hN=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Qf,Encoder:fN,get PacketType(){return ke},protocol:dN},Symbol.toStringTag,{value:"Module"}));function Sr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const pN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let Rv=class extends st{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Sr(t,"open",this.onopen.bind(this)),Sr(t,"packet",this.onpacket.bind(this)),Sr(t,"error",this.onerror.bind(this)),Sr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,a,l;if(pN.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:ke.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,f=r.pop();this._registerAckCallback(u,f),o.id=u}const c=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,i=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!c||(i?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(l),r.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((s,a)=>{const l=(o,c)=>o?a(o):s(c);l.withError=!0,r.push(l),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...l)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...l)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ke.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ke.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ke.EVENT:case ke.BINARY_EVENT:this.onevent(t);break;case ke.ACK:case ke.BINARY_ACK:this.onack(t);break;case ke.DISCONNECT:this.ondisconnect();break;case ke.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...a){s||(s=!0,r.packet({type:ke.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ke.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}};function fa(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}fa.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};fa.prototype.reset=function(){this.attempts=0};fa.prototype.setMin=function(e){this.ms=e};fa.prototype.setMax=function(e){this.max=e};fa.prototype.setJitter=function(e){this.jitter=e};let _d=class extends st{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,dc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new fa({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||hN;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new rN(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Sr(r,"open",function(){s.onopen(),t&&t()}),l=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=Sr(r,"error",l);if(this._timeout!==!1){const c=this._timeout,i=this.setTimeoutFn(()=>{a(),l(new Error("timeout")),r.close()},c);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Sr(t,"ping",this.onping.bind(this)),Sr(t,"data",this.ondata.bind(this)),Sr(t,"error",this.onerror.bind(this)),Sr(t,"close",this.onclose.bind(this)),Sr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){uc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Rv(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};const Pa={};function ri(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=nN(e,t.path||"/socket.io"),s=r.source,a=r.id,l=r.path,o=Pa[a]&&l in Pa[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let i;return c?i=new _d(s,t):(Pa[a]||(Pa[a]=new _d(s,t)),i=Pa[a]),r.query&&!t.query&&(t.query=r.queryKey),i.socket(r.path,t)}Object.assign(ri,{Manager:_d,Socket:Rv,io:ri,connect:ri});/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vp="popstate";function gN(e={}){function t(s,a){let{pathname:l,search:o,hash:c}=s.location;return Od("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:wl(a)}return vN(t,r,null,e)}function Ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xN(){return Math.random().toString(36).substring(2,10)}function bp(e,t){return{usr:e.state,key:e.key,idx:t}}function Od(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ma(t):t,state:r,key:t&&t.key||s||xN()}}function wl({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ma(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function vN(e,t,r,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,o=a.history,c="POP",i=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function h(){c="POP";let y=f(),g=y==null?null:y-u;u=y,i&&i({action:c,location:m.location,delta:g})}function d(y,g){c="PUSH";let p=Od(m.location,y,g);u=f()+1;let b=bp(p,u),x=m.createHref(p);try{o.pushState(b,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(x)}l&&i&&i({action:c,location:m.location,delta:1})}function v(y,g){c="REPLACE";let p=Od(m.location,y,g);u=f();let b=bp(p,u),x=m.createHref(p);o.replaceState(b,"",x),l&&i&&i({action:c,location:m.location,delta:0})}function j(y){return bN(y)}let m={get action(){return c},get location(){return e(a,o)},listen(y){if(i)throw new Error("A history only accepts one active listener");return a.addEventListener(vp,h),i=y,()=>{a.removeEventListener(vp,h),i=null}},createHref(y){return t(a,y)},createURL:j,encodeLocation(y){let g=j(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:v,go(y){return o.go(y)}};return m}function bN(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ve(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:wl(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function Iv(e,t,r="/"){return yN(e,t,r,!1)}function yN(e,t,r,s){let a=typeof t=="string"?ma(t):t,l=fn(a.pathname||"/",r);if(l==null)return null;let o=Av(e);jN(o);let c=null;for(let i=0;c==null&&i<o.length;++i){let u=DN(l);c=ON(o[i],u,s)}return c}function Av(e,t=[],r=[],s=""){let a=(l,o,c)=>{let i={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};i.relativePath.startsWith("/")&&(Ve(i.relativePath.startsWith(s),`Absolute route path "${i.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(s.length));let u=sn([s,i.relativePath]),f=r.concat(i);l.children&&l.children.length>0&&(Ve(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Av(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:$N(u,l.index),routesMeta:f})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let i of Lv(l.path))a(l,o,i)}),t}function Lv(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let o=Lv(s.join("/")),c=[];return c.push(...o.map(i=>i===""?l:[l,i].join("/"))),a&&c.push(...o),c.map(i=>e.startsWith("/")&&i===""?"/":i)}function jN(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_N(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var wN=/^:[\w-]+$/,NN=3,kN=2,SN=1,CN=10,EN=-2,yp=e=>e==="*";function $N(e,t){let r=e.split("/"),s=r.length;return r.some(yp)&&(s+=EN),t&&(s+=kN),r.filter(a=>!yp(a)).reduce((a,l)=>a+(wN.test(l)?NN:l===""?SN:CN),s)}function _N(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ON(e,t,r=!1){let{routesMeta:s}=e,a={},l="/",o=[];for(let c=0;c<s.length;++c){let i=s[c],u=c===s.length-1,f=l==="/"?t:t.slice(l.length)||"/",h=Pi({path:i.relativePath,caseSensitive:i.caseSensitive,end:u},f),d=i.route;if(!h&&u&&r&&!s[s.length-1].route.index&&(h=Pi({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},f)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:sn([l,h.pathname]),pathnameBase:IN(sn([l,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(l=sn([l,h.pathnameBase]))}return o}function Pi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=TN(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((i,{paramName:u,isOptional:f},h)=>{if(u==="*"){let v=c[h]||"";o=l.slice(0,l.length-v.length).replace(/(.)\/+$/,"$1")}const d=c[h];return f&&!d?i[u]=void 0:i[u]=(d||"").replace(/%2F/g,"/"),i},{}),pathname:l,pathnameBase:o,pattern:e}}function TN(e,t=!1,r=!0){Vr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function DN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function fn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function MN(e,t="/"){let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?ma(e):e;return{pathname:r?r.startsWith("/")?r:PN(r,t):t,search:AN(s),hash:LN(a)}}function PN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function pu(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RN(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function zv(e){let t=RN(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function Fv(e,t,r,s=!1){let a;typeof e=="string"?a=ma(e):(a={...e},Ve(!a.pathname||!a.pathname.includes("?"),pu("?","pathname","search",a)),Ve(!a.pathname||!a.pathname.includes("#"),pu("#","pathname","hash",a)),Ve(!a.search||!a.search.includes("#"),pu("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;a.pathname=d.join("/")}c=h>=0?t[h]:"/"}let i=MN(a,c),u=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&r.endsWith("/");return!i.pathname.endsWith("/")&&(u||f)&&(i.pathname+="/"),i}var sn=e=>e.join("/").replace(/\/\/+/g,"/"),IN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Uv=["POST","PUT","PATCH","DELETE"];new Set(Uv);var FN=["GET",...Uv];new Set(FN);var ha=N.createContext(null);ha.displayName="DataRouter";var fc=N.createContext(null);fc.displayName="DataRouterState";N.createContext(!1);var Bv=N.createContext({isTransitioning:!1});Bv.displayName="ViewTransition";var UN=N.createContext(new Map);UN.displayName="Fetchers";var BN=N.createContext(null);BN.displayName="Await";var Kr=N.createContext(null);Kr.displayName="Navigation";var Yl=N.createContext(null);Yl.displayName="Location";var xn=N.createContext({outlet:null,matches:[],isDataRoute:!1});xn.displayName="Route";var Zf=N.createContext(null);Zf.displayName="RouteError";function WN(e,{relative:t}={}){Ve(Gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=N.useContext(Kr),{hash:a,pathname:l,search:o}=Kl(e,{relative:t}),c=l;return r!=="/"&&(c=l==="/"?r:sn([r,l])),s.createHref({pathname:c,search:o,hash:a})}function Gl(){return N.useContext(Yl)!=null}function Ns(){return Ve(Gl(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Yl).location}var Wv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hv(e){N.useContext(Kr).static||N.useLayoutEffect(e)}function HN(){let{isDataRoute:e}=N.useContext(xn);return e?n2():qN()}function qN(){Ve(Gl(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(ha),{basename:t,navigator:r}=N.useContext(Kr),{matches:s}=N.useContext(xn),{pathname:a}=Ns(),l=JSON.stringify(zv(s)),o=N.useRef(!1);return Hv(()=>{o.current=!0}),N.useCallback((c,i={})=>{if(Vr(o.current,Wv),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=Fv(c,JSON.parse(l),a,i.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:sn([t,u.pathname])),(i.replace?r.replace:r.push)(u,i.state,i)},[t,r,l,a,e])}N.createContext(null);function Kl(e,{relative:t}={}){let{matches:r}=N.useContext(xn),{pathname:s}=Ns(),a=JSON.stringify(zv(r));return N.useMemo(()=>Fv(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function VN(e,t){return qv(e,t)}function qv(e,t,r,s){var a;Ve(Gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(Kr),{matches:o}=N.useContext(xn),c=o[o.length-1],i=c?c.params:{},u=c?c.pathname:"/",f=c?c.pathnameBase:"/",h=c&&c.route;{let p=h&&h.path||"";Vv(u,!h||p.endsWith("*")||p.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${p}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${p}"> to <Route path="${p==="/"?"*":`${p}/*`}">.`)}let d=Ns(),v;if(t){let p=typeof t=="string"?ma(t):t;Ve(f==="/"||((a=p.pathname)==null?void 0:a.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${p.pathname}" was given in the \`location\` prop.`),v=p}else v=d;let j=v.pathname||"/",m=j;if(f!=="/"){let p=f.replace(/^\//,"").split("/");m="/"+j.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=Iv(e,{pathname:m});Vr(h||y!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Vr(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=XN(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},i,p.params),pathname:sn([f,l.encodeLocation?l.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?f:sn([f,l.encodeLocation?l.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),o,r,s);return t&&g?N.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},g):g}function YN(){let e=r2(),t=zN(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:a},r):null,o)}var GN=N.createElement(YN,null),KN=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(xn.Provider,{value:this.props.routeContext},N.createElement(Zf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JN({routeContext:e,match:t,children:r}){let s=N.useContext(ha);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(xn.Provider,{value:e},r)}function XN(e,t=[],r=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let i=a.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);Ve(i>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,i+1))}let o=!1,c=-1;if(r)for(let i=0;i<a.length;i++){let u=a[i];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=i),u.route.id){let{loaderData:f,errors:h}=r,d=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||d){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((i,u,f)=>{let h,d=!1,v=null,j=null;r&&(h=l&&u.route.id?l[u.route.id]:void 0,v=u.route.errorElement||GN,o&&(c<0&&f===0?(Vv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,j=null):c===f&&(d=!0,j=u.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,f+1)),y=()=>{let g;return h?g=v:d?g=j:u.route.Component?g=N.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=i,N.createElement(JN,{match:u,routeContext:{outlet:i,matches:m,isDataRoute:r!=null},children:g})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?N.createElement(KN,{location:r.location,revalidation:r.revalidation,component:v,error:h,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}function em(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QN(e){let t=N.useContext(ha);return Ve(t,em(e)),t}function ZN(e){let t=N.useContext(fc);return Ve(t,em(e)),t}function e2(e){let t=N.useContext(xn);return Ve(t,em(e)),t}function tm(e){let t=e2(e),r=t.matches[t.matches.length-1];return Ve(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function t2(){return tm("useRouteId")}function r2(){var e;let t=N.useContext(Zf),r=ZN("useRouteError"),s=tm("useRouteError");return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function n2(){let{router:e}=QN("useNavigate"),t=tm("useNavigate"),r=N.useRef(!1);return Hv(()=>{r.current=!0}),N.useCallback(async(s,a={})=>{Vr(r.current,Wv),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var jp={};function Vv(e,t,r){!t&&!jp[e]&&(jp[e]=!0,Vr(!1,r))}N.memo(s2);function s2({routes:e,future:t,state:r}){return qv(e,void 0,r,t)}function Td(e){Ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function a2({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:a,static:l=!1}){Ve(!Gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:o,navigator:a,static:l,future:{}}),[o,a,l]);typeof r=="string"&&(r=ma(r));let{pathname:i="/",search:u="",hash:f="",state:h=null,key:d="default"}=r,v=N.useMemo(()=>{let j=fn(i,o);return j==null?null:{location:{pathname:j,search:u,hash:f,state:h,key:d},navigationType:s}},[o,i,u,f,h,d,s]);return Vr(v!=null,`<Router basename="${o}"> is not able to match the URL "${i}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:N.createElement(Kr.Provider,{value:c},N.createElement(Yl.Provider,{children:t,value:v}))}function l2({children:e,location:t}){return VN(Dd(e),t)}function Dd(e,t=[]){let r=[];return N.Children.forEach(e,(s,a)=>{if(!N.isValidElement(s))return;let l=[...t,a];if(s.type===N.Fragment){r.push.apply(r,Dd(s.props.children,l));return}Ve(s.type===Td,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ve(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Dd(s.props.children,l)),r.push(o)}),r}var ni="get",si="application/x-www-form-urlencoded";function mc(e){return e!=null&&typeof e.tagName=="string"}function o2(e){return mc(e)&&e.tagName.toLowerCase()==="button"}function i2(e){return mc(e)&&e.tagName.toLowerCase()==="form"}function c2(e){return mc(e)&&e.tagName.toLowerCase()==="input"}function u2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function d2(e,t){return e.button===0&&(!t||t==="_self")&&!u2(e)}var _o=null;function f2(){if(_o===null)try{new FormData(document.createElement("form"),0),_o=!1}catch{_o=!0}return _o}var m2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gu(e){return e!=null&&!m2.has(e)?(Vr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${si}"`),null):e}function h2(e,t){let r,s,a,l,o;if(i2(e)){let c=e.getAttribute("action");s=c?fn(c,t):null,r=e.getAttribute("method")||ni,a=gu(e.getAttribute("enctype"))||si,l=new FormData(e)}else if(o2(e)||c2(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||c.getAttribute("action");if(s=i?fn(i,t):null,r=e.getAttribute("formmethod")||c.getAttribute("method")||ni,a=gu(e.getAttribute("formenctype"))||gu(c.getAttribute("enctype"))||si,l=new FormData(c,e),!f2()){let{name:u,type:f,value:h}=e;if(f==="image"){let d=u?`${u}.`:"";l.append(`${d}x`,"0"),l.append(`${d}y`,"0")}else u&&l.append(u,h)}}else{if(mc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ni,s=null,a=si,o=e}return l&&a==="text/plain"&&(o=l,l=void 0),{action:s,method:r.toLowerCase(),encType:a,formData:l,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rm(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function p2(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&fn(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function g2(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x2(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function v2(e,t,r){let s=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let o=await g2(l,r);return o.links?o.links():[]}return[]}));return w2(s.flat(1).filter(x2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function wp(e,t,r,s,a,l){let o=(i,u)=>r[u]?i.route.id!==r[u].route.id:!0,c=(i,u)=>{var f;return r[u].pathname!==i.pathname||((f=r[u].route.path)==null?void 0:f.endsWith("*"))&&r[u].params["*"]!==i.params["*"]};return l==="assets"?t.filter((i,u)=>o(i,u)||c(i,u)):l==="data"?t.filter((i,u)=>{var f;let h=s.routes[i.route.id];if(!h||!h.hasLoader)return!1;if(o(i,u)||c(i,u))return!0;if(i.route.shouldRevalidate){let d=i.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:i.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function b2(e,t,{includeHydrateFallback:r}={}){return y2(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function y2(e){return[...new Set(e)]}function j2(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function w2(e,t){let r=new Set;return new Set(t),e.reduce((s,a)=>{let l=JSON.stringify(j2(a));return r.has(l)||(r.add(l),s.push({key:l,link:a})),s},[])}function Yv(){let e=N.useContext(ha);return rm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function N2(){let e=N.useContext(fc);return rm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nm=N.createContext(void 0);nm.displayName="FrameworkContext";function Gv(){let e=N.useContext(nm);return rm(e,"You must render this element inside a <HydratedRouter> element"),e}function k2(e,t){let r=N.useContext(nm),[s,a]=N.useState(!1),[l,o]=N.useState(!1),{onFocus:c,onBlur:i,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=t,d=N.useRef(null);N.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=g=>{g.forEach(p=>{o(p.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[e]),N.useEffect(()=>{if(s){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[s]);let v=()=>{a(!0)},j=()=>{a(!1),o(!1)};return r?e!=="intent"?[l,d,{}]:[l,d,{onFocus:Ra(c,v),onBlur:Ra(i,j),onMouseEnter:Ra(u,v),onMouseLeave:Ra(f,j),onTouchStart:Ra(h,v)}]:[!1,d,{}]}function Ra(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function S2({page:e,...t}){let{router:r}=Yv(),s=N.useMemo(()=>Iv(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?N.createElement(E2,{page:e,matches:s,...t}):null}function C2(e){let{manifest:t,routeModules:r}=Gv(),[s,a]=N.useState([]);return N.useEffect(()=>{let l=!1;return v2(e,t,r).then(o=>{l||a(o)}),()=>{l=!0}},[e,t,r]),s}function E2({page:e,matches:t,...r}){let s=Ns(),{manifest:a,routeModules:l}=Gv(),{basename:o}=Yv(),{loaderData:c,matches:i}=N2(),u=N.useMemo(()=>wp(e,t,i,a,s,"data"),[e,t,i,a,s]),f=N.useMemo(()=>wp(e,t,i,a,s,"assets"),[e,t,i,a,s]),h=N.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let j=new Set,m=!1;if(t.forEach(g=>{var p;let b=a.routes[g.route.id];!b||!b.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in c&&(p=l[g.route.id])!=null&&p.shouldRevalidate||b.hasClientLoader?m=!0:j.add(g.route.id))}),j.size===0)return[];let y=p2(e,o,"data");return m&&j.size>0&&y.searchParams.set("_routes",t.filter(g=>j.has(g.route.id)).map(g=>g.route.id).join(",")),[y.pathname+y.search]},[o,c,s,a,u,t,e,l]),d=N.useMemo(()=>b2(f,a),[f,a]),v=C2(f);return N.createElement(N.Fragment,null,h.map(j=>N.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),d.map(j=>N.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),v.map(({key:j,link:m})=>N.createElement("link",{key:j,nonce:r.nonce,...m})))}function $2(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Kv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kv&&(window.__reactRouterVersion="7.8.0")}catch{}function _2({basename:e,children:t,window:r}){let s=N.useRef();s.current==null&&(s.current=gN({window:r,v5Compat:!0}));let a=s.current,[l,o]=N.useState({action:a.action,location:a.location}),c=N.useCallback(i=>{N.startTransition(()=>o(i))},[o]);return N.useLayoutEffect(()=>a.listen(c),[a,c]),N.createElement(a2,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var Jv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xv=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:o,target:c,to:i,preventScrollReset:u,viewTransition:f,...h},d){let{basename:v}=N.useContext(Kr),j=typeof i=="string"&&Jv.test(i),m,y=!1;if(typeof i=="string"&&j&&(m=i,Kv))try{let _=new URL(window.location.href),P=i.startsWith("//")?new URL(_.protocol+i):new URL(i),z=fn(P.pathname,v);P.origin===_.origin&&z!=null?i=z+P.search+P.hash:y=!0}catch{Vr(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=WN(i,{relative:s}),[p,b,x]=k2(r,h),C=M2(i,{replace:l,state:o,target:c,preventScrollReset:u,relative:s,viewTransition:f});function O(_){e&&e(_),_.defaultPrevented||C(_)}let D=N.createElement("a",{...h,...x,href:m||g,onClick:y||a?e:O,ref:$2(d,b),target:c,"data-discover":!j&&t==="render"?"true":void 0});return p&&!j?N.createElement(N.Fragment,null,D,N.createElement(S2,{page:g})):D});Xv.displayName="Link";var O2=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:o,children:c,...i},u){let f=Kl(l,{relative:i.relative}),h=Ns(),d=N.useContext(fc),{navigator:v,basename:j}=N.useContext(Kr),m=d!=null&&L2(f)&&o===!0,y=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,g=h.pathname,p=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(g=g.toLowerCase(),p=p?p.toLowerCase():null,y=y.toLowerCase()),p&&j&&(p=fn(p,j)||p);const b=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let x=g===y||!s&&g.startsWith(y)&&g.charAt(b)==="/",C=p!=null&&(p===y||!s&&p.startsWith(y)&&p.charAt(y.length)==="/"),O={isActive:x,isPending:C,isTransitioning:m},D=x?e:void 0,_;typeof r=="function"?_=r(O):_=[r,x?"active":null,C?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(O):a;return N.createElement(Xv,{...i,"aria-current":D,className:_,ref:u,style:P,to:l,viewTransition:o},typeof c=="function"?c(O):c)});O2.displayName="NavLink";var T2=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:a,state:l,method:o=ni,action:c,onSubmit:i,relative:u,preventScrollReset:f,viewTransition:h,...d},v)=>{let j=I2(),m=A2(c,{relative:u}),y=o.toLowerCase()==="get"?"get":"post",g=typeof c=="string"&&Jv.test(c),p=b=>{if(i&&i(b),b.defaultPrevented)return;b.preventDefault();let x=b.nativeEvent.submitter,C=(x==null?void 0:x.getAttribute("formmethod"))||o;j(x||b.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:a,state:l,relative:u,preventScrollReset:f,viewTransition:h})};return N.createElement("form",{ref:v,method:y,action:m,onSubmit:s?i:p,...d,"data-discover":!g&&e==="render"?"true":void 0})});T2.displayName="Form";function D2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qv(e){let t=N.useContext(ha);return Ve(t,D2(e)),t}function M2(e,{target:t,replace:r,state:s,preventScrollReset:a,relative:l,viewTransition:o}={}){let c=HN(),i=Ns(),u=Kl(e,{relative:l});return N.useCallback(f=>{if(d2(f,t)){f.preventDefault();let h=r!==void 0?r:wl(i)===wl(u);c(e,{replace:h,state:s,preventScrollReset:a,relative:l,viewTransition:o})}},[i,c,u,r,s,t,e,a,l,o])}var P2=0,R2=()=>`__${String(++P2)}__`;function I2(){let{router:e}=Qv("useSubmit"),{basename:t}=N.useContext(Kr),r=t2();return N.useCallback(async(s,a={})=>{let{action:l,method:o,encType:c,formData:i,body:u}=h2(s,t);if(a.navigate===!1){let f=a.fetcherKey||R2();await e.fetch(f,r,a.action||l,{preventScrollReset:a.preventScrollReset,formData:i,body:u,formMethod:a.method||o,formEncType:a.encType||c,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:i,body:u,formMethod:a.method||o,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function A2(e,{relative:t}={}){let{basename:r}=N.useContext(Kr),s=N.useContext(xn);Ve(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Kl(e||".",{relative:t})},o=Ns();if(e==null){l.search=o.search;let c=new URLSearchParams(l.search),i=c.getAll("index");if(i.some(u=>u==="")){c.delete("index"),i.filter(f=>f).forEach(f=>c.append("index",f));let u=c.toString();l.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:sn([r,l.pathname])),wl(l)}function L2(e,{relative:t}={}){let r=N.useContext(Bv);Ve(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Qv("useViewTransitionState"),a=Kl(e,{relative:t});if(!r.isTransitioning)return!1;let l=fn(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=fn(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Pi(a.pathname,o)!=null||Pi(a.pathname,l)!=null}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Zv={exports:{}},hc={};/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var z2=N,F2=Symbol.for("react.element"),U2=Symbol.for("react.fragment"),B2=Object.prototype.hasOwnProperty,W2=z2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H2={key:!0,ref:!0,__self:!0,__source:!0};function eb(e,t,r){var s,a={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)B2.call(t,s)&&!H2.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:F2,type:e,key:l,ref:o,props:a,_owner:W2.current}}hc.Fragment=U2;hc.jsx=eb;hc.jsxs=eb;Zv.exports=hc;var n=Zv.exports,tb,Np=jv;tb=Np.createRoot,Np.hydrateRoot;const xt=[];for(let e=0;e<256;++e)xt.push((e+256).toString(16).slice(1));function q2(e,t=0){return(xt[e[t+0]]+xt[e[t+1]]+xt[e[t+2]]+xt[e[t+3]]+"-"+xt[e[t+4]]+xt[e[t+5]]+"-"+xt[e[t+6]]+xt[e[t+7]]+"-"+xt[e[t+8]]+xt[e[t+9]]+"-"+xt[e[t+10]]+xt[e[t+11]]+xt[e[t+12]]+xt[e[t+13]]+xt[e[t+14]]+xt[e[t+15]]).toLowerCase()}let xu;const V2=new Uint8Array(16);function Y2(){if(!xu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xu=crypto.getRandomValues.bind(crypto)}return xu(V2)}const G2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kp={randomUUID:G2};function K2(e,t,r){var s;if(kp.randomUUID&&!e)return kp.randomUUID();e=e||{};const a=e.random??((s=e.rng)==null?void 0:s.call(e))??Y2();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,q2(a)}const Fe="https://na-uchi.onrender.com",J2={transports:["websocket","polling"],timeout:1e4,forceNew:!0,upgrade:!0,rememberUpgrade:!0},rb=N.createContext(void 0),ht=()=>{const e=N.useContext(rb);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Cs=()=>{try{const e=localStorage.getItem("tutoring_users");return e?JSON.parse(e):[]}catch{return[]}},Oo=e=>{try{localStorage.setItem("tutoring_users",JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users"),storageArea:localStorage})),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users")}}))}catch{}},To=e=>{try{localStorage.setItem("tutoring_currentUser",JSON.stringify(e))}catch{}},X2=()=>{try{const e=localStorage.getItem("tutoring_currentUser");return e?JSON.parse(e):null}catch{return null}},vu=()=>{try{["tutoring_teacherProfiles","tutoring_studentProfiles","tutoring_timeSlots","tutoring_lessons","tutoring_chats","tutoring_posts","tutoring_notifications"].forEach(e=>{localStorage.removeItem(e),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:e,newValue:null,oldValue:null}}))})}catch{}},Q2=({children:e})=>{const[t,r]=N.useState(()=>{try{return X2()}catch{return null}}),[s,a]=N.useState(!1);let l=null;try{const d=A.useContext(require("./DataContext").DataContext);d&&(l=d.deleteUserData)}catch{}if(N.useEffect(()=>{const d=setTimeout(()=>{try{const v=Cs();a(!0)}catch{a(!0)}},100);return()=>clearTimeout(d)},[]),!s)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Инициализация авторизации..."})]})});const o=async(d,v)=>{await new Promise(m=>setTimeout(m,1e3));const j=Cs().find(m=>m.email===d);return j?(r(j),To(j),!0):(alert("Пользователь с таким email не найден. Пожалуйста, зарегистрируйтесь."),!1)},c=async(d,v,j,m,y,g)=>{try{vu();const p=await fetch(`${Fe}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:v,name:j,nickname:m,role:y,phone:g})});if(!p.ok){const C=await p.text();try{const O=JSON.parse(C);alert(O.error||"Ошибка регистрации на сервере")}catch{alert("Ошибка регистрации на сервере. Используется локальная регистрация.")}throw new Error("Server registration failed")}const b=await p.json(),x=[...Cs(),b];Oo(x),r(b),To(b);try{const C=await fetch(`${Fe}/api/sync`);if(C.ok){const O=await C.json();console.log("✅ Данные синхронизированы после регистрации"),O.teacherProfiles&&localStorage.setItem("tutoring_teacherProfiles",JSON.stringify(O.teacherProfiles)),O.studentProfiles&&localStorage.setItem("tutoring_studentProfiles",JSON.stringify(O.studentProfiles));const D=[];O.teacherProfiles&&Object.entries(O.teacherProfiles).forEach(([_,P])=>{D.push({id:_,email:P.email||"",name:P.name||"",nickname:P.nickname||"",role:"teacher",phone:P.phone||"",profile:P})}),O.studentProfiles&&Object.entries(O.studentProfiles).forEach(([_,P])=>{D.push({id:_,email:P.email||"",name:P.name||"",nickname:P.nickname||"",role:"student",phone:P.phone||"",profile:P})}),localStorage.setItem("tutoring_users",JSON.stringify(D)),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_users",newValue:JSON.stringify(D)}}))}}catch(C){console.warn("⚠️ Не удалось синхронизировать данные после регистрации:",C)}return!0}catch{const p=Cs(),b=p.some(_=>_.email===d),x=p.some(_=>_.nickname===m);if(b)return alert("Пользователь с таким email уже существует"),!1;if(x)return alert("Пользователь с таким никнеймом уже существует"),!1;const C=y==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""},O={id:K2(),email:d,name:j,nickname:m,role:y,phone:g,profile:C,avatar:C.avatar},D=[...p,O];if(Oo(D),r(O),To(O),y==="teacher"){const _=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}");_[O.id]=C,localStorage.setItem("tutoring_teacherProfiles",JSON.stringify(_)),console.log("✅ Профиль преподавателя сохранен локально:",O.id),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_teacherProfiles",newValue:JSON.stringify(_)}}))}if(y==="student"){const _=JSON.parse(localStorage.getItem("tutoring_studentProfiles")||"{}");_[O.id]=C,localStorage.setItem("tutoring_studentProfiles",JSON.stringify(_)),console.log("✅ Профиль студента сохранен локально:",O.id),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_studentProfiles",newValue:JSON.stringify(_)}}))}try{const _=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}"),P=JSON.parse(localStorage.getItem("tutoring_studentProfiles")||"{}"),z=JSON.parse(localStorage.getItem("tutoring_users")||"[]");if(Object.keys(_).length>0||Object.keys(P).length>0){const L=await fetch(`${Fe}/api/upload-local-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherProfiles:_,studentProfiles:P,users:z})});if(L.ok){const H=await L.json();console.log("✅ Локальные данные загружены на сервер:",H),alert("Регистрация выполнена локально и данные синхронизированы с сервером!")}else console.warn("⚠️ Не удалось загрузить локальные данные на сервер"),alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу.")}else alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу.")}catch(_){console.warn("⚠️ Ошибка загрузки локальных данных на сервер:",_),alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу.")}return!0}},i=()=>{r(null),localStorage.removeItem("tutoring_currentUser"),vu()},u=d=>{if(t){const v={...t,profile:d,avatar:d.avatar};r(v),To(v);const j=Cs().map(m=>m.id===t.id?v:m);Oo(j),typeof window<"u"&&fetch(`${Fe}/api/updateProfile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,profileData:d,role:t.role})}).then(m=>{if(m.ok){console.log("Profile updated successfully on server");const y=window.socket;y&&y.emit("profileUpdated",{userId:t.id,profileData:d,role:t.role})}else console.error("Failed to update profile on server:",m.status)}).catch(m=>{console.error("Failed to update profile on server:",m)})}},f=()=>{r(null),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser"),vu()},h=async()=>{if(!t)return alert("Пользователь не найден"),!1;if(!window.confirm("Вы уверены, что хотите удалить свой аккаунт? Это действие нельзя отменить. Все ваши данные будут безвозвратно удалены."))return!1;try{(await fetch(`${Fe}/api/delete-user`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id,role:t.role})})).ok||console.warn("Не удалось удалить пользователя с сервера, продолжаем локальное удаление");const d=Cs().filter(v=>v.id!==t.id);if(Oo(d),t.role==="teacher"){const v=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}");delete v[t.id],localStorage.setItem("tutoring_teacherProfiles",JSON.stringify(v)),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_teacherProfiles",newValue:JSON.stringify(v)}}))}else if(t.role==="student"){const v=JSON.parse(localStorage.getItem("tutoring_studentProfiles")||"{}");delete v[t.id],localStorage.setItem("tutoring_studentProfiles",JSON.stringify(v)),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_studentProfiles",newValue:JSON.stringify(v)}}))}if(l)l(t.id);else{const v=JSON.parse(localStorage.getItem("tutoring_timeSlots")||"[]").filter(p=>p.teacherId!==t.id);localStorage.setItem("tutoring_timeSlots",JSON.stringify(v));const j=JSON.parse(localStorage.getItem("tutoring_lessons")||"[]").filter(p=>p.teacherId!==t.id&&p.studentId!==t.id);localStorage.setItem("tutoring_lessons",JSON.stringify(j));const m=JSON.parse(localStorage.getItem("tutoring_chats")||"[]").filter(p=>!p.participants.includes(t.id));localStorage.setItem("tutoring_chats",JSON.stringify(m));const y=JSON.parse(localStorage.getItem("tutoring_posts")||"[]").filter(p=>p.userId!==t.id);localStorage.setItem("tutoring_posts",JSON.stringify(y));const g=JSON.parse(localStorage.getItem("tutoring_notifications")||"[]").filter(p=>p.userId!==t.id);localStorage.setItem("tutoring_notifications",JSON.stringify(g))}return i(),alert("Аккаунт успешно удален"),!0}catch(d){return console.error("Ошибка при удалении аккаунта:",d),alert("Произошла ошибка при удалении аккаунта"),!1}};return n.jsx(rb.Provider,{value:{user:t,login:o,register:c,logout:i,updateProfile:u,clearAllUsers:f,deleteAccount:h},children:e})},nb=N.createContext(void 0),$t=()=>{const e=N.useContext(nb);if(!e)throw new Error("useData must be used within a DataProvider");return e},lr=(e,t)=>{try{const r=localStorage.getItem(e);if(r){const s=JSON.parse(r);return Array.isArray(s)?s:t}}catch{}return t},re=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch{}},Do=()=>{const e=new Date,t=new Date(e);t.setDate(t.getDate()+1);const r=new Date(e);r.setDate(r.getDate()+2);const s=new Date(e);return s.setDate(s.getDate()+7),{timeSlots:[],lessons:[],chats:[],studentProfiles:{},teacherProfiles:{}}},Z2=({children:e})=>{const t=N.useRef(null),[r,s]=N.useState(!0),[a,l]=N.useState(()=>{const k=lr("tutoring_timeSlots",[]);if(k.length>0)return k;const $=Do();return re("tutoring_timeSlots",$.timeSlots),$.timeSlots}),[o,c]=N.useState(()=>lr("tutoring_lessons",[])),[i,u]=N.useState(()=>lr("tutoring_chats",[])),[f,h]=N.useState(()=>{const k=lr("tutoring_studentProfiles",{});if(Object.keys(k).length>0)return k;const $=Do();return re("tutoring_studentProfiles",$.studentProfiles),$.studentProfiles}),[d,v]=N.useState(()=>{const k=lr("tutoring_teacherProfiles",{});if(Object.keys(k).length>0)return console.log("📱 Загружены локальные профили преподавателей:",Object.keys(k).length),k;const $=Do();return re("tutoring_teacherProfiles",$.teacherProfiles),$.teacherProfiles}),[j,m]=N.useState(()=>{try{const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]");console.log("🔄 Загружаем пользователей из localStorage при инициализации:",k.length);const $=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]");console.log("👨‍🏫 Зарегистрированных преподавателей (постоянно сохраненных):",$.length);const w=[...k];$.forEach(S=>{w.find(I=>I.id===S.id)||w.push(S)});const E=w.filter(S=>S.role==="teacher");return console.log("👨‍🏫 Зарегистрированных преподавателей (включая постоянно сохраненных):",E.length,E.map(S=>({id:S.id,name:S.name}))),w}catch(k){return console.error("❌ Ошибка загрузки пользователей из localStorage:",k),[]}}),[y,g]=N.useState(()=>lr("tutoring_posts",[])),[p,b]=N.useState(()=>lr("tutoring_notifications",[])),{user:x,updateProfile:C}=ht(),O=()=>{const k=lr("tutoring_timeSlots",[]),$=lr("tutoring_lessons",[]),w=lr("tutoring_chats",[]),E=Do(),S=(k.length>0?k:E.timeSlots).filter((I,W,te)=>W===te.findIndex(Ce=>Ce.id===I.id));l(S),c($),u(w),h(E.studentProfiles),re("tutoring_timeSlots",S),re("tutoring_lessons",$),re("tutoring_chats",w),re("tutoring_studentProfiles",E.studentProfiles),gt()},D=async()=>{try{console.log("🔄 Загружаем пользователей с сервера Render...");const k=await fetch(`${Fe}/api/users`);if(!k.ok)return console.warn("⚠️ Не удалось загрузить пользователей с сервера:",k.status),[];const $=await k.json();console.log("✅ Пользователи загружены с сервера Render:",$.length);const w=JSON.parse(localStorage.getItem("tutoring_users")||"[]");console.log("📱 Локальные пользователи:",w.length);const E=[...w,...$].filter((S,I,W)=>I===W.findIndex(te=>te.id===S.id));return console.log("✅ Уникальные пользователи:",E.length),console.log("👨‍🏫 Преподаватели (включая офлайн):",E.filter(S=>S.role==="teacher").length),console.log("👨‍🎓 Студенты:",E.filter(S=>S.role==="student").length),m(E),localStorage.setItem("tutoring_users",JSON.stringify(E)),E}catch(k){return console.error("❌ Ошибка загрузки пользователей с сервера:",k),[]}},_=async()=>{try{console.log("Loading lessons from server...");const k=await fetch(`${Fe}/api/lessons`);if(!k.ok)return console.error("Failed to load lessons from server:",k.status),[];const $=await k.json();console.log("Loaded lessons from server:",$.length,$);const w=JSON.parse(localStorage.getItem("tutoring_lessons")||"[]");console.log("Local lessons:",w.length,w);const E=[...w,...$].filter((S,I,W)=>I===W.findIndex(te=>te.id===S.id));return console.log("Setting lessons in context:",E.length,E),c(E),re("tutoring_lessons",E),E}catch(k){return console.error("Error loading lessons from server:",k),[]}},P=()=>{try{console.log("🔄 Принудительное обновление списка пользователей...");const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]");console.log("👥 Загружено пользователей из localStorage:",k.length);const $=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]");console.log("👨‍🏫 Зарегистрированных преподавателей (постоянно сохраненных):",$.length);const w=[...k];$.forEach(W=>{w.find(te=>te.id===W.id)?console.log("⏭️ Преподаватель уже существует:",W.name):(w.push(W),console.log("✅ Добавлен зарегистрированный преподаватель:",W.name))});const E=w.filter(W=>W.role==="teacher");console.log("👨‍🏫 Зарегистрированных преподавателей (включая постоянно сохраненных):",E.length,E.map(W=>({id:W.id,name:W.name})));const S=(j||[]).filter(W=>W.role==="teacher");E.length>S.length?(m(w),console.log("✅ Обновлены пользователи, добавлено преподавателей:",E.length-S.length)):console.log("⏭️ Пользователи уже актуальны, обновление не требуется");const I=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}");console.log("📱 Обновляем teacherProfiles из localStorage:",Object.keys(I).length),v(I),console.log("✅ Обновление пользователей завершено")}catch(k){console.error("❌ Ошибка при обновлении пользователей:",k),console.log("⚠️ Сохраняем текущих пользователей при ошибке")}},z=async()=>{try{console.log("👨‍🏫 Принудительная загрузка зарегистрированных преподавателей...");try{await D()}catch(S){console.warn("⚠️ Не удалось загрузить с сервера, используем локальные данные:",S)}const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),$=k.filter(S=>S.role==="teacher");console.log("📱 Зарегистрированных преподавателей (включая офлайн):",$.length),$.forEach(S=>{console.log(`  - ${S.name} (${S.email}) - ID: ${S.id} - Статус: зарегистрирован`)});const w=$.map(S=>({...S,isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()}));localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(w)),m(k);const E=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}");return v(E),console.log("🔄 Принудительное обновление состояния для гарантии видимости репетиторов..."),console.log("✅ Зарегистрированные преподаватели загружены (независимо от онлайн статуса)"),$}catch(k){return console.error("❌ Ошибка загрузки зарегистрированных преподавателей:",k),[]}},L=()=>{console.log("🔄 Принудительное обновление всех данных..."),z().catch(console.error),P(),D().catch(console.error),_().catch(console.error),t.current&&r&&(t.current.emit("requestAllSlots"),t.current.emit("requestAllUsers")),H().catch(k=>{console.error("❌ Ошибка при синхронизации данных:",k)})},H=async()=>{try{console.log("🔄 Принудительная синхронизация данных с сервера..."),await D();const k=await fetch(`${Fe}/api/sync`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!k.ok){console.warn("⚠️ Не удалось синхронизировать данные с сервера:",k.status,k.statusText);return}const $=k.headers.get("content-type");if(!$||!$.includes("application/json")){console.warn("⚠️ Сервер вернул не-JSON ответ:",$);return}const w=await k.json();console.log("✅ Данные синхронизации получены:",Object.keys(w)),w.timeSlots&&(l(w.timeSlots),re("tutoring_timeSlots",w.timeSlots),console.log("✅ Слоты обновлены:",w.timeSlots.length)),w.lessons&&(c(w.lessons),re("tutoring_lessons",w.lessons),console.log("✅ Уроки обновлены:",w.lessons.length)),w.chats&&(u(w.chats),re("tutoring_chats",w.chats),console.log("✅ Чаты обновлены:",w.chats.length)),w.posts&&(g(w.posts),re("tutoring_posts",w.posts),console.log("✅ Посты обновлены:",w.posts.length));const E=[];w.teacherProfiles&&(console.log("👨‍🏫 Обновляем профили преподавателей:",Object.keys(w.teacherProfiles).length),Object.entries(w.teacherProfiles).forEach(([S,I])=>{const W=I,te={id:S,email:String(W.email||""),name:String(W.name||""),nickname:String(W.nickname||""),role:"teacher",phone:String(W.phone||""),profile:W};E.push(te),console.log("👨‍🏫 Добавлен преподаватель:",te.id,te.name,te.email)})),w.studentProfiles&&Object.entries(w.studentProfiles).forEach(([S,I])=>{const W=I;E.push({id:S,email:String(W.email||""),name:String(W.name||""),nickname:String(W.nickname||""),role:"student",phone:String(W.phone||""),profile:W})}),m(E),re("tutoring_users",E),console.log("✅ Синхронизация завершена успешно"),console.log("📊 Итоговые данные:"),console.log("- Всего пользователей:",E.length),console.log("- Преподавателей:",E.filter(S=>S.role==="teacher").length),console.log("- Студентов:",E.filter(S=>S.role==="student").length),console.log("- Пользователи:",E)}catch(k){console.warn("Error syncing data (continuing with local data):",k)}},T=async()=>{try{console.log("📤 Загружаем локальные данные на сервер...");const k=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}"),$=JSON.parse(localStorage.getItem("tutoring_studentProfiles")||"{}"),w=JSON.parse(localStorage.getItem("tutoring_users")||"[]");console.log("📊 Локальные данные:"),console.log(`   👨‍🏫 Преподаватели: ${Object.keys(k).length}`),console.log(`   👨‍🎓 Студенты: ${Object.keys($).length}`),console.log(`   👥 Пользователи: ${w.length}`);const E=await fetch(`${Fe}/api/upload-local-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherProfiles:k,studentProfiles:$,users:w})});if(!E.ok){const I=await E.json();throw new Error(I.error||"Ошибка загрузки данных на сервер")}const S=await E.json();return console.log("✅ Локальные данные успешно загружены на сервер:",S),await H(),S}catch(k){throw console.error("❌ Ошибка загрузки локальных данных на сервер:",k),k}},V=async k=>{try{console.log(`🗑️ Удаляем пользователя: ${k}`);const $=await fetch(`${Fe}/api/users/${k}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!$.ok){const E=await $.json();throw new Error(E.error||"Ошибка удаления пользователя")}const w=await $.json();return console.log("✅ Пользователь успешно удален:",w),m(E=>{const S=E.filter(I=>I.id!==k);return re("tutoring_users",S),S}),v(E=>{const S={...E};return delete S[k],re("tutoring_teacherProfiles",S),S}),h(E=>{const S={...E};return delete S[k],re("tutoring_studentProfiles",S),S}),l(E=>E.filter(S=>S.teacherId!==k)),c(E=>E.filter(S=>S.teacherId!==k&&S.studentId!==k)),u(E=>E.filter(S=>!S.participants.includes(k))),g(E=>E.filter(S=>S.userId!==k)),b(E=>E.filter(S=>S.userId!==k)),!0}catch($){return console.error("❌ Ошибка удаления пользователя:",$),!1}};N.useEffect(()=>{console.log("🔄 Инициализация: загружаем локальных репетиторов..."),z();const k=async()=>{try{const $=await fetch(`${Fe}/api/health`,{method:"GET",signal:AbortSignal.timeout(5e3)});if($.ok){const w=await $.json();return console.log("Server health check passed:",w),!0}return!1}catch($){return console.warn("Server not available, working in offline mode:",$),!1}};(async()=>{if(!await k()){console.log("Server not available, loading local data only"),O(),_(),z().catch(console.error);return}console.log("Server is available, initializing Socket.IO connection...");const $=ri(Fe,{...J2,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:1e4});return t.current=$,$.on("connect",()=>{s(!0),console.log("✅ Connected to server via Socket.IO"),console.log(`🌐 Server URL: ${Fe}`),console.log(`🔌 Socket ID: ${$.id}`),console.log("🔄 Первоначальное подключение - обновляем данные..."),L();const w=lr("tutoring_timeSlots",[]);w.length>0&&w.forEach(E=>{t.current&&t.current.emit("createSlot",E)}),t.current&&(t.current.emit("requestAllPosts"),x&&(t.current.emit("requestUserNotifications",x.id),t.current.emit("subscribeNotifications",x.id)))}),$.on("disconnect",()=>{console.log("🔌 Disconnected from server")}),$.on("reconnect",w=>{s(!0),console.log(`🔄 Reconnected to server after ${w} attempts`),console.log("🔄 Восстановление соединения - обновляем данные..."),L()}),$.on("reconnect_attempt",w=>{console.log(`🔄 Reconnection attempt ${w}`)}),$.on("connect_error",w=>{console.warn("❌ Socket.IO connection error:",w),console.warn("🔧 Working in offline mode until reconnection..."),O(),_(),z().catch(console.error)}),$.on("initialData",w=>{const E=[...lr("tutoring_timeSlots",[]),...w.timeSlots].filter((S,I,W)=>I===W.findIndex(te=>te.id===S.id));l(E),c(w.lessons),re("tutoring_timeSlots",E),re("tutoring_lessons",w.lessons),w.chats&&(u(w.chats),re("tutoring_chats",w.chats))}),$.on("allSlots",w=>{console.log("✅ Received all slots from server:",w.length),l(w),re("tutoring_timeSlots",w),console.log("✅ All slots synchronized, total slots:",w.length)}),$.on("allUsers",w=>{m(w),re("tutoring_users",w)}),t.current&&r&&(t.current.emit("requestAllSlots"),t.current.emit("requestAllUsers")),$.on("slotCreated",w=>{console.log("✅ Slot created via WebSocket:",w),l(E=>{if(E.find(S=>S.id===w.id)){const S=E.map(I=>I.id===w.id?w:I);return re("tutoring_timeSlots",S),console.log("✅ Existing slot updated, total slots:",S.length),S}else{const S=[...E,w];re("tutoring_timeSlots",S),console.log("✅ New slot added, total slots:",S.length);try{const I=j||[];if(!I.find(W=>W.id===w.teacherId)){console.log("⚠️ Репетитор не найден в allUsers после создания слота, добавляем...");const W={id:w.teacherId,name:w.teacherName,avatar:w.teacherAvatar||"",role:"teacher",isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()},te=[...I,W];m(te),localStorage.setItem("tutoring_users",JSON.stringify(te));const Ce=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]");if(!Ce.find(pe=>pe.id===w.teacherId)){const pe=[...Ce,W];localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(pe)),console.log("✅ Репетитор добавлен в зарегистрированных преподавателей")}console.log("✅ Репетитор добавлен в allUsers для гарантии отображения")}}catch(I){console.error("❌ Ошибка при проверке видимости репетитора:",I)}return S}}),console.log("🔄 Принудительно обновляем данные после создания слота..."),H().catch(console.error)}),$.on("slotBooked",w=>{console.log("Slot booked via WebSocket:",w),l(E=>{const S=E.map(I=>I.id===w.slotId?{...I,isBooked:!0,bookedStudentId:w.bookedStudentId||w.lesson.studentId}:I);return re("tutoring_timeSlots",S),S}),c(E=>{if(!E.find(S=>S.id===w.lesson.id)){const S=[...E,w.lesson];return re("tutoring_lessons",S),console.log("New lesson added, total lessons:",S.length),S}return E})}),$.on("slotCancelled",w=>{console.log("Slot cancelled via WebSocket:",w),l(E=>{const S=E.map(I=>I.id===w.slotId?{...I,isBooked:!1,bookedStudentId:void 0}:I);return re("tutoring_timeSlots",S),S}),c(E=>{const S=E.filter(I=>I.id!==w.lessonId);return re("tutoring_lessons",S),console.log("Lesson removed, total lessons:",S.length),S})}),$.on("lessonBooked",w=>{console.log("Lesson booked via WebSocket:",w),c(E=>{if(!E.find(S=>S.id===w.id)){const S=[...E,w];return re("tutoring_lessons",S),console.log("New lesson added via WebSocket, total lessons:",S.length),S}return E})}),$.on("chatCreated",w=>{u(E=>{if(!E.find(S=>S.id===w.id)){const S=[...E,w];return re("tutoring_chats",S),S}return E})}),$.on("receiveMessage",w=>{u(E=>E.map(S=>{if(S.id===w.chatId){const I={...S,messages:[...S.messages,w.message],lastMessage:w.message};return re("tutoring_chats",E.map(W=>W.id===S.id?I:W)),I}return S}))}),$.on("chatDeleted",w=>{console.log("chatDeleted event received:",w),u(E=>{const S=E.filter(I=>I.id!==w.chatId);return console.log(`Chat ${w.chatId} removed from state. Total chats: ${S.length}`),re("tutoring_chats",S),S})}),$.on("chatMarkedAsRead",w=>{u(E=>{const S=E.map(I=>I.id===w.chatId?{...I,messages:I.messages.map(W=>({...W,isRead:!0}))}:I);return re("tutoring_chats",S),S})}),$.on("chatMessagesCleared",w=>{u(E=>{const S=E.map(I=>I.id===w.chatId?{...I,messages:[]}:I);return re("tutoring_chats",S),S})}),$.on("chatArchived",w=>{u(E=>{const S=E.map(I=>I.id===w.chatId?{...I,archived:!0}:I);return re("tutoring_chats",S),S})}),$.on("chatUnarchived",w=>{u(E=>{const S=E.map(I=>I.id===w.chatId?{...I,archived:!1}:I);return re("tutoring_chats",S),S})}),$.on("newNotification",w=>{b(E=>{const S=[...E,w];return re("tutoring_notifications",S),S})}),$.on("slotDeleted",w=>{console.log("Slot deleted via WebSocket:",w),l(E=>{const S=E.filter(I=>I.id!==w.slotId);return re("tutoring_timeSlots",S),console.log("Slot removed, total slots:",S.length),S})}),$.on("allLessons",w=>{console.log("Received all lessons from server:",w.length),c(w),re("tutoring_lessons",w)}),$.on("dataUpdated",w=>{if(console.log("Received dataUpdated event:",w.type),w.timeSlots&&(l(w.timeSlots),re("tutoring_timeSlots",w.timeSlots),console.log("Slots updated via dataUpdated:",w.timeSlots.length)),w.lessons&&(c(w.lessons),re("tutoring_lessons",w.lessons),console.log("Lessons updated via dataUpdated:",w.lessons.length)),w.teacherProfiles){v(w.teacherProfiles),re("tutoring_teacherProfiles",w.teacherProfiles);const E=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(S=>S.role==="teacher"&&w.teacherProfiles[S.id]?{...S,profile:w.teacherProfiles[S.id]}:S);m(E),re("tutoring_users",E)}if(w.studentProfiles){h(w.studentProfiles),re("tutoring_studentProfiles",w.studentProfiles);const E=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(S=>S.role==="student"&&w.studentProfiles[S.id]?{...S,profile:w.studentProfiles[S.id]}:S);m(E),re("tutoring_users",E)}}),$.on("userRegistered",w=>{m(E=>{if(!E.find(S=>S.id===w.id)){const S=[...E,w];if(re("tutoring_users",S),w.role==="teacher"){const I=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]"),W={...w,isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()},te=[...I,W];localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(te)),console.log("👨‍🏫 Преподаватель сохранен для постоянного отображения:",w.name)}return S}return E});try{z(),t.current&&r&&t.current.emit("requestAllUsers")}catch{}}),$.on("userDeleted",w=>{console.log("🗑️ Получено событие удаления пользователя:",w),m(E=>{const S=E.filter(I=>I.id!==w.userId);return re("tutoring_users",S),S}),w.userRole==="teacher"?v(E=>{const S={...E};return delete S[w.userId],re("tutoring_teacherProfiles",S),S}):w.userRole==="student"&&h(E=>{const S={...E};return delete S[w.userId],re("tutoring_studentProfiles",S),S}),l(E=>E.filter(S=>S.teacherId!==w.userId)),c(E=>E.filter(S=>S.teacherId!==w.userId&&S.studentId!==w.userId)),u(E=>E.filter(S=>!S.participants.includes(w.userId))),g(E=>E.filter(S=>S.userId!==w.userId)),b(E=>E.filter(S=>S.userId!==w.userId)),console.log("✅ Пользователь удален из локального состояния")}),t.current&&t.current.on("lessonCompleted",w=>{if(c(E=>{const S=E.map(I=>I.id===w.lesson.id?w.lesson:I);return re("tutoring_lessons",S),S}),x&&x.role==="teacher"&&w.lesson.status==="completed"){const E={...x.profile};E.lessonsCount=(E.lessonsCount||0)+1,C(E)}}),$.on("studentProfiles",w=>{h(w||{});const E=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([S,I])=>{const W=E.findIndex(te=>te.id===S);W>=0?E[W]={...E[W],profile:I}:E.push({id:S,email:I.email||"",name:I.name||"",nickname:I.nickname||"",role:"student",phone:I.phone||"",profile:I})}),localStorage.setItem("tutoring_users",JSON.stringify(E)),m(E)}),$.on("teacherProfiles",w=>{v(w),re("tutoring_teacherProfiles",w);const E=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([S,I])=>{const W=E.findIndex(te=>te.id===S);W>=0?E[W]={...E[W],profile:I}:E.push({id:S,email:I.email||"",name:I.name||"",nickname:I.nickname||"",role:"teacher",phone:I.phone||"",profile:I})}),localStorage.setItem("tutoring_users",JSON.stringify(E)),m(E)}),$.on("studentProfileUpdated",w=>{h(E=>({...E,[w.studentId]:w.profile}))}),$.on("teacherProfileUpdated",w=>{try{const E=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(S=>S.id===w.teacherId?{...S,profile:w.profile,avatar:w.profile.avatar}:S);localStorage.setItem("tutoring_users",JSON.stringify(E)),m(E)}catch{}}),$.on("profileUpdated",w=>{try{const E=JSON.parse(localStorage.getItem("tutoring_users")||"[]");let S=!1;const I="userId"in w?w.userId:w.id,W="type"in w?w.type:w.role,te=w.profile,Ce=E.map(pe=>pe.id===I?(S=!0,{...pe,profile:te,avatar:te.avatar,name:te.name||pe.name,email:te.email||pe.email}):pe);S||Ce.push({id:I,role:W,profile:te,avatar:te.avatar,name:te.name||"",email:te.email||""}),localStorage.setItem("tutoring_users",JSON.stringify(Ce)),m(Ce),W==="teacher"?v(pe=>({...pe,[I]:te})):W==="student"&&h(pe=>({...pe,[I]:te})),console.log("Profile updated via WebSocket:",{userId:I,role:W,profile:te})}catch(E){console.error("Error processing profileUpdated event:",E)}}),$.on("userRegistered",w=>{try{const E=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),S=E.findIndex(I=>I.id===w.id);if(S>=0?E[S]=w:E.push(w),localStorage.setItem("tutoring_users",JSON.stringify(E)),m(E),w.role==="teacher"){const I=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]"),W={...w,isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()},te=[...I,W];localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(te)),console.log("👨‍🏫 Преподаватель сохранен для постоянного отображения:",w.name)}z().catch(console.error),t.current&&r&&t.current.emit("requestAllUsers")}catch{}}),$.on("allPosts",w=>{g(w),re("tutoring_posts",w)}),$.on("postCreated",w=>{g(E=>{const S=[w,...E];return re("tutoring_posts",S),S})}),$.on("postReactionUpdated",w=>{g(E=>{const S=E.map(I=>I.id===w.postId?{...I,reactions:w.reactions,likes:w.likes}:I);return re("tutoring_posts",S),S})}),$.on("postCommentAdded",w=>{g(E=>{const S=E.map(I=>I.id===w.postId?{...I,comments:[...I.comments,w.comment]}:I);return re("tutoring_posts",S),S})}),$.on("postEdited",w=>{g(E=>{const S=E.map(I=>I.id===w.postId?{...I,text:w.text,tags:w.tags,editedAt:w.editedAt}:I);return re("tutoring_posts",S),S})}),$.on("postDeleted",w=>{g(E=>{const S=E.filter(I=>I.id!==w.postId);return re("tutoring_posts",S),S})}),$.on("postBookmarkUpdated",w=>{g(E=>{const S=E.map(I=>I.id===w.postId?{...I,bookmarks:w.bookmarks}:I);return re("tutoring_posts",S),S})}),$.on("searchResults",w=>{}),$.on("userNotifications",w=>{b(w),re("tutoring_notifications",w)}),$.on("notificationMarkedAsRead",w=>{b(E=>{const S=E.map(I=>I.id===w.notificationId?{...I,isRead:!0,readAt:new Date().toISOString()}:I);return re("tutoring_notifications",S),S})}),$.on("allNotificationsMarkedAsRead",w=>{b(E=>{const S=E.map(I=>I.userId===w.userId?{...I,isRead:!0,readAt:new Date().toISOString()}:I);return re("tutoring_notifications",S),S})}),()=>{try{$.removeAllListeners()}catch{}try{$.disconnect()}catch{}t.current=null}})()},[]),N.useEffect(()=>{const k=w=>{if(w.key==="tutoring_users")try{const E=JSON.parse(w.newValue||"[]");m(E);const S=E.filter(I=>I.role==="teacher");console.log("🔄 Обновление репетиторов через localStorage:",S.length)}catch{m([])}},$=w=>{var E,S,I;if(((E=w.detail)==null?void 0:E.key)==="tutoring_users")try{const W=JSON.parse(w.detail.newValue||"[]");m(W),console.log("🔄 Пользователи обновлены через customStorage:",W.length)}catch{m([])}if(((S=w.detail)==null?void 0:S.key)==="tutoring_teacherProfiles")try{const W=JSON.parse(w.detail.newValue||"{}");v(W),console.log("🔄 Профили преподавателей обновлены через customStorage:",Object.keys(W).length)}catch(W){console.error("❌ Ошибка обновления профилей преподавателей:",W)}if(((I=w.detail)==null?void 0:I.key)==="tutoring_studentProfiles")try{const W=JSON.parse(w.detail.newValue||"{}");h(W),console.log("🔄 Профили студентов обновлены через customStorage:",Object.keys(W).length)}catch(W){console.error("❌ Ошибка обновления профилей студентов:",W)}};return window.addEventListener("storage",k),window.addEventListener("customStorage",$),()=>{window.removeEventListener("storage",k),window.removeEventListener("customStorage",$)}},[]),N.useEffect(()=>{re("tutoring_timeSlots",a),a.length>0&&(console.log("🔄 timeSlots изменились, принудительно синхронизируем с сервером..."),H().catch(console.error))},[a,H]),N.useEffect(()=>{re("tutoring_lessons",o)},[o]),N.useEffect(()=>{re("tutoring_chats",i)},[i]),N.useEffect(()=>{re("tutoring_posts",y)},[y]),N.useEffect(()=>{re("tutoring_notifications",p)},[p]),N.useEffect(()=>{x&&t.current&&r&&(t.current.emit("subscribeNotifications",x.id),t.current.emit("requestUserNotifications",x.id))},[x,r]);const ee=k=>{const $={...k,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};l(w=>{const E=[...w,$];return re("tutoring_timeSlots",E),E}),t.current&&r&&t.current.emit("createSlot",$)},R=async(k,$,w,E)=>new Promise((S,I)=>{if((E==null?void 0:E.mode)==="assign"&&(!$||!w)){alert("Ошибка: не выбран ученик для назначения урока!"),I(new Error("createSlot: assign mode without studentId/studentName"));return}const W=!!$,te={...k,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isBooked:W,...W?{bookedStudentId:$}:{}};l(Ce=>{const pe=[...Ce,te];return re("tutoring_timeSlots",pe),console.log("✅ Слот создан и сохранен локально:",te.id),pe});try{const Ce=j||[];if(Ce.find(pe=>pe.id===te.teacherId))console.log("✅ Репетитор уже существует в allUsers");else{console.log("⚠️ Репетитор не найден в allUsers, добавляем...");const pe={id:te.teacherId,name:te.teacherName,avatar:te.teacherAvatar||"",role:"teacher",isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()},U=[...Ce,pe];m(U),localStorage.setItem("tutoring_users",JSON.stringify(U));const Q=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]");if(!Q.find(me=>me.id===te.teacherId)){const me=[...Q,pe];localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(me)),console.log("✅ Репетитор добавлен в зарегистрированных преподавателей")}console.log("✅ Репетитор добавлен в allUsers для гарантии отображения")}}catch(Ce){console.error("❌ Ошибка при проверке видимости репетитора:",Ce)}if(t.current&&r?(t.current.emit("createSlot",te),console.log("📡 Слот отправлен на сервер")):console.log("⚠️ Нет соединения с сервером, слот сохранен локально"),W&&$&&w){const Ce={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:$,teacherId:te.teacherId,studentName:w,teacherName:te.teacherName,subject:te.subject,date:te.date,startTime:te.startTime,endTime:te.endTime,duration:te.duration,format:te.format,status:"scheduled",price:te.price,lessonType:te.lessonType};if(c(pe=>[...pe,Ce]),q($,te.teacherId,w,te.teacherName),x&&x.role==="teacher"){const pe={...x.profile};pe.students||(pe.students=[]),pe.students.includes($)||pe.students.push($),C(pe)}t.current&&r&&t.current.emit("bookSlot",{slotId:te.id,lesson:Ce,bookedStudentId:$})}S(te)}),F=(k,$,w,E)=>{const S=a.find(W=>W.id===k);if(!S||S.isBooked)return;if(x&&x.role==="teacher"){const W={...x.profile};W.students||(W.students=[]),W.students.includes($)||W.students.push($),C(W)}l(W=>W.map(te=>te.id===k?{...te,isBooked:!0,bookedStudentId:$}:te));const I={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:$,teacherId:S.teacherId,studentName:w,teacherName:S.teacherName,subject:S.subject,date:S.date,startTime:S.startTime,endTime:S.endTime,duration:S.duration,format:S.format,status:"scheduled",price:S.price,lessonType:S.lessonType,comment:E||""};c(W=>[...W,I]),q($,S.teacherId,w,S.teacherName),t.current&&r&&t.current.emit("bookSlot",{slotId:k,lesson:I,bookedStudentId:$})},B=k=>{const $=o.find(E=>E.id===k);if(!$)return;const w=a.find(E=>E.teacherId===$.teacherId&&E.date===$.date&&E.startTime===$.startTime);c(E=>E.filter(S=>S.id!==k)),w&&(l(E=>E.map(S=>S.id===w.id?{...S,isBooked:!1,bookedStudentId:void 0}:S)),t.current&&r&&t.current.emit("cancelSlot",{slotId:w.id,lessonId:k}))},G=(k,$,w)=>{const E=o.find(I=>I.id===k);if(!E)return;const S=new Date(`2000-01-01T${w}`);S.setMinutes(S.getMinutes()+E.duration),c(I=>I.map(W=>W.id===k?{...W,date:$,startTime:w,endTime:S.toTimeString().slice(0,5)}:W)),l(I=>I.map(W=>W.teacherId===E.teacherId&&W.date===E.date&&W.startTime===E.startTime?{...W,isBooked:!1,bookedStudentId:void 0}:W))},ae=k=>a.filter($=>{var w;if($.isBooked)return!1;const E=new Date($.date),S=new Date;if(S.setHours(0,0,0,0),E<S||k.grade&&k.grade!==""&&(!$.grades||!$.grades.includes(k.grade))||k.subject&&k.subject!==""&&$.subject!==k.subject||k.experience&&k.experience!==""&&$.experience!==k.experience||k.lessonType&&k.lessonType!==""&&$.lessonType!==k.lessonType||k.duration&&k.duration>0&&$.duration!==k.duration||k.format&&k.format!==""&&$.format!==k.format||k.minRating&&k.minRating>0&&($.rating||0)<k.minRating||k.goals&&k.goals.length>0&&(!$.goals||!k.goals.some(I=>$.goals.includes(I))))return!1;if(k.city&&k.city!==""){const I=j.find(te=>te.id===$.teacherId),W=((w=I==null?void 0:I.profile)==null?void 0:w.city)||"";if(W&&!W.toLowerCase().includes(k.city.toLowerCase()))return!1}return!0}),q=(k,$,w,E)=>{console.log("🔍 getOrCreateChat DEBUG:"),console.log("- Participant 1:",{id:k,name:w}),console.log("- Participant 2:",{id:$,name:E}),console.log("- Current chats count:",i.length);const S=i.find(W=>W.participants.includes(k)&&W.participants.includes($));if(S)return console.log("✅ Found existing chat:",S.id),S.id;console.log("🆕 Creating new chat...");const I={id:`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,participants:[k,$],participantNames:[w,E],messages:[]};if(console.log("📝 New chat created:",I.id),u(W=>{const te=[...W,I];return re("tutoring_chats",te),console.log("💾 Chat saved to localStorage, total chats:",te.length),te}),t.current&&r){console.log("📡 Sending chat to server..."),t.current.emit("createChat",I);const W={id:`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:$,type:"new_chat",title:"Новый чат",message:`${w} создал с вами чат`,isRead:!1,timestamp:new Date().toISOString(),data:{chatId:I.id,studentId:k,studentName:w}};t.current.emit("createNotification",W),console.log("📬 Notification sent to server")}else console.log("⚠️ Socket not connected, chat not sent to server");return console.log("🔍 END getOrCreateChat DEBUG"),I.id},ie=(k,$,w,E)=>{console.log("🔍 sendMessage DEBUG:"),console.log("- Chat ID:",k),console.log("- Sender:",{id:$,name:w}),console.log("- Content:",E);const S=i.find(Ce=>Ce.id===k);if(!S){console.error("❌ Chat not found:",k);return}console.log("✅ Chat found:",{id:S.id,participants:S.participants,participantNames:S.participantNames});const I=S.participants.find(Ce=>Ce!==$),W=S.participantNames.find((Ce,pe)=>S.participants[pe]!==$);if(!I){console.error("❌ Receiver not found in chat participants");return}console.log("📬 Receiver:",{id:I,name:W});const te={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,senderId:$,senderName:w,receiverId:I,receiverName:W||"Неизвестный пользователь",content:E,timestamp:new Date().toISOString(),isRead:!1};console.log("📝 Message created:",te.id),u(Ce=>Ce.map(pe=>{if(pe.id===k){const U={...pe,messages:[...pe.messages,te],lastMessage:te};return re("tutoring_chats",Ce.map(Q=>Q.id===pe.id?U:Q)),console.log("💾 Message saved locally, total messages in chat:",U.messages.length),U}return pe})),t.current&&r?(console.log("📡 Sending message to server..."),t.current.emit("sendMessage",{chatId:k,message:te}),console.log("✅ Message sent to server")):console.log("⚠️ Socket not connected, message not sent to server"),console.log("🔍 END sendMessage DEBUG")},Se=(k,$,w,E,S)=>{if(console.log("🔍 sendMessageToUser DEBUG:"),console.log("- Sender:",{id:k,name:$}),console.log("- Receiver:",{id:w,name:E}),console.log("- Content:",S),!k||!$||!w||!E||!S)return console.error("❌ Missing required parameters for sendMessageToUser"),"";const I=q(k,w,$,E);return console.log("- Chat ID:",I),I?(ie(I,k,$,S),console.log("✅ Message sent successfully to chat:",I),console.log("🔍 END sendMessageToUser DEBUG"),I):(console.error("❌ Failed to create or find chat"),"")},he=k=>{t.current&&r&&t.current.emit("lessonCompleted",{lessonId:k})},je=(k,$)=>{t.current&&t.current.emit("updateStudentProfile",{studentId:k,profile:$}),h(w=>({...w,[k]:$}))},J=k=>{l($=>{const w=$.map(E=>E.id===k?{...E,isDeleted:!0}:E);return re("tutoring_timeSlots",w),w}),t.current&&r&&t.current.emit("deleteSlot",{slotId:k})},Y=()=>{l([]),c([]),u([]),localStorage.removeItem("tutoring_timeSlots"),localStorage.removeItem("tutoring_lessons"),localStorage.removeItem("tutoring_chats"),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")},ge=(k,$)=>{console.log("🔄 Обновляем профиль преподавателя:",k,$),v(w=>{const E={...w,[k]:$};return re("tutoring_teacherProfiles",E),console.log("✅ Профиль преподавателя сохранен в teacherProfiles"),E}),t.current&&r&&(t.current.emit("updateTeacherProfile",{teacherId:k,profile:$}),console.log("📡 Профиль преподавателя отправлен на сервер"));try{const w=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(S=>S.id===k?{...S,profile:$,avatar:$.avatar}:S);localStorage.setItem("tutoring_users",JSON.stringify(w)),console.log("✅ Профиль преподавателя обновлен в tutoring_users"),m(S=>{const I=S.map(W=>W.id===k?{...W,profile:$,avatar:$.avatar}:W);return console.log("✅ allUsers обновлен, репетитор остался видимым"),I});const E=JSON.parse(localStorage.getItem("tutoring_registeredTeachers")||"[]").map(S=>S.id===k?{...S,profile:$,avatar:$.avatar}:S);localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(E)),console.log("✅ Зарегистрированные преподаватели обновлены")}catch(w){console.error("❌ Ошибка обновления списка пользователей:",w)}},ne=k=>{if(!x)return;const $=S=>{if(!S)return[];const I=/#[\wа-яё]+/gi,W=S.match(I);return W?[...new Set(W.map(te=>te.toLowerCase()))]:[]},w=k.media.map(S=>URL.createObjectURL(S)),E={id:`post_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:x.id,userName:x.name,userAvatar:x.avatar,text:k.text,media:w,type:k.type,date:new Date().toISOString(),reactions:[],comments:[],isBookmarked:!1,tags:$(k.text),likes:0,views:0,bookmarks:[]};g(S=>{const I=[E,...S];return re("tutoring_posts",I),I}),t.current&&r&&t.current.emit("createPost",E)},$e=(k,$)=>{x&&(g(w=>{const E=w.map(S=>{if(S.id===k){const I=S.reactions.find(Ce=>Ce.userId===x.id);let W=[...S.reactions],te=S.likes||0;return I?I.type===$?(W=S.reactions.filter(Ce=>Ce.userId!==x.id),te=Math.max(0,te-1)):I.type=$:(W.push({id:`reaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:x.id,type:$,date:new Date().toISOString()}),te++),{...S,reactions:W,likes:te}}return S});return re("tutoring_posts",E),E}),t.current&&r&&t.current.emit("addReaction",{postId:k,reactionType:$,userId:x.id}))},ze=(k,$)=>{if(!x)return;const w={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:x.id,userName:x.name,userAvatar:x.avatar,text:$,date:new Date().toISOString()};g(E=>{const S=E.map(I=>I.id===k?{...I,comments:[...I.comments,w]}:I);return re("tutoring_posts",S),S}),t.current&&r&&t.current.emit("addComment",{postId:k,comment:w})},pt=k=>{},ct=k=>{x&&(g($=>{const w=$.map(E=>{if(E.id===k){const S=E.bookmarks||[],I=S.indexOf(x.id);let W=[...S];return I===-1?W.push(x.id):W.splice(I,1),{...E,bookmarks:W}}return E});return re("tutoring_posts",w),w}),t.current&&r&&t.current.emit("bookmarkPost",{postId:k,userId:x.id}))},X=(k,$)=>{const w=E=>{if(!E)return[];const S=/#[\wа-яё]+/gi,I=E.match(S);return I?[...new Set(I.map(W=>W.toLowerCase()))]:[]};g(E=>{const S=E.map(I=>I.id===k?{...I,text:$,tags:w($),editedAt:new Date().toISOString()}:I);return re("tutoring_posts",S),S}),t.current&&r&&t.current.emit("editPost",{postId:k,newText:$})},Ne=k=>{g($=>{const w=$.filter(E=>E.id!==k);return re("tutoring_posts",w),w}),t.current&&r&&t.current.emit("deletePost",{postId:k})},ye=k=>{console.log("deleteChat called with chatId:",k),console.log("Current chats count:",i.length),u($=>{if(!$.find(E=>E.id===k))return console.warn("Chat not found for deletion:",k),$;const w=$.filter(E=>E.id!==k);return console.log(`Chat ${k} removed. New count: ${w.length}`),re("tutoring_chats",w),w}),t.current&&r?(console.log("Sending deleteChat event to server"),t.current.emit("deleteChat",{chatId:k})):console.warn("Socket not connected, chat deletion not synced to server")},Ge=k=>{u($=>{const w=$.map(E=>E.id===k?{...E,messages:E.messages.map(S=>({...S,isRead:!0}))}:E);return re("tutoring_chats",w),w}),t.current&&r&&t.current.emit("markChatAsRead",{chatId:k})},We=k=>{u($=>{const w=$.map(E=>E.id===k?{...E,messages:[]}:E);return re("tutoring_chats",w),w}),t.current&&r&&t.current.emit("clearChatMessages",{chatId:k})},rt=k=>{u($=>{const w=$.map(E=>E.id===k?{...E,archived:!0}:E);return re("tutoring_chats",w),w}),t.current&&r&&t.current.emit("archiveChat",{chatId:k})},Te=k=>{u($=>{const w=$.map(E=>E.id===k?{...E,archived:!1}:E);return re("tutoring_chats",w),w}),t.current&&r&&t.current.emit("unarchiveChat",{chatId:k})},gt=async()=>{try{console.log("🔄 Loading chats from server:",`${Fe}/api/sync`);const k=await fetch(`${Fe}/api/sync`);if(k.ok){const $=k.headers.get("content-type");if($&&$.includes("application/json")){const w=await k.json();w.chats&&(console.log("✅ Loaded chats from server:",w.chats.length),u(w.chats),re("tutoring_chats",w.chats))}else console.warn("⚠️ Server returned non-JSON response, using local chats")}else console.error("❌ Failed to load chats from server:",k.status,k.statusText)}catch(k){console.warn("⚠️ Error loading chats from server, using local chats:",k)}},jr=k=>{console.log("🗑️ Удаляем все данные пользователя:",k),l($=>{const w=$.filter(E=>E.teacherId!==k);return re("tutoring_timeSlots",w),w}),c($=>{const w=$.filter(E=>E.teacherId!==k&&E.studentId!==k);return re("tutoring_lessons",w),w}),u($=>{const w=$.filter(E=>!E.participants.includes(k));return re("tutoring_chats",w),w}),g($=>{const w=$.filter(E=>E.userId!==k);return re("tutoring_posts",w),w}),b($=>{const w=$.filter(E=>E.userId!==k);return re("tutoring_notifications",w),w}),(x==null?void 0:x.role)==="teacher"?v($=>{const w={...$};return delete w[k],re("tutoring_teacherProfiles",w),w}):(x==null?void 0:x.role)==="student"&&h($=>{const w={...$};return delete w[k],re("tutoring_studentProfiles",w),w}),m($=>{const w=$.filter(E=>E.id!==k);return re("tutoring_users",w),w}),console.log("✅ Все данные пользователя удалены")};return n.jsx(nb.Provider,{value:{timeSlots:a,lessons:o,chats:i,posts:y,createTimeSlot:ee,bookLesson:F,cancelLesson:B,rescheduleLesson:G,getFilteredSlots:ae,sendMessage:ie,sendMessageToUser:Se,getOrCreateChat:q,clearAllData:Y,isConnected:r,completeLesson:he,studentProfiles:f,updateStudentProfile:je,deleteSlot:J,createSlot:R,allUsers:j,setAllUsers:k=>{m(k),localStorage.setItem("tutoring_users",JSON.stringify(k));const $=k.filter(w=>w.role==="teacher");if($.length>0){const w=$.map(E=>({...E,isRegistered:!0,isOnline:!1,lastSeen:new Date().toISOString()}));localStorage.setItem("tutoring_registeredTeachers",JSON.stringify(w))}},refreshUsers:P,loadRegisteredTeachers:z,refreshAllData:L,forceSyncData:H,uploadLocalDataToServer:T,deleteUser:V,teacherProfiles:d,updateTeacherProfile:ge,socketRef:t,loadInitialData:O,createPost:ne,addReaction:$e,addComment:ze,sharePost:pt,bookmarkPost:ct,editPost:X,deletePost:Ne,searchPosts:k=>{t.current&&r&&t.current.emit("searchPosts",k)},getPostsByUser:k=>y.filter($=>$.userId===k),getBookmarkedPosts:k=>y.filter($=>{var w;return(w=$.bookmarks)==null?void 0:w.includes(k)}),notifications:p,subscribeToNotifications:k=>{t.current&&r&&t.current.emit("subscribeNotifications",k)},unsubscribeFromNotifications:k=>{t.current&&r&&t.current.emit("unsubscribeNotifications",k)},markNotificationAsRead:k=>{b($=>{const w=$.map(E=>E.id===k?{...E,isRead:!0,readAt:new Date().toISOString()}:E);return re("tutoring_notifications",w),w}),t.current&&r&&t.current.emit("markNotificationAsRead",k)},markAllNotificationsAsRead:k=>{b($=>{const w=$.map(E=>E.userId===k?{...E,isRead:!0,readAt:new Date().toISOString()}:E);return re("tutoring_notifications",w),w}),t.current&&r&&t.current.emit("markAllNotificationsAsRead",k)},deleteNotification:k=>{b($=>{const w=$.filter(E=>E.id!==k);return re("tutoring_notifications",w),w})},deleteChat:ye,markChatAsRead:Ge,clearChatMessages:We,archiveChat:rt,unarchiveChat:Te,loadChatsFromServer:gt,deleteUserData:jr},children:e})};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var ek={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(e,t)=>{const r=N.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:i,...u},f)=>N.createElement("svg",{ref:f,...ek,width:a,height:a,stroke:s,strokeWidth:o?Number(l)*24/Number(a):l,className:["lucide",`lucide-${tk(e)}`,c].join(" "),...u},[...t.map(([h,d])=>N.createElement(h,d)),...Array.isArray(i)?i:[i]]));return r.displayName=`${e}`,r};/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Sp=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cp=ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sm=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const an=ue("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rk=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const rl=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Be=ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pc=ue("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bt=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const nk=ue("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Gs=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sk=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ak=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lk=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Or=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ok=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const sb=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ln=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const zn=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const am=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ik=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const as=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ck=ue("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Qt=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const uk=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Md=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const dk=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ab=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const fk=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lm=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Zt=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const tt=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const mk=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const hk=ue("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const pk=ue("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const lb=ue("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const gk=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ep=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const xr=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const xk=ue("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const vk=ue("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nl=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Ri=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ob=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const om=ue("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kl=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ib=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const gc=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Rn=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const bk=ue("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const im=ue("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const yk=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Sl=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Br=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cm=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const cb=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const jk=ue("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Cl=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Jl=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ub=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const wk=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const be=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const El=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ln=ue("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const Nk=ue("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const ft=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
* @license lucide-react v0.344.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/const kk=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Sk=({onSuccess:e})=>{const[t,r]=N.useState(!0),[s,a]=N.useState(""),[l,o]=N.useState(""),[c,i]=N.useState(""),[u,f]=N.useState(""),[h,d]=N.useState(""),[v,j]=N.useState("student"),[m,y]=N.useState(!1),[g,p]=N.useState(!1),{login:b,register:x}=ht(),C=async O=>{O.preventDefault(),y(!0);try{if(t)await b(s,l),e();else{if(!g){p(!0),y(!1);return}if(!h.trim()){alert("Пожалуйста, введите никнейм"),y(!1);return}if(!u.trim()){alert("Пожалуйста, введите номер телефона"),y(!1);return}await x(s,l,c,h,v,u)&&e()}}catch{}finally{y(!1)}};return!t&&g?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto h-12 w-12 bg-[#0D3C69] rounded-xl flex items-center justify-center mb-4",children:n.jsx(Be,{className:"h-6 w-6 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Выберите роль"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Кто вы на нашей платформе?"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("button",{onClick:()=>j("student"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${v==="student"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${v==="student"?"bg-blue-100":"bg-gray-100"}`,children:n.jsx(be,{className:`h-6 w-6 ${v==="student"?"text-[#0D3C69]":"text-gray-600"}`})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Ученик"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ищу репетитора для обучения"})]})]})}),n.jsx("button",{onClick:()=>j("teacher"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${v==="teacher"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${v==="teacher"?"bg-blue-100":"bg-gray-100"}`,children:n.jsx(wk,{className:`h-6 w-6 ${v==="teacher"?"text-[#0D3C69]":"text-gray-600"}`})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Преподаватель"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Провожу уроки и делюсь знаниями"})]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Никнейм"}),n.jsx("input",{id:"nickname",type:"text",value:h,onChange:O=>d(O.target.value),required:!0,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"Введите никнейм"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер телефона"}),n.jsxs("div",{className:"relative",children:[n.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"phone",type:"tel",value:u,onChange:O=>f(O.target.value),required:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"+7 (999) 123-45-67"})]})]}),n.jsx("button",{onClick:C,disabled:m||!h.trim()||!u.trim(),className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Создание аккаунта...":"Завершить регистрацию"}),n.jsx("button",{onClick:()=>p(!1),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:"Назад"})]})]})}):n.jsxs("div",{className:"min-h-screen flex",children:[n.jsx("div",{className:"flex-1 bg-white flex items-center justify-center p-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Добро пожаловать"}),n.jsx("p",{className:"text-lg text-gray-600",children:t?"Войдите в свой аккаунт":"Создайте новый аккаунт"})]}),n.jsxs("form",{onSubmit:C,className:"space-y-6",children:[!t&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),n.jsxs("div",{className:"relative",children:[n.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"name",type:"text",value:c,onChange:O=>i(O.target.value),required:!t,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваше имя"})]})]}),!t&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),n.jsxs("div",{className:"relative",children:[n.jsx(xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"phone",type:"tel",value:u,onChange:O=>f(O.target.value),required:!t,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"+7 (999) 123-45-67"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(lm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"email",type:"email",value:s,onChange:O=>a(O.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваш email"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Пароль"}),n.jsxs("div",{className:"relative",children:[n.jsx(ab,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{id:"password",type:"password",value:l,onChange:O=>o(O.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:t?"Введите пароль":"Создайте пароль"})]})]}),n.jsx("button",{type:"submit",disabled:m,className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-bold py-4 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:m?t?"Вход...":"Создание аккаунта...":t?"Войти":"Создать аккаунт"})]}),n.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Продолжая, вы соглашаетесь с"," ",n.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условиями использования"})," ","и"," ",n.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политикой конфиденциальности"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-gray-600",children:t?"Нет аккаунта? ":"Уже есть аккаунт? "}),n.jsx("button",{onClick:()=>{r(!t),p(!1),a(""),o(""),i(""),f(""),d("")},className:"text-[#0D3C69] hover:text-[#0A2F56] font-medium",children:t?"Зарегистрироваться":"Войти"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{className:"text-[#0D3C69] hover:text-[#0A2F56] text-sm",children:"Получить помощь"})}),n.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["Этот сайт защищен reCAPTCHA Enterprise и применяются"," ",n.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политика конфиденциальности"})," ","и"," ",n.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условия использования"})," ","Google."]})]})}),n.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[n.jsx("h2",{className:"text-5xl font-bold text-white mb-8 text-center",children:"Платформа для обучения"}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("blockquote",{className:"text-xl text-gray-300 italic leading-relaxed",children:'"Важно не количество знаний, а качество их. Можно знать очень многое не зная самого нужного."'}),n.jsx("cite",{className:"text-sm text-gray-400 mt-4 block",children:"— Л. Толстой"})]}),n.jsxs("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900 via-purple-900 to-black"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 opacity-20"})}),n.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((O,D)=>n.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},D))})]})]})]})},Ck=({activeTab:e,onTabChange:t})=>{const{user:r,logout:s}=ht(),[a,l]=N.useState(!1),o=N.useRef(null),c=N.useRef(null);N.useEffect(()=>{const h=d=>{const v=d.target;a&&c.current&&!c.current.contains(v)&&o.current&&!o.current.contains(v)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[a]);const i=[{id:"home",label:"Главная",icon:uk},{id:"lessons",label:"Мои уроки",icon:bt},{id:"chats",label:"Чаты",icon:tt},{id:"profile",label:"Профиль",icon:be}],u=[{id:"slots",label:"Слоты",icon:bt},{id:"calendar",label:"Календарь",icon:rk},{id:"students",label:"Ученики",icon:be},{id:"chats",label:"Чаты",icon:tt},{id:"profile",label:"Профиль",icon:be}],f=(r==null?void 0:r.role)==="teacher"?u:i;return n.jsx("nav",{className:"bg-card-light dark:bg-card-dark shadow-lg border-b border-border-light dark:border-border-dark transition-colors",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex justify-between h-16",children:[n.jsxs("div",{className:"flex items-center space-x-8",children:[n.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[n.jsx("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center shadow-md",style:{background:"#175b8c"},children:n.jsx("span",{className:"text-white font-bold text-lg",style:{fontFamily:"Inter, sans-serif",fontSize:28},children:"Na"})}),n.jsx("span",{className:"ml-3 text-2xl font-bold",style:{color:"#175b8c",fontFamily:"Inter, sans-serif"},children:"uchi"})]}),n.jsxs("div",{className:"hidden md:flex space-x-8 relative",children:[f.map(h=>{const d=h.icon,v=(r==null?void 0:r.role)==="teacher"&&h.id==="profile";return n.jsxs("button",{ref:v?o:null,onClick:()=>{if(v){l(j=>!j);return}t(h.id)},className:`flex items-center gap-2 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200 shadow-none ${e===h.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[n.jsx(d,{className:"h-5 w-5"}),n.jsx("span",{children:h.label})]},h.id)}),(r==null?void 0:r.role)==="teacher"&&a&&n.jsxs("div",{ref:c,className:"absolute top-14 right-0 w-64 bg-white dark:bg-card-dark border border-border-light dark:border-border-dark rounded-xl shadow-2xl py-2 z-50",children:[n.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-wide text-gray-400",children:"Профиль"}),n.jsxs("button",{onClick:()=>{l(!1),t("profile")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-border-dark transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-500"}),n.jsx("span",{children:"Просмотреть профиль"})]}),n.jsxs("button",{onClick:()=>{l(!1),t("slots")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-border-dark transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-green-500"}),n.jsx("span",{children:"Слоты"})]}),n.jsxs("button",{onClick:()=>{l(!1),t("calendar")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-border-dark transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-purple-500"}),n.jsx("span",{children:"Календарь"})]}),n.jsxs("button",{onClick:()=>{l(!1),t("students")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-border-dark transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-amber-500"}),n.jsx("span",{children:"Ученики"})]}),n.jsxs("button",{onClick:()=>{l(!1),t("materials")},className:"w-full text-left px-4 py-3 hover:bg-gray-50 dark:hover:bg-border-dark transition-colors flex items-center gap-2",children:[n.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-pink-500"}),n.jsx("span",{children:"Материалы"})]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-medium",children:r==null?void 0:r.nickname.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"hidden md:block",children:[n.jsx("div",{className:"text-sm font-medium text-gray-700",children:r==null?void 0:r.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:["@",r==null?void 0:r.nickname]})]}),n.jsx("span",{className:"hidden md:block text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:(r==null?void 0:r.role)==="teacher"?"Преподаватель":"Ученик"})]}),n.jsx("button",{onClick:s,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Выйти",children:n.jsx(fk,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"md:hidden border-t border-border-light dark:border-border-dark",children:n.jsx("div",{className:"flex space-x-1 py-2 overflow-x-auto",children:f.map(h=>{const d=h.icon;return n.jsxs("button",{onClick:()=>{if((r==null?void 0:r.role)==="teacher"&&h.id==="profile"){t("profile");return}t(h.id)},className:`flex-shrink-0 flex flex-col items-center gap-1 px-4 py-3 rounded-xl text-xs font-semibold transition-all duration-200 ${e===h.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[n.jsx(d,{className:"h-5 w-5"}),n.jsx("span",{children:h.label})]},h.id)})})})]})})};function mn(e){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(e)}function Ek(e,t){if(mn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(mn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function db(e){var t=Ek(e,"string");return mn(t)=="symbol"?t:t+""}function Zn(e,t,r){return(t=db(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$p(Object(r),!0).forEach(function(s){Zn(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$p(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xc(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Yr(e,t){if(e==null)return{};var r,s,a=xc(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)r=l[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _p(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,db(s.key),s)}}function it(e,t,r){return t&&_p(e.prototype,t),r&&_p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ii(e)}function fb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fb=function(){return!!e})()}function $k(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _k(e,t){if(t&&(mn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $k(e)}function _t(e,t,r){return t=Ii(t),_k(e,fb()?Reflect.construct(t,r||[],Ii(e).constructor):t.apply(e,r))}function Ai(e,t){return Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ai(e,t)}function Ot(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}function mb(e){if(Array.isArray(e))return e}function Ok(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,l,o,c=[],i=!0,u=!1;try{if(l=(r=r.call(e)).next,t!==0)for(;!(i=(s=l.call(r)).done)&&(c.push(s.value),c.length!==t);i=!0);}catch(f){u=!0,a=f}finally{try{if(!i&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function Pd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function um(e,t){if(e){if(typeof e=="string")return Pd(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pd(e,t):void 0}}function hb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(e,t){return mb(e)||Ok(e,t)||um(e,t)||hb()}function pb(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=pb(e[t]))&&(s&&(s+=" "),s+=r);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Xe(){for(var e,t,r=0,s="";r<arguments.length;)(e=arguments[r++])&&(t=pb(e))&&(s&&(s+=" "),s+=t);return s}function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Je.apply(null,arguments)}var Tk=function(e,t,r,s,a,l,o,c){if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,s,a,l,o,c],f=0;i=new Error(t.replace(/%s/g,function(){return u[f++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}},Dk=Tk;const $l=Yt(Dk);var Mk=function(){};function Pk(e,t){var r={};return Object.keys(e).forEach(function(s){r[ai(s)]=Mk}),r}function Op(e,t){return e[t]!==void 0}function ai(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Rk(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function Ik(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ai(e,t)}function gb(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function xb(e){function t(r){var s=this.constructor.getDerivedStateFromProps(e,r);return s??null}this.setState(t.bind(this))}function vb(e,t){try{var r=this.props,s=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,s)}finally{this.props=r,this.state=s}}gb.__suppressDeprecationWarning=!0;xb.__suppressDeprecationWarning=!0;vb.__suppressDeprecationWarning=!0;function Ak(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,s=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?s="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(s="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||s!==null||a!==null){var l=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+l+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=gb,t.componentWillReceiveProps=xb),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=vb;var c=t.componentDidUpdate;t.componentDidUpdate=function(i,u,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;c.call(this,i,u,h)}}return e}var Lk="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function bb(e,t,r){r===void 0&&(r=[]);var s=e.displayName||e.name||"Component",a=Rk(e),l=Object.keys(t),o=l.map(ai);a||!r.length||$l(!1);var c=function(u){Ik(f,u);function f(){for(var d,v=arguments.length,j=new Array(v),m=0;m<v;m++)j[m]=arguments[m];d=u.call.apply(u,[this].concat(j))||this,d.handlers=Object.create(null),l.forEach(function(g){var p=t[g],b=function(x){if(d.props[p]){var C;d._notifying=!0;for(var O=arguments.length,D=new Array(O>1?O-1:0),_=1;_<O;_++)D[_-1]=arguments[_];(C=d.props)[p].apply(C,[x].concat(D)),d._notifying=!1}d.unmounted||d.setState(function(P){var z,L=P.values;return{values:Je(Object.create(null),L,(z={},z[g]=x,z))}})};d.handlers[p]=b}),r.length&&(d.attachRef=function(g){d.inner=g});var y=Object.create(null);return l.forEach(function(g){y[g]=d.props[ai(g)]}),d.state={values:y,prevProps:{}},d}var h=f.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(d,v){var j=v.values,m=v.prevProps,y={values:Je(Object.create(null),j),prevProps:{}};return l.forEach(function(g){y.prevProps[g]=d[g],!Op(d,g)&&Op(m,g)&&(y.values[g]=d[ai(g)])}),y},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var d=this,v=this.props,j=v.innerRef,m=xc(v,["innerRef"]);o.forEach(function(g){delete m[g]});var y={};return l.forEach(function(g){var p=d.props[g];y[g]=p!==void 0?p:d.state.values[g]}),A.createElement(e,Je({},m,y,this.handlers,{ref:j||this.attachRef}))},f}(A.Component);Ak(c),c.displayName="Uncontrolled("+s+")",c.propTypes=Je({innerRef:function(){}},Pk(t)),r.forEach(function(u){c.prototype[u]=function(){var f;return(f=this.inner)[u].apply(f,arguments)}});var i=c;return A.forwardRef&&(i=A.forwardRef(function(u,f){return A.createElement(c,Je({},u,{innerRef:f,__source:{fileName:Lk,lineNumber:128},__self:this}))}),i.propTypes=c.propTypes),i.ControlledComponent=e,i.deferControlTo=function(u,f,h){return f===void 0&&(f={}),bb(u,Je({},t,f),h)},i}var yb={exports:{}},zk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Fk=zk,Uk=Fk;function jb(){}function wb(){}wb.resetWarningCache=jb;var Bk=function(){function e(s,a,l,o,c,i){if(i!==Uk){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wb,resetWarningCache:jb};return r.PropTypes=r,r};yb.exports=Bk();var Wk=yb.exports;const le=Yt(Wk);var Li="milliseconds",_l="seconds",Ol="minutes",Tl="hours",hs="day",na="week",Dl="month",ps="year",gs="decade",xs="century",Nb={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},Hk={month:1,year:12,decade:10*12,century:100*12};function qk(e){return[31,Vk(e),31,30,31,30,31,31,30,31,30,31]}function Vk(e){return e%4===0&&e%100!==0||e%400===0?29:28}function Tr(e,t,r){switch(e=new Date(e),r){case Li:case _l:case Ol:case Tl:case hs:case na:return Yk(e,t*Nb[r]);case Dl:case ps:case gs:case xs:return Gk(e,t*Hk[r])}throw new TypeError('Invalid units: "'+r+'"')}function Yk(e,t){var r=new Date(+e+t);return Kk(e,r)}function Gk(e,t){var r=e.getFullYear(),s=e.getMonth(),a=e.getDate(),l=r*12+s+t,o=Math.trunc(l/12),c=l%12,i=Math.min(a,qk(o)[c]),u=new Date(e);return u.setFullYear(o),u.setDate(1),u.setMonth(c),u.setDate(i),u}function Kk(e,t){var r=e.getTimezoneOffset(),s=t.getTimezoneOffset(),a=s-r;return new Date(+t+a*Nb.minutes)}function Ml(e,t,r){return Tr(e,-t,r)}function wt(e,t,r){switch(e=new Date(e),t){case xs:case gs:case ps:e=Fi(e,0);case Dl:e=$b(e,1);case na:case hs:e=Il(e,0);case Tl:e=sa(e,0);case Ol:e=Rl(e,0);case _l:e=Pl(e,0)}return t===gs&&(e=Ml(e,vs(e)%10,"year")),t===xs&&(e=Ml(e,vs(e)%100,"year")),t===na&&(e=_b(e,0,r)),e}function zi(e,t,r){switch(e=new Date(e),e=wt(e,t,r),t){case xs:case gs:case ps:case Dl:case na:e=Tr(e,1,t),e=Ml(e,1,hs),e.setHours(23,59,59,999);break;case hs:e.setHours(23,59,59,999);break;case Tl:case Ol:case _l:e=Tr(e,1,t),e=Ml(e,1,Li)}return e}var pa=xa(function(e,t){return e===t}),dm=xa(function(e,t){return e!==t}),vc=xa(function(e,t){return e>t}),Xl=xa(function(e,t){return e>=t}),fm=xa(function(e,t){return e<t}),ga=xa(function(e,t){return e<=t});function kb(){return new Date(Math.min.apply(Math,arguments))}function Sb(){return new Date(Math.max.apply(Math,arguments))}function Cb(e,t,r,s){return s=s||"day",(!t||Xl(e,t,s))&&(!r||ga(e,r,s))}var Pl=qn("Milliseconds"),Rl=qn("Seconds"),sa=qn("Minutes"),Il=qn("Hours"),Eb=qn("Day"),$b=qn("Date"),Fi=qn("Month"),vs=qn("FullYear");function Jk(e,t){return t===void 0?vs(wt(e,gs)):Tr(e,t+10,ps)}function Xk(e,t){return t===void 0?vs(wt(e,xs)):Tr(e,t+100,ps)}function _b(e,t,r){var s=(Eb(e)+7-(r||0))%7;return t===void 0?s:Tr(e,t-s,hs)}function Qk(e,t,r,s){var a,l,o;switch(r){case Li:case _l:case Ol:case Tl:case hs:case na:a=t.getTime()-e.getTime();break;case Dl:case ps:case gs:case xs:a=(vs(t)-vs(e))*12+Fi(t)-Fi(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case Li:l=1;break;case _l:l=1e3;break;case Ol:l=1e3*60;break;case Tl:l=1e3*60*60;break;case hs:l=1e3*60*60*24;break;case na:l=1e3*60*60*24*7;break;case Dl:l=1;break;case ps:l=12;break;case gs:l=120;break;case xs:l=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/l,s?o:Math.round(o)}function qn(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,s){if(s===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](s),t&&a["get"+e]()!=s&&(e==="Hours"||s>=t&&a.getHours()-r.getHours()<Math.floor(s/t))&&a["set"+e](s+t),a}}function xa(e){return function(t,r,s){return e(+wt(t,s),+wt(r,s))}}const Tp=Object.freeze(Object.defineProperty({__proto__:null,add:Tr,century:Xk,date:$b,day:Eb,decade:Jk,diff:Qk,endOf:zi,eq:pa,gt:vc,gte:Xl,hours:Il,inRange:Cb,lt:fm,lte:ga,max:Sb,milliseconds:Pl,min:kb,minutes:sa,month:Fi,neq:dm,seconds:Rl,startOf:wt,subtract:Ml,weekday:_b,year:vs},Symbol.toStringTag,{value:"Module"}));function Zk(e){if(Array.isArray(e))return Pd(e)}function Ob(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function li(e){return Zk(e)||Ob(e)||um(e)||eS()}function tS(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var l=Array(a);++s<a;)l[s]=e[s+t];return l}var Tb=tS;function rS(e,t){return e===t||e!==e&&t!==t}var Ql=rS,nS=typeof fr=="object"&&fr&&fr.Object===Object&&fr,Db=nS,sS=Db,aS=typeof self=="object"&&self&&self.Object===Object&&self,lS=sS||aS||Function("return this")(),Jr=lS,oS=Jr,iS=oS.Symbol,va=iS,Dp=va,Mb=Object.prototype,cS=Mb.hasOwnProperty,uS=Mb.toString,Ia=Dp?Dp.toStringTag:void 0;function dS(e){var t=cS.call(e,Ia),r=e[Ia];try{e[Ia]=void 0;var s=!0}catch{}var a=uS.call(e);return s&&(t?e[Ia]=r:delete e[Ia]),a}var fS=dS,mS=Object.prototype,hS=mS.toString;function pS(e){return hS.call(e)}var gS=pS,Mp=va,xS=fS,vS=gS,bS="[object Null]",yS="[object Undefined]",Pp=Mp?Mp.toStringTag:void 0;function jS(e){return e==null?e===void 0?yS:bS:Pp&&Pp in Object(e)?xS(e):vS(e)}var ba=jS;function wS(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var vn=wS,NS=ba,kS=vn,SS="[object AsyncFunction]",CS="[object Function]",ES="[object GeneratorFunction]",$S="[object Proxy]";function _S(e){if(!kS(e))return!1;var t=NS(e);return t==CS||t==ES||t==SS||t==$S}var mm=_S,OS=9007199254740991;function TS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=OS}var hm=TS,DS=mm,MS=hm;function PS(e){return e!=null&&MS(e.length)&&!DS(e)}var Zl=PS,RS=9007199254740991,IS=/^(?:0|[1-9]\d*)$/;function AS(e,t){var r=typeof e;return t=t??RS,!!t&&(r=="number"||r!="symbol"&&IS.test(e))&&e>-1&&e%1==0&&e<t}var pm=AS,LS=Ql,zS=Zl,FS=pm,US=vn;function BS(e,t,r){if(!US(r))return!1;var s=typeof t;return(s=="number"?zS(r)&&FS(t,r.length):s=="string"&&t in r)?LS(r[t],e):!1}var bc=BS,WS=/\s/;function HS(e){for(var t=e.length;t--&&WS.test(e.charAt(t)););return t}var qS=HS,VS=qS,YS=/^\s+/;function GS(e){return e&&e.slice(0,VS(e)+1).replace(YS,"")}var KS=GS;function JS(e){return e!=null&&typeof e=="object"}var Vn=JS,XS=ba,QS=Vn,ZS="[object Symbol]";function e4(e){return typeof e=="symbol"||QS(e)&&XS(e)==ZS}var eo=e4,t4=KS,Rp=vn,r4=eo,Ip=NaN,n4=/^[-+]0x[0-9a-f]+$/i,s4=/^0b[01]+$/i,a4=/^0o[0-7]+$/i,l4=parseInt;function o4(e){if(typeof e=="number")return e;if(r4(e))return Ip;if(Rp(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Rp(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=t4(e);var r=s4.test(e);return r||a4.test(e)?l4(e.slice(2),r?2:8):n4.test(e)?Ip:+e}var i4=o4,c4=i4,Ap=1/0,u4=17976931348623157e292;function d4(e){if(!e)return e===0?e:0;if(e=c4(e),e===Ap||e===-Ap){var t=e<0?-1:1;return t*u4}return e===e?e:0}var Pb=d4,f4=Pb;function m4(e){var t=f4(e),r=t%1;return t===t?r?t-r:t:0}var Rb=m4,h4=Tb,p4=bc,g4=Rb,x4=Math.ceil,v4=Math.max;function b4(e,t,r){(r?p4(e,t,r):t===void 0)?t=1:t=v4(g4(t),0);var s=e==null?0:e.length;if(!s||t<1)return[];for(var a=0,l=0,o=Array(x4(s/t));a<s;)o[l++]=h4(e,a,a+=t);return o}var y4=b4;const j4=Yt(y4);function to(e){return e&&e.ownerDocument||document}function w4(e){var t=to(e);return t&&t.defaultView||window}function N4(e,t){return w4(e).getComputedStyle(e,t)}var k4=/([A-Z])/g;function S4(e){return e.replace(k4,"-$1").toLowerCase()}var C4=/^ms-/;function Mo(e){return S4(e).replace(C4,"-ms-")}var E4=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function $4(e){return!!(e&&E4.test(e))}function $s(e,t){var r="",s="";if(typeof t=="string")return e.style.getPropertyValue(Mo(t))||N4(e).getPropertyValue(Mo(t));Object.keys(t).forEach(function(a){var l=t[a];!l&&l!==0?e.style.removeProperty(Mo(a)):$4(a)?s+=a+"("+l+") ":r+=Mo(a)+": "+l+";"}),s&&(r+="transform: "+s+";"),e.style.cssText+=";"+r}function Al(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function _4(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function gm(e){return"window"in e&&e.window===e?e:_4(e)&&e.defaultView||!1}function Ib(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(s,a){var l=gm(s);if(a===void 0)return l?l[e]:s[t];l?l.scrollTo(l[e],a):s[t]=a}return r}const Ab=Ib("pageXOffset"),Lb=Ib("pageYOffset");function ls(e){var t=to(e),r={top:0,left:0,height:0,width:0},s=t&&t.documentElement;return!s||!Al(s,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+Lb(s)-(s.clientTop||0),left:r.left+Ab(s)-(s.clientLeft||0),width:r.width,height:r.height}),r}var O4=function(e){return!!e&&"offsetParent"in e};function T4(e){for(var t=to(e),r=e&&e.offsetParent;O4(r)&&r.nodeName!=="HTML"&&$s(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var D4=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function zb(e,t){var r={top:0,left:0},s;if($s(e,"position")==="fixed")s=e.getBoundingClientRect();else{var a=t||T4(e);s=ls(e),D4(a)!=="html"&&(r=ls(a));var l=String($s(a,"borderTopWidth")||0);r.top+=parseInt(l,10)-Lb(a)||0;var o=String($s(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-Ab(a)||0}var c=String($s(e,"marginTop")||0),i=String($s(e,"marginLeft")||0);return Je({},s,{top:s.top-r.top-(parseInt(c,10)||0),left:s.left-r.left-(parseInt(i,10)||0)})}const xm=!!(typeof window<"u"&&window.document&&window.document.createElement);var Lp=new Date().getTime();function M4(e){var t=new Date().getTime(),r=Math.max(0,16-(t-Lp)),s=setTimeout(e,r);return Lp=t,s}var P4=["","webkit","moz","o","ms"],Rd="clearTimeout",Id=M4,zp=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};xm&&P4.some(function(e){var t=zp(e,"request");return t in window&&(Rd=zp(e,"cancel"),Id=function(r){return window[t](r)}),!!Id});var Fp=function(e){typeof window[Rd]=="function"&&window[Rd](e)},Fb=Id,bu;function R4(e,t){if(!bu){var r=document.body,s=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;bu=function(a,l){return s.call(a,l)}}return bu(e,t)}var I4=Function.prototype.bind.call(Function.prototype.call,[].slice);function A4(e,t){return I4(e.querySelectorAll(t))}var Ad=!1,Ld=!1;try{var yu={get passive(){return Ad=!0},get once(){return Ld=Ad=!0}};xm&&(window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,!0))}catch{}function L4(e,t,r,s){if(s&&typeof s!="boolean"&&!Ld){var a=s.once,l=s.capture,o=r;!Ld&&a&&(o=r.__once||function c(i){this.removeEventListener(t,c,l),r.call(this,i)},r.__once=o),e.addEventListener(t,o,Ad?s:l)}e.addEventListener(t,r,s)}function z4(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e},[e]),t}function Up(e){const t=z4(e);return N.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function Bp(){return N.useState(null)}function F4(){const e=N.useRef(!0),t=N.useRef(()=>e.current);return N.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function U4(e){const t=F4();return[e[0],N.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var Ht="top",vr="bottom",br="right",qt="left",vm="auto",ro=[Ht,vr,br,qt],aa="start",Ll="end",B4="clippingParents",Ub="viewport",Aa="popper",W4="reference",Wp=ro.reduce(function(e,t){return e.concat([t+"-"+aa,t+"-"+Ll])},[]),bm=[].concat(ro,[vm]).reduce(function(e,t){return e.concat([t,t+"-"+aa,t+"-"+Ll])},[]),H4="beforeRead",q4="read",V4="afterRead",Y4="beforeMain",G4="main",K4="afterMain",J4="beforeWrite",X4="write",Q4="afterWrite",Z4=[H4,q4,V4,Y4,G4,K4,J4,X4,Q4];function Wr(e){return e.split("-")[0]}function tr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function bs(e){var t=tr(e).Element;return e instanceof t||e instanceof Element}function Hr(e){var t=tr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function ym(e){if(typeof ShadowRoot>"u")return!1;var t=tr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var os=Math.max,Ui=Math.min,la=Math.round;function zd(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Bb(){return!/^((?!chrome|android).)*safari/i.test(zd())}function oa(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var s=e.getBoundingClientRect(),a=1,l=1;t&&Hr(e)&&(a=e.offsetWidth>0&&la(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&la(s.height)/e.offsetHeight||1);var o=bs(e)?tr(e):window,c=o.visualViewport,i=!Bb()&&r,u=(s.left+(i&&c?c.offsetLeft:0))/a,f=(s.top+(i&&c?c.offsetTop:0))/l,h=s.width/a,d=s.height/l;return{width:h,height:d,top:f,right:u+h,bottom:f+d,left:u,x:u,y:f}}function jm(e){var t=oa(e),r=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:s}}function Wb(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&ym(r)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Fn(e){return e?(e.nodeName||"").toLowerCase():null}function hn(e){return tr(e).getComputedStyle(e)}function e5(e){return["table","td","th"].indexOf(Fn(e))>=0}function Yn(e){return((bs(e)?e.ownerDocument:e.document)||window.document).documentElement}function yc(e){return Fn(e)==="html"?e:e.assignedSlot||e.parentNode||(ym(e)?e.host:null)||Yn(e)}function Hp(e){return!Hr(e)||hn(e).position==="fixed"?null:e.offsetParent}function t5(e){var t=/firefox/i.test(zd()),r=/Trident/i.test(zd());if(r&&Hr(e)){var s=hn(e);if(s.position==="fixed")return null}var a=yc(e);for(ym(a)&&(a=a.host);Hr(a)&&["html","body"].indexOf(Fn(a))<0;){var l=hn(a);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||t&&l.willChange==="filter"||t&&l.filter&&l.filter!=="none")return a;a=a.parentNode}return null}function no(e){for(var t=tr(e),r=Hp(e);r&&e5(r)&&hn(r).position==="static";)r=Hp(r);return r&&(Fn(r)==="html"||Fn(r)==="body"&&hn(r).position==="static")?t:r||t5(e)||t}function wm(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function nl(e,t,r){return os(e,Ui(t,r))}function r5(e,t,r){var s=nl(e,t,r);return s>r?r:s}function Hb(){return{top:0,right:0,bottom:0,left:0}}function qb(e){return Object.assign({},Hb(),e)}function Vb(e,t){return t.reduce(function(r,s){return r[s]=e,r},{})}var n5=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,qb(typeof e!="number"?e:Vb(e,ro))};function s5(e){var t,r=e.state,s=e.name,a=e.options,l=r.elements.arrow,o=r.modifiersData.popperOffsets,c=Wr(r.placement),i=wm(c),u=[qt,br].indexOf(c)>=0,f=u?"height":"width";if(!(!l||!o)){var h=n5(a.padding,r),d=jm(l),v=i==="y"?Ht:qt,j=i==="y"?vr:br,m=r.rects.reference[f]+r.rects.reference[i]-o[i]-r.rects.popper[f],y=o[i]-r.rects.reference[i],g=no(l),p=g?i==="y"?g.clientHeight||0:g.clientWidth||0:0,b=m/2-y/2,x=h[v],C=p-d[f]-h[j],O=p/2-d[f]/2+b,D=nl(x,O,C),_=i;r.modifiersData[s]=(t={},t[_]=D,t.centerOffset=D-O,t)}}function a5(e){var t=e.state,r=e.options,s=r.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Wb(t.elements.popper,a)&&(t.elements.arrow=a))}const l5={name:"arrow",enabled:!0,phase:"main",fn:s5,effect:a5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ia(e){return e.split("-")[1]}var o5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function i5(e,t){var r=e.x,s=e.y,a=t.devicePixelRatio||1;return{x:la(r*a)/a||0,y:la(s*a)/a||0}}function qp(e){var t,r=e.popper,s=e.popperRect,a=e.placement,l=e.variation,o=e.offsets,c=e.position,i=e.gpuAcceleration,u=e.adaptive,f=e.roundOffsets,h=e.isFixed,d=o.x,v=d===void 0?0:d,j=o.y,m=j===void 0?0:j,y=typeof f=="function"?f({x:v,y:m}):{x:v,y:m};v=y.x,m=y.y;var g=o.hasOwnProperty("x"),p=o.hasOwnProperty("y"),b=qt,x=Ht,C=window;if(u){var O=no(r),D="clientHeight",_="clientWidth";if(O===tr(r)&&(O=Yn(r),hn(O).position!=="static"&&c==="absolute"&&(D="scrollHeight",_="scrollWidth")),O=O,a===Ht||(a===qt||a===br)&&l===Ll){x=vr;var P=h&&O===C&&C.visualViewport?C.visualViewport.height:O[D];m-=P-s.height,m*=i?1:-1}if(a===qt||(a===Ht||a===vr)&&l===Ll){b=br;var z=h&&O===C&&C.visualViewport?C.visualViewport.width:O[_];v-=z-s.width,v*=i?1:-1}}var L=Object.assign({position:c},u&&o5),H=f===!0?i5({x:v,y:m},tr(r)):{x:v,y:m};if(v=H.x,m=H.y,i){var T;return Object.assign({},L,(T={},T[x]=p?"0":"",T[b]=g?"0":"",T.transform=(C.devicePixelRatio||1)<=1?"translate("+v+"px, "+m+"px)":"translate3d("+v+"px, "+m+"px, 0)",T))}return Object.assign({},L,(t={},t[x]=p?m+"px":"",t[b]=g?v+"px":"",t.transform="",t))}function c5(e){var t=e.state,r=e.options,s=r.gpuAcceleration,a=s===void 0?!0:s,l=r.adaptive,o=l===void 0?!0:l,c=r.roundOffsets,i=c===void 0?!0:c,u={placement:Wr(t.placement),variation:ia(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,qp(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:i})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,qp(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const u5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:c5,data:{}};var Po={passive:!0};function d5(e){var t=e.state,r=e.instance,s=e.options,a=s.scroll,l=a===void 0?!0:a,o=s.resize,c=o===void 0?!0:o,i=tr(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&u.forEach(function(f){f.addEventListener("scroll",r.update,Po)}),c&&i.addEventListener("resize",r.update,Po),function(){l&&u.forEach(function(f){f.removeEventListener("scroll",r.update,Po)}),c&&i.removeEventListener("resize",r.update,Po)}}const f5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:d5,data:{}};var m5={left:"right",right:"left",bottom:"top",top:"bottom"};function oi(e){return e.replace(/left|right|bottom|top/g,function(t){return m5[t]})}var h5={start:"end",end:"start"};function Vp(e){return e.replace(/start|end/g,function(t){return h5[t]})}function Nm(e){var t=tr(e),r=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:r,scrollTop:s}}function km(e){return oa(Yn(e)).left+Nm(e).scrollLeft}function p5(e,t){var r=tr(e),s=Yn(e),a=r.visualViewport,l=s.clientWidth,o=s.clientHeight,c=0,i=0;if(a){l=a.width,o=a.height;var u=Bb();(u||!u&&t==="fixed")&&(c=a.offsetLeft,i=a.offsetTop)}return{width:l,height:o,x:c+km(e),y:i}}function g5(e){var t,r=Yn(e),s=Nm(e),a=(t=e.ownerDocument)==null?void 0:t.body,l=os(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=os(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-s.scrollLeft+km(e),i=-s.scrollTop;return hn(a||r).direction==="rtl"&&(c+=os(r.clientWidth,a?a.clientWidth:0)-l),{width:l,height:o,x:c,y:i}}function Sm(e){var t=hn(e),r=t.overflow,s=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+s)}function Yb(e){return["html","body","#document"].indexOf(Fn(e))>=0?e.ownerDocument.body:Hr(e)&&Sm(e)?e:Yb(yc(e))}function sl(e,t){var r;t===void 0&&(t=[]);var s=Yb(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),l=tr(s),o=a?[l].concat(l.visualViewport||[],Sm(s)?s:[]):s,c=t.concat(o);return a?c:c.concat(sl(yc(o)))}function Fd(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function x5(e,t){var r=oa(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Yp(e,t,r){return t===Ub?Fd(p5(e,r)):bs(t)?x5(t,r):Fd(g5(Yn(e)))}function v5(e){var t=sl(yc(e)),r=["absolute","fixed"].indexOf(hn(e).position)>=0,s=r&&Hr(e)?no(e):e;return bs(s)?t.filter(function(a){return bs(a)&&Wb(a,s)&&Fn(a)!=="body"}):[]}function b5(e,t,r,s){var a=t==="clippingParents"?v5(e):[].concat(t),l=[].concat(a,[r]),o=l[0],c=l.reduce(function(i,u){var f=Yp(e,u,s);return i.top=os(f.top,i.top),i.right=Ui(f.right,i.right),i.bottom=Ui(f.bottom,i.bottom),i.left=os(f.left,i.left),i},Yp(e,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Gb(e){var t=e.reference,r=e.element,s=e.placement,a=s?Wr(s):null,l=s?ia(s):null,o=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,i;switch(a){case Ht:i={x:o,y:t.y-r.height};break;case vr:i={x:o,y:t.y+t.height};break;case br:i={x:t.x+t.width,y:c};break;case qt:i={x:t.x-r.width,y:c};break;default:i={x:t.x,y:t.y}}var u=a?wm(a):null;if(u!=null){var f=u==="y"?"height":"width";switch(l){case aa:i[u]=i[u]-(t[f]/2-r[f]/2);break;case Ll:i[u]=i[u]+(t[f]/2-r[f]/2);break}}return i}function zl(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=s===void 0?e.placement:s,l=r.strategy,o=l===void 0?e.strategy:l,c=r.boundary,i=c===void 0?B4:c,u=r.rootBoundary,f=u===void 0?Ub:u,h=r.elementContext,d=h===void 0?Aa:h,v=r.altBoundary,j=v===void 0?!1:v,m=r.padding,y=m===void 0?0:m,g=qb(typeof y!="number"?y:Vb(y,ro)),p=d===Aa?W4:Aa,b=e.rects.popper,x=e.elements[j?p:d],C=b5(bs(x)?x:x.contextElement||Yn(e.elements.popper),i,f,o),O=oa(e.elements.reference),D=Gb({reference:O,element:b,placement:a}),_=Fd(Object.assign({},b,D)),P=d===Aa?_:O,z={top:C.top-P.top+g.top,bottom:P.bottom-C.bottom+g.bottom,left:C.left-P.left+g.left,right:P.right-C.right+g.right},L=e.modifiersData.offset;if(d===Aa&&L){var H=L[a];Object.keys(z).forEach(function(T){var V=[br,vr].indexOf(T)>=0?1:-1,ee=[Ht,vr].indexOf(T)>=0?"y":"x";z[T]+=H[ee]*V})}return z}function y5(e,t){t===void 0&&(t={});var r=t,s=r.placement,a=r.boundary,l=r.rootBoundary,o=r.padding,c=r.flipVariations,i=r.allowedAutoPlacements,u=i===void 0?bm:i,f=ia(s),h=f?c?Wp:Wp.filter(function(j){return ia(j)===f}):ro,d=h.filter(function(j){return u.indexOf(j)>=0});d.length===0&&(d=h);var v=d.reduce(function(j,m){return j[m]=zl(e,{placement:m,boundary:a,rootBoundary:l,padding:o})[Wr(m)],j},{});return Object.keys(v).sort(function(j,m){return v[j]-v[m]})}function j5(e){if(Wr(e)===vm)return[];var t=oi(e);return[Vp(e),t,Vp(t)]}function w5(e){var t=e.state,r=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var a=r.mainAxis,l=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!0:o,i=r.fallbackPlacements,u=r.padding,f=r.boundary,h=r.rootBoundary,d=r.altBoundary,v=r.flipVariations,j=v===void 0?!0:v,m=r.allowedAutoPlacements,y=t.options.placement,g=Wr(y),p=g===y,b=i||(p||!j?[oi(y)]:j5(y)),x=[y].concat(b).reduce(function(he,je){return he.concat(Wr(je)===vm?y5(t,{placement:je,boundary:f,rootBoundary:h,padding:u,flipVariations:j,allowedAutoPlacements:m}):je)},[]),C=t.rects.reference,O=t.rects.popper,D=new Map,_=!0,P=x[0],z=0;z<x.length;z++){var L=x[z],H=Wr(L),T=ia(L)===aa,V=[Ht,vr].indexOf(H)>=0,ee=V?"width":"height",R=zl(t,{placement:L,boundary:f,rootBoundary:h,altBoundary:d,padding:u}),F=V?T?br:qt:T?vr:Ht;C[ee]>O[ee]&&(F=oi(F));var B=oi(F),G=[];if(l&&G.push(R[H]<=0),c&&G.push(R[F]<=0,R[B]<=0),G.every(function(he){return he})){P=L,_=!1;break}D.set(L,G)}if(_)for(var ae=j?3:1,q=function(he){var je=x.find(function(J){var Y=D.get(J);if(Y)return Y.slice(0,he).every(function(ge){return ge})});if(je)return P=je,"break"},ie=ae;ie>0;ie--){var Se=q(ie);if(Se==="break")break}t.placement!==P&&(t.modifiersData[s]._skip=!0,t.placement=P,t.reset=!0)}}const N5={name:"flip",enabled:!0,phase:"main",fn:w5,requiresIfExists:["offset"],data:{_skip:!1}};function Gp(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Kp(e){return[Ht,br,vr,qt].some(function(t){return e[t]>=0})}function k5(e){var t=e.state,r=e.name,s=t.rects.reference,a=t.rects.popper,l=t.modifiersData.preventOverflow,o=zl(t,{elementContext:"reference"}),c=zl(t,{altBoundary:!0}),i=Gp(o,s),u=Gp(c,a,l),f=Kp(i),h=Kp(u);t.modifiersData[r]={referenceClippingOffsets:i,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":h})}const S5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:k5};function C5(e,t,r){var s=Wr(e),a=[qt,Ht].indexOf(s)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=l[0],c=l[1];return o=o||0,c=(c||0)*a,[qt,br].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function E5(e){var t=e.state,r=e.options,s=e.name,a=r.offset,l=a===void 0?[0,0]:a,o=bm.reduce(function(f,h){return f[h]=C5(h,t.rects,l),f},{}),c=o[t.placement],i=c.x,u=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=i,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=o}const $5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:E5};function _5(e){var t=e.state,r=e.name;t.modifiersData[r]=Gb({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const O5={name:"popperOffsets",enabled:!0,phase:"read",fn:_5,data:{}};function T5(e){return e==="x"?"y":"x"}function D5(e){var t=e.state,r=e.options,s=e.name,a=r.mainAxis,l=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!1:o,i=r.boundary,u=r.rootBoundary,f=r.altBoundary,h=r.padding,d=r.tether,v=d===void 0?!0:d,j=r.tetherOffset,m=j===void 0?0:j,y=zl(t,{boundary:i,rootBoundary:u,padding:h,altBoundary:f}),g=Wr(t.placement),p=ia(t.placement),b=!p,x=wm(g),C=T5(x),O=t.modifiersData.popperOffsets,D=t.rects.reference,_=t.rects.popper,P=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,z=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(O){if(l){var T,V=x==="y"?Ht:qt,ee=x==="y"?vr:br,R=x==="y"?"height":"width",F=O[x],B=F+y[V],G=F-y[ee],ae=v?-_[R]/2:0,q=p===aa?D[R]:_[R],ie=p===aa?-_[R]:-D[R],Se=t.elements.arrow,he=v&&Se?jm(Se):{width:0,height:0},je=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Hb(),J=je[V],Y=je[ee],ge=nl(0,D[R],he[R]),ne=b?D[R]/2-ae-ge-J-z.mainAxis:q-ge-J-z.mainAxis,$e=b?-D[R]/2+ae+ge+Y+z.mainAxis:ie+ge+Y+z.mainAxis,ze=t.elements.arrow&&no(t.elements.arrow),pt=ze?x==="y"?ze.clientTop||0:ze.clientLeft||0:0,ct=(T=L==null?void 0:L[x])!=null?T:0,X=F+ne-ct-pt,Ne=F+$e-ct,ye=nl(v?Ui(B,X):B,F,v?os(G,Ne):G);O[x]=ye,H[x]=ye-F}if(c){var Ge,We=x==="x"?Ht:qt,rt=x==="x"?vr:br,Te=O[C],gt=C==="y"?"height":"width",jr=Te+y[We],k=Te-y[rt],$=[Ht,qt].indexOf(g)!==-1,w=(Ge=L==null?void 0:L[C])!=null?Ge:0,E=$?jr:Te-D[gt]-_[gt]-w+z.altAxis,S=$?Te+D[gt]+_[gt]-w-z.altAxis:k,I=v&&$?r5(E,Te,S):nl(v?E:jr,Te,v?S:k);O[C]=I,H[C]=I-Te}t.modifiersData[s]=H}}const M5={name:"preventOverflow",enabled:!0,phase:"main",fn:D5,requiresIfExists:["offset"]};function P5(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function R5(e){return e===tr(e)||!Hr(e)?Nm(e):P5(e)}function I5(e){var t=e.getBoundingClientRect(),r=la(t.width)/e.offsetWidth||1,s=la(t.height)/e.offsetHeight||1;return r!==1||s!==1}function A5(e,t,r){r===void 0&&(r=!1);var s=Hr(t),a=Hr(t)&&I5(t),l=Yn(t),o=oa(e,a,r),c={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(s||!s&&!r)&&((Fn(t)!=="body"||Sm(l))&&(c=R5(t)),Hr(t)?(i=oa(t,!0),i.x+=t.clientLeft,i.y+=t.clientTop):l&&(i.x=km(l))),{x:o.left+c.scrollLeft-i.x,y:o.top+c.scrollTop-i.y,width:o.width,height:o.height}}function L5(e){var t=new Map,r=new Set,s=[];e.forEach(function(l){t.set(l.name,l)});function a(l){r.add(l.name);var o=[].concat(l.requires||[],l.requiresIfExists||[]);o.forEach(function(c){if(!r.has(c)){var i=t.get(c);i&&a(i)}}),s.push(l)}return e.forEach(function(l){r.has(l.name)||a(l)}),s}function z5(e){var t=L5(e);return Z4.reduce(function(r,s){return r.concat(t.filter(function(a){return a.phase===s}))},[])}function F5(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function U5(e){var t=e.reduce(function(r,s){var a=r[s.name];return r[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,r},{});return Object.keys(t).map(function(r){return t[r]})}var Jp={placement:"bottom",modifiers:[],strategy:"absolute"};function Xp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function B5(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,s=r===void 0?[]:r,a=t.defaultOptions,l=a===void 0?Jp:a;return function(o,c,i){i===void 0&&(i=l);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Jp,l),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},f=[],h=!1,d={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;j(),u.options=Object.assign({},l,u.options,y),u.scrollParents={reference:bs(o)?sl(o):o.contextElement?sl(o.contextElement):[],popper:sl(c)};var g=z5(U5([].concat(s,u.options.modifiers)));return u.orderedModifiers=g.filter(function(p){return p.enabled}),v(),d.update()},forceUpdate:function(){if(!h){var m=u.elements,y=m.reference,g=m.popper;if(Xp(y,g)){u.rects={reference:A5(y,no(g),u.options.strategy==="fixed"),popper:jm(g)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(_){return u.modifiersData[_.name]=Object.assign({},_.data)});for(var p=0;p<u.orderedModifiers.length;p++){if(u.reset===!0){u.reset=!1,p=-1;continue}var b=u.orderedModifiers[p],x=b.fn,C=b.options,O=C===void 0?{}:C,D=b.name;typeof x=="function"&&(u=x({state:u,options:O,name:D,instance:d})||u)}}}},update:F5(function(){return new Promise(function(m){d.forceUpdate(),m(u)})}),destroy:function(){j(),h=!0}};if(!Xp(o,c))return d;d.setOptions(i).then(function(m){!h&&i.onFirstUpdate&&i.onFirstUpdate(m)});function v(){u.orderedModifiers.forEach(function(m){var y=m.name,g=m.options,p=g===void 0?{}:g,b=m.effect;if(typeof b=="function"){var x=b({state:u,name:y,instance:d,options:p}),C=function(){};f.push(x||C)}})}function j(){f.forEach(function(m){return m()}),f=[]}return d}}var W5=B5({defaultModifiers:[S5,O5,u5,f5,$5,N5,M5,l5]}),Qp=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},H5={name:"applyStyles",enabled:!1},q5={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var r=t.elements,s=r.reference,a=r.popper;if("removeAttribute"in s){var l=(s.getAttribute("aria-describedby")||"").split(",").filter(function(o){return o.trim()!==a.id});l.length?s.setAttribute("aria-describedby",l.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(e){var t,r=e.state,s=r.elements,a=s.popper,l=s.reference,o=(t=a.getAttribute("role"))==null?void 0:t.toLowerCase();if(a.id&&o==="tooltip"&&"setAttribute"in l){var c=l.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(a.id)!==-1)return;l.setAttribute("aria-describedby",c?c+","+a.id:a.id)}}},V5=[];function Y5(e,t,r){var s=r===void 0?{}:r,a=s.enabled,l=a===void 0?!0:a,o=s.placement,c=o===void 0?"bottom":o,i=s.strategy,u=i===void 0?"absolute":i,f=s.modifiers,h=f===void 0?V5:f,d=xc(s,["enabled","placement","strategy","modifiers"]),v=N.useRef(),j=N.useCallback(function(){var x;(x=v.current)==null||x.update()},[]),m=N.useCallback(function(){var x;(x=v.current)==null||x.forceUpdate()},[]),y=U4(N.useState({placement:c,update:j,forceUpdate:m,attributes:{},styles:{popper:Qp(u),arrow:{}}})),g=y[0],p=y[1],b=N.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(x){var C=x.state,O={},D={};Object.keys(C.elements).forEach(function(_){O[_]=C.styles[_],D[_]=C.attributes[_]}),p({state:C,styles:O,attributes:D,update:j,forceUpdate:m,placement:C.placement})}}},[j,m,p]);return N.useEffect(function(){!v.current||!l||v.current.setOptions({placement:c,strategy:u,modifiers:[].concat(h,[b,H5])})},[u,c,b,l]),N.useEffect(function(){if(!(!l||e==null||t==null))return v.current=W5(e,t,Je({},d,{placement:c,strategy:u,modifiers:[].concat(h,[q5,b])})),function(){v.current!=null&&(v.current.destroy(),v.current=void 0,p(function(x){return Je({},x,{attributes:{},styles:{popper:Qp(u)}})}))}},[l,e,t]),g}function G5(e,t,r,s){var a=s&&typeof s!="boolean"?s.capture:s;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function Va(e,t,r,s){return L4(e,t,r,s),function(){G5(e,t,r,s)}}var K5=function(){},J5=K5;const X5=Yt(J5);function Q5(e){return e&&"setState"in e?wv.findDOMNode(e):e??null}const Z5=function(e){return to(Q5(e))};var e3=27,Zp=function(){};function t3(e){return e.button===0}function r3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var eg=function(e){return e&&("current"in e?e.current:e)};function n3(e,t,r){var s=r===void 0?{}:r,a=s.disabled,l=s.clickTrigger,o=l===void 0?"click":l,c=N.useRef(!1),i=t||Zp,u=N.useCallback(function(d){var v,j=eg(e);X5(!!j,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),c.current=!j||r3(d)||!t3(d)||!!Al(j,(v=d.composedPath==null?void 0:d.composedPath()[0])!=null?v:d.target)},[e]),f=Up(function(d){c.current||i(d)}),h=Up(function(d){d.keyCode===e3&&i(d)});N.useEffect(function(){if(!(a||e==null)){var d=window.event,v=Z5(eg(e)),j=Va(v,o,u,!0),m=Va(v,o,function(p){if(p===d){d=void 0;return}f(p)}),y=Va(v,"keyup",function(p){if(p===d){d=void 0;return}h(p)}),g=[];return"ontouchstart"in v.documentElement&&(g=[].slice.call(v.body.children).map(function(p){return Va(p,"mousemove",Zp)})),function(){j(),m(),y(),g.forEach(function(p){return p()})}}},[e,a,o,u,f,h])}function s3(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function a3(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function l3(e){var t,r,s,a,l=e.enabled,o=e.enableEvents,c=e.placement,i=e.flip,u=e.offset,f=e.fixed,h=e.containerPadding,d=e.arrowElement,v=e.popperConfig,j=v===void 0?{}:v,m=s3(j.modifiers);return Je({},j,{placement:c,enabled:l,strategy:f?"fixed":j.strategy,modifiers:a3(Je({},m,{eventListeners:{enabled:o},preventOverflow:Je({},m.preventOverflow,{options:h?Je({padding:h},(t=m.preventOverflow)==null?void 0:t.options):(r=m.preventOverflow)==null?void 0:r.options}),offset:{options:Je({offset:u},(s=m.offset)==null?void 0:s.options)},arrow:Je({},m.arrow,{enabled:!!d,options:Je({},(a=m.arrow)==null?void 0:a.options,{element:d})}),flip:Je({enabled:!!i},m.flip)}))})}function o3(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function i3(e,t){e.classList?e.classList.add(t):o3(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function tg(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function c3(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=tg(e.className,t):e.setAttribute("class",tg(e.className&&e.className.baseVal||"",t))}var Ro;function Cm(e){if((!Ro&&Ro!==0||e)&&xm){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Ro=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ro}var ju=function(e){var t;return typeof document>"u"?null:e==null?to().body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),(t=e)!=null&&t.nodeType&&e||null)};function rg(e,t){var r=N.useState(function(){return ju(e)}),s=r[0],a=r[1];if(!s){var l=ju(e);l&&a(l)}return N.useEffect(function(){},[t,s]),N.useEffect(function(){var o=ju(e);o!==s&&a(o)},[e,s]),s}const ng=e=>!e||typeof e=="function"?e:t=>{e.current=t};function u3(e,t){const r=ng(e),s=ng(t);return a=>{r&&r(a),s&&s(a)}}function d3(e,t){return N.useMemo(()=>u3(e,t),[e,t])}var Em=A.forwardRef(function(e,t){var r=e.flip,s=e.offset,a=e.placement,l=e.containerPadding,o=l===void 0?5:l,c=e.popperConfig,i=c===void 0?{}:c,u=e.transition,f=Bp(),h=f[0],d=f[1],v=Bp(),j=v[0],m=v[1],y=d3(d,t),g=rg(e.container),p=rg(e.target),b=N.useState(!e.show),x=b[0],C=b[1],O=Y5(p,h,l3({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:s,arrowElement:j,popperConfig:i})),D=O.styles,_=O.attributes,P=xc(O,["styles","attributes"]);e.show?x&&C(!1):!e.transition&&!x&&C(!0);var z=function(){C(!0),e.onExited&&e.onExited.apply(e,arguments)},L=e.show||u&&!x;if(n3(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!L)return null;var H=e.children(Je({},P,{show:!!e.show,props:Je({},_.popper,{style:D.popper,ref:y}),arrowProps:Je({},_.arrow,{style:D.arrow,ref:m})}));if(u){var T=e.onExit,V=e.onExiting,ee=e.onEnter,R=e.onEntering,F=e.onEntered;H=A.createElement(u,{in:e.show,appear:!0,onExit:T,onExiting:V,onExited:z,onEnter:ee,onEntering:R,onEntered:F},H)}return g?wv.createPortal(H,g):null});Em.displayName="Overlay";Em.propTypes={show:le.bool,placement:le.oneOf(bm),target:le.any,container:le.any,flip:le.bool,children:le.func.isRequired,containerPadding:le.number,popperConfig:le.object,rootClose:le.bool,rootCloseEvent:le.oneOf(["click","mousedown"]),rootCloseDisabled:le.bool,onHide:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];if(e.rootClose){var a;return(a=le.func).isRequired.apply(a,[e].concat(r))}return le.func.apply(le,[e].concat(r))},transition:le.elementType,onEnter:le.func,onEntering:le.func,onEntered:le.func,onExit:le.func,onExiting:le.func,onExited:le.func};function f3(){this.__data__=[],this.size=0}var m3=f3,h3=Ql;function p3(e,t){for(var r=e.length;r--;)if(h3(e[r][0],t))return r;return-1}var jc=p3,g3=jc,x3=Array.prototype,v3=x3.splice;function b3(e){var t=this.__data__,r=g3(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():v3.call(t,r,1),--this.size,!0}var y3=b3,j3=jc;function w3(e){var t=this.__data__,r=j3(t,e);return r<0?void 0:t[r][1]}var N3=w3,k3=jc;function S3(e){return k3(this.__data__,e)>-1}var C3=S3,E3=jc;function $3(e,t){var r=this.__data__,s=E3(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var _3=$3,O3=m3,T3=y3,D3=N3,M3=C3,P3=_3;function ya(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}ya.prototype.clear=O3;ya.prototype.delete=T3;ya.prototype.get=D3;ya.prototype.has=M3;ya.prototype.set=P3;var wc=ya,R3=wc;function I3(){this.__data__=new R3,this.size=0}var A3=I3;function L3(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var z3=L3;function F3(e){return this.__data__.get(e)}var U3=F3;function B3(e){return this.__data__.has(e)}var W3=B3,H3=Jr,q3=H3["__core-js_shared__"],V3=q3,wu=V3,sg=function(){var e=/[^.]+$/.exec(wu&&wu.keys&&wu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Y3(e){return!!sg&&sg in e}var G3=Y3,K3=Function.prototype,J3=K3.toString;function X3(e){if(e!=null){try{return J3.call(e)}catch{}try{return e+""}catch{}}return""}var Kb=X3,Q3=mm,Z3=G3,eC=vn,tC=Kb,rC=/[\\^$.*+?()[\]{}|]/g,nC=/^\[object .+?Constructor\]$/,sC=Function.prototype,aC=Object.prototype,lC=sC.toString,oC=aC.hasOwnProperty,iC=RegExp("^"+lC.call(oC).replace(rC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cC(e){if(!eC(e)||Z3(e))return!1;var t=Q3(e)?iC:nC;return t.test(tC(e))}var uC=cC;function dC(e,t){return e==null?void 0:e[t]}var fC=dC,mC=uC,hC=fC;function pC(e,t){var r=hC(e,t);return mC(r)?r:void 0}var ks=pC,gC=ks,xC=Jr,vC=gC(xC,"Map"),$m=vC,bC=ks,yC=bC(Object,"create"),Nc=yC,ag=Nc;function jC(){this.__data__=ag?ag(null):{},this.size=0}var wC=jC;function NC(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kC=NC,SC=Nc,CC="__lodash_hash_undefined__",EC=Object.prototype,$C=EC.hasOwnProperty;function _C(e){var t=this.__data__;if(SC){var r=t[e];return r===CC?void 0:r}return $C.call(t,e)?t[e]:void 0}var OC=_C,TC=Nc,DC=Object.prototype,MC=DC.hasOwnProperty;function PC(e){var t=this.__data__;return TC?t[e]!==void 0:MC.call(t,e)}var RC=PC,IC=Nc,AC="__lodash_hash_undefined__";function LC(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=IC&&t===void 0?AC:t,this}var zC=LC,FC=wC,UC=kC,BC=OC,WC=RC,HC=zC;function ja(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}ja.prototype.clear=FC;ja.prototype.delete=UC;ja.prototype.get=BC;ja.prototype.has=WC;ja.prototype.set=HC;var qC=ja,lg=qC,VC=wc,YC=$m;function GC(){this.size=0,this.__data__={hash:new lg,map:new(YC||VC),string:new lg}}var KC=GC;function JC(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var XC=JC,QC=XC;function ZC(e,t){var r=e.__data__;return QC(t)?r[typeof t=="string"?"string":"hash"]:r.map}var kc=ZC,eE=kc;function tE(e){var t=eE(this,e).delete(e);return this.size-=t?1:0,t}var rE=tE,nE=kc;function sE(e){return nE(this,e).get(e)}var aE=sE,lE=kc;function oE(e){return lE(this,e).has(e)}var iE=oE,cE=kc;function uE(e,t){var r=cE(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var dE=uE,fE=KC,mE=rE,hE=aE,pE=iE,gE=dE;function wa(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}wa.prototype.clear=fE;wa.prototype.delete=mE;wa.prototype.get=hE;wa.prototype.has=pE;wa.prototype.set=gE;var _m=wa,xE=wc,vE=$m,bE=_m,yE=200;function jE(e,t){var r=this.__data__;if(r instanceof xE){var s=r.__data__;if(!vE||s.length<yE-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new bE(s)}return r.set(e,t),this.size=r.size,this}var wE=jE,NE=wc,kE=A3,SE=z3,CE=U3,EE=W3,$E=wE;function Na(e){var t=this.__data__=new NE(e);this.size=t.size}Na.prototype.clear=kE;Na.prototype.delete=SE;Na.prototype.get=CE;Na.prototype.has=EE;Na.prototype.set=$E;var Om=Na,_E="__lodash_hash_undefined__";function OE(e){return this.__data__.set(e,_E),this}var TE=OE;function DE(e){return this.__data__.has(e)}var ME=DE,PE=_m,RE=TE,IE=ME;function Bi(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new PE;++t<r;)this.add(e[t])}Bi.prototype.add=Bi.prototype.push=RE;Bi.prototype.has=IE;var AE=Bi;function LE(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var zE=LE;function FE(e,t){return e.has(t)}var UE=FE,BE=AE,WE=zE,HE=UE,qE=1,VE=2;function YE(e,t,r,s,a,l){var o=r&qE,c=e.length,i=t.length;if(c!=i&&!(o&&i>c))return!1;var u=l.get(e),f=l.get(t);if(u&&f)return u==t&&f==e;var h=-1,d=!0,v=r&VE?new BE:void 0;for(l.set(e,t),l.set(t,e);++h<c;){var j=e[h],m=t[h];if(s)var y=o?s(m,j,h,t,e,l):s(j,m,h,e,t,l);if(y!==void 0){if(y)continue;d=!1;break}if(v){if(!WE(t,function(g,p){if(!HE(v,p)&&(j===g||a(j,g,r,s,l)))return v.push(p)})){d=!1;break}}else if(!(j===m||a(j,m,r,s,l))){d=!1;break}}return l.delete(e),l.delete(t),d}var Jb=YE,GE=Jr,KE=GE.Uint8Array,Xb=KE;function JE(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var XE=JE;function QE(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var ZE=QE,og=va,ig=Xb,e$=Ql,t$=Jb,r$=XE,n$=ZE,s$=1,a$=2,l$="[object Boolean]",o$="[object Date]",i$="[object Error]",c$="[object Map]",u$="[object Number]",d$="[object RegExp]",f$="[object Set]",m$="[object String]",h$="[object Symbol]",p$="[object ArrayBuffer]",g$="[object DataView]",cg=og?og.prototype:void 0,Nu=cg?cg.valueOf:void 0;function x$(e,t,r,s,a,l,o){switch(r){case g$:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case p$:return!(e.byteLength!=t.byteLength||!l(new ig(e),new ig(t)));case l$:case o$:case u$:return e$(+e,+t);case i$:return e.name==t.name&&e.message==t.message;case d$:case m$:return e==t+"";case c$:var c=r$;case f$:var i=s&s$;if(c||(c=n$),e.size!=t.size&&!i)return!1;var u=o.get(e);if(u)return u==t;s|=a$,o.set(e,t);var f=t$(c(e),c(t),s,a,l,o);return o.delete(e),f;case h$:if(Nu)return Nu.call(e)==Nu.call(t)}return!1}var v$=x$;function b$(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var Tm=b$,y$=Array.isArray,yr=y$,j$=Tm,w$=yr;function N$(e,t,r){var s=t(e);return w$(e)?s:j$(s,r(e))}var Qb=N$;function k$(e,t){for(var r=-1,s=e==null?0:e.length,a=0,l=[];++r<s;){var o=e[r];t(o,r,e)&&(l[a++]=o)}return l}var S$=k$;function C$(){return[]}var Zb=C$,E$=S$,$$=Zb,_$=Object.prototype,O$=_$.propertyIsEnumerable,ug=Object.getOwnPropertySymbols,T$=ug?function(e){return e==null?[]:(e=Object(e),E$(ug(e),function(t){return O$.call(e,t)}))}:$$,Dm=T$;function D$(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var M$=D$,P$=ba,R$=Vn,I$="[object Arguments]";function A$(e){return R$(e)&&P$(e)==I$}var L$=A$,dg=L$,z$=Vn,ey=Object.prototype,F$=ey.hasOwnProperty,U$=ey.propertyIsEnumerable,B$=dg(function(){return arguments}())?dg:function(e){return z$(e)&&F$.call(e,"callee")&&!U$.call(e,"callee")},Mm=B$,Wi={exports:{}};function W$(){return!1}var H$=W$;Wi.exports;(function(e,t){var r=Jr,s=H$,a=t&&!t.nodeType&&t,l=a&&!0&&e&&!e.nodeType&&e,o=l&&l.exports===a,c=o?r.Buffer:void 0,i=c?c.isBuffer:void 0,u=i||s;e.exports=u})(Wi,Wi.exports);var Sc=Wi.exports,q$=ba,V$=hm,Y$=Vn,G$="[object Arguments]",K$="[object Array]",J$="[object Boolean]",X$="[object Date]",Q$="[object Error]",Z$="[object Function]",e6="[object Map]",t6="[object Number]",r6="[object Object]",n6="[object RegExp]",s6="[object Set]",a6="[object String]",l6="[object WeakMap]",o6="[object ArrayBuffer]",i6="[object DataView]",c6="[object Float32Array]",u6="[object Float64Array]",d6="[object Int8Array]",f6="[object Int16Array]",m6="[object Int32Array]",h6="[object Uint8Array]",p6="[object Uint8ClampedArray]",g6="[object Uint16Array]",x6="[object Uint32Array]",Ie={};Ie[c6]=Ie[u6]=Ie[d6]=Ie[f6]=Ie[m6]=Ie[h6]=Ie[p6]=Ie[g6]=Ie[x6]=!0;Ie[G$]=Ie[K$]=Ie[o6]=Ie[J$]=Ie[i6]=Ie[X$]=Ie[Q$]=Ie[Z$]=Ie[e6]=Ie[t6]=Ie[r6]=Ie[n6]=Ie[s6]=Ie[a6]=Ie[l6]=!1;function v6(e){return Y$(e)&&V$(e.length)&&!!Ie[q$(e)]}var b6=v6;function y6(e){return function(t){return e(t)}}var Cc=y6,Hi={exports:{}};Hi.exports;(function(e,t){var r=Db,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,l=a&&a.exports===s,o=l&&r.process,c=function(){try{var i=a&&a.require&&a.require("util").types;return i||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(Hi,Hi.exports);var Pm=Hi.exports,j6=b6,w6=Cc,fg=Pm,mg=fg&&fg.isTypedArray,N6=mg?w6(mg):j6,Rm=N6,k6=M$,S6=Mm,C6=yr,E6=Sc,$6=pm,_6=Rm,O6=Object.prototype,T6=O6.hasOwnProperty;function D6(e,t){var r=C6(e),s=!r&&S6(e),a=!r&&!s&&E6(e),l=!r&&!s&&!a&&_6(e),o=r||s||a||l,c=o?k6(e.length,String):[],i=c.length;for(var u in e)(t||T6.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||l&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$6(u,i)))&&c.push(u);return c}var ty=D6,M6=Object.prototype;function P6(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||M6;return e===r}var Im=P6;function R6(e,t){return function(r){return e(t(r))}}var ry=R6,I6=ry,A6=I6(Object.keys,Object),L6=A6,z6=Im,F6=L6,U6=Object.prototype,B6=U6.hasOwnProperty;function W6(e){if(!z6(e))return F6(e);var t=[];for(var r in Object(e))B6.call(e,r)&&r!="constructor"&&t.push(r);return t}var H6=W6,q6=ty,V6=H6,Y6=Zl;function G6(e){return Y6(e)?q6(e):V6(e)}var so=G6,K6=Qb,J6=Dm,X6=so;function Q6(e){return K6(e,X6,J6)}var ny=Q6,hg=ny,Z6=1,e_=Object.prototype,t_=e_.hasOwnProperty;function r_(e,t,r,s,a,l){var o=r&Z6,c=hg(e),i=c.length,u=hg(t),f=u.length;if(i!=f&&!o)return!1;for(var h=i;h--;){var d=c[h];if(!(o?d in t:t_.call(t,d)))return!1}var v=l.get(e),j=l.get(t);if(v&&j)return v==t&&j==e;var m=!0;l.set(e,t),l.set(t,e);for(var y=o;++h<i;){d=c[h];var g=e[d],p=t[d];if(s)var b=o?s(p,g,d,t,e,l):s(g,p,d,e,t,l);if(!(b===void 0?g===p||a(g,p,r,s,l):b)){m=!1;break}y||(y=d=="constructor")}if(m&&!y){var x=e.constructor,C=t.constructor;x!=C&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof C=="function"&&C instanceof C)&&(m=!1)}return l.delete(e),l.delete(t),m}var n_=r_,s_=ks,a_=Jr,l_=s_(a_,"DataView"),o_=l_,i_=ks,c_=Jr,u_=i_(c_,"Promise"),d_=u_,f_=ks,m_=Jr,h_=f_(m_,"Set"),p_=h_,g_=ks,x_=Jr,v_=g_(x_,"WeakMap"),b_=v_,Ud=o_,Bd=$m,Wd=d_,Hd=p_,qd=b_,sy=ba,ka=Kb,pg="[object Map]",y_="[object Object]",gg="[object Promise]",xg="[object Set]",vg="[object WeakMap]",bg="[object DataView]",j_=ka(Ud),w_=ka(Bd),N_=ka(Wd),k_=ka(Hd),S_=ka(qd),Xn=sy;(Ud&&Xn(new Ud(new ArrayBuffer(1)))!=bg||Bd&&Xn(new Bd)!=pg||Wd&&Xn(Wd.resolve())!=gg||Hd&&Xn(new Hd)!=xg||qd&&Xn(new qd)!=vg)&&(Xn=function(e){var t=sy(e),r=t==y_?e.constructor:void 0,s=r?ka(r):"";if(s)switch(s){case j_:return bg;case w_:return pg;case N_:return gg;case k_:return xg;case S_:return vg}return t});var Ec=Xn,ku=Om,C_=Jb,E_=v$,$_=n_,yg=Ec,jg=yr,wg=Sc,__=Rm,O_=1,Ng="[object Arguments]",kg="[object Array]",Io="[object Object]",T_=Object.prototype,Sg=T_.hasOwnProperty;function D_(e,t,r,s,a,l){var o=jg(e),c=jg(t),i=o?kg:yg(e),u=c?kg:yg(t);i=i==Ng?Io:i,u=u==Ng?Io:u;var f=i==Io,h=u==Io,d=i==u;if(d&&wg(e)){if(!wg(t))return!1;o=!0,f=!1}if(d&&!f)return l||(l=new ku),o||__(e)?C_(e,t,r,s,a,l):E_(e,t,i,r,s,a,l);if(!(r&O_)){var v=f&&Sg.call(e,"__wrapped__"),j=h&&Sg.call(t,"__wrapped__");if(v||j){var m=v?e.value():e,y=j?t.value():t;return l||(l=new ku),a(m,y,r,s,l)}}return d?(l||(l=new ku),$_(e,t,r,s,a,l)):!1}var M_=D_,P_=M_,Cg=Vn;function ay(e,t,r,s,a){return e===t?!0:e==null||t==null||!Cg(e)&&!Cg(t)?e!==e&&t!==t:P_(e,t,r,s,ay,a)}var Am=ay,R_=Am;function I_(e,t){return R_(e,t)}var A_=I_;const L_=Yt(A_);function Su(e,t){var r=gm(e);return r?r.innerHeight:ls(e).height}function ly(e,t,r){e.closest&&!r&&e.closest(t);var s=e;do{if(R4(s,t))return s;s=s.parentElement}while(s&&s!==r&&s.nodeType===document.ELEMENT_NODE);return null}function z_(e,t,r,s){for(var a=e.length,l=r+(s?1:-1);s?l--:++l<a;)if(t(e[l],l,e))return l;return-1}var F_=z_,U_=Om,B_=Am,W_=1,H_=2;function q_(e,t,r,s){var a=r.length,l=a,o=!s;if(e==null)return!l;for(e=Object(e);a--;){var c=r[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<l;){c=r[a];var i=c[0],u=e[i],f=c[1];if(o&&c[2]){if(u===void 0&&!(i in e))return!1}else{var h=new U_;if(s)var d=s(u,f,i,e,t,h);if(!(d===void 0?B_(f,u,W_|H_,s,h):d))return!1}}return!0}var V_=q_,Y_=vn;function G_(e){return e===e&&!Y_(e)}var oy=G_,K_=oy,J_=so;function X_(e){for(var t=J_(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,K_(a)]}return t}var Q_=X_;function Z_(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var iy=Z_,eO=V_,tO=Q_,rO=iy;function nO(e){var t=tO(e);return t.length==1&&t[0][2]?rO(t[0][0],t[0][1]):function(r){return r===e||eO(r,e,t)}}var sO=nO,aO=yr,lO=eo,oO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iO=/^\w*$/;function cO(e,t){if(aO(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||lO(e)?!0:iO.test(e)||!oO.test(e)||t!=null&&e in Object(t)}var Lm=cO,cy=_m,uO="Expected a function";function zm(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(uO);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],l=r.cache;if(l.has(a))return l.get(a);var o=e.apply(this,s);return r.cache=l.set(a,o)||l,o};return r.cache=new(zm.Cache||cy),r}zm.Cache=cy;var dO=zm,fO=dO,mO=500;function hO(e){var t=fO(e,function(s){return r.size===mO&&r.clear(),s}),r=t.cache;return t}var pO=hO,gO=pO,xO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vO=/\\(\\)?/g,bO=gO(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(xO,function(r,s,a,l){t.push(a?l.replace(vO,"$1"):s||r)}),t}),yO=bO;function jO(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var Fm=jO,Eg=va,wO=Fm,NO=yr,kO=eo,$g=Eg?Eg.prototype:void 0,_g=$g?$g.toString:void 0;function uy(e){if(typeof e=="string")return e;if(NO(e))return wO(e,uy)+"";if(kO(e))return _g?_g.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var SO=uy,CO=SO;function EO(e){return e==null?"":CO(e)}var $O=EO,_O=yr,OO=Lm,TO=yO,DO=$O;function MO(e,t){return _O(e)?e:OO(e,t)?[e]:TO(DO(e))}var $c=MO,PO=eo;function RO(e){if(typeof e=="string"||PO(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ao=RO,IO=$c,AO=ao;function LO(e,t){t=IO(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[AO(t[r++])];return r&&r==s?e:void 0}var _c=LO,zO=_c;function FO(e,t,r){var s=e==null?void 0:zO(e,t);return s===void 0?r:s}var UO=FO;function BO(e,t){return e!=null&&t in Object(e)}var WO=BO,HO=$c,qO=Mm,VO=yr,YO=pm,GO=hm,KO=ao;function JO(e,t,r){t=HO(t,e);for(var s=-1,a=t.length,l=!1;++s<a;){var o=KO(t[s]);if(!(l=e!=null&&r(e,o)))break;e=e[o]}return l||++s!=a?l:(a=e==null?0:e.length,!!a&&GO(a)&&YO(o,a)&&(VO(e)||qO(e)))}var XO=JO,QO=WO,ZO=XO;function eT(e,t){return e!=null&&ZO(e,t,QO)}var tT=eT,rT=Am,nT=UO,sT=tT,aT=Lm,lT=oy,oT=iy,iT=ao,cT=1,uT=2;function dT(e,t){return aT(e)&&lT(t)?oT(iT(e),t):function(r){var s=nT(r,e);return s===void 0&&s===t?sT(r,e):rT(t,s,cT|uT)}}var fT=dT;function mT(e){return e}var Oc=mT;function hT(e){return function(t){return t==null?void 0:t[e]}}var pT=hT,gT=_c;function xT(e){return function(t){return gT(t,e)}}var vT=xT,bT=pT,yT=vT,jT=Lm,wT=ao;function NT(e){return jT(e)?bT(wT(e)):yT(e)}var kT=NT,ST=sO,CT=fT,ET=Oc,$T=yr,_T=kT;function OT(e){return typeof e=="function"?e:e==null?ET:typeof e=="object"?$T(e)?CT(e[0],e[1]):ST(e):_T(e)}var Tc=OT,TT=F_,DT=Tc,MT=Rb,PT=Math.max;function RT(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:MT(r);return a<0&&(a=PT(s+a,0)),TT(e,DT(t),a)}var IT=RT;const AT=Yt(IT);var LT=Math.ceil,zT=Math.max;function FT(e,t,r,s){for(var a=-1,l=zT(LT((t-e)/(r||1)),0),o=Array(l);l--;)o[s?l:++a]=e,e+=r;return o}var UT=FT,BT=UT,WT=bc,Cu=Pb;function HT(e){return function(t,r,s){return s&&typeof s!="number"&&WT(t,r,s)&&(r=s=void 0),t=Cu(t),r===void 0?(r=t,t=0):r=Cu(r),s=s===void 0?t<r?1:-1:Cu(s),BT(t,r,s,e)}}var qT=HT,VT=qT,YT=VT(),GT=YT;const KT=Yt(GT);var Og=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function JT(e,t){return!!(e===t||Og(e)&&Og(t))}function XT(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!JT(e[r],t[r]))return!1;return!0}function dy(e,t){t===void 0&&(t=XT);var r=null;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){r=null},s}function Vd(e,t){var r=gm(e);return r?r.innerWidth:ls(e).width}var Tg=va,QT=Mm,ZT=yr,Dg=Tg?Tg.isConcatSpreadable:void 0;function eD(e){return ZT(e)||QT(e)||!!(Dg&&e&&e[Dg])}var tD=eD,rD=Tm,nD=tD;function fy(e,t,r,s,a){var l=-1,o=e.length;for(r||(r=nD),a||(a=[]);++l<o;){var c=e[l];t>0&&r(c)?t>1?fy(c,t-1,r,s,a):rD(a,c):s||(a[a.length]=c)}return a}var my=fy;function sD(e){return function(t,r,s){for(var a=-1,l=Object(t),o=s(t),c=o.length;c--;){var i=o[e?c:++a];if(r(l[i],i,l)===!1)break}return t}}var aD=sD,lD=aD,oD=lD(),iD=oD,cD=iD,uD=so;function dD(e,t){return e&&cD(e,t,uD)}var Um=dD,fD=Zl;function mD(e,t){return function(r,s){if(r==null)return r;if(!fD(r))return e(r,s);for(var a=r.length,l=t?a:-1,o=Object(r);(t?l--:++l<a)&&s(o[l],l,o)!==!1;);return r}}var hD=mD,pD=Um,gD=hD,xD=gD(pD),vD=xD,bD=vD,yD=Zl;function jD(e,t){var r=-1,s=yD(e)?Array(e.length):[];return bD(e,function(a,l,o){s[++r]=t(a,l,o)}),s}var wD=jD;function ND(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var kD=ND,Mg=eo;function SD(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,l=Mg(e),o=t!==void 0,c=t===null,i=t===t,u=Mg(t);if(!c&&!u&&!l&&e>t||l&&o&&i&&!c&&!u||s&&o&&i||!r&&i||!a)return 1;if(!s&&!l&&!u&&e<t||u&&r&&a&&!s&&!l||c&&r&&a||!o&&a||!i)return-1}return 0}var CD=SD,ED=CD;function $D(e,t,r){for(var s=-1,a=e.criteria,l=t.criteria,o=a.length,c=r.length;++s<o;){var i=ED(a[s],l[s]);if(i){if(s>=c)return i;var u=r[s];return i*(u=="desc"?-1:1)}}return e.index-t.index}var _D=$D,Eu=Fm,OD=_c,TD=Tc,DD=wD,MD=kD,PD=Cc,RD=_D,ID=Oc,AD=yr;function LD(e,t,r){t.length?t=Eu(t,function(l){return AD(l)?function(o){return OD(o,l.length===1?l[0]:l)}:l}):t=[ID];var s=-1;t=Eu(t,PD(TD));var a=DD(e,function(l,o,c){var i=Eu(t,function(u){return u(l)});return{criteria:i,index:++s,value:l}});return MD(a,function(l,o){return RD(l,o,r)})}var zD=LD;function FD(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var UD=FD,BD=UD,Pg=Math.max;function WD(e,t,r){return t=Pg(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,l=Pg(s.length-t,0),o=Array(l);++a<l;)o[a]=s[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=s[a];return c[t]=r(o),BD(e,this,c)}}var hy=WD;function HD(e){return function(){return e}}var qD=HD,VD=ks,YD=function(){try{var e=VD(Object,"defineProperty");return e({},"",{}),e}catch{}}(),py=YD,GD=qD,Rg=py,KD=Oc,JD=Rg?function(e,t){return Rg(e,"toString",{configurable:!0,enumerable:!1,value:GD(t),writable:!0})}:KD,XD=JD,QD=800,ZD=16,eM=Date.now;function tM(e){var t=0,r=0;return function(){var s=eM(),a=ZD-(s-r);if(r=s,a>0){if(++t>=QD)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var rM=tM,nM=XD,sM=rM,aM=sM(nM),gy=aM,lM=Oc,oM=hy,iM=gy;function cM(e,t){return iM(oM(e,t,lM),e+"")}var xy=cM,uM=my,dM=zD,fM=xy,Ig=bc,mM=fM(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Ig(e,t[0],t[1])?t=[]:r>2&&Ig(t[0],t[1],t[2])&&(t=[t[0]]),dM(e,uM(t,1),[])}),hM=mM;const pM=Yt(hM);function vy(e){return mb(e)||Ob(e)||um(e)||hb()}function gM(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var xM=gM,vM=vn,bM=Im,yM=xM,jM=Object.prototype,wM=jM.hasOwnProperty;function NM(e){if(!vM(e))return yM(e);var t=bM(e),r=[];for(var s in e)s=="constructor"&&(t||!wM.call(e,s))||r.push(s);return r}var kM=NM,SM=ty,CM=kM,EM=Zl;function $M(e){return EM(e)?SM(e,!0):CM(e)}var Dc=$M,_M=xy,OM=Ql,TM=bc,DM=Dc,by=Object.prototype,MM=by.hasOwnProperty,PM=_M(function(e,t){e=Object(e);var r=-1,s=t.length,a=s>2?t[2]:void 0;for(a&&TM(t[0],t[1],a)&&(s=1);++r<s;)for(var l=t[r],o=DM(l),c=-1,i=o.length;++c<i;){var u=o[c],f=e[u];(f===void 0||OM(f,by[u])&&!MM.call(e,u))&&(e[u]=l[u])}return e}),RM=PM;const IM=Yt(RM);var Ag=py;function AM(e,t,r){t=="__proto__"&&Ag?Ag(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Bm=AM,LM=Bm,zM=Um,FM=Tc;function UM(e,t){var r={};return t=FM(t),zM(e,function(s,a,l){LM(r,a,t(s,a,l))}),r}var BM=UM;const WM=Yt(BM);function HM(e,t){for(var r=-1,s=e==null?0:e.length;++r<s&&t(e[r],r,e)!==!1;);return e}var yy=HM,qM=Bm,VM=Ql,YM=Object.prototype,GM=YM.hasOwnProperty;function KM(e,t,r){var s=e[t];(!(GM.call(e,t)&&VM(s,r))||r===void 0&&!(t in e))&&qM(e,t,r)}var jy=KM,JM=jy,XM=Bm;function QM(e,t,r,s){var a=!r;r||(r={});for(var l=-1,o=t.length;++l<o;){var c=t[l],i=s?s(r[c],e[c],c,r,e):void 0;i===void 0&&(i=e[c]),a?XM(r,c,i):JM(r,c,i)}return r}var lo=QM,ZM=lo,eP=so;function tP(e,t){return e&&ZM(t,eP(t),e)}var rP=tP,nP=lo,sP=Dc;function aP(e,t){return e&&nP(t,sP(t),e)}var lP=aP,qi={exports:{}};qi.exports;(function(e,t){var r=Jr,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,l=a&&a.exports===s,o=l?r.Buffer:void 0,c=o?o.allocUnsafe:void 0;function i(u,f){if(f)return u.slice();var h=u.length,d=c?c(h):new u.constructor(h);return u.copy(d),d}e.exports=i})(qi,qi.exports);var oP=qi.exports;function iP(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}var cP=iP,uP=lo,dP=Dm;function fP(e,t){return uP(e,dP(e),t)}var mP=fP,hP=ry,pP=hP(Object.getPrototypeOf,Object),Mc=pP,gP=Tm,xP=Mc,vP=Dm,bP=Zb,yP=Object.getOwnPropertySymbols,jP=yP?function(e){for(var t=[];e;)gP(t,vP(e)),e=xP(e);return t}:bP,wy=jP,wP=lo,NP=wy;function kP(e,t){return wP(e,NP(e),t)}var SP=kP,CP=Qb,EP=wy,$P=Dc;function _P(e){return CP(e,$P,EP)}var Ny=_P,OP=Object.prototype,TP=OP.hasOwnProperty;function DP(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&TP.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var MP=DP,Lg=Xb;function PP(e){var t=new e.constructor(e.byteLength);return new Lg(t).set(new Lg(e)),t}var Wm=PP,RP=Wm;function IP(e,t){var r=t?RP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var AP=IP,LP=/\w*$/;function zP(e){var t=new e.constructor(e.source,LP.exec(e));return t.lastIndex=e.lastIndex,t}var FP=zP,zg=va,Fg=zg?zg.prototype:void 0,Ug=Fg?Fg.valueOf:void 0;function UP(e){return Ug?Object(Ug.call(e)):{}}var BP=UP,WP=Wm;function HP(e,t){var r=t?WP(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var qP=HP,VP=Wm,YP=AP,GP=FP,KP=BP,JP=qP,XP="[object Boolean]",QP="[object Date]",ZP="[object Map]",eR="[object Number]",tR="[object RegExp]",rR="[object Set]",nR="[object String]",sR="[object Symbol]",aR="[object ArrayBuffer]",lR="[object DataView]",oR="[object Float32Array]",iR="[object Float64Array]",cR="[object Int8Array]",uR="[object Int16Array]",dR="[object Int32Array]",fR="[object Uint8Array]",mR="[object Uint8ClampedArray]",hR="[object Uint16Array]",pR="[object Uint32Array]";function gR(e,t,r){var s=e.constructor;switch(t){case aR:return VP(e);case XP:case QP:return new s(+e);case lR:return YP(e,r);case oR:case iR:case cR:case uR:case dR:case fR:case mR:case hR:case pR:return JP(e,r);case ZP:return new s;case eR:case nR:return new s(e);case tR:return GP(e);case rR:return new s;case sR:return KP(e)}}var xR=gR,vR=vn,Bg=Object.create,bR=function(){function e(){}return function(t){if(!vR(t))return{};if(Bg)return Bg(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ky=bR,yR=ky,jR=Mc,wR=Im;function NR(e){return typeof e.constructor=="function"&&!wR(e)?yR(jR(e)):{}}var kR=NR,SR=Ec,CR=Vn,ER="[object Map]";function $R(e){return CR(e)&&SR(e)==ER}var _R=$R,OR=_R,TR=Cc,Wg=Pm,Hg=Wg&&Wg.isMap,DR=Hg?TR(Hg):OR,MR=DR,PR=Ec,RR=Vn,IR="[object Set]";function AR(e){return RR(e)&&PR(e)==IR}var LR=AR,zR=LR,FR=Cc,qg=Pm,Vg=qg&&qg.isSet,UR=Vg?FR(Vg):zR,BR=UR,WR=Om,HR=yy,qR=jy,VR=rP,YR=lP,GR=oP,KR=cP,JR=mP,XR=SP,QR=ny,ZR=Ny,eI=Ec,tI=MP,rI=xR,nI=kR,sI=yr,aI=Sc,lI=MR,oI=vn,iI=BR,cI=so,uI=Dc,dI=1,fI=2,mI=4,Sy="[object Arguments]",hI="[object Array]",pI="[object Boolean]",gI="[object Date]",xI="[object Error]",Cy="[object Function]",vI="[object GeneratorFunction]",bI="[object Map]",yI="[object Number]",Ey="[object Object]",jI="[object RegExp]",wI="[object Set]",NI="[object String]",kI="[object Symbol]",SI="[object WeakMap]",CI="[object ArrayBuffer]",EI="[object DataView]",$I="[object Float32Array]",_I="[object Float64Array]",OI="[object Int8Array]",TI="[object Int16Array]",DI="[object Int32Array]",MI="[object Uint8Array]",PI="[object Uint8ClampedArray]",RI="[object Uint16Array]",II="[object Uint32Array]",Me={};Me[Sy]=Me[hI]=Me[CI]=Me[EI]=Me[pI]=Me[gI]=Me[$I]=Me[_I]=Me[OI]=Me[TI]=Me[DI]=Me[bI]=Me[yI]=Me[Ey]=Me[jI]=Me[wI]=Me[NI]=Me[kI]=Me[MI]=Me[PI]=Me[RI]=Me[II]=!0;Me[xI]=Me[Cy]=Me[SI]=!1;function ii(e,t,r,s,a,l){var o,c=t&dI,i=t&fI,u=t&mI;if(r&&(o=a?r(e,s,a,l):r(e)),o!==void 0)return o;if(!oI(e))return e;var f=sI(e);if(f){if(o=tI(e),!c)return KR(e,o)}else{var h=eI(e),d=h==Cy||h==vI;if(aI(e))return GR(e,c);if(h==Ey||h==Sy||d&&!a){if(o=i||d?{}:nI(e),!c)return i?XR(e,YR(o,e)):JR(e,VR(o,e))}else{if(!Me[h])return a?e:{};o=rI(e,h,c)}}l||(l=new WR);var v=l.get(e);if(v)return v;l.set(e,o),iI(e)?e.forEach(function(y){o.add(ii(y,t,r,y,e,l))}):lI(e)&&e.forEach(function(y,g){o.set(g,ii(y,t,r,g,e,l))});var j=u?i?ZR:QR:i?uI:cI,m=f?void 0:j(e);return HR(m||e,function(y,g){m&&(g=y,y=e[g]),qR(o,g,ii(y,t,r,g,e,l))}),o}var AI=ii;function LI(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var zI=LI,FI=_c,UI=Tb;function BI(e,t){return t.length<2?e:FI(e,UI(t,0,-1))}var WI=BI,HI=$c,qI=zI,VI=WI,YI=ao;function GI(e,t){return t=HI(t,e),e=VI(e,t),e==null||delete e[YI(qI(t))]}var KI=GI,JI=ba,XI=Mc,QI=Vn,ZI="[object Object]",eA=Function.prototype,tA=Object.prototype,$y=eA.toString,rA=tA.hasOwnProperty,nA=$y.call(Object);function sA(e){if(!QI(e)||JI(e)!=ZI)return!1;var t=XI(e);if(t===null)return!0;var r=rA.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&$y.call(r)==nA}var aA=sA,lA=aA;function oA(e){return lA(e)?void 0:e}var iA=oA,cA=my;function uA(e){var t=e==null?0:e.length;return t?cA(e,1):[]}var dA=uA,fA=dA,mA=hy,hA=gy;function pA(e){return hA(mA(e,void 0,fA),e+"")}var gA=pA,xA=Fm,vA=AI,bA=KI,yA=$c,jA=lo,wA=iA,NA=gA,kA=Ny,SA=1,CA=2,EA=4,$A=NA(function(e,t){var r={};if(e==null)return r;var s=!1;t=xA(t,function(l){return l=yA(l,e),s||(s=l.length>1),l}),jA(e,kA(e),r),s&&(r=vA(r,SA|CA|EA,wA));for(var a=t.length;a--;)bA(r,t[a]);return r}),_A=$A;const OA=Yt(_A);var TA=yy,DA=ky,MA=Um,PA=Tc,RA=Mc,IA=yr,AA=Sc,LA=mm,zA=vn,FA=Rm;function UA(e,t,r){var s=IA(e),a=s||AA(e)||FA(e);if(t=PA(t),r==null){var l=e&&e.constructor;a?r=s?new l:[]:zA(e)?r=LA(l)?DA(RA(e)):{}:r={}}return(a?TA:MA)(e,function(o,c,i){return t(r,o,c,i)}),r}var BA=UA;const WA=Yt(BA);var HA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s,a){s.prototype.isBetween=function(l,o,c,i){var u=a(l),f=a(o),h=(i=i||"()")[0]==="(",d=i[1]===")";return(h?this.isAfter(u,c):!this.isBefore(u,c))&&(d?this.isBefore(f,c):!this.isAfter(f,c))||(h?this.isBefore(u,c):!this.isAfter(u,c))&&(d?this.isAfter(f,c):!this.isBefore(f,c))}}})})(HA);var qA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s){s.prototype.isSameOrAfter=function(a,l){return this.isSame(a,l)||this.isAfter(a,l)}}})})(qA);var VA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s){s.prototype.isSameOrBefore=function(a,l){return this.isSame(a,l)||this.isBefore(a,l)}}})})(VA);var YA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s,a){var l=s.prototype,o=function(h){return h&&(h.indexOf?h:h.s)},c=function(h,d,v,j,m){var y=h.name?h:h.$locale(),g=o(y[d]),p=o(y[v]),b=g||p.map(function(C){return C.slice(0,j)});if(!m)return b;var x=y.weekStart;return b.map(function(C,O){return b[(O+(x||0))%7]})},i=function(){return a.Ls[a.locale()]},u=function(h,d){return h.formats[d]||function(v){return v.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,m,y){return m||y.slice(1)})}(h.formats[d.toUpperCase()])},f=function(){var h=this;return{months:function(d){return d?d.format("MMMM"):c(h,"months")},monthsShort:function(d){return d?d.format("MMM"):c(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(d){return d?d.format("dddd"):c(h,"weekdays")},weekdaysMin:function(d){return d?d.format("dd"):c(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(d){return d?d.format("ddd"):c(h,"weekdaysShort","weekdays",3)},longDateFormat:function(d){return u(h.$locale(),d)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};l.localeData=function(){return f.bind(this)()},a.localeData=function(){var h=i();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(d){return u(h,d)},meridiem:h.meridiem,ordinal:h.ordinal}},a.months=function(){return c(i(),"months")},a.monthsShort=function(){return c(i(),"monthsShort","months",3)},a.weekdays=function(h){return c(i(),"weekdays",null,null,h)},a.weekdaysShort=function(h){return c(i(),"weekdaysShort","weekdays",3,h)},a.weekdaysMin=function(h){return c(i(),"weekdaysMin","weekdays",2,h)}}})})(YA);var GA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,a,l){var o=a.prototype,c=o.format;l.en.formats=r,o.format=function(i){i===void 0&&(i="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,f=function(h,d){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(v,j,m){var y=m&&m.toUpperCase();return j||d[m]||r[m]||d[y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(g,p,b){return p||b.slice(1)})})}(i,u===void 0?{}:u);return c.call(this,f)}}})})(GA);var KA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s,a){var l=function(o,c){if(!c||!c.length||c.length===1&&!c[0]||c.length===1&&Array.isArray(c[0])&&!c[0].length)return null;var i;c.length===1&&c[0].length>0&&(c=c[0]),i=(c=c.filter(function(f){return f}))[0];for(var u=1;u<c.length;u+=1)c[u].isValid()&&!c[u][o](i)||(i=c[u]);return i};a.max=function(){var o=[].slice.call(arguments,0);return l("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return l("isBefore",o)}}})})(KA);var JA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){var r="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,o,c){var i=o.prototype;c.utc=function(m){var y={date:m,utc:!0,args:arguments};return new o(y)},i.utc=function(m){var y=c(this.toDate(),{locale:this.$L,utc:!0});return m?y.add(this.utcOffset(),r):y},i.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var u=i.parse;i.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var f=i.init;i.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else f.call(this)};var h=i.utcOffset;i.utcOffset=function(m,y){var g=this.$utils().u;if(g(m))return this.$u?0:g(this.$offset)?h.call(this):this.$offset;if(typeof m=="string"&&(m=function(C){C===void 0&&(C="");var O=C.match(s);if(!O)return null;var D=(""+O[0]).match(a)||["-",0,0],_=D[0],P=60*+D[1]+ +D[2];return P===0?0:_==="+"?P:-P}(m),m===null))return this;var p=Math.abs(m)<=16?60*m:m,b=this;if(y)return b.$offset=p,b.$u=m===0,b;if(m!==0){var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(p+x,r)).$offset=p,b.$x.$localOffset=x}else b=this.utc();return b};var d=i.format;i.format=function(m){var y=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,y)},i.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var v=i.toDate;i.toDate=function(m){return m==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():v.call(this)};var j=i.diff;i.diff=function(m,y,g){if(m&&this.$u===m.$u)return j.call(this,m,y,g);var p=this.local(),b=c(m).local();return j.call(p,b,y,g)}}})})(JA);var XA={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(fr,function(){return function(r,s){s.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(XA);function Rr(e){return e.children}var Vt={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Pt={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Yg=Object.keys(Pt).map(function(e){return Pt[e]});le.oneOfType([le.string,le.func]);le.any;le.func;le.oneOfType([le.arrayOf(le.oneOf(Yg)),le.objectOf(function(e,t){var r=Yg.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l];return le.elementType.apply(le,[e,t].concat(a))})]);le.oneOfType([le.oneOf(["overlap","no-overlap"]),le.func]);var Gg={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function _y(e,t){var r=wt(e,"month");return wt(r,"week",t.startOfWeek())}function Oy(e,t){var r=zi(e,"month");return zi(r,"week",t.startOfWeek())}function QA(e,t){for(var r=_y(e,t),s=Oy(e,t),a=[];ga(r,s,"day");)a.push(r),r=Tr(r,1,"day");return a}function ZA(e,t){var r=wt(e,t);return pa(r,e)?r:Tr(r,1,t)}function e8(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",s=e,a=[];ga(s,t,r);)a.push(s),s=Tr(s,1,r);return a}function t8(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=wt(e,"day"),e=Il(e,Il(t)),e=sa(e,sa(t)),e=Rl(e,Rl(t)),Pl(e,Pl(t)))}function Kg(e){return Il(e)===0&&sa(e)===0&&Rl(e)===0&&Pl(e)===0}function r8(e,t,r,s){return r==="day"&&(r="date"),Math.abs(Tp[r](e,void 0,s)-Tp[r](t,void 0,s))}function Hm(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+wt(e,r)/Gg[r]-+wt(t,r)/Gg[r]))}var n8=le.oneOfType([le.string,le.func]);function s8(e,t,r,s,a){var l=typeof s=="function"?s(r,a,e):t.call(e,r,s,a);return $l(l==null||typeof l=="string","`localizer format(..)` must return a string, null, or undefined"),l}function a8(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function qm(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function l8(e,t){return Hm(e,t,"minutes")+qm(e,t)}function o8(e){var t=wt(e,"day");return Hm(t,e,"minutes")+qm(t,e)}function i8(e,t){return fm(e,t,"day")}function c8(e,t,r){var s=pa(e,t,"minutes");return s?Xl(t,r,"minutes"):vc(t,r,"minutes")}function Yd(e,t){return r8(e,t,"day")}function u8(e){var t=e.evtA,r=t.start,s=t.end,a=t.allDay,l=e.evtB,o=l.start,c=l.end,i=l.allDay,u=+wt(r,"day")-+wt(o,"day"),f=Yd(r,s),h=Yd(o,c);return u||h-f||!!i-!!a||+r-+o||+s-+c}function d8(e){var t=e.event,r=t.start,s=t.end,a=e.range,l=a.start,o=a.end,c=wt(r,"day"),i=ga(c,o,"day"),u=dm(c,s,"minutes"),f=u?vc(s,l,"minutes"):Xl(s,l,"minutes");return i&&f}function f8(e,t){return pa(e,t,"day")}function m8(e,t){return Kg(e)&&Kg(t)}var h8=it(function e(t){var r=this;ot(this,e),$l(typeof t.format=="function","date localizer `format(..)` must be a function"),$l(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||n8,this.formats=t.formats,this.format=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return s8.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||t8,this.inRange=t.inRange||Cb,this.lt=t.lt||fm,this.lte=t.lte||ga,this.gt=t.gt||vc,this.gte=t.gte||Xl,this.eq=t.eq||pa,this.neq=t.neq||dm,this.startOf=t.startOf||wt,this.endOf=t.endOf||zi,this.add=t.add||Tr,this.range=t.range||e8,this.diff=t.diff||Hm,this.ceil=t.ceil||ZA,this.min=t.min||kb,this.max=t.max||Sb,this.minutes=t.minutes||sa,this.daySpan=t.daySpan||Yd,this.firstVisibleDay=t.firstVisibleDay||_y,this.lastVisibleDay=t.lastVisibleDay||Oy,this.visibleDays=t.visibleDays||QA,this.getSlotDate=t.getSlotDate||a8,this.getTimezoneOffset=t.getTimezoneOffset||function(s){return s.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||qm,this.getTotalMin=t.getTotalMin||l8,this.getMinutesFromMidnight=t.getMinutesFromMidnight||o8,this.continuesPrior=t.continuesPrior||i8,this.continuesAfter=t.continuesAfter||c8,this.sortEvents=t.sortEvents||u8,this.inEventRange=t.inEventRange||d8,this.isSameDate=t.isSameDate||f8,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||m8,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function p8(e,t,r,s){var a=De(De({},e.formats),r);return De(De({},e),{},{messages:s,startOfWeek:function(){return e.startOfWeek(t)},format:function(l,o){return e.format(l,a[o]||o,t)}})}var g8=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.localizer.messages,a=r.label;return A.createElement("div",{className:"rbc-toolbar"},A.createElement("span",{className:"rbc-btn-group"},A.createElement("button",{type:"button",onClick:this.navigate.bind(null,Vt.TODAY)},s.today),A.createElement("button",{type:"button",onClick:this.navigate.bind(null,Vt.PREVIOUS)},s.previous),A.createElement("button",{type:"button",onClick:this.navigate.bind(null,Vt.NEXT)},s.next)),A.createElement("span",{className:"rbc-toolbar-label"},a),A.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(r){var s=this,a=this.props.views,l=this.props.view;if(a.length>1)return a.map(function(o){return A.createElement("button",{type:"button",key:o,className:Xe({"rbc-active":l===o}),onClick:s.view.bind(null,o)},r[o])})}}])}(A.Component);function Ae(e,t){e&&e.apply(null,[].concat(t))}var x8={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};function v8(e){return De(De({},x8),e)}function b8(e){var t=e.ref,r=e.callback;N.useEffect(function(){var s=function(a){t.current&&!t.current.contains(a.target)&&r()};return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[t,r])}var y8=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Ty=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.style,a=r.className,l=r.event,o=r.selected,c=r.isAllDay,i=r.onSelect,u=r.onDoubleClick,f=r.onKeyPress,h=r.localizer,d=r.continuesPrior,v=r.continuesAfter,j=r.accessors,m=r.getters,y=r.children,g=r.components,p=g.event,b=g.eventWrapper,x=r.slotStart,C=r.slotEnd,O=Yr(r,y8);delete O.resizable;var D=j.title(l),_=j.tooltip(l),P=j.end(l),z=j.start(l),L=j.allDay(l),H=c||L||h.diff(z,h.ceil(P,"day"),"day")>1,T=m.eventProp(l,z,P,o),V=A.createElement("div",{className:"rbc-event-content",title:_||void 0},p?A.createElement(p,{event:l,continuesPrior:d,continuesAfter:v,title:D,isAllDay:L,localizer:h,slotStart:x,slotEnd:C}):D);return A.createElement(b,Object.assign({},this.props,{type:"date"}),A.createElement("div",Object.assign({},O,{style:De(De({},T.style),s),className:Xe("rbc-event",a,T.className,{"rbc-selected":o,"rbc-event-allday":H,"rbc-event-continues-prior":d,"rbc-event-continues-after":v}),onClick:function(ee){return i&&i(l,ee)},onDoubleClick:function(ee){return u&&u(l,ee)},onKeyDown:function(ee){return f&&f(l,ee)}}),typeof y=="function"?y(V):V))}}])}(A.Component);function Pc(e,t){return!e||t==null?!1:L_(e,t)}function Dy(e,t){var r=e.right-e.left,s=r/t;return s}function My(e,t,r,s){var a=Dy(e,s);return r?s-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function j8(e,t){var r=t.x,s=t.y;return s>=e.top&&s<=e.bottom&&r>=e.left&&r<=e.right}function w8(e,t,r,s,a){var l=-1,o=-1,c=s-1,i=Dy(t,s),u=My(t,r.x,a,s),f=t.top<r.y&&t.bottom>r.y,h=t.top<e.y&&t.bottom>e.y,d=e.y>t.bottom,v=t.top>e.y,j=r.top<t.top&&r.bottom>t.bottom;return j&&(l=0,o=c),f&&(v?(l=0,o=u):d&&(l=u,o=c)),h&&(l=o=a?c-Math.floor((e.x-t.left)/i):Math.floor((e.x-t.left)/i),f?u<l?l=u:o=u:e.y<r.y?o=c:l=0),{startIdx:l,endIdx:o}}function N8(e){var t=e.target,r=e.offset,s=e.container,a=e.box,l=ls(t),o=l.top,c=l.left,i=l.width,u=l.height,f=ls(s),h=f.top,d=f.left,v=f.width,j=f.height,m=ls(a),y=m.width,g=m.height,p=h+j,b=d+v,x=o+g,C=c+y,O=r.x,D=r.y,_=x>p?o-g-D:o+D+u,P=C>b?c+O-y+i:c+O;return{topOffset:_,leftOffset:P}}function k8(e){var t=e.containerRef,r=e.accessors,s=e.getters,a=e.selected,l=e.components,o=e.localizer,c=e.position,i=e.show,u=e.events,f=e.slotStart,h=e.slotEnd,d=e.onSelect,v=e.onDoubleClick,j=e.onKeyPress,m=e.handleDragStart,y=e.popperRef,g=e.target,p=e.offset;b8({ref:y,callback:i}),N.useLayoutEffect(function(){var C=N8({target:g,offset:p,container:t.current,box:y.current}),O=C.topOffset,D=C.leftOffset;y.current.style.top="".concat(O,"px"),y.current.style.left="".concat(D,"px")},[p.x,p.y,g]);var b=c.width,x={minWidth:b+b/2};return A.createElement("div",{style:x,className:"rbc-overlay",ref:y},A.createElement("div",{className:"rbc-overlay-header"},o.format(f,"dayHeaderFormat")),u.map(function(C,O){return A.createElement(Ty,{key:O,type:"popup",localizer:o,event:C,getters:s,onSelect:d,accessors:r,components:l,onDoubleClick:v,onKeyPress:j,continuesPrior:o.lt(r.end(C),f,"day"),continuesAfter:o.gte(r.start(C),h,"day"),slotStart:f,slotEnd:h,selected:Pc(C,a),draggable:!0,onDragStart:function(){return m(C)},onDragEnd:function(){return i()}})}))}var Py=A.forwardRef(function(e,t){return A.createElement(k8,Object.assign({},e,{popperRef:t}))});Py.propTypes={accessors:le.object.isRequired,getters:le.object.isRequired,selected:le.object,components:le.object.isRequired,localizer:le.object.isRequired,position:le.object.isRequired,show:le.func.isRequired,events:le.array.isRequired,slotStart:le.instanceOf(Date).isRequired,slotEnd:le.instanceOf(Date),onSelect:le.func,onDoubleClick:le.func,onKeyPress:le.func,handleDragStart:le.func,style:le.object,offset:le.shape({x:le.number,y:le.number})};function S8(e){var t=e.containerRef,r=e.popupOffset,s=r===void 0?5:r,a=e.overlay,l=e.accessors,o=e.localizer,c=e.components,i=e.getters,u=e.selected,f=e.handleSelectEvent,h=e.handleDoubleClickEvent,d=e.handleKeyPressEvent,v=e.handleDragStart,j=e.onHide,m=e.overlayDisplay,y=N.useRef(null);if(!a.position)return null;var g=s;isNaN(s)||(g={x:s,y:s});var p=a.position,b=a.events,x=a.date,C=a.end;return A.createElement(Em,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:j,target:a.target},function(O){var D=O.props;return A.createElement(Py,Object.assign({},D,{containerRef:t,ref:y,target:a.target,offset:g,accessors:l,getters:i,selected:u,components:c,localizer:o,position:p,show:m,events:b,slotStart:x,slotEnd:C,onSelect:f,onDoubleClick:h,onKeyPress:d,handleDragStart:v}))})}var Vm=A.forwardRef(function(e,t){return A.createElement(S8,Object.assign({},e,{containerRef:t}))});Vm.propTypes={popupOffset:le.oneOfType([le.number,le.shape({x:le.number,y:le.number})]),overlay:le.shape({position:le.object,events:le.array,date:le.instanceOf(Date),end:le.instanceOf(Date)}),accessors:le.object.isRequired,localizer:le.object.isRequired,components:le.object.isRequired,getters:le.object.isRequired,selected:le.object,handleSelectEvent:le.func,handleDoubleClickEvent:le.func,handleKeyPressEvent:le.func,handleDragStart:le.func,onHide:le.func,overlayDisplay:le.func};function St(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Va(r,e,t,{passive:!1})}function C8(e,t,r){return!e||Al(e,document.elementFromPoint(t,r))}function E8(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return ly(a,".rbc-event",e)}function $8(e,t){var r=t.clientX,s=t.clientY,a=document.elementFromPoint(r,s);return ly(a,".rbc-show-more",e)}function Vi(e,t){return!!E8(e,t)}function _8(e,t){return!!$8(e,t)}function La(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var Jg=5,O8=250,Ry=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.global,a=s===void 0?!1:s,l=r.longPressThreshold,o=l===void 0?250:l,c=r.validContainers,i=c===void 0?[]:c;ot(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=i,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=St("touchmove",function(){},window),this._removeKeyDownListener=St("keydown",this._keyListener),this._removeKeyUpListener=St("keyup",this._keyListener),this._removeDropFromOutsideListener=St("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=St("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return it(e,[{key:"on",value:function(t,r){var s=this._listeners[t]||(this._listeners[t]=[]);return s.push(r),{remove:function(){var a=s.indexOf(r);a!==-1&&s.splice(a,1)}}}},{key:"emit",value:function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];var l,o=this._listeners[t]||[];return o.forEach(function(c){l===void 0&&(l=c.apply(void 0,s))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(t){var r=this._selectRect;return!r||!this.selecting?!1:Xg(r,ys(t))}},{key:"filter",value:function(t){var r=this._selectRect;return!r||!this.selecting?[]:t.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(t,r){var s=this,a=null,l=null,o=null,c=function(f){a=setTimeout(function(){u(),t(f)},s.longPressThreshold),l=St("touchmove",function(){return u()}),o=St("touchend",function(){return u()})},i=St("touchstart",c),u=function(){a&&clearTimeout(a),l&&l(),o&&o(),a=null,l=null,o=null};return r&&c(r),function(){u(),i()}}},{key:"_addInitialEventListener",value:function(){var t=this,r=St("mousedown",function(a){t._removeInitialEventListener(),t._handleInitialEvent(a),t._removeInitialEventListener=St("mousedown",t._handleInitialEvent)}),s=St("touchstart",function(a){t._removeInitialEventListener(),t._removeInitialEventListener=t._addLongPressListener(t._handleInitialEvent,a)});this._removeInitialEventListener=function(){r(),s()}}},{key:"_dropFromOutsideListener",value:function(t){var r=La(t),s=r.pageX,a=r.pageY,l=r.clientX,o=r.clientY;this.emit("dropFromOutside",{x:s,y:a,clientX:l,clientY:o}),t.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(t){var r=La(t),s=r.pageX,a=r.pageY,l=r.clientX,o=r.clientY;this.emit("dragOverFromOutside",{x:s,y:a,clientX:l,clientY:o}),t.preventDefault()}},{key:"_handleInitialEvent",value:function(t){if(this._initialEvent=t,!this.isDetached){var r=La(t),s=r.clientX,a=r.clientY,l=r.pageX,o=r.pageY,c=this.container(),i,u;if(!(t.which===3||t.button===2||!C8(c,s,a))){if(!this.globalMouse&&c&&!Al(c,t.target)){var f=T8(0),h=f.top,d=f.left,v=f.bottom,j=f.right;if(u=ys(c),i=Xg({top:u.top-h,left:u.left-d,bottom:u.bottom+v,right:u.right+j},{top:o,left:l}),!i)return}var m=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(t.type),x:l,y:o,clientX:s,clientY:a});if(m!==!1)switch(t.type){case"mousedown":this._removeEndListener=St("mouseup",this._handleTerminatingEvent),this._onEscListener=St("keydown",this._handleTerminatingEvent),this._removeMoveListener=St("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(t),this._removeEndListener=St("touchend",this._handleTerminatingEvent),this._removeMoveListener=St("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(t){var r=t.target,s=this.validContainers;return!s||!s.length||!r?!0:s.some(function(a){return!!r.closest(a)})}},{key:"_handleTerminatingEvent",value:function(t){var r=this.selecting,s=this._selectRect;if(!r&&t.type.includes("key")&&(t=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!t){var a=!this.container||Al(this.container(),t.target),l=this._isWithinValidContainer(t);return t.key==="Escape"||!l?this.emit("reset"):!r&&a?this._handleClickEvent(t):r?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(t){var r=La(t),s=r.pageX,a=r.pageY,l=r.clientX,o=r.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<O8?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:a,clientX:l,clientY:o})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:a,clientX:l,clientY:o}))}},{key:"_handleMoveEvent",value:function(t){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,s=r.x,a=r.y,l=La(t),o=l.pageX,c=l.pageY,i=Math.abs(s-o),u=Math.abs(a-c),f=Math.min(o,s),h=Math.min(c,a),d=this.selecting,v=this.isClick(o,c);v&&!d&&!(i||u)||(!d&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:h,left:f,x:o,y:c,right:f+i,bottom:h+u},this.emit("selecting",this._selectRect)),t.preventDefault())}}},{key:"_keyListener",value:function(t){this.ctrl=t.metaKey||t.ctrlKey}},{key:"isClick",value:function(t,r){var s=this._initialEventData,a=s.x,l=s.y,o=s.isTouch;return!o&&Math.abs(t-a)<=Jg&&Math.abs(r-l)<=Jg}}])}();function T8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return mn(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Xg(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=ys(e),a=s.top,l=s.left,o=s.right,c=o===void 0?l:o,i=s.bottom,u=i===void 0?a:i,f=ys(t),h=f.top,d=f.left,v=f.right,j=v===void 0?d:v,m=f.bottom,y=m===void 0?h:m;return!(u-r<h||a+r>y||c-r<d||l+r>j)}function ys(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Qg("left"),s=t.top+Qg("top");return{top:s,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+s}}function Qg(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var D8=function(e){function t(r,s){var a;return ot(this,t),a=_t(this,t,[r,s]),a.state={selecting:!1},a.containerRef=N.createRef(),a}return Ot(t,e),it(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,s=r.range,a=r.getNow,l=r.getters,o=r.date,c=r.components.dateCellWrapper,i=r.localizer,u=this.state,f=u.selecting,h=u.startIdx,d=u.endIdx,v=a();return A.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(j,m){var y=f&&m>=h&&m<=d,g=l.dayProp(j),p=g.className,b=g.style;return A.createElement(c,{key:m,value:j,range:s},A.createElement("div",{style:b,className:Xe("rbc-day-bg",p,y&&"rbc-selected-cell",i.isSameDate(j,v)&&"rbc-today",o&&i.neq(o,j,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,s=this.containerRef.current,a=this._selector=new Ry(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(o,c){if(!Vi(s,o)&&!_8(s,o)){var i=ys(s),u=r.props,f=u.range,h=u.rtl;if(j8(i,o)){var d=My(i,o.x,h,f.length);r._selectSlot({startIdx:d,endIdx:d,action:c,box:o})}}r._initial={},r.setState({selecting:!1})};a.on("selecting",function(o){var c=r.props,i=c.range,u=c.rtl,f=-1,h=-1;if(r.state.selecting||(Ae(r.props.onSelectStart,[o]),r._initial={x:o.x,y:o.y}),a.isSelected(s)){var d=ys(s),v=w8(r._initial,d,o,i.length,u);f=v.startIdx,h=v.endIdx}r.setState({selecting:!0,startIdx:f,endIdx:h})}),a.on("beforeSelect",function(o){if(r.props.selectable==="ignoreEvents")return!Vi(r.containerRef.current,o)}),a.on("click",function(o){return l(o,"click")}),a.on("doubleClick",function(o){return l(o,"doubleClick")}),a.on("select",function(o){r._selectSlot(De(De({},r.state),{},{action:"select",bounds:o})),r._initial={},r.setState({selecting:!1}),Ae(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var s=r.endIdx,a=r.startIdx,l=r.action,o=r.bounds,c=r.box;s!==-1&&a!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:a,end:s,action:l,bounds:o,box:c,resourceId:this.props.resourceId})}}])}(A.Component),or={propTypes:{slotMetrics:le.object.isRequired,selected:le.object,isAllDay:le.bool,accessors:le.object.isRequired,localizer:le.object.isRequired,components:le.object.isRequired,getters:le.object.isRequired,onSelect:le.func,onDoubleClick:le.func,onKeyPress:le.func},defaultProps:{segments:[],selected:{}},renderEvent:function(e,t){var r=e.selected;e.isAllDay;var s=e.accessors,a=e.getters,l=e.onSelect,o=e.onDoubleClick,c=e.onKeyPress,i=e.localizer,u=e.slotMetrics,f=e.components,h=e.resizable,d=u.continuesPrior(t),v=u.continuesAfter(t);return A.createElement(Ty,{event:t,getters:a,localizer:i,accessors:s,components:f,onSelect:l,onDoubleClick:o,onKeyPress:c,continuesPrior:d,continuesAfter:v,slotStart:u.first,slotEnd:u.last,selected:Pc(t,r),resizable:h})},renderSpan:function(e,t,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",a=Math.abs(t)/e*100+"%";return A.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:a,flexBasis:a,maxWidth:a}},s)}},Iy=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this,s=this.props,a=s.segments,l=s.slotMetrics.slots,o=s.className,c=1;return A.createElement("div",{className:Xe(o,"rbc-row")},a.reduce(function(i,u,f){var h=u.event,d=u.left,v=u.right,j=u.span,m="_lvl_"+f,y=d-c,g=or.renderEvent(r.props,h);return y&&i.push(or.renderSpan(l,y,"".concat(m,"_gap"))),i.push(or.renderSpan(l,j,m,g)),c=v+1,i},[]))}}])}(A.Component);Iy.defaultProps=De({},or.defaultProps);function Ay(e){var t=e.dateRange,r=e.unit,s=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,s)}}function M8(e,t,r,s){var a=Ay({dateRange:t,localizer:s}),l=a.first,o=a.last,c=s.diff(l,o,"day"),i=s.max(s.startOf(r.start(e),"day"),l),u=s.min(s.ceil(r.end(e),"day"),o),f=AT(t,function(d){return s.isSameDate(d,i)}),h=s.diff(i,u,"day");return h=Math.min(h,c),h=Math.max(h-s.segmentOffset,1),{event:e,span:h,left:f+1,right:Math.max(f+h,1)}}function Gd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,s,a,l=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],s=0;s<l.length&&P8(a,l[s]);s++);s>=t?o.push(a):(l[s]||(l[s]=[])).push(a)}for(r=0;r<l.length;r++)l[r].sort(function(c,i){return c.left-i.left});return{levels:l,extra:o}}function Fl(e,t,r,s,a){var l={start:s.start(e),end:s.end(e)},o={start:t,end:r};return a.inEventRange({event:l,range:o})}function P8(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function R8(e,t,r){var s=li(e),a=[],l=[];s.forEach(function(i){var u=t.start(i),f=t.end(i);r.daySpan(u,f)>1?a.push(i):l.push(i)});var o=a.sort(function(i,u){return Kd(i,u,t,r)}),c=l.sort(function(i,u){return Kd(i,u,t,r)});return[].concat(li(o),li(c))}function Kd(e,t,r,s){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},l={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return s.sortEvents({evtA:a,evtB:l})}var Jd=function(e,t){return e.left<=t&&e.right>=t},$u=function(e,t){return e.filter(function(r){return Jd(r,t)}).map(function(r){return r.event})},Ly=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){for(var r=this.props,s=r.segments,a=r.slotMetrics.slots,l=Gd(s).levels[0],o=1,c=1,i=[];o<=a;){var u="_lvl_"+o,f=l.filter(function(b){return Jd(b,o)})[0]||{},h=f.event,d=f.left,v=f.right,j=f.span;if(!h){var m=this.getHiddenEventsForSlot(s,o);if(m.length>0){var y=o-c;y&&i.push(or.renderSpan(a,y,u+"_gap")),i.push(or.renderSpan(a,1,u,this.renderShowMore(s,o))),c=o=o+1;continue}o++;continue}var g=Math.max(0,d-c);if(this.canRenderSlotEvent(d,j)){var p=or.renderEvent(this.props,h);g&&i.push(or.renderSpan(a,g,u+"_gap")),i.push(or.renderSpan(a,j,u,p)),c=o=v+1}else g&&i.push(or.renderSpan(a,g,u+"_gap")),i.push(or.renderSpan(a,1,u,this.renderShowMore(s,o))),c=o=o+1}return A.createElement("div",{className:"rbc-row"},i)}},{key:"getHiddenEventsForSlot",value:function(r,s){var a=$u(r,s),l=Gd(r).levels[0],o=l.filter(function(c){return Jd(c,s)}).map(function(c){return c.event});return a.filter(function(c){return!o.some(function(i){return i===c})})}},{key:"canRenderSlotEvent",value:function(r,s){var a=this.props.segments;return KT(r,r+s).every(function(l){var o=$u(a,l).length;return o===1})}},{key:"renderShowMore",value:function(r,s){var a=this,l=this.props,o=l.localizer,c=l.slotMetrics,i=l.components,u=c.getEventsForSlot(s),f=$u(r,s),h=f.length;if(i!=null&&i.showMore){var d=i.showMore,v=c.getDateForSlot(s-1);return h?A.createElement(d,{localizer:o,slotDate:v,slot:s,count:h,events:u,remainingEvents:f}):!1}return h?A.createElement("button",{type:"button",key:"sm_"+s,className:Xe("rbc-button-link","rbc-show-more"),onClick:function(j){return a.showMore(s,j)}},o.messages.showMore(h,f,u)):!1}},{key:"showMore",value:function(r,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(r,s.target)}}])}(A.Component);Ly.defaultProps=De({},or.defaultProps);var I8=function(e){var t=e.children;return A.createElement("div",{className:"rbc-row-content-scroll-container"},t)},A8=function(e,t){return e.left<=t&&e.right>=t},L8=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function zy(){return dy(function(e){for(var t=e.range,r=e.events,s=e.maxRows,a=e.minRows,l=e.accessors,o=e.localizer,c=Ay({dateRange:t,localizer:o}),i=c.first,u=c.last,f=r.map(function(m){return M8(m,t,l,o)}),h=Gd(f,Math.max(s-1,1)),d=h.levels,v=h.extra,j=v.length>0?a-1:a;d.length<j;)d.push([]);return{first:i,last:u,levels:d,extra:v,range:t,slots:t.length,clone:function(m){var y=zy();return y(De(De({},e),m))},getDateForSlot:function(m){return t[m]},getSlotForDate:function(m){return t.find(function(y){return o.isSameDate(y,m)})},getEventsForSlot:function(m){return f.filter(function(y){return A8(y,m)}).map(function(y){return y.event})},continuesPrior:function(m){return o.continuesPrior(l.start(m),i)},continuesAfter:function(m){var y=l.start(m),g=l.end(m);return o.continuesAfter(y,g,u)}}},L8)}var Ul=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.handleSelectSlot=function(o){var c=r.props,i=c.range,u=c.onSelectSlot;u(i.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,c){var i=r.props,u=i.range,f=i.onShowMore,h=r.slotMetrics(r.props),d=A4(r.containerRef.current,".rbc-row-bg")[0],v;d&&(v=d.children[o-1]);var j=h.getEventsForSlot(o);f(j,u[o-1],v,o,c)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,c){var i=r.props,u=i.renderHeader,f=i.getNow,h=i.localizer;return u({date:o,key:"header_".concat(c),className:Xe("rbc-date-cell",h.isSameDate(o,f())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,c=o.className,i=o.range,u=o.renderHeader,f=o.showAllEvents;return A.createElement("div",{className:c,ref:r.containerRef},A.createElement("div",{className:Xe("rbc-row-content",f&&"rbc-row-content-scrollable")},u&&A.createElement("div",{className:"rbc-row",ref:r.headingRowRef},i.map(r.renderHeadingCell)),A.createElement("div",{className:"rbc-row",ref:r.eventRowRef},A.createElement("div",{className:"rbc-row-segment"},A.createElement("div",{className:"rbc-event"},A.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=N.createRef(),r.headingRowRef=N.createRef(),r.eventRowRef=N.createRef(),r.slotMetrics=zy(),r}return Ot(t,e),it(t,[{key:"getRowLimit",value:function(){var r,s=Su(this.eventRowRef.current),a=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?Su(this.headingRowRef.current):0,l=Su(this.containerRef.current)-a;return Math.max(Math.floor(l/s),1)}},{key:"render",value:function(){var r=this.props,s=r.date,a=r.rtl,l=r.range,o=r.className,c=r.selected,i=r.selectable,u=r.renderForMeasure,f=r.accessors,h=r.getters,d=r.components,v=r.getNow,j=r.renderHeader,m=r.onSelect,y=r.localizer,g=r.onSelectStart,p=r.onSelectEnd,b=r.onDoubleClick,x=r.onKeyPress,C=r.resourceId,O=r.longPressThreshold,D=r.isAllDay,_=r.resizable,P=r.showAllEvents;if(u)return this.renderDummy();var z=this.slotMetrics(this.props),L=z.levels,H=z.extra,T=P?I8:Rr,V=d.weekWrapper,ee={selected:c,accessors:f,getters:h,localizer:y,components:d,onSelect:m,onDoubleClick:b,onKeyPress:x,resourceId:C,slotMetrics:z,resizable:_};return A.createElement("div",{className:o,role:"rowgroup",ref:this.containerRef},A.createElement(D8,{localizer:y,date:s,getNow:v,rtl:a,range:l,selectable:i,container:this.getContainer,getters:h,onSelectStart:g,onSelectEnd:p,onSelectSlot:this.handleSelectSlot,components:d,longPressThreshold:O,resourceId:C}),A.createElement("div",{className:Xe("rbc-row-content",P&&"rbc-row-content-scrollable"),role:"row"},j&&A.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),A.createElement(T,null,A.createElement(V,Object.assign({isAllDay:D},ee,{rtl:this.props.rtl}),L.map(function(R,F){return A.createElement(Iy,Object.assign({key:F,segments:R},ee))}),!!H.length&&A.createElement(Ly,Object.assign({segments:H,onShowMore:this.handleShowMore},ee))))))}}])}(A.Component);Ul.defaultProps={minRows:0,maxRows:1/0};var Ym=function(e){var t=e.label;return A.createElement("span",{role:"columnheader","aria-sort":"none"},t)},z8=function(e){var t=e.label,r=e.drilldownView,s=e.onDrillDown;return r?A.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},t):A.createElement("span",null,t)},F8=["date","className"],U8=function(e,t,r,s,a){return e.filter(function(l){return Fl(l,t,r,s,a)})},Rc=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,c){var i=r.props,u=i.events,f=i.components,h=i.selectable,d=i.getNow,v=i.selected,j=i.date,m=i.localizer,y=i.longPressThreshold,g=i.accessors,p=i.getters,b=i.showAllEvents,x=r.state,C=x.needLimitMeasure,O=x.rowLimit,D=U8(li(u),o[0],o[o.length-1],g,m),_=R8(D,g,m);return A.createElement(Ul,{key:c,ref:c===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:d,date:j,range:o,events:_,maxRows:b?1/0:O,selected:v,selectable:h,components:f,accessors:g,getters:p,localizer:m,renderHeader:r.readerDateHeading,renderForMeasure:C,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:y,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:b})},r.readerDateHeading=function(o){var c=o.date,i=o.className,u=Yr(o,F8),f=r.props,h=f.date,d=f.getDrilldownView,v=f.localizer,j=v.neq(h,c,"month"),m=v.isSameDate(c,h),y=d(c),g=v.format(c,"dateFormat"),p=r.props.components.dateHeader||z8;return A.createElement("div",Object.assign({},u,{className:Xe(i,j&&"rbc-off-range",m&&"rbc-current"),role:"cell"}),A.createElement(p,{label:g,date:c,drilldownView:y,isOffRange:j,onDrillDown:function(b){return r.handleHeadingClick(c,y,b)}}))},r.handleSelectSlot=function(o,c){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(c)})},r.handleHeadingClick=function(o,c,i){i.preventDefault(),r.clearSelection(),Ae(r.props.onDrillDown,[o,c])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onKeyPressEvent,c)},r.handleShowMore=function(o,c,i,u,f){var h=r.props,d=h.popup,v=h.onDrillDown,j=h.onShowMore,m=h.getDrilldownView,y=h.doShowMoreDrillDown;if(r.clearSelection(),d){var g=zb(i,r.containerRef.current);r.setState({overlay:{date:c,events:o,position:g,target:f}})}else y&&Ae(v,[c,m(c)||Pt.DAY]);Ae(j,[o,c,u])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=N.createRef(),r.slotRowRef=N.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Ot(t,e),it(t,[{key:"componentDidMount",value:function(){var r=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||Fb(function(){s=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,s=r.date,a=r.localizer,l=r.className,o=a.visibleDays(s,a),c=j4(o,7);return this._weekCount=c.length,A.createElement("div",{className:Xe("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},A.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var s=this.props,a=s.localizer,l=s.components,o=r[0],c=r[r.length-1],i=l.header||Ym;return a.range(o,c,"day").map(function(u,f){return A.createElement("div",{key:"header_"+f,className:"rbc-header"},A.createElement(i,{date:u,localizer:a,label:a.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,s,a=this,l=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},o=this.props,c=o.accessors,i=o.localizer,u=o.components,f=o.getters,h=o.selected,d=o.popupOffset,v=o.handleDragStart,j=function(){return a.setState({overlay:null})};return A.createElement(Vm,{overlay:l,accessors:c,localizer:i,components:u,getters:f,selected:h,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:j})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(o,c){return+o-+c});var a=new Date(s[0]),l=new Date(s[s.length-1]);l.setDate(s[s.length-1].getDate()+1),Ae(this.props.onSelectSlot,{slots:s,start:a,end:l,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,s){var a=r.date,l=r.localizer;return{date:a,needLimitMeasure:l.neq(a,s.date,"month")}}}])}(A.Component);Rc.range=function(e,t){var r=t.localizer,s=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:s,end:a}};Rc.navigate=function(e,t,r){var s=r.localizer;switch(t){case Vt.PREVIOUS:return s.add(e,-1,"month");case Vt.NEXT:return s.add(e,1,"month");default:return e}};Rc.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var Zg=function(e){var t=e.min,r=e.max,s=e.step,a=e.slots,l=e.localizer;return"".concat(+l.startOf(t,"minutes"))+"".concat(+l.startOf(r,"minutes"))+"".concat(s,"-").concat(a)};function Gm(e){for(var t=e.min,r=e.max,s=e.step,a=e.timeslots,l=e.localizer,o=Zg({step:s,localizer:l}),c=1+l.getTotalMin(t,r),i=l.getMinutesFromMidnight(t),u=Math.ceil((c-1)/(s*a)),f=u*a,h=new Array(u),d=new Array(f),v=0;v<u;v++){h[v]=new Array(a);for(var j=0;j<a;j++){var m=v*a+j,y=m*s;d[m]=h[v][j]=l.getSlotDate(t,i,y)}}var g=d.length*s;d.push(l.getSlotDate(t,i,g));function p(b){var x=l.diff(t,b,"minutes")+l.getDstOffset(t,b);return Math.min(x,c)}return{groups:h,update:function(b){return Zg(b)!==o?Gm(b):this},dateIsInGroup:function(b,x){var C=h[x+1];return l.inRange(b,h[x][0],C?C[0]:r,"minutes")},nextSlot:function(b){var x=d[Math.min(d.findIndex(function(C){return C===b||l.eq(C,b)})+1,d.length-1)];return l.eq(x,b)&&(x=l.add(b,s,"minutes")),x},closestSlotToPosition:function(b){var x=Math.min(d.length-1,Math.max(0,Math.floor(b*f)));return d[x]},closestSlotFromPoint:function(b,x){var C=Math.abs(x.top-x.bottom);return this.closestSlotToPosition((b.y-x.top)/C)},closestSlotFromDate:function(b){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(l.lt(b,t,"minutes"))return d[0];if(l.gt(b,r,"minutes"))return d[d.length-1];var C=l.diff(t,b,"minutes");return d[(C-C%s)/s+x]},startsBeforeDay:function(b){return l.lt(b,t,"day")},startsAfterDay:function(b){return l.gt(b,r,"day")},startsBefore:function(b){return l.lt(l.merge(t,b),t,"minutes")},startsAfter:function(b){return l.gt(l.merge(r,b),r,"minutes")},getRange:function(b,x,C,O){C||(b=l.min(r,l.max(t,b))),O||(x=l.min(r,l.max(t,x)));var D=p(b),_=p(x),P=_>s*f&&!l.eq(r,x)?(D-s)/(s*f)*100:D/(s*f)*100;return{top:P,height:_/(s*f)*100-P,start:p(b),startDate:b,end:p(x),endDate:x}},getCurrentTimePosition:function(b){var x=p(b),C=x/(s*f)*100;return C}}}var B8=function(){function e(t,r){var s=r.accessors,a=r.slotMetrics;ot(this,e);var l=a.getRange(s.start(t),s.end(t)),o=l.start,c=l.startDate,i=l.end,u=l.endDate,f=l.top,h=l.height;this.start=o,this.end=i,this.startMs=+c,this.endMs=+u,this.top=f,this.height=h,this.data=t}return it(e,[{key:"_width",get:function(){if(this.rows){var t=this.rows.reduce(function(s,a){return Math.max(s,a.leaves.length+1)},0)+1;return 100/t}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var t=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:t;var s=this.row.leaves,a=s.indexOf(this);return a===s.length-1?t:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var t=this.row,r=t.leaves,s=t.xOffset,a=t._width,l=r.indexOf(this)+1;return s+l*a}}])}();function W8(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function H8(e){for(var t=pM(e,["startMs",function(c){return-c.endMs}]),r=[];t.length>0;){var s=t.shift();r.push(s);for(var a=0;a<t.length;a++){var l=t[a];if(!(s.endMs>l.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function Fy(e){for(var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,l=t.map(function(f){return new B8(f,{slotMetrics:s,accessors:a})}),o=H8(l),c=[],i=function(){var f=o[u],h=c.find(function(j){return j.end>f.start||Math.abs(f.start-j.start)<r});if(!h)return f.rows=[],c.push(f),1;f.container=h;for(var d=null,v=h.rows.length-1;!d&&v>=0;v--)W8(h.rows[v],f,r)&&(d=h.rows[v]);d?(d.leaves.push(f),f.row=d):(f.leaves=[],h.rows.push(f))},u=0;u<o.length;u++)i();return o.map(function(f){return{event:f.data,style:{top:f.top,height:f.height,width:f.width,xOffset:Math.max(0,f.xOffset)}}})}function Uy(e,t,r){for(var s=0;s<e.friends.length;++s)if(!(r.indexOf(e.friends[s])>-1)){t=t>e.friends[s].idx?t:e.friends[s].idx,r.push(e.friends[s]);var a=Uy(e.friends[s],t,r);t=t>a?t:a}return t}function q8(e){var t=e.events,r=e.minimumStartDifference,s=e.slotMetrics,a=e.accessors,l=Fy({events:t,minimumStartDifference:r,slotMetrics:s,accessors:a});l.sort(function(ee,R){return ee=ee.style,R=R.style,ee.top!==R.top?ee.top>R.top?1:-1:ee.height!==R.height?ee.top+ee.height<R.top+R.height?1:-1:0});for(var o=0;o<l.length;++o)l[o].friends=[],delete l[o].style.left,delete l[o].style.left,delete l[o].idx,delete l[o].size;for(var c=0;c<l.length-1;++c)for(var i=l[c],u=i.style.top,f=i.style.top+i.style.height,h=c+1;h<l.length;++h){var d=l[h],v=d.style.top,j=d.style.top+d.style.height;(v>=u&&j<=f||j>u&&j<=f||v>=u&&v<f)&&(i.friends.push(d),d.friends.push(i))}for(var m=0;m<l.length;++m){for(var y=l[m],g=[],p=0;p<100;++p)g.push(1);for(var b=0;b<y.friends.length;++b)y.friends[b].idx!==void 0&&(g[y.friends[b].idx]=0);y.idx=g.indexOf(1)}for(var x=0;x<l.length;++x){var C=0;if(!l[x].size){var O=[],D=Uy(l[x],0,O);C=100/(D+1),l[x].size=C;for(var _=0;_<O.length;++_)O[_].size=C}}for(var P=0;P<l.length;++P){var z=l[P];z.style.left=z.idx*z.size;for(var L=0,H=0;H<z.friends.length;++H){var T=z.friends[H].idx;L=L>T?L:T}L<=z.idx&&(z.size=100-z.idx*z.size);var V=z.idx===0?0:3;z.style.width="calc(".concat(z.size,"% - ").concat(V,"px)"),z.style.height="calc(".concat(z.style.height,"% - 2px)"),z.style.xOffset="calc(".concat(z.style.left,"% + ").concat(V,"px)")}return l}var ex={overlap:Fy,"no-overlap":q8};function V8(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Y8(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in ex&&(r=ex[t]),V8(r)?r.apply(this,arguments):[]}var By=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.renderSlot,a=r.resource,l=r.group,o=r.getters,c=r.components,i=c===void 0?{}:c,u=i.timeSlotWrapper,f=u===void 0?Rr:u,h=o?o.slotGroupProp(l):{};return A.createElement("div",Object.assign({className:"rbc-timeslot-group"},h),l.map(function(d,v){var j=o?o.slotProp(d,a):{};return A.createElement(f,{key:v,value:d,resource:a},A.createElement("div",Object.assign({},j,{className:Xe("rbc-time-slot",j.className)}),s&&s(d,v)))}))}}])}(N.Component);function Ao(e){return typeof e=="string"?e:e+"%"}function G8(e){var t=e.style,r=e.className,s=e.event,a=e.accessors,l=e.rtl,o=e.selected,c=e.label,i=e.continuesPrior,u=e.continuesAfter,f=e.getters,h=e.onClick,d=e.onDoubleClick,v=e.isBackgroundEvent,j=e.onKeyPress,m=e.components,y=m.event,g=m.eventWrapper,p=a.title(s),b=a.tooltip(s),x=a.end(s),C=a.start(s),O=f.eventProp(s,C,x,o),D=[A.createElement("div",{key:"1",className:"rbc-event-label"},c),A.createElement("div",{key:"2",className:"rbc-event-content"},y?A.createElement(y,{event:s,title:p}):p)],_=t.height,P=t.top,z=t.width,L=t.xOffset,H=De(De({},O.style),{},Zn({top:Ao(P),height:Ao(_),width:Ao(z)},l?"right":"left",Ao(L)));return A.createElement(g,Object.assign({type:"time"},e),A.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:d,style:H,onKeyDown:j,title:b?(typeof c=="string"?c+": ":"")+b:void 0,className:Xe(v?"rbc-background-event":"rbc-event",r,O.className,{"rbc-selected":o,"rbc-event-continues-earlier":i,"rbc-event-continues-later":u})},D))}var K8=function(e){var t=e.children,r=e.className,s=e.style,a=e.innerRef;return A.createElement("div",{className:r,style:s,ref:a},t)},J8=A.forwardRef(function(e,t){return A.createElement(K8,Object.assign({},e,{innerRef:t}))}),X8=["dayProp"],Q8=["eventContainerWrapper","timeIndicatorWrapper"],Wy=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var c=o.events,i=o.isBackgroundEvent,u=r.props,f=u.rtl,h=u.selected,d=u.accessors,v=u.localizer,j=u.getters,m=u.components,y=u.step,g=u.timeslots,p=u.dayLayoutAlgorithm,b=u.resizable,x=r,C=x.slotMetrics,O=v.messages,D=Y8({events:c,accessors:d,slotMetrics:C,minimumStartDifference:Math.ceil(y*g/2),dayLayoutAlgorithm:p});return D.map(function(_,P){var z,L=_.event,H=_.style,T=d.end(L),V=d.start(L),ee=(z=d.eventId(L))!==null&&z!==void 0?z:"evt_"+P,R="eventTimeRangeFormat",F,B=C.startsBeforeDay(V),G=C.startsAfterDay(T);B?R="eventTimeRangeEndFormat":G&&(R="eventTimeRangeStartFormat"),B&&G?F=O.allDay:F=v.format({start:V,end:T},R);var ae=B||C.startsBefore(V),q=G||C.startsAfter(T);return A.createElement(G8,{style:H,event:L,label:F,key:ee,getters:j,rtl:f,components:m,continuesPrior:ae,continuesAfter:q,accessors:d,resource:r.props.resource,selected:Pc(L,h),onClick:function(ie){return r._select(De(De(De({},L),r.props.resource&&{sourceResource:r.props.resource}),i&&{isBackgroundEvent:!0}),ie)},onDoubleClick:function(ie){return r._doubleClick(L,ie)},isBackgroundEvent:i,onKeyPress:function(ie){return r._keyPress(L,ie)},resizable:b})})},r._selectable=function(){var o=r.containerRef.current,c=r.props,i=c.longPressThreshold,u=c.localizer,f=r._selector=new Ry(function(){return o},{longPressThreshold:i}),h=function(j){var m=r.props.onSelecting,y=r.state||{},g=d(j),p=g.startDate,b=g.endDate;m&&(u.eq(y.startDate,p,"minutes")&&u.eq(y.endDate,b,"minutes")||m({start:p,end:b,resourceId:r.props.resource})===!1)||(r.state.start!==g.start||r.state.end!==g.end||r.state.selecting!==g.selecting)&&r.setState(g)},d=function(j){var m=r.slotMetrics.closestSlotFromPoint(j,ys(o));r.state.selecting||(r._initialSlot=m);var y=r._initialSlot;u.lte(y,m)?m=r.slotMetrics.nextSlot(m):u.gt(y,m)&&(y=r.slotMetrics.nextSlot(y));var g=r.slotMetrics.getRange(u.min(y,m),u.max(y,m));return De(De({},g),{},{selecting:!0,top:"".concat(g.top,"%"),height:"".concat(g.height,"%")})},v=function(j,m){if(!Vi(r.containerRef.current,j)){var y=d(j),g=y.startDate,p=y.endDate;r._selectSlot({startDate:g,endDate:p,action:m,box:j})}r.setState({selecting:!1})};f.on("selecting",h),f.on("selectStart",h),f.on("beforeSelect",function(j){if(r.props.selectable==="ignoreEvents")return!Vi(r.containerRef.current,j)}),f.on("click",function(j){return v(j,"click")}),f.on("doubleClick",function(j){return v(j,"doubleClick")}),f.on("select",function(j){r.state.selecting&&(r._selectSlot(De(De({},r.state),{},{action:"select",bounds:j})),r.setState({selecting:!1}))}),f.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var c=o.startDate,i=o.endDate,u=o.action,f=o.bounds,h=o.box,d=c,v=[];r.props.localizer.lte(d,i);)v.push(d),d=new Date(+d+r.props.step*60*1e3);Ae(r.props.onSelectSlot,{slots:v,start:c,end:i,resourceId:r.props.resource,action:u,bounds:f,box:h})},r._select=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onSelectEvent,c)},r._doubleClick=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onDoubleClickEvent,c)},r._keyPress=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onKeyPressEvent,c)},r.slotMetrics=Gm(r.props),r.containerRef=N.createRef(),r}return Ot(t,e),it(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,s){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var a=this.props,l=a.getNow,o=a.isNow,c=a.localizer,i=a.date,u=a.min,f=a.max,h=c.neq(r.getNow(),l(),"minutes");if(r.isNow!==o||h){if(this.clearTimeIndicatorInterval(),o){var d=!h&&c.eq(r.date,i,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else o&&(c.neq(r.min,u,"minutes")||c.neq(r.max,f,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,s=r.min,a=r.max,l=r.getNow,o=l();if(o>=s&&o<=a){var c=this.slotMetrics.getCurrentTimePosition(o);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,s=r.date,a=r.max,l=r.rtl,o=r.isNow,c=r.resource,i=r.accessors,u=r.localizer,f=r.getters,h=f.dayProp,d=Yr(f,X8),v=r.components,j=v.eventContainerWrapper,m=v.timeIndicatorWrapper,y=Yr(v,Q8);this.slotMetrics=this.slotMetrics.update(this.props);var g=this.slotMetrics,p=this.state,b=p.selecting,x=p.top,C=p.height,O=p.startDate,D=p.endDate,_={start:O,end:D},P=h(a,c),z=P.className,L=P.style,H={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},T=y.dayColumnWrapper||J8;return A.createElement(T,{ref:this.containerRef,date:s,style:L,className:Xe(z,"rbc-day-slot","rbc-time-column",o&&"rbc-now",o&&"rbc-today",b&&"rbc-slot-selecting"),slotMetrics:g,resource:c},g.groups.map(function(V,ee){return A.createElement(By,{key:ee,group:V,resource:c,getters:d,components:y})}),A.createElement(j,{localizer:u,resource:c,accessors:i,getters:d,components:y,slotMetrics:g},A.createElement("div",{className:Xe("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),b&&A.createElement("div",{className:"rbc-slot-selection",style:{top:x,height:C}},A.createElement("span",null,u.format(_,"selectRangeFormat"))),o&&this.intervalTriggered&&A.createElement(m,H,A.createElement("div",H)))}}])}(A.Component);Wy.defaultProps={dragThroughEvents:!0,timeslots:2};var Hy=function(e){var t=e.label;return A.createElement(A.Fragment,null,t)},Z8=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,i){i.preventDefault(),Ae(r.props.onDrillDown,[o,c])},r.renderRow=function(o){var c=r.props,i=c.events,u=c.rtl,f=c.selectable,h=c.getNow,d=c.range,v=c.getters,j=c.localizer,m=c.accessors,y=c.components,g=c.resizable,p=m.resourceId(o),b=o?i.filter(function(x){return m.resource(x)===p}):i;return A.createElement(Ul,{isAllDay:!0,rtl:u,getNow:h,minRows:2,maxRows:r.props.allDayMaxRows+1,range:d,events:b,resourceId:p,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:y,accessors:m,getters:v,localizer:j,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:g})},r}return Ot(t,e),it(t,[{key:"renderHeaderCells",value:function(r){var s=this,a=this.props,l=a.localizer,o=a.getDrilldownView,c=a.getNow,i=a.getters.dayProp,u=a.components.header,f=u===void 0?Ym:u,h=c();return r.map(function(d,v){var j=o(d),m=l.format(d,"dayFormat"),y=i(d),g=y.className,p=y.style,b=A.createElement(f,{date:d,label:m,localizer:l});return A.createElement("div",{key:v,style:p,className:Xe("rbc-header",g,l.isSameDate(d,h)&&"rbc-today")},j?A.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(x){return s.handleHeaderClick(d,j,x)}},b):A.createElement("span",null,b))})}},{key:"render",value:function(){var r=this,s=this.props,a=s.width,l=s.rtl,o=s.resources,c=s.range,i=s.events,u=s.getNow,f=s.accessors,h=s.selectable,d=s.components,v=s.getters,j=s.scrollRef,m=s.localizer,y=s.isOverflowing,g=s.components,p=g.timeGutterHeader,b=g.resourceHeader,x=b===void 0?Hy:b,C=s.resizable,O={};y&&(O[l?"marginLeft":"marginRight"]="".concat(Cm()-1,"px"));var D=o.groupEvents(i);return A.createElement("div",{style:O,ref:j,className:Xe("rbc-time-header",y&&"rbc-overflowing")},A.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},p&&A.createElement(p,null)),o.map(function(_,P){var z=ms(_,2),L=z[0],H=z[1];return A.createElement("div",{className:"rbc-time-header-content",key:L||P},H&&A.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(P)},A.createElement("div",{className:"rbc-header"},A.createElement(x,{index:P,label:f.resourceTitle(H),resource:H}))),A.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(c)),A.createElement(Ul,{isAllDay:!0,rtl:l,getNow:u,minRows:2,maxRows:r.props.allDayMaxRows+1,range:c,events:D.get(L)||[],resourceId:H&&L,className:"rbc-allday-cell",selectable:h,selected:r.props.selected,components:d,accessors:f,getters:v,localizer:m,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:C}))}))}}])}(A.Component),eL=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,i){i.preventDefault(),Ae(r.props.onDrillDown,[o,c])},r}return Ot(t,e),it(t,[{key:"renderHeaderCells",value:function(r){var s=this,a=this.props,l=a.localizer,o=a.getDrilldownView,c=a.getNow,i=a.getters.dayProp,u=a.components,f=u.header,h=f===void 0?Ym:f,d=u.resourceHeader,v=d===void 0?Hy:d,j=a.resources,m=a.accessors,y=a.events,g=a.rtl,p=a.selectable,b=a.components,x=a.getters,C=a.resizable,O=c(),D=j.groupEvents(y);return r.map(function(_,P){var z=o(_),L=l.format(_,"dayFormat"),H=i(_),T=H.className,V=H.style,ee=A.createElement(h,{date:_,label:L,localizer:l});return A.createElement("div",{key:P,className:"rbc-time-header-content rbc-resource-grouping"},A.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(r.length<=1?" rbc-time-header-cell-single-day":"")},A.createElement("div",{style:V,className:Xe("rbc-header",T,l.isSameDate(_,O)&&"rbc-today")},z?A.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(R){return s.handleHeaderClick(_,z,R)}},ee):A.createElement("span",null,ee))),A.createElement("div",{className:"rbc-row"},j.map(function(R,F){var B=ms(R,2),G=B[0],ae=B[1];return A.createElement("div",{key:"resource_".concat(G,"_").concat(F),className:Xe("rbc-header",T,l.isSameDate(_,O)&&"rbc-today")},A.createElement(v,{index:F,label:m.resourceTitle(ae),resource:ae}))})),A.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},j.map(function(R,F){var B=ms(R,2),G=B[0],ae=B[1],q=(D.get(G)||[]).filter(function(ie){return l.isSameDate(ie.start,_)||l.isSameDate(ie.end,_)});return A.createElement(Ul,{key:"resource_".concat(G,"_").concat(F),isAllDay:!0,rtl:g,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[_],events:q,resourceId:ae&&G,className:"rbc-allday-cell",selectable:p,selected:s.props.selected,components:b,accessors:m,getters:x,localizer:l,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:C})})))})}},{key:"render",value:function(){var r=this.props,s=r.width,a=r.rtl,l=r.range,o=r.scrollRef,c=r.isOverflowing,i=r.components.timeGutterHeader,u={};return c&&(u[a?"marginLeft":"marginRight"]="".concat(Cm()-1,"px")),A.createElement("div",{style:u,ref:o,className:Xe("rbc-time-header",c&&"rbc-overflowing")},A.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},i&&A.createElement(i,null)),this.renderHeaderCells(l))}}])}(A.Component);function tL(e){var t=e.min,r=e.max,s=e.localizer;return s.getTimezoneOffset(t)!==s.getTimezoneOffset(r)?{start:s.add(t,-1,"day"),end:s.add(r,-1,"day")}:{start:t,end:r}}var rL=function(e){var t=e.min,r=e.max,s=e.timeslots,a=e.step,l=e.localizer,o=e.getNow,c=e.resource,i=e.components,u=e.getters,f=e.gutterRef,h=i.timeGutterWrapper,d=N.useMemo(function(){return tL({min:t,max:r,localizer:l})},[t==null?void 0:t.toISOString(),r==null?void 0:r.toISOString(),l]),v=d.start,j=d.end,m=N.useState(Gm({min:v,max:j,timeslots:s,step:a,localizer:l})),y=ms(m,2),g=y[0],p=y[1];N.useEffect(function(){g&&p(g.update({min:v,max:j,timeslots:s,step:a,localizer:l}))},[v==null?void 0:v.toISOString(),j==null?void 0:j.toISOString(),s,a]);var b=N.useCallback(function(x,C){if(C)return null;var O=g.dateIsInGroup(o(),C);return A.createElement("span",{className:Xe("rbc-label",O&&"rbc-now")},l.format(x,"timeGutterFormat"))},[g,l,o]);return A.createElement(h,{slotMetrics:g},A.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:f},g.groups.map(function(x,C){return A.createElement(By,{key:C,group:x,resource:c,components:i,renderSlot:b,getters:u})})))},nL=A.forwardRef(function(e,t){return A.createElement(rL,Object.assign({gutterRef:t},e))}),_u={};function sL(e,t){return{map:function(r){return e?e.map(function(s,a){return r([t.resourceId(s),s],a)}):[r([_u,null],0)]},groupEvents:function(r){var s=new Map;return e?(r.forEach(function(a){var l=t.resource(a)||_u;if(Array.isArray(l))l.forEach(function(c){var i=s.get(c)||[];i.push(a),s.set(c,i)});else{var o=s.get(l)||[];o.push(a),s.set(l,o)}}),s):(s.set(_u,r),s)}}}var Sa=function(e){function t(r){var s;return ot(this,t),s=_t(this,t,[r]),s.handleScroll=function(a){s.scrollRef.current&&(s.scrollRef.current.scrollLeft=a.target.scrollLeft)},s.handleResize=function(){Fp(s.rafHandle),s.rafHandle=Fb(s.checkOverflow)},s.handleKeyPressEvent=function(){s.clearSelection();for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];Ae(s.props.onKeyPressEvent,l)},s.handleSelectEvent=function(){s.clearSelection();for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];Ae(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];Ae(s.props.onDoubleClickEvent,l)},s.handleShowMore=function(a,l,o,c,i){var u=s.props,f=u.popup,h=u.onDrillDown,d=u.onShowMore,v=u.getDrilldownView,j=u.doShowMoreDrillDown;if(s.clearSelection(),f){var m=zb(o,s.containerRef.current);s.setState({overlay:{date:l,events:a,position:De(De({},m),{},{width:"200px"}),target:i}})}else j&&Ae(h,[l,v(l)||Pt.DAY]);Ae(d,[a,l,c])},s.handleSelectAllDaySlot=function(a,l){var o=s.props.onSelectSlot,c=new Date(a[0]),i=new Date(a[a.length-1]);i.setDate(a[a.length-1].getDate()+1),Ae(o,{slots:a,start:c,end:i,action:l.action,resourceId:l.resourceId})},s.overlayDisplay=function(){s.setState({overlay:null})},s.checkOverflow=function(){if(!s._updatingOverflow){var a=s.contentRef.current;if(a!=null&&a.scrollHeight){var l=a.scrollHeight>a.clientHeight;s.state.isOverflowing!==l&&(s._updatingOverflow=!0,s.setState({isOverflowing:l},function(){s._updatingOverflow=!1}))}}},s.memoizedResources=dy(function(a,l){return sL(a,l)}),s.state={gutterWidth:void 0,isOverflowing:null},s.scrollRef=A.createRef(),s.contentRef=A.createRef(),s.containerRef=A.createRef(),s._scrollRatio=null,s.gutterRef=N.createRef(),s}return Ot(t,e),it(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Fp(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(r,s,a,l,o,c,i,u,f,h){var d=this.props,v=d.min,j=d.max,m=(l.get(s)||[]).filter(function(g){return c.inRange(r,i.start(g),i.end(g),"day")}),y=(o.get(s)||[]).filter(function(g){return c.inRange(r,i.start(g),i.end(g),"day")});return A.createElement(Wy,Object.assign({},this.props,{localizer:c,min:c.merge(r,v),max:c.merge(r,j),resource:a&&s,components:u,isNow:c.isSameDate(r,h),key:"".concat(s,"-").concat(r),date:r,events:m,backgroundEvents:y,dayLayoutAlgorithm:f}))}},{key:"renderResourcesFirst",value:function(r,s,a,l,o,c,i,u,f){var h=this;return s.map(function(d){var v=ms(d,2),j=v[0],m=v[1];return r.map(function(y){return h.renderDayColumn(y,j,m,a,l,o,c,u,f,i)})})}},{key:"renderRangeFirst",value:function(r,s,a,l,o,c,i,u,f){var h=this;return r.map(function(d){return A.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:d},s.map(function(v){var j=ms(v,2),m=j[0],y=j[1];return A.createElement("div",{style:{flex:1},key:c.resourceId(y)},h.renderDayColumn(d,m,y,a,l,o,c,u,f,i))}))})}},{key:"renderEvents",value:function(r,s,a,l){var o=this.props,c=o.accessors,i=o.localizer,u=o.resourceGroupingLayout,f=o.components,h=o.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,c),v=d.groupEvents(s),j=d.groupEvents(a);return u?this.renderRangeFirst(r,d,v,j,i,c,l,f,h):this.renderResourcesFirst(r,d,v,j,i,c,l,f,h)}},{key:"render",value:function(){var r,s=this.props,a=s.events,l=s.backgroundEvents,o=s.range,c=s.width,i=s.rtl,u=s.selected,f=s.getNow,h=s.resources,d=s.components,v=s.accessors,j=s.getters,m=s.localizer,y=s.min,g=s.max,p=s.showMultiDayTimes,b=s.longPressThreshold,x=s.resizable,C=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var O=o[0],D=o[o.length-1];this.slots=o.length;var _=[],P=[],z=[];a.forEach(function(H){if(Fl(H,O,D,v,m)){var T=v.start(H),V=v.end(H);v.allDay(H)||m.startAndEndAreDateOnly(T,V)||!p&&!m.isSameDate(T,V)?_.push(H):P.push(H)}}),l.forEach(function(H){Fl(H,O,D,v,m)&&z.push(H)}),_.sort(function(H,T){return Kd(H,T,v,m)});var L={range:o,events:_,width:c,rtl:i,getNow:f,localizer:m,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(h,v),selectable:this.props.selectable,accessors:v,getters:j,components:d,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:b,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:x};return A.createElement("div",{className:Xe("rbc-time-view",h&&"rbc-time-view-resources"),ref:this.containerRef},h&&h.length>1&&C?A.createElement(eL,L):A.createElement(Z8,L),this.props.popup&&this.renderOverlay(),A.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},A.createElement(nL,{date:O,ref:this.gutterRef,localizer:m,min:m.merge(O,y),max:m.merge(O,g),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:d,className:"rbc-time-gutter",getters:j}),this.renderEvents(o,P,z,f())))}},{key:"renderOverlay",value:function(){var r,s,a=this,l=(r=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&r!==void 0?r:{},o=this.props,c=o.accessors,i=o.localizer,u=o.components,f=o.getters,h=o.selected,d=o.popupOffset,v=o.handleDragStart,j=function(){return a.setState({overlay:null})};return A.createElement(Vm,{overlay:l,accessors:c,localizer:i,components:u,getters:f,selected:h,popupOffset:d,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:j})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,a=(s=r.gutterRef)!==null&&s!==void 0&&s.current?Vd(r.gutterRef.current):void 0;a&&r.state.gutterWidth!==a&&r.setState({gutterWidth:a})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=r.min,a=r.max,l=r.scrollToTime,o=r.localizer,c=o.diff(o.merge(l,s),l,"milliseconds"),i=o.diff(s,a,"milliseconds");this._scrollRatio=c/i}}])}(N.Component);Sa.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var aL=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Ic=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.date,a=r.localizer,l=r.min,o=l===void 0?a.startOf(new Date,"day"):l,c=r.max,i=c===void 0?a.endOf(new Date,"day"):c,u=r.scrollToTime,f=u===void 0?a.startOf(new Date,"day"):u,h=r.enableAutoScroll,d=h===void 0?!0:h,v=Yr(r,aL),j=t.range(s,{localizer:a});return A.createElement(Sa,Object.assign({},v,{range:j,eventOffset:10,localizer:a,min:o,max:i,scrollToTime:f,enableAutoScroll:d}))}}])}(A.Component);Ic.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};Ic.navigate=function(e,t,r){var s=r.localizer;switch(t){case Vt.PREVIOUS:return s.add(e,-1,"day");case Vt.NEXT:return s.add(e,1,"day");default:return e}};Ic.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var lL=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Un=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.date,a=r.localizer,l=r.min,o=l===void 0?a.startOf(new Date,"day"):l,c=r.max,i=c===void 0?a.endOf(new Date,"day"):c,u=r.scrollToTime,f=u===void 0?a.startOf(new Date,"day"):u,h=r.enableAutoScroll,d=h===void 0?!0:h,v=Yr(r,lL),j=t.range(s,this.props);return A.createElement(Sa,Object.assign({},v,{range:j,eventOffset:15,localizer:a,min:o,max:i,scrollToTime:f,enableAutoScroll:d}))}}])}(A.Component);Un.defaultProps=Sa.defaultProps;Un.navigate=function(e,t,r){var s=r.localizer;switch(t){case Vt.PREVIOUS:return s.add(e,-1,"week");case Vt.NEXT:return s.add(e,1,"week");default:return e}};Un.range=function(e,t){var r=t.localizer,s=r.startOfWeek(),a=r.startOf(e,"week",s),l=r.endOf(e,"week",s);return r.range(a,l)};Un.title=function(e,t){var r=t.localizer,s=Un.range(e,{localizer:r}),a=vy(s),l=a[0],o=a.slice(1);return r.format({start:l,end:o.pop()},"dayRangeHeaderFormat")};var oL=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Km(e,t){return Un.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var oo=function(e){function t(){return ot(this,t),_t(this,t,arguments)}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.date,a=r.localizer,l=r.min,o=l===void 0?a.startOf(new Date,"day"):l,c=r.max,i=c===void 0?a.endOf(new Date,"day"):c,u=r.scrollToTime,f=u===void 0?a.startOf(new Date,"day"):u,h=r.enableAutoScroll,d=h===void 0?!0:h,v=Yr(r,oL),j=Km(s,this.props);return A.createElement(Sa,Object.assign({},v,{range:j,eventOffset:15,localizer:a,min:o,max:i,scrollToTime:f,enableAutoScroll:d}))}}])}(A.Component);oo.defaultProps=Sa.defaultProps;oo.range=Km;oo.navigate=Un.navigate;oo.title=function(e,t){var r=t.localizer,s=Km(e,{localizer:r}),a=vy(s),l=a[0],o=a.slice(1);return r.format({start:l,end:o.pop()},"dayRangeHeaderFormat")};var Ac=30;function Lc(e){var t=e.accessors,r=e.components,s=e.date,a=e.events,l=e.getters,o=e.length,c=o===void 0?Ac:o,i=e.localizer,u=e.onDoubleClickEvent,f=e.onSelectEvent,h=e.selected,d=N.useRef(null),v=N.useRef(null),j=N.useRef(null),m=N.useRef(null),y=N.useRef(null);N.useEffect(function(){b()});var g=function(D,_,P){var z=r.event,L=r.date;return _=_.filter(function(H){return Fl(H,i.startOf(D,"day"),i.endOf(D,"day"),t,i)}),_.map(function(H,T){var V=t.title(H),ee=t.end(H),R=t.start(H),F=l.eventProp(H,R,ee,Pc(H,h)),B=T===0&&i.format(D,"agendaDateFormat"),G=T===0?A.createElement("td",{rowSpan:_.length,className:"rbc-agenda-date-cell"},L?A.createElement(L,{day:D,label:B}):B):!1;return A.createElement("tr",{key:P+"_"+T,className:F.className,style:F.style},G,A.createElement("td",{className:"rbc-agenda-time-cell"},p(D,H)),A.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(ae){return f&&f(H,ae)},onDoubleClick:function(ae){return u&&u(H,ae)}},z?A.createElement(z,{event:H,title:V}):V))},[])},p=function(D,_){var P="",z=r.time,L=i.messages.allDay,H=t.end(_),T=t.start(_);return t.allDay(_)||(i.eq(T,H)?L=i.format(T,"agendaTimeFormat"):i.isSameDate(T,H)?L=i.format({start:T,end:H},"agendaTimeRangeFormat"):i.isSameDate(D,T)?L=i.format(T,"agendaTimeFormat"):i.isSameDate(D,H)&&(L=i.format(H,"agendaTimeFormat"))),i.gt(D,T,"day")&&(P="rbc-continues-prior"),i.lt(D,H,"day")&&(P+=" rbc-continues-after"),A.createElement("span",{className:P.trim()},z?A.createElement(z,{event:_,day:D,label:L}):L)},b=function(){if(y.current){var D=d.current,_=y.current.firstChild;if(_){var P=m.current.scrollHeight>m.current.clientHeight,z=[],L=z;z=[Vd(_.children[0]),Vd(_.children[1])],(L[0]!==z[0]||L[1]!==z[1])&&(v.current.style.width=z[0]+"px",j.current.style.width=z[1]+"px"),P?(i3(D,"rbc-header-overflowing"),D.style.marginRight=Cm()+"px"):c3(D,"rbc-header-overflowing")}}},x=i.messages,C=i.add(s,c,"day"),O=i.range(s,C,"day");return a=a.filter(function(D){return Fl(D,i.startOf(s,"day"),i.endOf(C,"day"),t,i)}),a.sort(function(D,_){return+t.start(D)-+t.start(_)}),A.createElement("div",{className:"rbc-agenda-view"},a.length!==0?A.createElement(A.Fragment,null,A.createElement("table",{ref:d,className:"rbc-agenda-table"},A.createElement("thead",null,A.createElement("tr",null,A.createElement("th",{className:"rbc-header",ref:v},x.date),A.createElement("th",{className:"rbc-header",ref:j},x.time),A.createElement("th",{className:"rbc-header"},x.event)))),A.createElement("div",{className:"rbc-agenda-content",ref:m},A.createElement("table",{className:"rbc-agenda-table"},A.createElement("tbody",{ref:y},O.map(function(D,_){return g(D,a,_)}))))):A.createElement("span",{className:"rbc-agenda-empty"},x.noEventsInRange))}Lc.range=function(e,t){var r=t.length,s=r===void 0?Ac:r,a=t.localizer,l=a.add(e,s,"day");return{start:e,end:l}};Lc.navigate=function(e,t,r){var s=r.length,a=s===void 0?Ac:s,l=r.localizer;switch(t){case Vt.PREVIOUS:return l.add(e,-a,"day");case Vt.NEXT:return l.add(e,a,"day");default:return e}};Lc.title=function(e,t){var r=t.length,s=r===void 0?Ac:r,a=t.localizer,l=a.add(e,s,"day");return a.format({start:e,end:l},"agendaHeaderFormat")};var ci=Zn(Zn(Zn(Zn(Zn({},Pt.MONTH,Rc),Pt.WEEK,Un),Pt.WORK_WEEK,oo),Pt.DAY,Ic),Pt.AGENDA,Lc),iL=["action","date","today"];function cL(e,t){var r=t.action,s=t.date,a=t.today,l=Yr(t,iL);switch(e=typeof e=="string"?ci[e]:e,r){case Vt.TODAY:s=a||new Date;break;case Vt.DATE:break;default:$l(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),s=e.navigate(s,r,l)}return s}function uL(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&mn(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Xr=function(e){return function(t){return uL(t,e)}},dL=["view","date","getNow","onNavigate"],fL=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function qy(e){if(Array.isArray(e))return e;for(var t=[],r=0,s=Object.entries(e);r<s.length;r++){var a=ms(s[r],2),l=a[0],o=a[1];o&&t.push(l)}return t}function mL(e,t){var r=t.views,s=qy(r);return s.indexOf(e)!==-1}var Vy=function(e){function t(){var r;ot(this,t);for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r=_t(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?WA(o,function(c,i){return c[i]=ci[i]},{}):mn(o)==="object"?WM(o,function(c,i){return c===!0?ci[i]:c}):ci},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var c=r.props,i=c.view,u=c.drilldownView,f=c.getDrilldownView;return f?f(o,i,Object.keys(r.getViews())):u},r.handleRangeChange=function(o,c,i){var u=r.props,f=u.onRangeChange,h=u.localizer;f&&c.range&&f(c.range(o,{localizer:h}),i)},r.handleNavigate=function(o,c){var i=r.props,u=i.view,f=i.date,h=i.getNow,d=i.onNavigate,v=Yr(i,dL),j=r.getView(),m=h();f=cL(j,De(De({},v),{},{action:o,date:c||f||m,today:m})),d(f,u,o),r.handleRangeChange(f,j)},r.handleViewChange=function(o){o!==r.props.view&&mL(o,r.props)&&r.props.onView(o);var c=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),c[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];Ae(r.props.onKeyPressEvent,c)},r.handleSelectSlot=function(o){Ae(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,c){var i=r.props.onDrillDown;if(i){i(o,c,r.drilldownView);return}c&&r.handleViewChange(c),r.handleNavigate(Vt.DATE,o)},r.state={context:t.getContext(r.props)},r}return Ot(t,e),it(t,[{key:"render",value:function(){var r=this.props,s=r.view,a=r.toolbar,l=r.events,o=r.backgroundEvents,c=r.resourceGroupingLayout,i=r.style,u=r.className,f=r.elementProps,h=r.date,d=r.getNow,v=r.length,j=r.showMultiDayTimes,m=r.onShowMore,y=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var g=Yr(r,fL);h=h||d();var p=this.getView(),b=this.state.context,x=b.accessors,C=b.components,O=b.getters,D=b.localizer,_=b.viewNames,P=C.toolbar||g8,z=p.title(h,{localizer:D,length:v});return A.createElement("div",Object.assign({},f,{className:Xe(u,"rbc-calendar",g.rtl&&"rbc-rtl"),style:i}),a&&A.createElement(P,{date:h,view:s,views:_,label:z,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:D}),A.createElement(p,Object.assign({},g,{events:l,backgroundEvents:o,date:h,getNow:d,length:v,localizer:D,getters:O,components:C,accessors:x,showMultiDayTimes:j,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:m,doShowMoreDrillDown:y,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:t.getContext(r)}}},{key:"getContext",value:function(r){var s=r.startAccessor,a=r.endAccessor,l=r.allDayAccessor,o=r.tooltipAccessor,c=r.titleAccessor,i=r.resourceAccessor,u=r.resourceIdAccessor,f=r.resourceTitleAccessor,h=r.eventIdAccessor,d=r.eventPropGetter,v=r.backgroundEventPropGetter,j=r.slotPropGetter,m=r.slotGroupPropGetter,y=r.dayPropGetter,g=r.view,p=r.views,b=r.localizer,x=r.culture,C=r.messages,O=C===void 0?{}:C,D=r.components,_=D===void 0?{}:D,P=r.formats,z=P===void 0?{}:P,L=qy(p),H=v8(O);return{viewNames:L,localizer:p8(b,x,z,H),getters:{eventProp:function(){return d&&d.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return j&&j.apply(void 0,arguments)||{}},slotGroupProp:function(){return m&&m.apply(void 0,arguments)||{}},dayProp:function(){return y&&y.apply(void 0,arguments)||{}}},components:IM(_[g]||{},OA(_,L),{eventWrapper:Rr,backgroundEventWrapper:Rr,eventContainerWrapper:Rr,dateCellWrapper:Rr,weekWrapper:Rr,timeSlotWrapper:Rr,timeGutterWrapper:Rr,timeIndicatorWrapper:Rr}),accessors:{start:Xr(s),end:Xr(a),allDay:Xr(l),tooltip:Xr(o),title:Xr(c),resource:Xr(i),resourceId:Xr(u),resourceTitle:Xr(f),eventId:Xr(h)}}}}])}(A.Component);Vy.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Pt.MONTH,views:[Pt.MONTH,Pt.WEEK,Pt.DAY,Pt.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Pt.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Jm=bb(Vy,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),hL=function(e,t,r){var s=e.start,a=e.end;return"".concat(r.format(s,"P",t)," – ").concat(r.format(a,"P",t))},Ou=function(e,t,r){var s=e.start,a=e.end;return"".concat(r.format(s,"p",t)," – ").concat(r.format(a,"p",t))},pL=function(e,t,r){var s=e.start;return"".concat(r.format(s,"h:mma",t)," – ")},gL=function(e,t,r){var s=e.end;return" – ".concat(r.format(s,"h:mma",t))},xL=function(e,t,r){var s=e.start,a=e.end;return"".concat(r.format(s,"MMMM dd",t)," – ").concat(r.format(a,pa(s,a,"month")?"dd":"MMMM dd",t))},vL={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Ou,eventTimeRangeFormat:Ou,eventTimeRangeStartFormat:pL,eventTimeRangeEndFormat:gL,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:xL,agendaHeaderFormat:hL,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Ou},Xm=function(e){var t=e.startOfWeek,r=e.getDay,s=e.format,a=e.locales;return new h8({formats:vL,firstOfWeek:function(l){return r(t(new Date,{locale:a[l]}))},format:function(l,o,c){return s(new Date(l),o,{locale:a[c]})}})};function sr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function pn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bL(e,t){const r=sr(e);return isNaN(t)?pn(e,NaN):(r.setDate(r.getDate()+t),r)}const Yy=6048e5,yL=864e5;let jL={};function zc(){return jL}function Gr(e,t){var r,s,a,l;const o=zc(),c=(t==null?void 0:t.weekStartsOn)??((s=(r=t==null?void 0:t.locale)==null?void 0:r.options)==null?void 0:s.weekStartsOn)??o.weekStartsOn??((l=(a=o.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=sr(e),u=i.getDay(),f=(u<c?7:0)+u-c;return i.setDate(i.getDate()-f),i.setHours(0,0,0,0),i}function Yi(e){return Gr(e,{weekStartsOn:1})}function Gy(e){const t=sr(e),r=t.getFullYear(),s=pn(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Yi(s),l=pn(e,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const o=Yi(l);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Gi(e){const t=sr(e);return t.setHours(0,0,0,0),t}function tx(e){const t=sr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function wL(e,t){const r=Gi(e),s=Gi(t),a=+r-tx(r),l=+s-tx(s);return Math.round((a-l)/yL)}function NL(e){const t=Gy(e),r=pn(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Yi(r)}function Qm(e){return pn(e,Date.now())}function Ky(e,t){const r=Gi(e),s=Gi(t);return+r==+s}function kL(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function SL(e){if(!kL(e)&&typeof e!="number")return!1;const t=sr(e);return!isNaN(Number(t))}function CL(e){const t=sr(e),r=pn(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const EL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$L=(e,t,r)=>{let s;const a=EL[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Ks(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const _L={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DL={date:Ks({formats:_L,defaultWidth:"full"}),time:Ks({formats:OL,defaultWidth:"full"}),dateTime:Ks({formats:TL,defaultWidth:"full"})},ML={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PL=(e,t,r,s)=>ML[e];function Ar(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,c=r!=null&&r.width?String(r.width):o;a=e.formattingValues[c]||e.formattingValues[o]}else{const o=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[o]}const l=e.argumentCallback?e.argumentCallback(t):t;return a[l]}}const RL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},IL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},LL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},UL=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},BL={ordinalNumber:UL,era:Ar({values:RL,defaultWidth:"wide"}),quarter:Ar({values:IL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ar({values:AL,defaultWidth:"wide"}),day:Ar({values:LL,defaultWidth:"wide"}),dayPeriod:Ar({values:zL,defaultWidth:"wide",formattingValues:FL,defaultFormattingWidth:"wide"})};function Lr(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],l=t.match(a);if(!l)return null;const o=l[0],c=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],i=Array.isArray(c)?HL(c,h=>h.test(o)):WL(c,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(i):i,u=r.valueCallback?r.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function WL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function HL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Jy(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],l=t.match(e.parsePattern);if(!l)return null;let o=e.valueCallback?e.valueCallback(l[0]):l[0];o=r.valueCallback?r.valueCallback(o):o;const c=t.slice(a.length);return{value:o,rest:c}}}const qL=/^(\d+)(th|st|nd|rd)?/i,VL=/\d+/i,YL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GL={any:[/^b/i,/^(a|c)/i]},KL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JL={any:[/1/i,/2/i,/3/i,/4/i]},XL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},e7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},t7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},r7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},n7={ordinalNumber:Jy({matchPattern:qL,parsePattern:VL,valueCallback:e=>parseInt(e,10)}),era:Lr({matchPatterns:YL,defaultMatchWidth:"wide",parsePatterns:GL,defaultParseWidth:"any"}),quarter:Lr({matchPatterns:KL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Lr({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:QL,defaultParseWidth:"any"}),day:Lr({matchPatterns:ZL,defaultMatchWidth:"wide",parsePatterns:e7,defaultParseWidth:"any"}),dayPeriod:Lr({matchPatterns:t7,defaultMatchWidth:"any",parsePatterns:r7,defaultParseWidth:"any"})},s7={code:"en-US",formatDistance:$L,formatLong:DL,formatRelative:PL,localize:BL,match:n7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function a7(e){const t=sr(e);return wL(t,CL(t))+1}function l7(e){const t=sr(e),r=+Yi(t)-+NL(t);return Math.round(r/Yy)+1}function Xy(e,t){var r,s,a,l;const o=sr(e),c=o.getFullYear(),i=zc(),u=(t==null?void 0:t.firstWeekContainsDate)??((s=(r=t==null?void 0:t.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??i.firstWeekContainsDate??((l=(a=i.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??1,f=pn(e,0);f.setFullYear(c+1,0,u),f.setHours(0,0,0,0);const h=Gr(f,t),d=pn(e,0);d.setFullYear(c,0,u),d.setHours(0,0,0,0);const v=Gr(d,t);return o.getTime()>=h.getTime()?c+1:o.getTime()>=v.getTime()?c:c-1}function o7(e,t){var r,s,a,l;const o=zc(),c=(t==null?void 0:t.firstWeekContainsDate)??((s=(r=t==null?void 0:t.locale)==null?void 0:r.options)==null?void 0:s.firstWeekContainsDate)??o.firstWeekContainsDate??((l=(a=o.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??1,i=Xy(e,t),u=pn(e,0);return u.setFullYear(i,0,c),u.setHours(0,0,0,0),Gr(u,t)}function i7(e,t){const r=sr(e),s=+Gr(r,t)-+o7(r,t);return Math.round(s/Yy)+1}function _e(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const yn={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return _e(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):_e(r+1,2)},d(e,t){return _e(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return _e(e.getHours()%12||12,t.length)},H(e,t){return _e(e.getHours(),t.length)},m(e,t){return _e(e.getMinutes(),t.length)},s(e,t){return _e(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return _e(a,t.length)}},Es={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rx={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return yn.y(e,t)},Y:function(e,t,r,s){const a=Xy(e,s),l=a>0?a:1-a;if(t==="YY"){const o=l%100;return _e(o,2)}return t==="Yo"?r.ordinalNumber(l,{unit:"year"}):_e(l,t.length)},R:function(e,t){const r=Gy(e);return _e(r,t.length)},u:function(e,t){const r=e.getFullYear();return _e(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return _e(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return _e(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return yn.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return _e(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=i7(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):_e(a,t.length)},I:function(e,t,r){const s=l7(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):_e(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):yn.d(e,t)},D:function(e,t,r){const s=a7(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):_e(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),l=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return _e(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),l=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return _e(l,t.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return _e(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Es.noon:s===0?a=Es.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Es.evening:s>=12?a=Es.afternoon:s>=4?a=Es.morning:a=Es.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return yn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):yn.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):_e(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):_e(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):yn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):yn.s(e,t)},S:function(e,t){return yn.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return sx(s);case"XXXX":case"XX":return Qn(s);case"XXXXX":case"XXX":default:return Qn(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return sx(s);case"xxxx":case"xx":return Qn(s);case"xxxxx":case"xxx":default:return Qn(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nx(s,":");case"OOOO":default:return"GMT"+Qn(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nx(s,":");case"zzzz":default:return"GMT"+Qn(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return _e(s,t.length)},T:function(e,t,r){const s=e.getTime();return _e(s,t.length)}};function nx(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),l=s%60;return l===0?r+String(a):r+String(a)+t+_e(l,2)}function sx(e,t){return e%60===0?(e>0?"-":"+")+_e(Math.abs(e)/60,2):Qn(e,t)}function Qn(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=_e(Math.trunc(s/60),2),l=_e(s%60,2);return r+a+t+l}const ax=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Qy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},c7=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return ax(e,t);let l;switch(s){case"P":l=t.dateTime({width:"short"});break;case"PP":l=t.dateTime({width:"medium"});break;case"PPP":l=t.dateTime({width:"long"});break;case"PPPP":default:l=t.dateTime({width:"full"});break}return l.replace("{{date}}",ax(s,t)).replace("{{time}}",Qy(a,t))},u7={p:Qy,P:c7},d7=/^D+$/,f7=/^Y+$/,m7=["D","DD","YY","YYYY"];function h7(e){return d7.test(e)}function p7(e){return f7.test(e)}function g7(e,t,r){const s=x7(e,t,r);if(console.warn(s),m7.includes(e))throw new RangeError(s)}function x7(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const v7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,y7=/^'([^]*?)'?$/,j7=/''/g,w7=/[a-zA-Z]/;function dt(e,t,r){var s,a,l,o,c,i,u,f;const h=zc(),d=(r==null?void 0:r.locale)??h.locale??s7,v=(r==null?void 0:r.firstWeekContainsDate)??((a=(s=r==null?void 0:r.locale)==null?void 0:s.options)==null?void 0:a.firstWeekContainsDate)??h.firstWeekContainsDate??((o=(l=h.locale)==null?void 0:l.options)==null?void 0:o.firstWeekContainsDate)??1,j=(r==null?void 0:r.weekStartsOn)??((i=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:i.weekStartsOn)??h.weekStartsOn??((f=(u=h.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,m=sr(e);if(!SL(m))throw new RangeError("Invalid time value");let y=t.match(b7).map(p=>{const b=p[0];if(b==="p"||b==="P"){const x=u7[b];return x(p,d.formatLong)}return p}).join("").match(v7).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const b=p[0];if(b==="'")return{isToken:!1,value:N7(p)};if(rx[b])return{isToken:!0,value:p};if(b.match(w7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:p}});d.localize.preprocessor&&(y=d.localize.preprocessor(m,y));const g={firstWeekContainsDate:v,weekStartsOn:j,locale:d};return y.map(p=>{if(!p.isToken)return p.value;const b=p.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&p7(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&h7(b))&&g7(b,t,String(e));const x=rx[b[0]];return x(m,b,d.localize,g)}).join("")}function N7(e){const t=e.match(y7);return t?t[1].replace(j7,"'"):e}function Zm(e){return sr(e).getDay()}function Xd(e,t,r){const s=Gr(e,r),a=Gr(t,r);return+s==+a}function k7(e,t){return Xd(e,Qm(e),t)}function lx(e){return Ky(e,Qm(e))}function S7(e,t){return bL(e,-1)}function ox(e){return Ky(e,S7(Qm(e)))}function za(e,t){if(e.one!==void 0&&t===1)return e.one;const r=t%10,s=t%100;return r===1&&s!==11?e.singularNominative.replace("{{count}}",String(t)):r>=2&&r<=4&&(s<10||s>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function Dt(e){return(t,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?e.future?za(e.future,t):"через "+za(e.regular,t):e.past?za(e.past,t):za(e.regular,t)+" назад":za(e.regular,t)}const C7={lessThanXSeconds:Dt({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Dt({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:Dt({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Dt({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Dt({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Dt({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Dt({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Dt({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Dt({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Dt({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Dt({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Dt({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Dt({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Dt({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Dt({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},E7=(e,t,r)=>C7[e](t,r),$7={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},_7={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},O7={any:"{{date}}, {{time}}"},T7={date:Ks({formats:$7,defaultWidth:"full"}),time:Ks({formats:_7,defaultWidth:"full"}),dateTime:Ks({formats:O7,defaultWidth:"any"})},eh=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function D7(e){const t=eh[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function ix(e){const t=eh[e];return e===2?"'во "+t+" в' p":"'в "+t+" в' p"}function M7(e){const t=eh[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}const P7={lastWeek:(e,t,r)=>{const s=e.getDay();return Xd(e,t,r)?ix(s):D7(s)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,r)=>{const s=e.getDay();return Xd(e,t,r)?ix(s):M7(s)},other:"P"},R7=(e,t,r,s)=>{const a=P7[e];return typeof a=="function"?a(t,r,s):a},I7={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},A7={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},L7={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},z7={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},F7={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},U7={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},B7={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},W7=(e,t)=>{const r=Number(e),s=t==null?void 0:t.unit;let a;return s==="date"?a="-е":s==="week"||s==="minute"||s==="second"?a="-я":a="-й",r+a},H7={ordinalNumber:W7,era:Ar({values:I7,defaultWidth:"wide"}),quarter:Ar({values:A7,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ar({values:L7,defaultWidth:"wide",formattingValues:z7,defaultFormattingWidth:"wide"}),day:Ar({values:F7,defaultWidth:"wide"}),dayPeriod:Ar({values:U7,defaultWidth:"any",formattingValues:B7,defaultFormattingWidth:"wide"})},q7=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,V7=/\d+/i,Y7={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},G7={any:[/^д/i,/^н/i]},K7={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},J7={any:[/1/i,/2/i,/3/i,/4/i]},X7={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},Q7={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},Z7={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},e9={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},t9={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},r9={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},n9={ordinalNumber:Jy({matchPattern:q7,parsePattern:V7,valueCallback:e=>parseInt(e,10)}),era:Lr({matchPatterns:Y7,defaultMatchWidth:"wide",parsePatterns:G7,defaultParseWidth:"any"}),quarter:Lr({matchPatterns:K7,defaultMatchWidth:"wide",parsePatterns:J7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Lr({matchPatterns:X7,defaultMatchWidth:"wide",parsePatterns:Q7,defaultParseWidth:"any"}),day:Lr({matchPatterns:Z7,defaultMatchWidth:"wide",parsePatterns:e9,defaultParseWidth:"any"}),dayPeriod:Lr({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:r9,defaultParseWidth:"any"})},dr={code:"ru",formatDistance:E7,formatLong:T7,formatRelative:R7,localize:H7,match:n9,options:{weekStartsOn:1,firstWeekContainsDate:1}},th=({isOpen:e,onClose:t,onConfirm:r,slot:s,teacher:a,student:l})=>{var o;const[c,i]=N.useState(""),[u,f]=N.useState(!1),h=async()=>{f(!0);try{await r(c),t()}catch{}finally{f(!1)}},d=m=>{switch(m){case"online":return n.jsx(Be,{className:"h-4 w-4"});case"offline":return n.jsx(Zt,{className:"h-4 w-4"});case"mini-group":return n.jsx(El,{className:"h-4 w-4"});default:return n.jsx(Be,{className:"h-4 w-4"})}},v=m=>{switch(m){case"online":return"Онлайн";case"offline":return"Очно";case"mini-group":return"Мини-группа";default:return m}},j=m=>{switch(m){case"regular":return"Обычный урок";case"consultation":return"Консультация";case"exam_prep":return"Подготовка к экзамену";case"homework_help":return"Помощь с домашним заданием";default:return m}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Подтверждение бронирования"}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Преподаватель"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[a!=null&&a.avatar?n.jsx("img",{src:a.avatar,alt:a.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(be,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:(a==null?void 0:a.name)||"Преподаватель"}),n.jsx("p",{className:"text-sm text-gray-600",children:s==null?void 0:s.subject}),((o=a==null?void 0:a.profile)==null?void 0:o.rating)&&n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"text-yellow-500",children:"★"}),n.jsx("span",{className:"text-sm text-gray-600 ml-1",children:a.profile.rating})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Детали урока"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(bt,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm",children:["Дата: ",new Date(s==null?void 0:s.date).toLocaleDateString("ru-RU")]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(Or,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm",children:["Время: ",s==null?void 0:s.startTime," - ",s==null?void 0:s.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(Be,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm",children:["Предмет: ",s==null?void 0:s.subject]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[d(s==null?void 0:s.format),n.jsxs("span",{className:"text-sm",children:["Формат: ",v(s==null?void 0:s.format)]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(mk,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm",children:["Тип: ",j(s==null?void 0:s.lessonType)]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[n.jsx(sb,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-sm",children:["Стоимость: ",s==null?void 0:s.price," ₽"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Студент"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[l!=null&&l.avatar?n.jsx("img",{src:l.avatar,alt:l.name,className:"w-12 h-12 rounded-full object-cover"}):n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(be,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:l==null?void 0:l.name}),n.jsx("p",{className:"text-sm text-gray-600",children:"Студент"})]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Примечание к уроку"}),n.jsx("textarea",{value:c,onChange:m=>i(m.target.value),placeholder:"Опишите ваши цели, задачи или особые пожелания к уроку...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4}),n.jsx("p",{className:"text-sm text-gray-500",children:"Это поможет преподавателю лучше подготовиться к уроку"})]})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Отмена"}),n.jsx("button",{onClick:h,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:u?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),n.jsx("span",{children:"Бронирование..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Be,{className:"h-4 w-4"}),n.jsx("span",{children:"Забронировать урок"})]})})]})]})}):null},Zy=({teacher:e,onClose:t,onBookLesson:r,onMessage:s})=>{var a;const{user:l}=ht(),{timeSlots:o,bookLesson:c,posts:i,createPost:u,addReaction:f,addComment:h,sharePost:d,bookmarkPost:v,editPost:j,deletePost:m}=$t(),[y,g]=N.useState(!1),[p,b]=N.useState(!1),[x,C]=N.useState(!1),[O,D]=N.useState(!1),[_,P]=N.useState(!1),[z,L]=N.useState(null),[H,T]=N.useState("about"),[V,ee]=N.useState(null),[R,F]=N.useState({}),B=o.filter(ne=>ne.teacherId===e.id),G=B.filter(ne=>!ne.isBooked),ae=B.filter(ne=>ne.isBooked),q=e.profile,ie=i.filter(ne=>ne.userId===e.id),Se=ne=>{switch(ne){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ne}},he=ne=>{switch(ne){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},je=ne=>{switch(ne){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ne}},J=ne=>{L(ne),P(!0)},Y=async ne=>{l&&z&&(c(z.id,l.id,l.name,ne),P(!1),L(null))},ge=(ne,$e)=>new Date(`${ne}T${$e}`).toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative",children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(sm,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>b(!p),className:`p-2 rounded-full transition-colors ${p?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:n.jsx(pc,{className:`w-5 h-5 ${p?"fill-current":""}`})}),n.jsx("button",{onClick:()=>g(!y),className:`p-2 rounded-full transition-colors ${y?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:n.jsx(Qt,{className:`w-5 h-5 ${y?"fill-current":""}`})}),n.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Rn,{className:"w-5 h-5"})})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"relative mb-8",children:[n.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),n.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"text-white flex-1 mr-8",children:[n.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(q==null?void 0:q.name)||e.name||"Репетитор"}),n.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[(q==null?void 0:q.experience)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(an,{className:"h-4 w-4 text-yellow-300"}),n.jsx("span",{className:"font-semibold text-xs",children:Se(q.experience)})]}),(q==null?void 0:q.rating)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(Br,{className:"h-4 w-4 text-yellow-300 fill-current"}),n.jsx("span",{className:"font-semibold text-xs",children:q.rating})]}),(q==null?void 0:q.city)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(Zt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-semibold text-xs",children:q.city})]})]})]}),n.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:(q==null?void 0:q.lessonsCount)||0}),n.jsx("div",{className:"text-sm opacity-80",children:"уроков"})]})]})})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[n.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[n.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),q!=null&&q.avatar&&q.avatar.trim()!==""&&q.avatar!=="undefined"&&q.avatar!=="null"?n.jsx("img",{src:q.avatar,alt:(q==null?void 0:q.name)||e.name||"Репетитор",className:"w-36 h-36 object-cover rounded-full",onError:ne=>{const $e=ne.target;$e.style.display="none";const ze=$e.nextElementSibling;ze&&ze.classList.remove("hidden")},onLoad:ne=>{const $e=ne.target.nextElementSibling;$e&&$e.classList.add("hidden")}}):null,n.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${q!=null&&q.avatar&&q.avatar.trim()!==""&&q.avatar!=="undefined"&&q.avatar!=="null"?"hidden":""}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx(be,{className:"h-16 w-16 text-white mb-2"}),n.jsx("div",{className:"text-white text-sm font-semibold",children:((q==null?void 0:q.name)||e.name||"Репетитор").charAt(0).toUpperCase()})]})})]}),n.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[n.jsx("button",{onClick:()=>g(!y),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${y?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:n.jsx(Qt,{className:`w-5 h-5 ${y?"fill-current":""}`})}),n.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:n.jsx(Rn,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[n.jsxs("button",{onClick:()=>r(e.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[n.jsx(Be,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),s&&n.jsxs("button",{onClick:()=>s(e.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[n.jsx(tt,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),n.jsxs("button",{onClick:()=>D(!O),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[n.jsx(bt,{className:"h-6 w-6"}),n.jsxs("span",{className:"text-lg",children:["Слоты (",G.length,")"]})]}),n.jsxs("button",{onClick:()=>C(!x),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[n.jsx(Ln,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]})]})]}),x&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.phone&&n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[n.jsx(xr,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-gray-700 font-medium",children:e.phone})]}),e.email&&n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[n.jsx(lm,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-gray-700 font-medium",children:e.email})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:(q==null?void 0:q.lessonsCount)||0}),n.jsx("div",{className:"text-blue-100 text-xs",children:"Проведено уроков"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:((a=q==null?void 0:q.students)==null?void 0:a.length)||0}),n.jsx("div",{className:"text-blue-100 text-xs",children:"Учеников"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:(q==null?void 0:q.rating)||0}),n.jsx("div",{className:"text-blue-100 text-xs",children:"Рейтинг"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:G.length}),n.jsx("div",{className:"text-blue-100 text-xs",children:"Свободных слотов"})]})]}),ie.length>0&&n.jsxs("div",{className:"mb-8 mt-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[n.jsx(zn,{className:"w-5 h-5 mr-2 text-blue-600"}),"Записи ",(q==null?void 0:q.name)||e.name,n.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 py-0.5 px-2 rounded-full text-sm",children:ie.length})]})}),n.jsxs("div",{className:"space-y-4",children:[ie.slice(0,3).map(ne=>n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-semibold text-sm",children:((q==null?void 0:q.name)||e.name).charAt(0).toUpperCase()})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"font-semibold text-gray-900",children:(q==null?void 0:q.name)||e.name}),n.jsx("span",{className:"text-gray-500 text-sm",children:new Date(ne.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsx("div",{className:"text-gray-700 mb-3 whitespace-pre-line",children:ne.text.length>200?`${ne.text.substring(0,200)}...`:ne.text}),ne.tags&&ne.tags.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[ne.tags.slice(0,3).map(($e,ze)=>n.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs font-medium",children:["#",$e]},ze)),ne.tags.length>3&&n.jsxs("span",{className:"text-gray-500 text-xs",children:["+",ne.tags.length-3," еще"]})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Qt,{className:"w-4 h-4"}),n.jsx("span",{children:ne.likes||ne.reactions.length})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(tt,{className:"w-4 h-4"}),n.jsx("span",{children:ne.comments.length})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ln,{className:"w-4 h-4"}),n.jsx("span",{children:ne.views||0})]})]})]})]})},ne.id)),ie.length>3&&n.jsx("div",{className:"text-center",children:n.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:["Показать все записи (",ie.length,")"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:n.jsx("nav",{className:"flex space-x-8",children:[{id:"about",label:"О преподавателе",count:null},{id:"slots",label:"Расписание",count:G.length},{id:"reviews",label:"Отзывы",count:0}].map(ne=>n.jsxs("button",{onClick:()=>T(ne.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${H===ne.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[ne.label,ne.count!==null&&n.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:ne.count})]},ne.id))})}),n.jsxs("div",{className:"min-h-[400px]",children:[H==="about"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Основная информация"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(be,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Имя"}),n.jsx("div",{className:"font-semibold text-gray-900",children:(q==null?void 0:q.name)||e.name||"Репетитор"})]})]}),(q==null?void 0:q.experience)&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(an,{className:"w-5 h-5 text-yellow-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Опыт"}),n.jsx("div",{className:"font-semibold text-gray-900",children:Se(q.experience)})]})]}),(q==null?void 0:q.experienceYears)&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Jl,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Лет преподавания"}),n.jsx("div",{className:"font-semibold text-gray-900",children:q.experienceYears})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(as,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Тип преподавателя"}),n.jsx("div",{className:"font-semibold text-gray-900",children:he((q==null?void 0:q.teacherType)||"private")})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[(q==null?void 0:q.rating)&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Br,{className:"w-5 h-5 text-yellow-500 fill-current"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Рейтинг"}),n.jsxs("div",{className:"font-semibold text-gray-900",children:[q.rating,"/5"]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Be,{className:"w-5 h-5 text-purple-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Проведено уроков"}),n.jsx("div",{className:"font-semibold text-gray-900",children:(q==null?void 0:q.lessonsCount)||0})]})]}),(q==null?void 0:q.hourlyRate)&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-5 h-5 text-green-600 font-bold text-lg",children:"₽"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Стоимость урока"}),n.jsxs("div",{className:"font-semibold text-gray-900",children:[q.hourlyRate," ₽/час"]})]})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(q==null?void 0:q.subjects)&&q.subjects.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Предметы"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:q.subjects.map((ne,$e)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-green-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-green-200/50 shadow-sm",children:ne},$e))})]}),(q==null?void 0:q.grades)&&q.grades.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Классы"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:q.grades.map((ne,$e)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-purple-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-purple-200/50 shadow-sm",children:ne},$e))})]})]}),(q==null?void 0:q.education)&&n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-orange-500 to-red-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Образование"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q.education.university&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"🎓"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Университет"}),n.jsx("div",{className:"font-semibold text-gray-900",children:q.education.university})]})]}),q.education.degree&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📜"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Степень"}),n.jsx("div",{className:"font-semibold text-gray-900",children:q.education.degree})]})]}),q.education.graduationYear&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📅"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-gray-600",children:"Год выпуска"}),n.jsx("div",{className:"font-semibold text-gray-900",children:q.education.graduationYear})]})]})]})]}),(q==null?void 0:q.bio)&&n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"О преподавателе"]}),n.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-indigo-200/50",children:n.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line",children:q.bio})})]}),(q==null?void 0:q.formats)&&q.formats.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl p-6 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-bold text-teal-900 mb-4 flex items-center",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-teal-500 to-cyan-600 rounded flex items-center justify-center mr-3",children:n.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Форматы обучения"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:q.formats.map((ne,$e)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-teal-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-teal-200/50 shadow-sm",children:je(ne)},$e))})]})]}),H==="slots"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Доступные слоты"}),G.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(ne=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-shadow",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ne.subject}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Or,{className:"h-4 w-4"}),n.jsx("span",{children:ge(ne.date,ne.startTime)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zt,{className:"h-4 w-4"}),n.jsx("span",{children:je(ne.format)})]})]}),n.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-3",children:[ne.price," ₽"]})]})}),n.jsxs("button",{onClick:()=>J(ne),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[n.jsx(Be,{className:"h-4 w-4"}),n.jsx("span",{children:"Забронировать"})]})]},ne.id))}):n.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8 text-center",children:[n.jsx(bt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"Нет доступных слотов"}),n.jsx("p",{className:"text-gray-500",children:"Попробуйте позже или свяжитесь с преподавателем"})]})]}),ae.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Забронированные уроки"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ae.map(ne=>n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ne.subject}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Or,{className:"h-4 w-4"}),n.jsx("span",{children:ge(ne.date,ne.startTime)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zt,{className:"h-4 w-4"}),n.jsx("span",{children:je(ne.format)})]})]}),n.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-3",children:[ne.price," ₽"]})]})}),n.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-xl text-sm font-medium text-center",children:"Забронировано"})]},ne.id))})]})]}),H==="reviews"&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Br,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),n.jsx("p",{className:"text-gray-500",children:"Будьте первым, кто оставит отзыв о преподавателе"})]})]})]})]}),_&&z&&n.jsx(th,{isOpen:_,slot:z,onClose:()=>P(!1),onConfirm:Y,teacher:e,student:l})]})},s9=({teacher:e,onClose:t,onBookLesson:r,onMessage:s})=>{var a,l,o,c;const{timeSlots:i,posts:u,lessons:f,refreshUsers:h,forceSyncData:d}=$t(),[v,j]=N.useState(!1),[m,y]=N.useState(!1),[g,p]=N.useState(!1),b=async()=>{var T,V;p(!0);try{const ee=await fetch(`${Fe}/api/users/${e.id}`);if(ee.ok){const R=await ee.json();console.log("Fresh teacher data from refresh button:",R);const F=JSON.parse(localStorage.getItem("allUsers")||"[]").map(G=>G.id===R.id?R:G);localStorage.setItem("allUsers",JSON.stringify(F)),h(),await d();const B={...e,name:R.name||e.name,email:R.email||e.email,avatar:((T=R.profile)==null?void 0:T.avatar)||R.avatar||e.avatar,profile:{...e.profile,...R.profile,avatar:((V=R.profile)==null?void 0:V.avatar)||R.avatar||e.avatar,name:R.name||e.name,email:R.email||e.email}};console.log("Updated teacher data in modal:",B)}else console.warn("Failed to refresh teacher data:",ee.status)}catch(ee){console.error("Error refreshing teacher data:",ee)}finally{p(!1)}},x=e.profile;console.log("Teacher in modal:",e),console.log("Profile in modal:",x),N.useEffect(()=>{(async()=>{var T,V;try{const ee=await fetch(`${Fe}/api/users/${e.id}`);if(ee.ok){const R=await ee.json();console.log("Fresh teacher data in modal:",R);const F=JSON.parse(localStorage.getItem("allUsers")||"[]").map(G=>G.id===R.id?R:G);localStorage.setItem("allUsers",JSON.stringify(F)),h(),await d();const B={...e,name:R.name||e.name,email:R.email||e.email,avatar:((T=R.profile)==null?void 0:T.avatar)||R.avatar||e.avatar,profile:{...e.profile,...R.profile,avatar:((V=R.profile)==null?void 0:V.avatar)||R.avatar||e.avatar,name:R.name||e.name,email:R.email||e.email}};console.log("Updated teacher data in modal useEffect:",B)}else console.warn("Failed to refresh teacher data in modal:",ee.status)}catch(ee){console.error("Error refreshing teacher data in modal:",ee)}})()},[e.id]);const C=i.filter(T=>T.teacherId===e.id).filter(T=>!T.isBooked),O=u.filter(T=>T.userId===e.id),D=f.filter(T=>T.teacherId===e.id).filter(T=>T.status==="completed"),_=T=>{switch(T){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return T}},P=T=>{switch(T){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},z=T=>{switch(T){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return T}},L=T=>{const V=new Date(T),ee=Math.floor((new Date().getTime()-V.getTime())/(1e3*60*60));return ee<1?"только что":ee<24?`${ee}ч назад`:ee<48?"вчера":V.toLocaleDateString("ru-RU")},H=T=>new Date(T).toLocaleDateString("ru-RU",{weekday:"short",month:"short",day:"numeric"});return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>y(!m),className:`p-2 rounded-full transition-colors ${m?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:n.jsx(pc,{className:`w-5 h-5 ${m?"fill-current":""}`})}),n.jsx("button",{onClick:()=>j(!v),className:`p-2 rounded-full transition-colors ${v?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:n.jsx(Qt,{className:`w-5 h-5 ${v?"fill-current":""}`})}),n.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Rn,{className:"w-5 h-5"})})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[n.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full shadow-sm"}),(()=>{const T=(x==null?void 0:x.avatar)||e.avatar;return T&&T.trim()!==""&&T!=="undefined"&&T!=="null"?n.jsx("img",{src:T,alt:e.name,className:"w-24 h-24 object-cover rounded-full",onError:V=>{const ee=V.target;ee.style.display="none";const R=ee.nextElementSibling;R&&R.classList.remove("hidden")},onLoad:V=>{const ee=V.target.nextElementSibling;ee&&ee.classList.add("hidden")}}):null})(),n.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const T=(x==null?void 0:x.avatar)||e.avatar;return T&&T.trim()!==""&&T!=="undefined"&&T!=="null"?"hidden":""})()}`,children:n.jsx(be,{className:"h-12 w-12 text-white"})})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{children:n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:b,disabled:g,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Обновить данные",children:n.jsx(Ri,{className:`w-5 h-5 ${g?"animate-spin":""}`})}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Rn,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(x==null?void 0:x.rating)&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Br,{className:"w-4 h-4 text-yellow-400 fill-current"}),n.jsx("span",{children:x.rating})]}),(x==null?void 0:x.lessonsCount)&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Be,{className:"w-4 h-4"}),n.jsxs("span",{children:[x.lessonsCount," уроков"]})]}),(x==null?void 0:x.experienceYears)&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(an,{className:"w-4 h-4"}),n.jsxs("span",{children:[x.experienceYears," лет опыта"]})]})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"Статистика"}),n.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:D.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Проведено уроков"})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-green-600 mb-1",children:C.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Свободных слотов"})]}),n.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-purple-600 mb-1",children:O.length}),n.jsx("div",{className:"text-xs text-gray-600",children:"Записей"})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:(x==null?void 0:x.reviewsCount)||0}),n.jsx("div",{className:"text-xs text-gray-600",children:"Отзывов"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[n.jsxs("button",{onClick:()=>r(e.id),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(Be,{className:"w-5 h-5"}),n.jsx("span",{children:"Записаться на урок"})]}),n.jsxs("button",{onClick:()=>s(e.id),className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(tt,{className:"w-5 h-5"}),n.jsx("span",{children:"Написать сообщение"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[n.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[n.jsx(be,{className:"w-4 h-4 mr-2"}),"О преподавателе"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(Be,{className:"w-3 h-3 mr-1"}),"Предметы:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((a=x==null?void 0:x.subjects)==null?void 0:a.length)>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:x.subjects.map((T,V)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:T},V))}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(as,{className:"w-3 h-3 mr-1"}),"Классы:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((l=x==null?void 0:x.grades)==null?void 0:l.length)>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:x.grades.map((T,V)=>n.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:T},V))}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(cm,{className:"w-3 h-3 mr-1"}),"Цели обучения:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((o=x==null?void 0:x.goals)==null?void 0:o.length)>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:x.goals.map((T,V)=>n.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full text-xs font-medium",children:T},V))}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(an,{className:"w-3 h-3 mr-1"}),"Опыт:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:x!=null&&x.experience?n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full text-xs font-medium",children:_(x.experience)}),x.experienceYears&&n.jsxs("span",{className:"text-gray-600 text-xs",children:["(",x.experienceYears," лет)"]})]}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(as,{className:"w-3 h-3 mr-1"}),"Тип преподавателя:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:n.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-medium",children:P((x==null?void 0:x.teacherType)||"private")})})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(Zt,{className:"w-3 h-3 mr-1"}),"Город:"]}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:x!=null&&x.city?n.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:x.city}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[n.jsx(ik,{className:"w-3 h-3 mr-1"}),"Форматы обучения:"]}),n.jsx("div",{className:"text-base text-gray-900 mt-2",children:((c=x==null?void 0:x.formats)==null?void 0:c.length)>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:x.formats.map((T,V)=>n.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:z(T)},V))}):n.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]})]})]}),(x==null?void 0:x.education)&&n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[n.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[n.jsx(as,{className:"w-4 h-4 mr-2"}),"Образование"]}),n.jsxs("div",{className:"space-y-2",children:[x.education.university&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Университет:"}),n.jsx("div",{className:"text-sm text-gray-900",children:x.education.university})]}),x.education.degree&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Специальность:"}),n.jsx("div",{className:"text-sm text-gray-900",children:x.education.degree})]}),x.education.graduationYear&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Год выпуска:"}),n.jsx("div",{className:"text-sm text-gray-900",children:x.education.graduationYear})]}),x.education.courses&&x.education.courses.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Курсы:"}),n.jsx("div",{className:"space-y-1 mt-1",children:x.education.courses.map((T,V)=>n.jsxs("div",{className:"text-xs text-gray-700",children:["• ",T.name," (",T.institution,", ",T.year,")"]},V))})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[n.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[n.jsx(sb,{className:"w-4 h-4 mr-2"}),"Стоимость и услуги"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Базовая стоимость:"}),n.jsx("div",{className:"text-xl font-bold text-blue-600 mt-1",children:x!=null&&x.hourlyRate?`${x.hourlyRate} ₽/час`:"Не указана"})]}),(x==null?void 0:x.durations)&&x.durations.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Длительности занятий:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:x.durations.map((T,V)=>n.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:[T," мин"]},V))})]}),(x==null?void 0:x.lessonTypes)&&x.lessonTypes.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Типы уроков:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:x.lessonTypes.map((T,V)=>n.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:T},V))})]})]}),n.jsxs("div",{className:"space-y-3",children:[(x==null?void 0:x.rating)&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Рейтинг:"}),n.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[n.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(T=>n.jsx(Br,{className:`w-4 h-4 ${T<=(x.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},T))}),n.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[x.rating,"/5"]})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Автоподбор:"}),n.jsx("div",{className:"text-sm text-gray-900 mt-1",children:x!=null&&x.overbookingEnabled?n.jsx("span",{className:"text-green-600 font-medium",children:"✓ Доступен"}):n.jsx("span",{className:"text-gray-500",children:"Недоступен"})})]})]})]}),n.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:n.jsx("p",{className:"text-xs text-blue-700",children:"💡 Стоимость может варьироваться в зависимости от формата, длительности занятия и сложности материала"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[n.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[n.jsx(bt,{className:"w-4 h-4 mr-2"}),"Доступные слоты (",C.length,")"]}),C.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Сводка по ценам:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Минимальная цена:"}),n.jsxs("div",{className:"font-semibold text-green-600",children:[Math.min(...C.map(T=>T.price))," ₽"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Максимальная цена:"}),n.jsxs("div",{className:"font-semibold text-green-600",children:[Math.max(...C.map(T=>T.price))," ₽"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Средняя цена:"}),n.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(C.reduce((T,V)=>T+V.price,0)/C.length)," ₽"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Всего слотов:"}),n.jsx("div",{className:"font-semibold text-blue-600",children:C.length})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.slice(0,6).map(T=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Be,{className:"w-3 h-3 text-blue-600"}),n.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:T.subject})]}),n.jsxs("span",{className:"text-base font-bold text-green-600",children:[T.price," ₽"]})]}),n.jsxs("div",{className:"space-y-1 mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[n.jsx(Or,{className:"w-3 h-3"}),n.jsxs("span",{children:[H(T.date)," • ",T.startTime,"-",T.endTime]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[n.jsx(Zt,{className:"w-3 h-3"}),n.jsxs("span",{children:[z(T.format)," • ",T.duration," мин"]})]}),T.experience&&n.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[n.jsx(an,{className:"w-3 h-3"}),n.jsxs("span",{children:["Опыт: ",_(T.experience)]})]})]}),n.jsxs("button",{onClick:()=>r(e.id),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 text-sm font-semibold",children:["Записаться за ",T.price," ₽"]})]},T.id))}),C.length>6&&n.jsx("div",{className:"text-center pt-4",children:n.jsxs("p",{className:"text-gray-600 text-sm",children:["И еще ",C.length-6," доступных слотов"]})})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(bt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 mb-2",children:"Нет доступных слотов"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Следите за обновлениями расписания"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center",children:[n.jsx(zn,{className:"w-4 h-4 mr-2"}),"Записи преподавателя (",O.length,")"]})}),O.length>0?n.jsxs("div",{className:"space-y-3",children:[O.slice(0,3).map(T=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center flex-shrink-0",children:n.jsx(be,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:T.userName}),n.jsx("span",{className:"text-xs text-gray-500",children:L(T.date)})]}),n.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed text-sm",children:T.text}),T.tags&&T.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:T.tags.map((V,ee)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:V},ee))}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[n.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[n.jsx(cb,{className:"w-3 h-3"}),n.jsx("span",{children:T.reactions.length})]}),n.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[n.jsx(tt,{className:"w-3 h-3"}),n.jsx("span",{children:T.comments.length})]}),n.jsx("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:n.jsx(Rn,{className:"w-3 h-3"})})]})]})]})},T.id)),O.length>3&&n.jsx("div",{className:"text-center pt-3",children:n.jsxs("p",{className:"text-gray-600 text-xs",children:["И еще ",O.length-3," записей"]})})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(zn,{className:"w-6 h-6 text-gray-400"})}),n.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:"У преподавателя пока нет записей"}),n.jsx("p",{className:"text-xs text-gray-400",children:"Записи появятся здесь, когда преподаватель начнет публиковать контент"})]})]})]})]})})},a9={ru:dr},l9=Xm({format:dt,startOfWeek:Gr,getDay:Zm,locales:a9}),e1=({onClose:e})=>{const{timeSlots:t,bookLesson:r}=$t(),{user:s}=ht(),[a,l]=N.useState(null),[o,c]=N.useState(!1),[i,u]=N.useState(!1),[f,h]=N.useState(null),d=t.filter(b=>!b.isBooked).map(b=>({id:b.id,title:`${b.teacherName} - ${b.subject}`,start:new Date(`${b.date}T${b.startTime}`),end:new Date(`${b.date}T${b.endTime}`),slot:b,teacherName:b.teacherName,subject:b.subject,price:b.price,format:b.format,experience:b.experience,rating:b.rating,city:b.city,teacherAvatar:b.teacherAvatar})),v=N.useCallback(b=>{let x={backgroundColor:"#3B82F6",borderRadius:"6px",opacity:.95,color:"white",border:"0px",display:"block",padding:"3px 6px",fontSize:"11px",fontWeight:"500",margin:"1px 0",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s ease"};return b.format==="offline"?x.backgroundColor="#10B981":b.format==="mini-group"&&(x.backgroundColor="#8B5CF6"),{style:x}},[]),j=N.useCallback(b=>{l(b),c(!0)},[]),m=b=>{if(!s){alert("Пожалуйста, войдите в систему для бронирования");return}h(b),u(!0),c(!1)},y=async b=>{if(s&&f)try{await r(f.id,s.id,s.name,b),u(!1),h(null),window.location.reload()}catch{alert("Произошла ошибка при бронировании. Попробуйте еще раз.")}},g=b=>{switch(b){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return b}},p=b=>{switch(b){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return b}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden relative",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 p-6 rounded-t-2xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Календарь свободных слотов"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Выберите удобное время для занятия с преподавателем"})]}),n.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-6 h-6 text-gray-600"})})]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:n.jsx(Jm,{localizer:l9,events:d,startAccessor:"start",endAccessor:"end",style:{height:600},eventPropGetter:v,onSelectEvent:j,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет свободных слотов в выбранном диапазоне",showMore:b=>`+${b} еще`}})})}),o&&a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",onClick:b=>{b.target===b.currentTarget&&c(!1)},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Детали слота"}),n.jsx("button",{onClick:()=>c(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-5 h-5 text-gray-600"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden",children:a.teacherAvatar?n.jsx("img",{src:a.teacherAvatar,alt:a.teacherName,className:"w-12 h-12 object-cover rounded-full"}):n.jsx(be,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:a.teacherName}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.rating&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Br,{className:"h-3 w-3 text-yellow-400 fill-current"}),n.jsx("span",{children:a.rating})]}),a.experience&&n.jsx("span",{className:"text-blue-600",children:g(a.experience)})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Be,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"font-medium",children:a.subject})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Or,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"text-gray-700",children:[dt(a.start,"dd MMMM yyyy, HH:mm",{locale:dr})," - ",dt(a.end,"HH:mm",{locale:dr})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Zt,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-700",children:p(a.format)})]}),n.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[a.price," ₽"]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4",children:[n.jsxs("button",{onClick:()=>m(a.slot),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[n.jsx(Be,{className:"h-4 w-4"}),n.jsx("span",{children:"Забронировать"})]}),n.jsx("button",{onClick:()=>c(!1),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})]})}),i&&f&&n.jsx(th,{slot:f,onClose:()=>u(!1),onConfirm:y})]})})},o9=({title:e,description:t,actionPrimary:r,actionSecondary:s,icon:a})=>n.jsx("div",{className:"col-span-full text-center py-14 card-gradient",children:n.jsxs("div",{className:"flex flex-col items-center",children:[a&&n.jsx("div",{className:"mb-3 text-blue-500",children:a}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),t&&n.jsx("p",{className:"text-gray-500 max-w-xl mx-auto mb-5",children:t}),n.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[r&&n.jsx("button",{type:"button",onClick:r.onClick,className:`btn-primary px-5 py-2 rounded-lg ${r.variant==="secondary"?"btn-secondary":""}`,"aria-label":r.label,children:r.label}),s&&n.jsx("button",{type:"button",onClick:s.onClick,className:`btn-secondary px-5 py-2 rounded-lg ${s.variant==="primary"?"btn-primary":""}`,"aria-label":s.label,children:s.label})]})]})}),Tu=({setActiveTab:e})=>{var t;const{bookLesson:r,timeSlots:s,allUsers:a,refreshUsers:l,refreshAllData:o,forceSyncData:c,sendMessageToUser:i,teacherProfiles:u,loadRegisteredTeachers:f,setAllUsers:h,socketRef:d,isConnected:v}=$t(),j=()=>{console.log("🔄 Принудительное обновление данных..."),o()};A.useEffect(()=>{console.log("🔄 StudentHome: Автоматическая загрузка зарегистрированных преподавателей и слотов...");const M=async()=>{try{await f(),await c(),console.log("✅ Данные загружены успешно")}catch(Z){console.error("❌ Ошибка загрузки данных:",Z),setTimeout(async()=>{try{await f(),await c(),console.log("✅ Данные загружены при повторной попытке")}catch(oe){console.error("❌ Ошибка при повторной попытке:",oe)}},2e3)}};M();const K=setInterval(()=>{document.visibilityState==="visible"&&(console.log("⏰ StudentHome: Периодическая загрузка зарегистрированных преподавателей и слотов..."),M())},15e3);return()=>clearInterval(K)},[f,c]);const{user:m}=ht(),[y,g]=N.useState({}),[p,b]=N.useState(!1),[x,C]=N.useState(!1),[O,D]=N.useState(!1),[_,P]=N.useState({grade:"",subject:"",goals:[],experience:"",duration:60,format:"online",city:"",date:"",startTime:"",comment:""}),[z,L]=N.useState(!1),[H,T]=N.useState(null),[V,ee]=N.useState(!1),[R,F]=N.useState(!1),[B,G]=N.useState(null),[ae,q]=N.useState(()=>{const M=new Date,K=M.getDay(),Z=M.getDate()-K+(K===0?-6:1);return new Date(M.setDate(Z))}),[ie,Se]=N.useState(null),[he,je]=N.useState(null),[J,Y]=N.useState(""),[ge,ne]=N.useState(""),$e=["Математика","Русский язык","Английский язык"],ze=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],pt=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],ct=["beginner","experienced","professional"],X=["online","offline","mini-group"],Ne=[45,60],ye=Xm({format:dt,startOfWeek:Gr,getDay:Zm,locales:{ru:dr}}),[Ge,We]=N.useState([]),rt=async()=>{try{console.log("🔄 Загружаем всех преподавателей..."),console.log("🌐 SERVER_URL:",Fe),console.log("🔄 Синхронизируем данные с сервера..."),await c(),console.log("📡 Запрашиваем пользователей с сервера...");const M=await fetch(`${Fe}/api/users`);if(console.log("📡 Ответ сервера:",M.status,M.statusText),M.ok){const Z=M.headers.get("content-type");if(console.log("📡 Content-Type:",Z),Z&&Z.includes("application/json")){const oe=await M.json();console.log("✅ Все пользователи загружены с сервера:",oe.length,oe);const xe=oe.filter(fe=>fe.role==="teacher");if(console.log("✅ Преподаватели найдены:",xe.length,xe),We(xe),Array.isArray(oe)){const fe=a||[],ve=[...fe];oe.forEach(ce=>{ve.find(Ze=>Ze.id===ce.id)?console.log("⏭️ Пользователь уже существует:",ce.name):(ve.push(ce),console.log("➕ Добавлен новый пользователь с сервера:",ce.name))}),ve.length!==fe.length&&(h(ve),console.log("✅ Обновлены пользователи, добавлено новых:",ve.length-fe.length))}}else console.warn("⚠️ Сервер вернул не-JSON ответ для пользователей"),We([])}else console.warn("⚠️ Не удалось загрузить пользователей с сервера:",M.status),We([]);console.log("📡 Запрашиваем преподавателей через /api/teachers...");const K=await fetch(`${Fe}/api/teachers`);if(console.log("📡 Ответ /api/teachers:",K.status,K.statusText),K.ok){const Z=K.headers.get("content-type");if(console.log("📡 Content-Type /api/teachers:",Z),Z&&Z.includes("application/json")){const oe=await K.json();console.log("✅ Преподаватели загружены через /api/teachers:",oe.length,oe),We(xe=>{const fe=[...xe,...oe].filter((ve,ce,Ze)=>ce===Ze.findIndex(ar=>ar.id===ve.id));return console.log("✅ Объединенные преподаватели:",fe.length,fe),fe});try{const xe=Array.isArray(a)?a:[],fe=[...xe];oe.forEach(ce=>{fe.find(Ze=>Ze.id===ce.id)||(fe.push(ce),console.log("➕ Добавлен новый преподаватель через /api/teachers:",ce.name))});const ve=fe.filter((ce,Ze,ar)=>Ze===ar.findIndex(Dr=>Dr.id===ce.id));ve.length!==xe.length&&(h(ve),console.log("✅ Обновлены пользователи через /api/teachers, добавлено новых:",ve.length-xe.length))}catch{}}else console.warn("⚠️ Сервер вернул не-JSON ответ для преподавателей")}else console.warn("⚠️ Не удалось загрузить преподавателей через /api/teachers:",K.status)}catch(M){console.error("❌ Ошибка загрузки преподавателей с сервера:",M),We([])}};N.useEffect(()=>{console.log("🚀 Компонент StudentHome смонтирован, загружаем преподавателей..."),rt();const M=JSON.parse(localStorage.getItem("tutoring_teacherProfiles")||"{}");console.log("📱 Локальные профили преподавателей при монтировании:",Object.keys(M).length);const K=setInterval(()=>{document.visibilityState==="visible"&&(console.log("🔄 Периодическое обновление списка преподавателей (каждые 30 сек)..."),rt())},3e4);return()=>clearInterval(K)},[c,l]),N.useEffect(()=>{const M=setTimeout(()=>{ne(J)},300);return()=>clearTimeout(M)},[J]),N.useEffect(()=>{const M=Z=>{Z.key==="tutoring_users"&&Z.newValue&&(console.log("🔄 Обнаружены изменения в пользователях, обновляем список преподавателей"),rt())},K=Z=>{var oe;((oe=Z.detail)==null?void 0:oe.key)==="tutoring_users"&&(console.log("🔄 Обнаружены кастомные изменения в пользователях, обновляем список преподавателей"),rt())};return window.addEventListener("storage",M),window.addEventListener("customStorage",K),()=>{window.removeEventListener("storage",M),window.removeEventListener("customStorage",K)}},[]),N.useEffect(()=>{console.log("📱 teacherProfiles изменились:",Object.keys(u).length),Object.keys(u).length>0&&(console.log("✅ Найдены локальные профили преподавателей:",Object.keys(u)),f().catch(console.error),c().catch(console.error))},[u,f,c]);const Te=()=>s.filter(M=>{if(M.isBooked)return!1;const K=new Date(M.date),Z=new Date;return Z.setHours(0,0,0,0),!(K<Z)}),gt=(M=!1)=>{C(!0);try{let K=s.filter(Z=>{if(Z.isBooked)return!1;const oe=new Date(Z.date),xe=new Date;return xe.setHours(0,0,0,0),!(oe<xe)});if(y.grade&&y.grade!==""&&(K=K.filter(Z=>Z.grades&&Z.grades.includes(y.grade))),y.subject&&y.subject!==""&&(K=K.filter(Z=>Z.subject===y.subject)),y.experience&&y.experience!==""&&(K=K.filter(Z=>Z.experience===y.experience)),y.format&&y.format!==""&&(K=K.filter(Z=>Z.format===y.format)),y.duration&&y.duration>0&&(K=K.filter(Z=>Z.duration===y.duration)),y.minRating&&y.minRating>0&&(K=K.filter(Z=>(Z.rating||0)>=y.minRating)),y.goals&&y.goals.length>0&&(K=K.filter(Z=>Z.goals&&y.goals.some(oe=>Z.goals.includes(oe)))),ie){const Z=dt(ie,"yyyy-MM-dd");K=K.filter(oe=>oe.date===Z)}he&&(K=K.filter(Z=>{const oe=parseInt(Z.startTime.split(":")[0]),xe=parseInt(he.start.split(":")[0]),fe=parseInt(he.end.split(":")[0]);return oe>=xe&&oe<fe})),M&&b(!1)}catch(K){console.error("Error applying filters:",K)}finally{C(!1)}},jr=()=>{g({}),Se(null),je(null),Y(""),Te(),b(!1)},k=async M=>{m&&H&&(r(H.id,m.id,m.name,M),setTimeout(()=>{Object.keys(y).length===0&&!ie&&!he?Te():gt(!1)},100))},$=()=>{if(D(!1),d!=null&&d.current){const M={studentId:m==null?void 0:m.id,studentName:m==null?void 0:m.name,..._};d.current.emit("overbookingRequest",M)}alert("Заявка на овербукинг отправлена! Мы подберем лучшего преподавателя за 5 часов до занятия.")},w=M=>{switch(M){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return M}},E=A.useMemo(()=>{console.log("🔄 Собираем всех преподавателей..."),console.log("📊 Исходные данные:"),console.log("- serverTeachers:",Ge.length,Ge),console.log("- allUsers:",(a==null?void 0:a.length)||0,a),console.log("- teacherProfiles:",Object.keys(u).length,u),console.log("- timeSlots:",s.length);const M=(a==null?void 0:a.filter(ce=>ce.role==="teacher").map(ce=>{var Ze,ar,Dr;return{id:ce.id,name:ce.name||((Ze=ce.profile)==null?void 0:Ze.name)||"Репетитор",avatar:ce.avatar||((ar=ce.profile)==null?void 0:ar.avatar)||"",rating:((Dr=ce.profile)==null?void 0:Dr.rating)||0,profile:ce.profile||{},isRegistered:!0,source:"registered"}}))||[];console.log("👥 ЗАРЕГИСТРИРОВАННЫЕ преподаватели (ПРИОРИТЕТ):",M.length,M);const K=Object.entries(u).map(([ce,Ze])=>({id:ce,name:Ze.name||"Репетитор",avatar:Ze.avatar||"",rating:Ze.rating||0,profile:Ze,isRegistered:!1,source:"profiles"}));console.log("📱 Преподаватели из teacherProfiles:",K.length,K);const Z=Ge.map(ce=>{var Ze,ar,Dr;return{id:ce.id,name:ce.name||((Ze=ce.profile)==null?void 0:Ze.name)||"Репетитор",avatar:ce.avatar||((ar=ce.profile)==null?void 0:ar.avatar)||"",rating:((Dr=ce.profile)==null?void 0:Dr.rating)||0,profile:ce.profile||{},isRegistered:!1,source:"server"}});console.log("📡 Преподаватели с сервера:",Z.length,Z);const oe=s.filter(ce=>ce.teacherId&&ce.teacherName).map(ce=>({id:ce.teacherId,name:ce.teacherName,avatar:ce.teacherAvatar||"",rating:ce.rating||0,profile:{subjects:ce.subject?[ce.subject]:[],experience:ce.experience||"beginner",grades:ce.grades||[],goals:ce.goals||[],city:"",bio:"",rating:ce.rating||0,hourlyRate:ce.price||0},isRegistered:!1,source:"slots"}));console.log("📅 Преподаватели из слотов:",oe.length,oe);const xe=[...M,...K,...Z,...oe];console.log("🔄 Всего источников:",xe.length);const fe=new Map;M.forEach(ce=>{fe.set(ce.id,ce),console.log("✅ ГАРАНТИРОВАННО добавлен зарегистрированный преподаватель:",ce.id,ce.name)}),[...K,...Z,...oe].forEach(ce=>{fe.has(ce.id)?console.log("⏭️ Пропущен дубликат преподавателя:",ce.id,ce.name,ce.source):(fe.set(ce.id,ce),console.log("➕ Добавлен дополнительный преподаватель:",ce.id,ce.name,ce.source))});const ve=Array.from(fe.values());return console.log("✅ Итоговый список всех преподавателей:",ve.length,ve),ve},[Ge,a,s,u]);A.useEffect(()=>{if(console.log("🔄 allUsers изменились:",(a==null?void 0:a.length)||0),a&&a.length>0){const M=a.filter(K=>K.role==="teacher");console.log("👨‍🏫 Обнаружены репетиторы в allUsers:",M.length),f().catch(console.error),c().catch(console.error)}},[a,f,c]);const S=A.useMemo(()=>{const M=Object.keys(y).length>0||ie||he||ge,K=s.filter(xe=>!xe.isBooked),Z=new Set(K.map(xe=>xe.teacherId));console.log("🔍 Фильтрация преподавателей:"),console.log("- hasActiveFilters:",M),console.log("- filters:",y),console.log("- selectedDate:",ie),console.log("- selectedTimeRange:",he),console.log("- debouncedSearchQuery:",ge),console.log("- availableSlots:",K.length),console.log("- teacherIdsWithSlots:",Array.from(Z)),console.log("- allTeachers:",E.length);let oe=E;if(console.log("- Показываем ВСЕХ преподавателей (независимо от онлайн статуса):",oe.length),d!=null&&d.current&&v&&(console.log("🔄 Запрашиваем все слоты с сервера для синхронизации..."),d.current.emit("requestAllSlots")),M&&(oe=oe.filter(xe=>{const fe=xe.profile;return!(y.subject&&y.subject!==""&&(!(fe!=null&&fe.subjects)||!fe.subjects.includes(y.subject))||y.experience&&y.experience!==""&&(fe==null?void 0:fe.experience)!==y.experience||y.format&&y.format!==""&&(!(fe!=null&&fe.formats)||!fe.formats.includes(y.format))||y.city&&y.city!==""&&(!(fe!=null&&fe.city)||!fe.city.toLowerCase().includes(y.city.toLowerCase()))||y.minRating&&y.minRating>0&&((fe==null?void 0:fe.rating)||0)<y.minRating||y.duration&&y.duration>0&&(!(fe!=null&&fe.durations)||!fe.durations.includes(y.duration))||y.grade&&y.grade!==""&&(!(fe!=null&&fe.grades)||!fe.grades.includes(y.grade))||y.goals&&y.goals.length>0&&(!(fe!=null&&fe.goals)||!y.goals.some(ve=>fe.goals.includes(ve))))})),ge.trim()){const xe=ge.toLowerCase().trim();oe=oe.filter(fe=>{const ve=fe.profile;return!!(fe.name.toLowerCase().includes(xe)||ve!=null&&ve.subjects&&ve.subjects.some(ce=>ce.toLowerCase().includes(xe))||ve!=null&&ve.city&&ve.city.toLowerCase().includes(xe))})}return console.log("✅ StudentHome - Итоговый результат:",oe.length,"преподавателей"),oe},[E,y,ie,he,ge,s]);function I(M){try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]").find(K=>K.id===M&&K.role==="teacher")||null}catch{return null}}const[W,te]=N.useState(null),[Ce,pe]=N.useState(!1),[U,Q]=N.useState(!1);A.useEffect(()=>{Object.keys(y).length>0||ie||he?gt():Te(),s.length>0&&(console.log("🔄 timeSlots изменились, синхронизируем с сервером..."),c().catch(console.error))},[y,ie,he,s,c]),A.useEffect(()=>{Te(),c().catch(console.error)},[a,c]),A.useEffect(()=>{s.length>0&&(console.log("🔄 timeSlots изменились, принудительно синхронизируем с сервером..."),c().catch(console.error),d!=null&&d.current&&v&&(console.log("🔄 Запрашиваем все слоты с сервера..."),d.current.emit("requestAllSlots")),console.log("🔄 Обновляем преподавателей при изменении слотов..."),l(),f().catch(console.error))},[s,c,d,v,l,f]),A.useEffect(()=>{const M=Z=>{Z.key==="tutoring_users"&&(l(),We([]),fetch(`${Fe}/api/teachers`).then(oe=>oe.json()).then(oe=>We(Array.isArray(oe)?oe:[])).catch(()=>We([])),Te())},K=Z=>{var oe;((oe=Z.detail)==null?void 0:oe.key)==="tutoring_users"&&(l(),We([]),fetch(`${Fe}/api/teachers`).then(xe=>xe.json()).then(xe=>We(Array.isArray(xe)?xe:[])).catch(()=>We([])),Te())};return window.addEventListener("storage",M),window.addEventListener("customStorage",K),()=>{window.removeEventListener("storage",M),window.removeEventListener("customStorage",K)}},[]),A.useEffect(()=>{Te(),d!=null&&d.current&&v&&(console.log("🔄 StudentHome: Запрашиваем все слоты с сервера при монтировании..."),d.current.emit("requestAllSlots"))},[s,d,v]);const me=async M=>{var K,Z,oe,xe,fe,ve,ce,Ze,ar,Dr;console.log("Teacher clicked:",M);try{const io=await fetch(`${Fe}/api/users/${M.id}`);if(io.ok){const Lt=await io.json();if(console.log("Fresh teacher data from server:",Lt),Lt){const n1=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(sh=>sh.id===Lt.id?Lt:sh);localStorage.setItem("tutoring_users",JSON.stringify(n1));const nh={id:Lt.id,name:Lt.name,email:Lt.email,avatar:((K=Lt.profile)==null?void 0:K.avatar)||Lt.avatar,role:"teacher",profile:{...Lt.profile,avatar:((Z=Lt.profile)==null?void 0:Z.avatar)||Lt.avatar,name:Lt.name,email:Lt.email}};console.log("Updated teacher data for modal:",nh),te(nh),pe(!0);return}}}catch(io){console.error("Error fetching fresh teacher data:",io)}let Gt=I(M.id);Gt?Gt={...Gt,name:M.name||Gt.name,email:((ce=M.profile)==null?void 0:ce.email)||M.email||Gt.email,avatar:((Ze=M.profile)==null?void 0:Ze.avatar)||M.avatar||Gt.avatar,profile:{...Gt.profile,...M.profile,avatar:((ar=M.profile)==null?void 0:ar.avatar)||M.avatar||Gt.avatar,name:M.name||Gt.name,email:((Dr=M.profile)==null?void 0:Dr.email)||M.email||Gt.email}}:Gt={id:M.id,name:M.name,email:((oe=M.profile)==null?void 0:oe.email)||M.email||"",avatar:((xe=M.profile)==null?void 0:xe.avatar)||M.avatar,role:"teacher",profile:{...M.profile,avatar:((fe=M.profile)==null?void 0:fe.avatar)||M.avatar,name:M.name,email:((ve=M.profile)==null?void 0:ve.email)||M.email}},console.log("Fallback teacher data for modal:",Gt),te(Gt),pe(!0)},Qe=M=>{const K=a.find(Z=>Z.id===M);K&&(G(K),F(!0)),Q(!1)},Tt=M=>{console.log("🔍 StudentHome handleMessage DEBUG:"),console.log("- Student user:",{id:m==null?void 0:m.id,name:m==null?void 0:m.name,role:m==null?void 0:m.role}),console.log("- Target teacher ID:",M);const K=a.find(Z=>Z.id===M);if(console.log("- Found teacher:",K),K&&m){console.log("- Sending message to teacher:",{studentId:m.id,teacherId:M,studentName:m.name,teacherName:K.name});const Z=i(m.id,m.name,M,K.name,`Привет! Меня зовут ${m.name}. Можете ли вы помочь мне с обучением?`);console.log("- Message sent, chat ID:",Z),e("chats")}else console.log("❌ Teacher not found or user not available");console.log("🔍 END StudentHome DEBUG"),Q(!1)};return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3",children:"Найди своего идеального репетитора"}),n.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Изучай профили преподавателей, связывайся с ними и записывайся на уроки"})]}),n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-full px-4 py-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx(Nk,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-700",children:"Подключено в реальном времени"})]})})]}),n.jsxs("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[n.jsxs("button",{onClick:()=>D(!0),className:"group bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[n.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:n.jsx(Be,{className:"h-5 w-5"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-bold",children:"Овербукинг"}),n.jsx("div",{className:"text-xs opacity-90",children:"Автоподбор"})]})]}),n.jsxs("button",{onClick:()=>ee(!0),className:"group bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-purple-600 hover:via-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[n.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:n.jsx(bt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-bold",children:"Календарь"}),n.jsx("div",{className:"text-xs opacity-90",children:"Слоты"})]})]})]}),n.jsxs("div",{className:"mb-6 space-y-4",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[n.jsxs("div",{className:"flex-1 relative group",children:[n.jsx(kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),n.jsx("input",{type:"text",value:J,onChange:M=>Y(M.target.value),placeholder:"🔍 Поиск по предмету, преподавателю или городу...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base placeholder-gray-400"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>b(!p),className:`flex items-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm ${p?"bg-blue-600 text-white shadow-md":"bg-white border-2 border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:[n.jsx(am,{className:"h-4 w-4"}),n.jsx("span",{children:"Фильтры"}),(Object.keys(y).length>0||ie||he||J.trim())&&n.jsx("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs font-bold",children:Object.keys(y).length+(ie?1:0)+(he?1:0)+(J.trim()?1:0)})]}),n.jsx("button",{onClick:()=>gt(!0),disabled:x,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2.5 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center space-x-2 text-sm",children:x?n.jsxs(n.Fragment,{children:[n.jsx(Ri,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Применение..."})]}):n.jsx(n.Fragment,{children:n.jsx("span",{children:"Применить"})})}),(Object.keys(y).length>0||ie||he||J.trim())&&n.jsx("button",{onClick:jr,className:"bg-white border-2 border-gray-300 text-gray-700 px-4 py-2.5 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 text-sm",children:"Сбросить"})]})]}),p&&n.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-100 shadow-lg",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Класс"}),n.jsxs("select",{value:y.grade||"",onChange:M=>g({...y,grade:M.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любой класс"}),ze.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Предмет"}),n.jsxs("select",{value:y.subject||"",onChange:M=>g({...y,subject:M.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любой предмет"}),$e.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Опыт"}),n.jsxs("select",{value:y.experience||"",onChange:M=>g({...y,experience:M.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любой опыт"}),ct.map(M=>n.jsx("option",{value:M,children:w(M)},M))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Формат"}),n.jsxs("select",{value:y.format||"",onChange:M=>g({...y,format:M.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любой формат"}),X.map(M=>n.jsx("option",{value:M,children:M==="online"?"Онлайн":M==="offline"?"Оффлайн":"Мини-группа"},M))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Длительность"}),n.jsxs("select",{value:y.duration||"",onChange:M=>g({...y,duration:M.target.value?parseInt(M.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любая длительность"}),Ne.map(M=>n.jsxs("option",{value:M,children:[M," мин"]},M))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Мин. рейтинг"}),n.jsxs("select",{value:y.minRating||"",onChange:M=>g({...y,minRating:M.target.value?parseFloat(M.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любой рейтинг"}),n.jsx("option",{value:"4",children:"4+ звезды"}),n.jsx("option",{value:"4.5",children:"4.5+ звезды"}),n.jsx("option",{value:"5",children:"5 звезд"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Город"}),n.jsx("input",{type:"text",value:y.city||"",onChange:M=>g({...y,city:M.target.value}),placeholder:"Введите город",className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Цели обучения"}),n.jsxs("select",{value:((t=y.goals)==null?void 0:t[0])||"",onChange:M=>g({...y,goals:M.target.value?[M.target.value]:void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[n.jsx("option",{value:"",children:"Любые цели"}),pt.map(M=>n.jsx("option",{value:M,children:M},M))]})]})]}),n.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"Выберите дату и время"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Дата"}),n.jsx("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden shadow-lg",children:n.jsx(Jm,{localizer:ye,events:[],startAccessor:"start",endAccessor:"end",style:{height:280},views:["month"],view:"month",selectable:!0,onSelectSlot:M=>{Se(M.start)},onSelectEvent:()=>{}})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Время"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Начало"}),n.jsx("input",{type:"time",value:(he==null?void 0:he.start)||"",onChange:M=>je(K=>({start:M.target.value,end:(K==null?void 0:K.end)||"23:00"})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Конец"}),n.jsx("input",{type:"time",value:(he==null?void 0:he.end)||"",onChange:M=>je(K=>({start:(K==null?void 0:K.start)||"00:00",end:M.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]})]}),ie&&n.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(bt,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Выбрана дата:"})]}),n.jsx("p",{className:"text-base font-medium text-blue-900",children:dt(ie,"dd MMMM yyyy",{locale:dr})})]})]})]})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S.length>0?`Найдено ${S.length} преподавателей`:"Преподаватели"}),n.jsxs("button",{onClick:j,className:"px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm flex items-center gap-2",title:"Обновить список преподавателей",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Обновить"]})]}),n.jsx("p",{className:"text-gray-500 text-sm",children:S.length>0?"Зарегистрированные преподаватели всегда доступны для связи и бронирования уроков":"Попробуйте изменить фильтры или воспользоваться овербукингом"}),S.length>0&&n.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 text-green-600 text-xs",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Все репетиторы доступны 24/7"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:S.length===0?n.jsx(o9,{title:Object.keys(y).length>0||ie||he?"Нет преподавателей подходящих под фильтры":"Нет зарегистрированных преподавателей",description:Object.keys(y).length>0||ie||he?"Попробуйте изменить фильтры или воспользоваться овербукингом":"Попробуйте воспользоваться овербукингом или обратитесь к администратору",actionPrimary:{label:"Овербукинг",onClick:()=>D(!0)},actionSecondary:{label:"Сбросить фильтры",onClick:jr,variant:"secondary"}}):n.jsx(n.Fragment,{children:S.map(M=>{const K=M.profile,Z=s.filter(oe=>oe.teacherId===M.id).filter(oe=>!oe.isBooked).length>0;return n.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden transform hover:-translate-y-2",onClick:()=>me(M),children:[n.jsxs("div",{className:"h-32 relative overflow-hidden",style:{background:K!=null&&K.cardBackground?K.cardBackground.startsWith("http")||K.cardBackground.startsWith("data:")?`url(${K.cardBackground}) center/cover`:K.cardBackground:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),n.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2",children:[n.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:oe=>{oe.stopPropagation()},children:n.jsx(Qt,{className:"h-3 w-3"})}),n.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:oe=>{oe.stopPropagation()},children:n.jsx(Rn,{className:"h-3 w-3"})})]})]}),n.jsx("div",{className:"relative -mt-12 flex justify-center",children:n.jsxs("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-2 border-white rounded-full shadow-lg animate-pulse",title:"Зарегистрированный репетитор (всегда доступен)"}),(()=>{const oe=(K==null?void 0:K.avatar)||M.avatar;return oe&&oe.trim()!==""&&oe!=="undefined"&&oe!=="null"?n.jsx("img",{src:oe,alt:M.name,className:"w-32 h-32 object-cover rounded-full",onError:xe=>{const fe=xe.target;fe.style.display="none";const ve=fe.nextElementSibling;ve&&ve.classList.remove("hidden")},onLoad:xe=>{const fe=xe.target.nextElementSibling;fe&&fe.classList.add("hidden")}}):null})(),n.jsx("div",{className:`w-32 h-32 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const oe=(K==null?void 0:K.avatar)||M.avatar;return oe&&oe.trim()!==""&&oe!=="undefined"&&oe!=="null"?"hidden":""})()}`,children:n.jsx(be,{className:"h-16 w-16 text-white"})})]})}),n.jsxs("div",{className:"px-6 pb-6 pt-4",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:(K==null?void 0:K.name)||M.name||"Репетитор"}),n.jsx("p",{className:"text-sm text-gray-600",children:(K==null?void 0:K.teacherType)==="private"?"Частный преподаватель":(K==null?void 0:K.teacherType)==="school"?"Преподаватель школы":(K==null?void 0:K.teacherType)==="both"?"Частный + Школа":"Частный преподаватель"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600 mb-4",children:[(K==null?void 0:K.age)&&n.jsxs("span",{children:["возраст ",K.age," лет"]}),(K==null?void 0:K.experienceYears)&&n.jsxs("span",{children:["стаж ",K.experienceYears," лет"]})]}),n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-3 py-1.5 rounded-full",children:[n.jsx(tt,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-700",children:K!=null&&K.reviewsCount&&K.reviewsCount>0?`${K.reviewsCount} отзывов`:"отзывов нет"})]})}),n.jsx("div",{className:"text-center mb-4",children:n.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-600",children:[n.jsx(Zt,{className:"h-4 w-4"}),n.jsx("span",{children:(K==null?void 0:K.city)||"Город не указан"})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("button",{onClick:oe=>{oe.stopPropagation(),Z?(G(M),F(!0)):me(M)},className:`w-full py-3 rounded-xl font-semibold transition-all duration-200 text-base ${Z?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}`,children:Z?"Забронировать урок":"Связаться с репетитором"}),n.jsx("button",{onClick:oe=>{oe.stopPropagation(),me(M)},className:"w-full py-2 text-gray-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"Подробнее →"})]})]})]},M.id)})})})]}),O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Овербукинг - Автоподбор преподавателя"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Заполните форму, и мы автоматически подберем лучшего доступного преподавателя за 5 часов до занятия"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Класс"}),n.jsxs("select",{value:_.grade,onChange:M=>P({..._,grade:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Выберите класс"}),ze.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предмет"}),n.jsxs("select",{value:_.subject,onChange:M=>P({..._,subject:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Выберите предмет"}),$e.map(M=>n.jsx("option",{value:M,children:M},M))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md-grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата занятия"}),n.jsx("input",{type:"date",value:_.date,onChange:M=>P({..._,date:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Время начала"}),n.jsx("input",{type:"time",value:_.startTime,onChange:M=>P({..._,startTime:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цель занятий"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:pt.map(M=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:_.goals.includes(M),onChange:K=>{K.target.checked?P({..._,goals:[..._.goals,M]}):P({..._,goals:_.goals.filter(Z=>Z!==M)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:M})]},M))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавателя"}),n.jsxs("select",{value:_.experience,onChange:M=>P({..._,experience:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Любой"}),ct.map(M=>n.jsx("option",{value:M,children:w(M)},M))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность"}),n.jsx("select",{value:_.duration,onChange:M=>P({..._,duration:Number(M.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Ne.map(M=>n.jsxs("option",{value:M,children:[M," мин"]},M))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Формат"}),n.jsx("select",{value:_.format,onChange:M=>P({..._,format:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:X.map(M=>n.jsx("option",{value:M,children:M==="online"?"Онлайн":M==="offline"?"Оффлайн":"Мини-группа"},M))})]})]}),_.format==="offline"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),n.jsx("input",{type:"text",value:_.city,onChange:M=>P({..._,city:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Примечание"}),n.jsx("textarea",{value:_.comment,onChange:M=>P({..._,comment:M.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Например: хочу разобрать домашнее задание или подготовиться к контрольной..."})]})]}),n.jsxs("div",{className:"flex space-x-4 mt-6",children:[n.jsx("button",{onClick:$,disabled:!_.grade||!_.subject||!_.date||!_.startTime,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200 disabled:opacity-50",children:"Отправить заявку"}),n.jsx("button",{onClick:()=>D(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})})}),Ce&&W&&n.jsx(s9,{teacher:W,onClose:()=>pe(!1),onBookLesson:M=>{pe(!1),Qe(M)},onMessage:M=>{pe(!1),Tt(M)}}),z&&H&&m&&n.jsx(th,{isOpen:z,onClose:()=>{L(!1),T(null)},onConfirm:k,slot:H,teacher:I(H.teacherId),student:m}),U&&W&&n.jsx(Zy,{teacher:W,onClose:()=>Q(!1),onBookLesson:Qe,onMessage:Tt}),V&&n.jsx(e1,{onClose:()=>ee(!1)}),R&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:n.jsx(be,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Календарь ",(B==null?void 0:B.name)||"Преподавателя"]}),n.jsx("p",{className:"text-gray-600",children:"Выберите удобное время для занятия"})]})]}),n.jsx("button",{onClick:()=>{F(!1),G(null)},className:"p-2 rounded-full hover:bg-gray-100",children:n.jsx(ft,{className:"w-5 h-5 text-gray-600"})})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:()=>{const M=new Date(ae);M.setDate(M.getDate()-7),q(M)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[ae.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})," — ",new Date(ae.getTime()+6*24*60*60*1e3).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})]}),n.jsx("button",{onClick:()=>{const M=new Date(ae);M.setDate(M.getDate()+7),q(M)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),n.jsx("button",{onClick:()=>{const M=new Date,K=M.getDay(),Z=M.getDate()-K+(K===0?-6:1);q(new Date(M.setDate(Z)))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Сегодня"})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[n.jsx("div",{className:"w-20 p-3 border-r border-gray-200"}),Array.from({length:7},(M,K)=>{const Z=new Date(ae);return Z.setDate(Z.getDate()+K),n.jsxs("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 text-center",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.toLocaleDateString("ru-RU",{weekday:"short"})}),n.jsx("div",{className:"text-xs text-gray-600",children:Z.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})})]},K)})]}),n.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:Array.from({length:24},(M,K)=>K).map(M=>n.jsxs("div",{className:"flex border-b border-gray-200 last:border-b-0",children:[n.jsxs("div",{className:"w-20 bg-gray-50 p-3 border-r border-gray-200 flex items-center justify-center text-sm font-medium text-gray-600 sticky left-0",children:[M.toString().padStart(2,"0"),":00"]}),Array.from({length:7},(K,Z)=>{const oe=new Date(ae);oe.setDate(oe.getDate()+Z);const xe=oe.toISOString().split("T")[0],fe=s.filter(ve=>ve.teacherId===(B==null?void 0:B.id)&&!ve.isBooked&&ve.date===xe&&parseInt(ve.startTime.split(":")[0])===M);return n.jsx("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 min-h-[60px]",children:fe.map(ve=>n.jsxs("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-2 mb-2 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>{m&&(T(ve),L(!0),F(!1),G(null))},children:[n.jsxs("div",{className:"text-xs font-medium text-blue-900",children:[ve.startTime," - ",ve.endTime]}),n.jsx("div",{className:"text-xs text-blue-700",children:ve.subject}),n.jsxs("div",{className:"text-xs text-blue-600",children:[ve.price," ₽"]})]},ve.id))},Z)})]},M))})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[n.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Доступные слоты: ",s.filter(M=>M.teacherId===(B==null?void 0:B.id)&&!M.isBooked).length]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите на любой слот в календаре для бронирования"})]})]})]})})]})},Du=()=>{const{timeSlots:e,lessons:t,createSlot:r,cancelLesson:s,getOrCreateChat:a,completeLesson:l,deleteSlot:o,isConnected:c,socketRef:i}=$t(),{user:u}=ht(),[f,h]=N.useState(!1),[d,v]=N.useState({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3}),[j,m]=A.useState(null),[y,g]=A.useState(!1),[p,b]=A.useState(null),[x,C]=N.useState(!1),[O,D]=N.useState([]),[_,P]=N.useState(null),[z,L]=N.useState(!1);A.useEffect(()=>{i.current&&u!=null&&u.id&&c&&i.current.emit("subscribeOverbooking",u.id)},[i.current,u==null?void 0:u.id,c]),A.useEffect(()=>{if(!i.current)return;const X=()=>{u!=null&&u.id&&u!=null&&u.profile&&c&&i.current.emit("subscribeOverbooking",u.id)};return i.current.off("connect",X),i.current.on("connect",X),u!=null&&u.id&&u!=null&&u.profile&&(i.current.emit("subscribeOverbooking",u.id),i.current.on("overbookingRequests",Ne=>{D(Ne),setTimeout(()=>{},100)}),i.current.on("newOverbookingRequest",Ne=>{D(ye=>[...ye,Ne])}),i.current.on("overbookingRequestAccepted",Ne=>{D(ye=>ye.filter(Ge=>Ge.id!==Ne.id))})),()=>{i.current&&(i.current.off("overbookingRequests"),i.current.off("newOverbookingRequest"),i.current.off("overbookingRequestAccepted"),i.current.off("connect",X))}},[u==null?void 0:u.id,u==null?void 0:u.profile,c]),A.useEffect(()=>{u&&u.profile&&Array.isArray(u.profile.subjects)&&u.profile.subjects.length>=1&&v(X=>({...X,subject:u.profile.subjects[0]}))},[u]);const H=e.filter(X=>X.teacherId===(u==null?void 0:u.id)).filter(X=>!X.isBooked),T=t.filter(X=>X.teacherId===(u==null?void 0:u.id)),V=T.filter(X=>X.status==="scheduled"),ee=T.filter(X=>X.status==="completed"),R=(X,Ne)=>{const ye=new Date(`${X.date}T${X.startTime}`),Ge=new Date(`${Ne.date}T${Ne.startTime}`);return ye.getTime()-Ge.getTime()},F=[...H].sort(R),B=[...V].sort(R),G=[...ee].sort(R),ae=()=>{if(!u||!d.date||!d.startTime||!d.subject){alert("Пожалуйста, заполните все обязательные поля");return}const X=new Date(`2000-01-01T${d.startTime}`),Ne=new Date(X.getTime()+d.duration*6e4);let ye;u.profile&&u.role==="teacher"&&(ye=u.profile);const Ge={teacherId:u.id,teacherName:u.name,teacherAvatar:u.avatar,date:d.date,startTime:d.startTime,endTime:Ne.toTimeString().slice(0,5),duration:d.duration,subject:d.subject,lessonType:d.lessonType,format:d.format,price:d.price,experience:(ye==null?void 0:ye.experience)||"beginner",goals:(ye==null?void 0:ye.goals)||[],grades:(ye==null?void 0:ye.grades)||[],rating:ye==null?void 0:ye.rating,bio:(ye==null?void 0:ye.bio)||"",...d.format==="offline"&&ye!=null&&ye.city?{city:ye.city}:{}};r(Ge),h(!1),v({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3})},q=X=>{u&&(m(X),b(null),g(!0))},ie=X=>{u&&(b(X),m(null),g(!0))},Se=()=>{g(!1),m(null),b(null)},he=async X=>{var Ne,ye,Ge,We,rt,Te;if(!u)return;i.current&&i.current.emit("acceptOverbookingRequest",{requestId:X.id,teacherId:u.id});const gt={teacherId:u.id,teacherName:u.name,teacherAvatar:u.avatar||"",date:X.date||new Date().toISOString().slice(0,10),startTime:X.startTime||"15:00",endTime:X.endTime||"16:00",duration:X.duration||60,subject:X.subject,lessonType:"regular",format:X.format,price:1e3,experience:((Ne=u.profile)==null?void 0:Ne.experience)||"beginner",goals:((ye=u.profile)==null?void 0:ye.goals)||[],grades:((Ge=u.profile)==null?void 0:Ge.grades)||[],rating:(We=u.profile)==null?void 0:We.rating,bio:((rt=u.profile)==null?void 0:rt.bio)||"",city:((Te=u.profile)==null?void 0:Te.city)||""};await r(gt,X.studentId,X.studentName),C(!1),alert("Вы приняли заявку. Слот создан и забронирован!")},je=X=>{switch(X){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return X}},J=X=>{switch(X){case"trial":return"Пробный";case"regular":return"Обычный";default:return X}},Y=({slot:X,isBooked:Ne,onClick:ye})=>n.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${Ne?"border-green-500":"border-blue-500"} cursor-pointer`,onClick:ye,children:n.jsxs("div",{className:"p-3",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:X.subject}),n.jsxs("div",{className:"text-xs text-gray-500",children:[X.date," • ",X.startTime,"–",X.endTime]})]})}),ge=({lesson:X,status:Ne,onClick:ye})=>n.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${Ne==="completed"?"border-gray-400":"border-green-500"} cursor-pointer`,onClick:ye,children:n.jsxs("div",{className:"p-3",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:X.subject}),n.jsxs("div",{className:"text-xs text-gray-500",children:[X.date," • ",X.startTime,"–",X.endTime]})]})}),ne=(u==null?void 0:u.profile)&&"overbookingEnabled"in u.profile&&u.profile.overbookingEnabled,$e=u!=null&&u.profile&&"subjects"in u.profile?u.profile.subjects:[],ze=[45,60,90],pt=["regular","trial"],ct=["online","offline","mini-group"];return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8 relative",children:[ne&&n.jsxs("button",{className:"absolute top-0 right-0 p-2 rounded-full hover:bg-gray-100 transition z-10",title:"Уведомления",onClick:()=>C(!0),children:[n.jsx(rl,{className:"w-7 h-7 text-blue-500"}),O.length>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5",children:O.length})]}),n.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Управление слотами"}),n.jsx("p",{className:"text-gray-600",children:"Создавайте временные слоты для уроков и управляйте своим расписанием"})]}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",children:[n.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>C(!1),title:"Закрыть",children:n.jsx(ft,{className:"w-6 h-6"})}),n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Заявки на овербукинг"}),O.length===0?n.jsx("div",{className:"text-gray-500 text-center",children:"Нет новых заявок"}):n.jsx("div",{className:"space-y-2",children:O.map(X=>n.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2 bg-purple-50 cursor-pointer hover:bg-purple-100 transition",onClick:()=>{P(X),L(!0)},children:[n.jsx("span",{className:"font-semibold text-purple-800",children:X.studentName}),n.jsx("span",{className:"text-xs text-gray-500",children:X.subject}),n.jsx("span",{className:"text-xs text-gray-500",children:X.startTime||"—"})]},X.id))})]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:()=>h(!0),className:"btn-primary flex items-center space-x-2",children:[n.jsx(Nl,{className:"h-5 w-5"}),n.jsx("span",{children:"Создать новый слот"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Свободные слоты"}),F.length>0?n.jsx("div",{className:"space-y-4",children:F.map(X=>n.jsx(Y,{slot:X,isBooked:!1,onClick:()=>q(X)},X.id))}):n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет свободных слотов"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-green-700 mb-4",children:"Забронированные уроки"}),B.length>0?n.jsx("div",{className:"space-y-4",children:B.map(X=>n.jsx(ge,{lesson:X,status:"scheduled",onClick:()=>ie(X)},X.id))}):n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет забронированных уроков"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Завершённые уроки"}),G.length>0?n.jsx("div",{className:"space-y-4",children:G.map(X=>n.jsx(ge,{lesson:X,status:"completed",onClick:()=>ie(X)},X.id))}):n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет завершённых уроков"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-purple-700 mb-4",children:"Овербукинг"}),n.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет новых заявок"})]})]}),f&&n.jsx("div",{className:"fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Создать новый слот"}),n.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Предмет *"}),n.jsxs("select",{value:d.subject,onChange:X=>v({...d,subject:X.target.value}),className:"input-modern w-full",children:[n.jsx("option",{value:"",children:"Выберите предмет"}),$e.map(X=>n.jsx("option",{value:X,children:X},X))]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Дата *"}),n.jsx("input",{type:"date",value:d.date,onChange:X=>v({...d,date:X.target.value}),className:"input-modern w-full",min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Время начала *"}),n.jsx("input",{type:"time",value:d.startTime,onChange:X=>v({...d,startTime:X.target.value}),className:"input-modern w-full"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Длительность"}),n.jsx("select",{value:d.duration,onChange:X=>v({...d,duration:parseInt(X.target.value)}),className:"input-modern w-full",children:ze.map(X=>n.jsxs("option",{value:X,children:[X," минут"]},X))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Цена (₽)"}),n.jsx("input",{type:"number",value:d.price,onChange:X=>v({...d,price:parseInt(X.target.value)}),className:"input-modern w-full",min:"100",step:"100"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Тип урока"}),n.jsx("select",{value:d.lessonType,onChange:X=>v({...d,lessonType:X.target.value}),className:"input-modern w-full",children:pt.map(X=>n.jsx("option",{value:X,children:J(X)},X))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Формат"}),n.jsx("select",{value:d.format,onChange:X=>v({...d,format:X.target.value}),className:"input-modern w-full",children:ct.map(X=>n.jsx("option",{value:X,children:je(X)},X))})]})]}),n.jsxs("div",{className:"flex space-x-4 pt-4",children:[n.jsx("button",{onClick:ae,className:"btn-primary flex-1",children:"Создать слот"}),n.jsx("button",{onClick:()=>h(!1),className:"btn-secondary flex-1",children:"Отмена"})]})]})]})})}),y&&(j||p)&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[n.jsx("button",{onClick:Se,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h3",{className:"text-xl font-bold mb-4",children:j?"Детали слота":"Детали урока"}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Предмет:"})," ",(j||p).subject]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Дата:"})," ",(j||p).date," ",(j||p).startTime," - ",(j||p).endTime]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Формат:"})," ",(j||p).format]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Цена:"})," ",(j||p).price,"₽"]}),j&&j.studentName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Ученик:"})," ",j.studentName]}),p&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Ученик:"})," ",p.studentName]}),((p==null?void 0:p.comment)||(j==null?void 0:j.comment))&&n.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[n.jsx("span",{className:"font-medium",children:"Комментарий ученика:"})," ",(p==null?void 0:p.comment)||(j==null?void 0:j.comment)]})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[j&&j.isBooked&&j.studentId&&u&&n.jsxs("button",{onClick:()=>{a(u.id,j.studentId,u.name,j.studentName),Se()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[n.jsx(tt,{className:"w-5 h-5"})," Чат с учеником"]}),j&&j.isBooked&&j.format==="online"&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[n.jsx(ln,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Видеозвонок"})]})}),j&&j.isBooked&&n.jsxs("button",{onClick:()=>{l(j.lessonId),Se()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[n.jsx(Gs,{className:"w-5 h-5"})," Завершить урок"]}),j&&n.jsx("button",{onClick:()=>{o(j.id),Se()},className:"absolute top-4 left-4 text-red-500 hover:text-red-700",children:n.jsx(Cl,{className:"w-6 h-6"})}),p&&p.status==="scheduled"&&u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{a(u.id,p.studentId,u.name,p.studentName),Se()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[n.jsx(tt,{className:"w-5 h-5"})," Чат с учеником"]}),p.format==="online"&&n.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[n.jsx(ln,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Видеозвонок"})]}),n.jsxs("button",{onClick:()=>{l(p.id),Se()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[n.jsx(Gs,{className:"w-5 h-5"})," Завершить урок"]})]}),p&&p.status==="completed"&&n.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-center text-gray-800",children:"Урок завершён"})]})]})}),z&&_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[n.jsx("button",{onClick:()=>{L(!1),P(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h3",{className:"text-xl font-bold mb-4",children:"Заявка на овербукинг"}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Ученик:"})," ",_.studentName]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Предмет:"})," ",_.subject]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Класс:"})," ",_.grade]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Формат:"})," ",_.format]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Длительность:"})," ",_.duration," мин"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Время:"})," ",_.startTime||"—"," - ",_.endTime||"—"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Цели:"})," ",Array.isArray(_.goals)?_.goals.join(", "):_.goals]}),_.comment&&n.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[n.jsx("span",{className:"font-medium",children:"Комментарий:"})," ",_.comment]})]}),n.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",onClick:()=>{he(_),L(!1),P(null)},children:"Забронировать слот"})]})})]})},i9={ru:dr},c9=Xm({format:dt,startOfWeek:Gr,getDay:Zm,locales:i9}),t1=({mode:e,student:t,onAssign:r})=>{const{timeSlots:s,lessons:a,bookLesson:l,createSlot:o}=$t(),{user:c}=ht(),[i,u]=N.useState(null),[f,h]=N.useState(!1),[d,v]=N.useState(""),[j,m]=N.useState(!1),[y,g]=N.useState(!1),[p,b]=N.useState({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),[x,C]=N.useState(!1),[O,D]=N.useState(null),[_,P]=N.useState(!1),[z,L]=N.useState(""),H=s.filter(J=>{if(J.teacherId!==(c==null?void 0:c.id)||J.status==="completed")return!1;if(e==="assign"&&t){if(J.isBooked&&J.bookedStudentId!==t.id)return!1}else if(J.isBooked)return!1;return!0}),T=a.filter(J=>J.teacherId===(c==null?void 0:c.id)&&J.status!=="completed"),V=e==="assign"?s.filter(J=>J.teacherId===(c==null?void 0:c.id)&&J.status!=="completed"):H,ee=e==="assign"?a.filter(J=>J.teacherId===(c==null?void 0:c.id)&&J.status!=="completed"):T,R=V.map(J=>({id:J.id,title:`${J.subject} - ${J.isBooked?"Забронирован":"Свободен"}`,start:new Date(`${J.date}T${J.startTime}`),end:new Date(`${J.date}T${J.endTime}`),resource:J,type:"slot",isBooked:J.isBooked,subject:J.subject,price:J.price,format:J.format,lessonType:J.lessonType})),F=ee.map(J=>({id:J.id,title:`${J.subject} - ${J.studentName}`,start:new Date(`${J.date}T${J.startTime}`),end:new Date(`${J.date}T${J.endTime}`),resource:J,type:"lesson",studentName:J.studentName,subject:J.subject,price:J.price,format:J.format,status:J.status})),B=[...R,...F],G=N.useCallback(J=>{let Y={borderRadius:"8px",border:"none",padding:"4px 8px",fontSize:"12px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"};return J.type==="slot"?J.isBooked?(Y.backgroundColor="#10b981",Y.color="white"):(Y.backgroundColor="#3b82f6",Y.color="white"):J.type==="lesson"&&(Y.backgroundColor="#f59e0b",Y.color="white"),{style:Y}},[]),ae=N.useCallback(J=>{u(J),h(!0),v("")},[]),q=()=>{h(!1),u(null),v("")},ie=async J=>{e==="assign"&&t&&(await l(J.id,t.id,t.name),r&&r())},Se=N.useCallback(J=>{const{start:Y,end:ge}=J,ne=dt(Y,"yyyy-MM-dd"),$e=dt(Y,"HH:mm"),ze=dt(ge,"HH:mm");b({date:ne,startTime:$e,endTime:ze,subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),g(!0)},[]),he=async()=>{if(!c||!p.subject.trim()){alert("Пожалуйста, заполните все обязательные поля");return}if(!p.startTime||!p.endTime||p.startTime>=p.endTime){alert("Проверьте корректность времени начала и окончания");return}C(!0);try{if(e==="assign"&&t){await o({...p,teacherId:c.id,teacherName:c.name,duration:60,lessonType:p.lessonType,format:p.format,experience:p.experience,goals:p.goals||[],grades:p.grades||[]},t.id,t.name,{mode:"assign"}),g(!1),b({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]});return}await o({...p,teacherId:c.id,teacherName:c.name,duration:60,lessonType:p.lessonType,format:p.format,experience:p.experience,goals:p.goals||[],grades:p.grades||[]}),g(!1),b({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),alert("Слот успешно создан!")}catch{alert("Ошибка при создании слота")}finally{C(!1)}},je=async J=>{if(t){P(!0);try{await l(J.id,t.id,t.name),L(`Урок назначен для ${t.name}`),setTimeout(()=>{L(""),D(null),r&&r()},1200)}catch{alert("Ошибка при бронировании слота")}finally{P(!1)}}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-2",children:[n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Календарь занятий"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Управляйте своим расписанием и отслеживайте забронированные уроки"})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:n.jsx("div",{className:"p-3",children:n.jsx(Jm,{localizer:c9,events:B,startAccessor:"start",endAccessor:"end",style:{height:400},eventPropGetter:G,onSelectEvent:ae,onSelectSlot:Se,selectable:!0,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет событий в выбранном диапазоне",showMore:J=>`+${J} еще`},className:"custom-calendar"})})}),n.jsxs("div",{className:"mt-3 bg-white rounded-lg shadow-sm border border-gray-100 p-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Легенда"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Свободные слоты"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Забронированные слоты"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded"}),n.jsx("span",{className:"text-xs text-gray-700",children:"Запланированные уроки"})]})]})]})]}),f&&i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-xs w-full p-3 transform transition-all duration-300 scale-100",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h3",{className:"text-base font-bold text-gray-900",children:i.type==="slot"?"Детали слота":"Детали урока"}),n.jsx("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Предмет:"}),n.jsx("p",{className:"text-xs text-gray-900",children:i.subject})]}),i.type==="slot"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),n.jsx("p",{className:`text-xs font-medium ${i.isBooked?"text-green-600":"text-blue-600"}`,children:i.isBooked?"Забронирован":"Свободен"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Тип урока:"}),n.jsx("p",{className:"text-xs text-gray-900 capitalize",children:i.lessonType})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),n.jsx("p",{className:"text-xs text-gray-900 capitalize",children:i.format})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),n.jsxs("p",{className:"text-xs text-gray-900",children:[i.price," ₽"]})]}),!i.isBooked&&n.jsxs("div",{className:"mt-3",children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Имя студента для бронирования:"}),n.jsx("input",{type:"text",value:d,onChange:J=>v(J.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Введите имя студента"}),n.jsx("button",{onClick:()=>ie(i.resource),disabled:j,className:"mt-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:j?"Бронирую...":"Забронировать слот"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Ученик:"}),n.jsx("p",{className:"text-xs text-gray-900",children:i.studentName})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),n.jsx("p",{className:"text-xs text-gray-900 capitalize",children:i.status})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),n.jsx("p",{className:"text-xs text-gray-900 capitalize",children:i.format})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),n.jsxs("p",{className:"text-xs text-gray-900",children:[i.price," ₽"]})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Время:"}),n.jsxs("p",{className:"text-gray-900 text-xs",children:[dt(i.start,"HH:mm")," - ",dt(i.end,"HH:mm")]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Дата:"}),n.jsx("p",{className:"text-gray-900 text-xs",children:dt(i.start,"dd MMMM yyyy",{locale:dr})})]})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{onClick:q,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Закрыть"})})]})}),y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 transform transition-all duration-300 scale-100",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Создать новый слот"}),n.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Предмет *"}),n.jsx("input",{type:"text",value:p.subject,onChange:J=>b({...p,subject:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Например: Математика",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время начала"}),n.jsx("input",{type:"time",value:p.startTime,onChange:J=>b({...p,startTime:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время окончания"}),n.jsx("input",{type:"time",value:p.endTime,onChange:J=>b({...p,endTime:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Тип урока"}),n.jsxs("select",{value:p.lessonType,onChange:J=>b({...p,lessonType:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[n.jsx("option",{value:"regular",children:"Обычный"}),n.jsx("option",{value:"trial",children:"Пробный"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Формат"}),n.jsxs("select",{value:p.format,onChange:J=>b({...p,format:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[n.jsx("option",{value:"online",children:"Онлайн"}),n.jsx("option",{value:"offline",children:"Офлайн"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Цена (₽)"}),n.jsx("input",{type:"number",value:p.price,onChange:J=>b({...p,price:parseInt(J.target.value)||0}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"1000",min:"0"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Опыт"}),n.jsxs("select",{value:p.experience,onChange:J=>b({...p,experience:J.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[n.jsx("option",{value:"beginner",children:"Начинающий"}),n.jsx("option",{value:"experienced",children:"Опытный"})]})]})]}),n.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[n.jsx("button",{onClick:()=>g(!1),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Отмена"}),n.jsx("button",{onClick:he,disabled:x||!p.subject.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:x?"Создаю...":"Создать слот"})]})]})}),e==="assign"&&t&&O&&!O.isBooked&&n.jsx("button",{onClick:()=>je(O),disabled:_,style:{marginTop:12,padding:"6px 16px",fontSize:14},children:_?"Назначение...":`Забронировать для ${t.name}`}),z&&n.jsx("div",{style:{color:"green",marginTop:8,fontSize:14},children:z})]})},u9={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},d9={background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.15)",padding:24,minWidth:320,maxHeight:"90vh",overflowY:"auto",position:"relative"},f9={position:"absolute",top:12,right:16,fontSize:24,background:"none",border:"none",cursor:"pointer",color:"#888"},_s=({open:e,onClose:t,children:r,style:s})=>e?n.jsx("div",{style:u9,onClick:t,children:n.jsxs("div",{style:{...d9,...s},onClick:a=>a.stopPropagation(),children:[n.jsx("button",{style:f9,onClick:t,"aria-label":"Закрыть",children:"×"}),r]})}):null,rh=({onSubmit:e,onCancel:t,initialText:r="",isEditing:s=!1,userName:a="U",userAvatar:l})=>{const[o,c]=N.useState(r),[i,u]=N.useState([]),[f,h]=N.useState([]),d=N.useRef(null),v=g=>{const p=Array.from(g.target.files||[]);if(p.length===0)return;const b=[...i,...p];u(b);const x=p.map(C=>URL.createObjectURL(C));h([...f,...x]),d.current&&(d.current.value="")},j=g=>{const p=i.filter((x,C)=>C!==g),b=f.filter((x,C)=>C!==g);u(p),h(b)},m=()=>{if(!o.trim()&&i.length===0)return;const g=i.length>0?i.some(b=>b.type.startsWith("video/"))?"video":"image":"text",p={text:o.trim(),media:i,type:g};e(p),f.forEach(b=>URL.revokeObjectURL(b))},y=!o.trim()&&i.length===0;return n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center overflow-hidden",children:l?n.jsx("img",{src:l,alt:a,className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-white text-sm font-medium",children:a.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("textarea",{value:o,onChange:g=>c(g.target.value),placeholder:s?"Редактировать запись...":"Что нового?",className:"w-full border-none resize-none focus:ring-0 text-gray-900 placeholder-gray-500",rows:3}),f.length>0&&n.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:f.map((g,p)=>{var b;return n.jsxs("div",{className:"relative group",children:[(b=i[p])!=null&&b.type.startsWith("video/")?n.jsx("video",{src:g,className:"w-full h-24 object-cover rounded-lg",controls:!0}):n.jsx("img",{src:g,alt:"Preview",className:"w-full h-24 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>j(p),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(ft,{className:"w-3 h-3"})})]},p)})}),n.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>{var g;return(g=d.current)==null?void 0:g.click()},className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",title:"Добавить фото или видео",children:n.jsx(Md,{className:"w-5 h-5"})}),n.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:n.jsx(im,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Отмена"}),n.jsx("button",{onClick:m,disabled:y,className:`px-4 py-2 rounded-lg font-medium transition-colors ${y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:s?"Сохранить":"Опубликовать"})]})]})]})]}),n.jsx("input",{ref:d,type:"file",multiple:!0,accept:"image/*,video/*",onChange:v,className:"hidden"})]})},Qd=({post:e,onReaction:t,onComment:r,onShare:s,onBookmark:a,onEdit:l,onDelete:o})=>{const[c,i]=N.useState(!1),[u,f]=N.useState(""),[h,d]=N.useState(!1),[v,j]=N.useState(!1),m=x=>{t(e.id,x),j(!1)},y=()=>{u.trim()&&(r(e.id,u.trim()),f(""))},g=x=>{l&&(l(e.id,x),d(!1))},p=()=>{o&&o(e.id)},b=x=>{const C=new Date(x),O=Math.floor((new Date().getTime()-C.getTime())/(1e3*60*60));return O<1?"только что":O<24?`${O}ч назад`:O<48?"вчера":C.toLocaleDateString("ru-RU")};return e.reactions.reduce((x,C)=>x+C.count,0),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-4",children:[n.jsx("div",{className:"p-4 pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.userAvatar?n.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full rounded-full object-cover"}):n.jsx("span",{className:"text-white text-sm font-medium",children:e.userName.charAt(0).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:e.userName}),n.jsx("div",{className:"text-sm text-gray-500",children:b(e.date)})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(lb,{className:"w-5 h-5"})}),n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10",children:[l&&n.jsx("button",{onClick:()=>d(!0),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Редактировать"}),o&&n.jsx("button",{onClick:p,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Удалить"})]})]})]})}),h&&l&&n.jsx("div",{className:"px-4 pb-4",children:n.jsx(rh,{onSubmit:({text:x})=>g(x),onCancel:()=>d(!1),initialText:e.text,isEditing:!0})}),!h&&n.jsxs(n.Fragment,{children:[e.text&&n.jsxs("div",{className:"px-4 pb-3",children:[n.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:e.text}),e.tags&&e.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map(x=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 font-medium",children:["#",x]},x))})]}),e.media&&e.media.length>0&&n.jsx("div",{className:"px-4 pb-3",children:e.type==="video"?n.jsxs("div",{className:"relative",children:[n.jsx("video",{src:e.media[0],className:"w-full rounded-lg",controls:!0}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx(vk,{className:"w-12 h-12 text-white opacity-80"})})]}):n.jsx("div",{className:`grid gap-2 ${e.media.length===1?"grid-cols-1":e.media.length===2?"grid-cols-2":"grid-cols-3"}`,children:e.media.map((x,C)=>n.jsx("div",{className:"relative aspect-square",children:n.jsx("img",{src:x,alt:"Post media",className:"w-full h-full object-cover rounded-lg"})},C))})}),(e.likes&&e.likes>0||e.comments.length>0||e.views&&e.views>0)&&n.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[e.likes&&e.likes>0&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Qt,{className:"w-4 h-4 text-red-500 fill-current"}),n.jsx("span",{children:e.likes})]}),e.comments.length>0&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(tt,{className:"w-4 h-4 text-blue-500"}),n.jsx("span",{children:e.comments.length})]}),e.views&&e.views>0&&n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Ln,{className:"w-4 h-4 text-gray-500"}),n.jsx("span",{children:e.views})]})]}),e.editedAt&&n.jsx("span",{className:"text-xs text-gray-400",children:"ред."})]})}),n.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>j(!v),className:`flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ${e.reactions.some(x=>x.userReacted)?"text-red-500 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[n.jsx(Qt,{className:`w-5 h-5 ${e.reactions.some(x=>x.userReacted)?"fill-current":""}`}),n.jsx("span",{className:"text-sm",children:"Нравится"})]}),v&&n.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex space-x-2",children:[n.jsx("button",{onClick:()=>m("like"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Нравится",children:n.jsx(cb,{className:"w-6 h-6 text-blue-500"})}),n.jsx("button",{onClick:()=>m("love"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Любовь",children:n.jsx(Qt,{className:"w-6 h-6 text-red-500"})}),n.jsx("button",{onClick:()=>m("smile"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Улыбка",children:n.jsx(im,{className:"w-6 h-6 text-yellow-500"})})]})]}),n.jsxs("button",{onClick:()=>i(!c),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[n.jsx(tt,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm",children:"Комментировать"})]}),n.jsxs("button",{onClick:()=>s(e.id),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[n.jsx(bk,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),n.jsx("button",{onClick:()=>a(e.id),className:`p-2 rounded-full transition-colors ${e.isBookmarked?"text-blue-500 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:n.jsx(pc,{className:`w-5 h-5 ${e.isBookmarked?"fill-current":""}`})})]})}),c&&n.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:[n.jsx("div",{className:"space-y-3 mb-3",children:e.comments.map(x=>n.jsxs("div",{className:"flex items-start space-x-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:x.userAvatar?n.jsx("img",{src:x.userAvatar,alt:x.userName,className:"w-full h-full rounded-full object-cover"}):n.jsx("span",{className:"text-white text-xs font-medium",children:x.userName.charAt(0).toUpperCase()})}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"bg-white rounded-lg p-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium text-sm text-gray-900",children:x.userName}),n.jsx("span",{className:"text-xs text-gray-500",children:b(x.date)})]}),n.jsx("p",{className:"text-sm text-gray-800",children:x.text})]})})]},x.id))}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-medium",children:"U"})}),n.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-white rounded-full px-3 py-2",children:[n.jsx("input",{type:"text",value:u,onChange:x=>f(x.target.value),placeholder:"Написать комментарий...",className:"flex-1 border-none outline-none text-sm",onKeyPress:x=>x.key==="Enter"&&y()}),n.jsx("button",{onClick:y,disabled:!u.trim(),className:`p-1 rounded-full transition-colors ${u.trim()?"text-blue-500 hover:bg-blue-50":"text-gray-400"}`,children:n.jsx(ib,{className:"w-4 h-4"})})]})]})]})]})]})},m9=({onSearchResults:e,onClose:t,className:r=""})=>{var s;const{posts:a,searchPosts:l}=$t(),[o,c]=N.useState(""),[i,u]=N.useState([]),[f,h]=N.useState("all"),[d,v]=N.useState(""),[j,m]=N.useState(""),[y,g]=N.useState(""),[p,b]=N.useState("date"),[x,C]=N.useState(!1),[O,D]=N.useState([]),[_,P]=N.useState(!1),z=N.useRef(),L=Array.from(new Set(a.flatMap(F=>F.tags||[]))).sort(),H=Array.from(new Set(a.map(F=>({id:F.userId,name:F.userName})))).filter((F,B,G)=>B===G.findIndex(ae=>ae.id===F.id)),T=()=>{P(!0);const F={query:o.trim()||void 0,tags:i.length>0?i:void 0,userId:d||void 0,dateFrom:j||void 0,dateTo:y||void 0,type:f==="all"?void 0:f,limit:50};let B=[...a];if(F.query){const G=F.query.toLowerCase();B=B.filter(ae=>ae.text.toLowerCase().includes(G)||ae.userName.toLowerCase().includes(G))}F.tags&&F.tags.length>0&&(B=B.filter(G=>G.tags&&F.tags.some(ae=>G.tags.includes(ae)))),F.userId&&(B=B.filter(G=>G.userId===F.userId)),F.type&&(B=B.filter(G=>G.type===F.type)),F.dateFrom&&(B=B.filter(G=>G.date>=F.dateFrom)),F.dateTo&&(B=B.filter(G=>G.date<=F.dateTo)),B.sort((G,ae)=>{switch(p){case"likes":return(ae.likes||0)-(G.likes||0);case"comments":return ae.comments.length-G.comments.length;case"views":return(ae.views||0)-(G.views||0);case"date":default:return new Date(ae.date).getTime()-new Date(G.date).getTime()}}),D(B),P(!1),e&&e(B),l(F)};N.useEffect(()=>(z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{o.trim()||i.length>0||d||f!=="all"||j||y?T():(D([]),e&&e([]))},300),()=>{z.current&&clearTimeout(z.current)}),[o,i,d,f,j,y,p]);const V=()=>{c(""),u([]),v(""),h("all"),m(""),g(""),b("date"),D([]),e&&e([])},ee=F=>{u(B=>B.includes(F)?B.filter(G=>G!==F):[...B,F])},R=F=>{const B=new Date(F),G=Math.floor((new Date().getTime()-B.getTime())/(1e3*60*60));return G<1?"только что":G<24?`${G}ч назад`:G<48?"вчера":B.toLocaleDateString("ru-RU")};return n.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200 ${r}`,children:[n.jsxs("div",{className:"p-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Поиск записей"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>C(!x),className:`p-2 rounded-full transition-colors ${x?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,title:"Фильтры",children:n.jsx(am,{className:"w-5 h-5"})}),n.jsx("button",{onClick:V,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Очистить поиск",children:n.jsx(ft,{className:"w-5 h-5"})}),t&&n.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Закрыть",children:n.jsx(ft,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"mt-4 relative",children:[n.jsx(kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:o,onChange:F=>c(F.target.value),placeholder:"Поиск по записям...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),_&&n.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),(i.length>0||d||f!=="all"||j||y)&&n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[i.map(F=>n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700",children:[n.jsx(ck,{className:"w-3 h-3 mr-1"}),F,n.jsx("button",{onClick:()=>ee(F),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:n.jsx(ft,{className:"w-3 h-3"})})]},F)),d&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-700",children:[n.jsx(be,{className:"w-3 h-3 mr-1"}),((s=H.find(F=>F.id===d))==null?void 0:s.name)||d,n.jsx("button",{onClick:()=>v(""),className:"ml-2 hover:bg-green-200 rounded-full p-0.5",children:n.jsx(ft,{className:"w-3 h-3"})})]}),f!=="all"&&n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-700",children:[f==="text"&&n.jsx(zn,{className:"w-3 h-3 mr-1"}),f==="image"&&n.jsx(Md,{className:"w-3 h-3 mr-1"}),f==="video"&&n.jsx(ln,{className:"w-3 h-3 mr-1"}),f==="text"?"Текст":f==="image"?"Изображения":"Видео",n.jsx("button",{onClick:()=>h("all"),className:"ml-2 hover:bg-purple-200 rounded-full p-0.5",children:n.jsx(ft,{className:"w-3 h-3"})})]})]})]}),x&&n.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип контента"}),n.jsxs("select",{value:f,onChange:F=>h(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"all",children:"Все типы"}),n.jsx("option",{value:"text",children:"Только текст"}),n.jsx("option",{value:"image",children:"С изображениями"}),n.jsx("option",{value:"video",children:"С видео"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Автор"}),n.jsxs("select",{value:d,onChange:F=>v(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Все авторы"}),H.map(F=>n.jsx("option",{value:F.id,children:F.name},F.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортировка"}),n.jsxs("select",{value:p,onChange:F=>b(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"date",children:"По дате"}),n.jsx("option",{value:"likes",children:"По лайкам"}),n.jsx("option",{value:"comments",children:"По комментариям"}),n.jsx("option",{value:"views",children:"По просмотрам"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата от"}),n.jsx("input",{type:"date",value:j,onChange:F=>m(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата до"}),n.jsx("input",{type:"date",value:y,onChange:F=>g(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),L.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Популярные теги"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:L.slice(0,10).map(F=>n.jsxs("button",{onClick:()=>ee(F),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${i.includes(F)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",F]},F))})]})]}),O.length>0&&n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Найдено ",O.length," записей"]})}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:O.map(F=>n.jsx("div",{className:"p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center flex-shrink-0",children:F.userAvatar?n.jsx("img",{src:F.userAvatar,alt:F.userName,className:"w-10 h-10 rounded-full object-cover"}):n.jsx("span",{className:"text-white text-sm font-medium",children:F.userName.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("span",{className:"font-medium text-sm text-gray-900",children:F.userName}),n.jsx("span",{className:"text-xs text-gray-500",children:R(F.date)}),F.type!=="text"&&n.jsx("span",{className:"text-xs text-gray-500",children:F.type==="image"?n.jsx(Md,{className:"w-3 h-3 inline"}):n.jsx(ln,{className:"w-3 h-3 inline"})})]}),n.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:F.text}),F.tags&&F.tags.length>0&&n.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[F.tags.slice(0,3).map(B=>n.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["#",B]},B)),F.tags.length>3&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",F.tags.length-3]})]}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(Qt,{className:"w-3 h-3"}),n.jsx("span",{children:F.likes||0})]}),n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(tt,{className:"w-3 h-3"}),n.jsx("span",{children:F.comments.length})]}),F.views&&n.jsxs("span",{className:"flex items-center space-x-1",children:[n.jsx(Ln,{className:"w-3 h-3"}),n.jsx("span",{children:F.views})]})]})]})]})},F.id))})]}),o.trim()&&O.length===0&&!_&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(kl,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500",children:"По вашему запросу ничего не найдено"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Попробуйте изменить параметры поиска"})]})]})},h9=({className:e=""})=>{const{notifications:t,markNotificationAsRead:r,markAllNotificationsAsRead:s,deleteNotification:a}=$t(),{user:l}=ht(),[o,c]=N.useState(!1),[i,u]=N.useState(!1),[f,h]=N.useState("all"),d=N.useRef(null),v=t.filter(x=>!x.isRead).length;N.useEffect(()=>{const x=C=>{d.current&&!d.current.contains(C.target)&&c(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const j=t.filter(x=>f==="unread"?!x.isRead:f==="read"?x.isRead:!0),m=i?j:j.slice(0,5),y=x=>{switch(x){case"new_post":return n.jsx(zn,{className:"w-5 h-5 text-blue-500"});case"reaction":return n.jsx(Qt,{className:"w-5 h-5 text-red-500"});case"comment":return n.jsx(tt,{className:"w-5 h-5 text-green-500"});case"new_message":return n.jsx(tt,{className:"w-5 h-5 text-blue-500"});case"follow":return n.jsx(El,{className:"w-5 h-5 text-purple-500"});case"lesson_reminder":return n.jsx(bt,{className:"w-5 h-5 text-orange-500"});case"system":return n.jsx(gc,{className:"w-5 h-5 text-gray-500"});default:return n.jsx(rl,{className:"w-5 h-5 text-gray-500"})}},g=x=>{const C=new Date(x),O=Math.floor((new Date().getTime()-C.getTime())/(1e3*60));return O<1?"только что":O<60?`${O}м назад`:O<1440?`${Math.floor(O/60)}ч назад`:C.toLocaleDateString("ru-RU")},p=()=>{l&&s(l.id)},b=x=>{var C,O;x.isRead||r(x.id),x.type==="new_message"&&(C=x.data)!=null&&C.chatId?(window.location.href=`#chat-${x.data.chatId}`,c(!1)):(O=x.data)!=null&&O.postId};return n.jsxs("div",{className:`relative ${e}`,ref:d,children:[n.jsxs("button",{onClick:()=>c(!o),className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[n.jsx(rl,{className:"w-6 h-6 text-gray-600"}),v>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:v>99?"99+":v})]}),o&&n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Уведомления"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[v>0&&n.jsx("button",{onClick:p,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Отметить все как прочитанные"}),n.jsx("button",{onClick:()=>c(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-4 h-4 text-gray-500"})})]})]}),n.jsx("div",{className:"flex items-center space-x-2 mt-3",children:[{key:"all",label:"Все",count:t.length},{key:"unread",label:"Непрочитанные",count:v},{key:"read",label:"Прочитанные",count:t.length-v}].map(({key:x,label:C,count:O})=>n.jsxs("button",{onClick:()=>h(x),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${f===x?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[C," (",O,")"]},x))})]}),n.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:m.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(rl,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-500",children:[f==="all"&&"Нет уведомлений",f==="unread"&&"Нет непрочитанных уведомлений",f==="read"&&"Нет прочитанных уведомлений"]})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:m.map(x=>n.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${x.isRead?"":"bg-blue-50"}`,onClick:()=>b(x),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:y(x.type)}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.title}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.message}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:g(x.createdAt)})]}),!x.isRead&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})}),n.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[!x.isRead&&n.jsx("button",{onClick:C=>{C.stopPropagation(),r(x.id)},className:"p-1 rounded-full hover:bg-green-100 transition-colors",title:"Отметить как прочитанное",children:n.jsx(sk,{className:"w-4 h-4 text-green-600"})}),n.jsx("button",{onClick:C=>{C.stopPropagation(),a(x.id)},className:"p-1 rounded-full hover:bg-red-100 transition-colors",title:"Удалить",children:n.jsx(Cl,{className:"w-4 h-4 text-red-600"})})]})]})},x.id))})}),j.length>5&&n.jsx("div",{className:"p-4 border-t border-gray-100",children:n.jsx("button",{onClick:()=>u(!i),className:"w-full flex items-center justify-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:i?n.jsxs(n.Fragment,{children:[n.jsx(lk,{className:"w-4 h-4"}),n.jsx("span",{children:"Показать меньше"})]}):n.jsxs(n.Fragment,{children:[n.jsx(ak,{className:"w-4 h-4"}),n.jsxs("span",{children:["Показать все (",j.length,")"]})]})})})]})]})},p9=({posts:e,currentUserId:t,currentUserName:r,currentUserAvatar:s,onCreatePost:a,onReaction:l,onComment:o,onShare:c,onBookmark:i,onEdit:u,onDelete:f,showCreateButton:h=!0,title:d="Записи",showSearch:v=!0,showNotifications:j=!0,showTrending:m=!0,showBookmarks:y=!0})=>{const[g,p]=N.useState(!1),[b,x]=N.useState(!1),[C,O]=N.useState("all"),[D,_]=N.useState(e),[P,z]=N.useState([]);N.useEffect(()=>{let H=e;C==="my"?H=e.filter(T=>T.userId===t):C==="others"?H=e.filter(T=>T.userId!==t):C==="trending"?H=[...e].sort((T,V)=>{const ee=(T.likes||0)+T.comments.length;return(V.likes||0)+V.comments.length-ee}).slice(0,20):C==="bookmarks"&&(H=e.filter(T=>{var V;return(V=T.bookmarks)==null?void 0:V.includes(t)})),_(H)},[e,C,t]);const L=H=>{a(H),p(!1)};return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d}),n.jsxs("div",{className:"flex items-center space-x-2",children:[j&&n.jsx(h9,{className:"mr-2"}),v&&n.jsx("button",{onClick:()=>x(!b),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Поиск",children:n.jsx(kl,{className:"w-5 h-5"})}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:C,onChange:H=>O(H.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"all",children:"Все записи"}),n.jsx("option",{value:"my",children:"Мои записи"}),n.jsx("option",{value:"others",children:"Записи других"}),m&&n.jsx("option",{value:"trending",children:"Популярные"}),y&&n.jsx("option",{value:"bookmarks",children:"Закладки"})]}),n.jsx(am,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),h&&n.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Nl,{className:"w-4 h-4"}),n.jsx("span",{children:"Создать запись"})]})]})]}),b&&n.jsx("div",{className:"mb-6",children:n.jsx(m9,{onSearchResults:z,onClose:()=>x(!1)})}),g&&n.jsx("div",{className:"mb-6",children:n.jsx(rh,{onSubmit:L,onCancel:()=>p(!1),userName:r,userAvatar:s})}),n.jsxs("div",{className:"space-y-4",children:[P.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Результаты поиска (",P.length,")"]}),n.jsx("div",{className:"space-y-4",children:P.map(H=>n.jsx(Qd,{post:H,currentUserId:t,onReaction:l,onComment:o,onShare:c,onBookmark:i,onEdit:u,onDelete:f},H.id))})]}),D.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsxs("div",{className:"text-gray-400 text-lg mb-2",children:[C==="all"&&"Пока нет записей",C==="my"&&"У вас пока нет записей",C==="others"&&"Пока нет записей от других",C==="trending"&&"Пока нет популярных записей",C==="bookmarks"&&"У вас пока нет закладок"]}),n.jsxs("p",{className:"text-gray-500",children:[C==="my"&&h&&"Создайте первую запись!",C==="others"&&"Записи от других пользователей появятся здесь",C==="trending"&&"Популярные записи появятся здесь",C==="bookmarks"&&"Добавляйте записи в закладки!"]})]}):D.map(H=>n.jsx(Qd,{post:H,currentUserId:t,onReaction:l,onComment:o,onShare:c,onBookmark:i,onEdit:u,onDelete:f},H.id))]})]})},g9=({userId:e,onClose:t,onMessage:r,onBookLesson:s,isModal:a=!1})=>{const{user:l}=ht(),{posts:o,createPost:c,addReaction:i,addComment:u,sharePost:f,bookmarkPost:h,editPost:d,deletePost:v,allUsers:j}=$t(),[m,y]=N.useState(!1),[g,p]=N.useState(!1),[b,x]=N.useState(!1),[C,O]=N.useState("posts"),D=j.find(ee=>ee.id===e),_=(l==null?void 0:l.id)===e,P=(D==null?void 0:D.role)==="teacher",z=o.filter(ee=>ee.userId===e),L=D==null?void 0:D.profile,H=ee=>{switch(ee){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ee}},T=ee=>{switch(ee){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ee}};if(!D)return n.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(be,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пользователь не найден"}),n.jsx("p",{className:"text-gray-500",children:"Пользователь с таким ID не существует"})]})});const V=()=>{var ee;return n.jsx("div",{className:`${a?"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4":""}`,children:n.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative ${a?"":"border border-gray-200"}`,children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[t&&n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(sm,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[!_&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>p(!g),className:`p-2 rounded-full transition-colors ${g?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:n.jsx(pc,{className:`w-5 h-5 ${g?"fill-current":""}`})}),n.jsx("button",{onClick:()=>y(!m),className:`p-2 rounded-full transition-colors ${m?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:n.jsx(Qt,{className:`w-5 h-5 ${m?"fill-current":""}`})})]}),n.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Rn,{className:"w-5 h-5"})}),_&&n.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(gc,{className:"w-5 h-5"})})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"relative mb-8",children:[n.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),n.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"text-white flex-1 mr-8",children:[n.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(L==null?void 0:L.name)||D.name||"Пользователь"}),n.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[P&&(L==null?void 0:L.experience)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(an,{className:"h-4 w-4 text-yellow-300"}),n.jsx("span",{className:"font-semibold text-xs",children:H(L.experience)})]}),(L==null?void 0:L.rating)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(Br,{className:"h-4 w-4 text-yellow-300 fill-current"}),n.jsx("span",{className:"font-semibold text-xs",children:L.rating})]}),(L==null?void 0:L.city)&&n.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[n.jsx(Zt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-semibold text-xs",children:L.city})]})]})]}),n.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[n.jsx("div",{className:"text-2xl font-bold mb-1",children:z.length}),n.jsx("div",{className:"text-sm opacity-80",children:"записей"})]})]})})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[n.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[n.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[n.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),L!=null&&L.avatar&&L.avatar.trim()!==""?n.jsx("img",{src:L.avatar,alt:D.name,className:"w-36 h-36 object-cover rounded-full",onError:R=>{var F;const B=R.target;B.style.display="none",(F=B.nextElementSibling)==null||F.classList.remove("hidden")}}):null,n.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${L!=null&&L.avatar&&L.avatar.trim()!==""?"hidden":""}`,children:n.jsx(be,{className:"h-20 w-20 text-white"})})]}),!_&&n.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[n.jsx("button",{onClick:()=>y(!m),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${m?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:n.jsx(Qt,{className:`w-5 h-5 ${m?"fill-current":""}`})}),n.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:n.jsx(Rn,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[!_&&n.jsxs(n.Fragment,{children:[P&&s&&n.jsxs("button",{onClick:()=>s(D.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[n.jsx(Be,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),r&&n.jsxs("button",{onClick:()=>r(D.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[n.jsx(tt,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),n.jsxs("button",{onClick:()=>x(!b),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[n.jsx(Ln,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]}),_&&n.jsxs("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[n.jsx(Sl,{className:"h-6 w-6"}),n.jsx("span",{className:"text-lg",children:"Редактировать профиль"})]})]})]})]}),b&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[D.phone&&n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[n.jsx(xr,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-gray-700 font-medium",children:D.phone})]}),D.email&&n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[n.jsx(lm,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-gray-700 font-medium",children:D.email})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:z.length}),n.jsx("div",{className:"text-blue-100 text-xs",children:"Записей"})]}),P&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:(L==null?void 0:L.lessonsCount)||0}),n.jsx("div",{className:"text-green-100 text-xs",children:"Проведено уроков"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:((ee=L==null?void 0:L.students)==null?void 0:ee.length)||0}),n.jsx("div",{className:"text-purple-100 text-xs",children:"Учеников"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:(L==null?void 0:L.rating)||0}),n.jsx("div",{className:"text-orange-100 text-xs",children:"Рейтинг"})]})]}),!P&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),n.jsx("div",{className:"text-green-100 text-xs",children:"Посещено уроков"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),n.jsx("div",{className:"text-purple-100 text-xs",children:"Преподавателей"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[n.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),n.jsx("div",{className:"text-orange-100 text-xs",children:"Дней в системе"})]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:n.jsx("nav",{className:"flex space-x-8",children:[{id:"posts",label:"Записи",count:z.length},{id:"about",label:"О пользователе",count:null},{id:"lessons",label:P?"Расписание":"Мои уроки",count:0},{id:"reviews",label:"Отзывы",count:0}].map(R=>n.jsxs("button",{onClick:()=>O(R.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${C===R.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[R.label,R.count!==null&&n.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:R.count})]},R.id))})}),n.jsxs("div",{className:"min-h-[400px]",children:[C==="posts"&&n.jsx("div",{className:"space-y-6",children:n.jsx(p9,{posts:z,currentUserId:(l==null?void 0:l.id)||"",currentUserName:(l==null?void 0:l.name)||"",currentUserAvatar:l==null?void 0:l.avatar,onCreatePost:c,onReaction:i,onComment:u,onShare:f,onBookmark:h,onEdit:d,onDelete:v,showCreateButton:_,title:`Записи ${(L==null?void 0:L.name)||D.name}`,showSearch:!0,showNotifications:!1,showTrending:!1,showBookmarks:!0})}),C==="about"&&n.jsxs("div",{className:"space-y-3",children:[(L==null?void 0:L.bio)&&n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-indigo-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"О пользователе"]}),n.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-md p-2 border border-indigo-200/50",children:n.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line text-xs",children:L.bio})})]}),P&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[(L==null?void 0:L.subjects)&&L.subjects.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Предметы"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:L.subjects.map((R,F)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:R},F))})]}),(L==null?void 0:L.grades)&&L.grades.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Классы"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:L.grades.map((R,F)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-0.5 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:R},F))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2.5",children:[(L==null?void 0:L.hourlyRate)&&n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-2.5 text-center shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-purple-900 mb-1.5 flex items-center justify-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-purple-500 to-violet-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Стоимость"]}),n.jsxs("div",{className:"text-base font-bold text-purple-700 bg-white/60 backdrop-blur-sm rounded-md py-1 px-1.5 border border-purple-200/50",children:[L.hourlyRate," ₽/час"]})]}),(L==null?void 0:L.formats)&&L.formats.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-orange-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-orange-500 to-amber-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Форматы"]}),n.jsx("div",{className:"space-y-1",children:L.formats.map((R,F)=>n.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-orange-200/50",children:[n.jsx(Or,{className:"h-3 w-3 text-orange-600"}),n.jsx("span",{className:"text-orange-800 text-xs font-medium",children:T(R)})]},F))})]}),(L==null?void 0:L.durations)&&L.durations.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-cyan-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Длительность"]}),n.jsx("div",{className:"space-y-1",children:L.durations.map((R,F)=>n.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-cyan-200/50",children:[n.jsx(Or,{className:"h-3 w-3 text-cyan-600"}),n.jsxs("span",{className:"text-cyan-800 text-xs font-medium",children:[R," минут"]})]},F))})]})]})]}),!P&&L&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[L.subjects&&L.subjects.length>0&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Интересуется предметами"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:L.subjects.map((R,F)=>n.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:R},F))})]}),L.grade&&n.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[n.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[n.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Класс"]}),n.jsx("div",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-1 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:L.grade})]})]})]}),C==="lessons"&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(bt,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:P?"Расписание пока не настроено":"Уроки пока не запланированы"}),n.jsx("p",{className:"text-gray-500",children:P?"Настройте расписание для проведения уроков":"Запишитесь на уроки к преподавателям"})]}),C==="reviews"&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Br,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),n.jsx("p",{className:"text-gray-500",children:"Отзывы о пользователе появятся здесь"})]})]})]})]})})};return a?n.jsx(V,{}):n.jsx(V,{})};async function cx(e){try{const t=JSON.parse(localStorage.getItem("tutoring_studentProfiles")||"{}");if(t[e])return console.log(" Found student profile in localStorage:",t[e]),t[e];const r=JSON.parse(localStorage.getItem("tutoring_users")||"[]").find(s=>s.id===e&&s.role==="student");if(r!=null&&r.profile)return console.log(" Found student profile in users list:",r.profile),r.profile;try{console.log(" Loading student profile from server for ID:",e);const s=await fetch(`${Fe}/api/students/${e}`);if(s.ok){const a=await s.json();console.log(" Loaded student profile from server:",a);const l={...t,[e]:a};return localStorage.setItem("tutoring_studentProfiles",JSON.stringify(l)),a}}catch(s){console.warn(" Failed to load student profile from server:",s)}return}catch(t){console.error(" Error getting student profile:",t);return}}const Lo=({icon:e,value:t,label:r,color:s})=>n.jsxs("div",{className:`${s} rounded-xl p-4 text-center`,children:[n.jsx("div",{className:"w-8 h-8 mx-auto mb-2 flex items-center justify-center",children:e}),n.jsx("div",{className:"text-2xl font-bold",children:t}),n.jsx("div",{className:"text-sm text-gray-600",children:r})]}),Gn=({icon:e,label:t,value:r,fallback:s="Не указано"})=>n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"text-gray-400",children:e}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium text-gray-700",children:[t,":"]})," ",n.jsx("span",{children:r||s})]})]}),Fa=({items:e,color:t,emptyMessage:r})=>!e||e.length===0?r?n.jsx("span",{className:"text-gray-500 text-sm",children:r}):null:n.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((s,a)=>n.jsx("span",{className:`${t} px-3 py-1 rounded-full text-sm`,children:s},a))}),x9=()=>{var e,t,r,s,a;const{user:l}=ht(),{lessons:o,createSlot:c,studentProfiles:i}=$t(),[u,f]=N.useState(null),[h,d]=N.useState(!1),[v,j]=N.useState(!1),[m,y]=N.useState(null),[g,p]=N.useState({subject:"",date:"",startTime:"",endTime:"",duration:60,lessonType:"regular",format:"online",price:1e3,experience:"beginner",grades:[],goals:[]}),[b,x]=N.useState(!1),[C,O]=N.useState(""),[D,_]=N.useState(!1),[P,z]=N.useState(null),[L,H]=N.useState(null),[T,V]=N.useState(null),[ee,R]=N.useState(!1),F=o.filter(Y=>Y.teacherId===(l==null?void 0:l.id)),B={};F.forEach(Y=>{B[Y.studentId]||(B[Y.studentId]={studentName:Y.studentName,studentId:Y.studentId,lessons:[]}),B[Y.studentId].lessons.push(Y)});const G=Object.values(B);N.useEffect(()=>{(async()=>{if(u){R(!0),console.log(" Loading profile for student:",u.studentId);let Y=i[u.studentId];Y||(Y=await cx(u.studentId)),console.log(" Profile loaded:",Y),V(Y||null),R(!1)}})()},[u,i]);const ae=(Y,ge)=>{alert(`Чат с ${ge} открыт! Перейдите в раздел "Чаты" для общения.`)},q=Y=>{f(Y),d(!0)},ie=()=>{d(!1),f(null),V(null)},Se=async()=>{if(u){R(!0);try{console.log(" Refreshing student profile from server...");const Y=await cx(u.studentId);V(Y||null)}catch(Y){console.error(" Error refreshing student profile:",Y)}finally{R(!1)}}},he=Y=>{z(Y),_(!0)},je=async()=>{if(!(!l||!m)){x(!0),O("");try{await c({...g,teacherId:l.id,teacherName:l.name},m.id,m.name,{mode:"assign"}),j(!1)}catch(Y){O(Y.message||"Ошибка при создании урока")}finally{x(!1)}}},J=(Y=>{var ge,ne,$e;if(!Y)return 0;const ze=[Y.grade,Y.age,Y.school,Y.city,Y.phone,Y.parentName,Y.parentPhone,(ge=Y.subjects)==null?void 0:ge.length,(ne=Y.goals)==null?void 0:ne.length,($e=Y.interests)==null?void 0:$e.length,Y.learningStyle,Y.experience,Y.bio],pt=ze.filter(ct=>ct&&(Array.isArray(ct)?ct.length>0:!0)).length;return Math.round(pt/ze.length*100)})(T);return n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ученики"}),n.jsx("p",{className:"text-gray-600",children:"Здесь отображаются все ученики, которые бронировали у вас уроки, и история ваших занятий с ними"})]}),G.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(El,{className:"h-6 w-6 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет учеников"}),n.jsx("p",{className:"text-gray-600",children:"Ученики появятся здесь после того, как забронируют у вас уроки"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(Y=>n.jsx("div",{className:"card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden cursor-pointer",onClick:()=>q(Y),children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:n.jsx(be,{className:"h-6 w-6 text-white"})}),n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Y.studentName})}),n.jsxs("div",{className:"ml-auto flex items-center space-x-1",children:[n.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Просмотреть записи",onClick:ge=>{ge.stopPropagation(),H(Y.studentId)},children:n.jsx(zn,{className:"h-5 w-5"})}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Подробнее о профиле",onClick:ge=>{ge.stopPropagation(),q(Y)},children:n.jsx(dk,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Уроки:"}),Y.lessons.length>0?n.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[Y.lessons.slice(0,3).map((ge,ne)=>n.jsxs("li",{className:"flex justify-between",children:[n.jsx("span",{children:ge.subject}),n.jsx("span",{className:"text-gray-400",children:ge.date})]},ge.id)),Y.lessons.length>3&&n.jsxs("li",{className:"text-gray-400 text-xs",children:["и еще ",Y.lessons.length-3," уроков..."]})]}):n.jsx("p",{className:"text-sm text-gray-500",children:"Нет уроков"})]})]})},Y.studentId))}),h&&u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-5xl w-full max-h-[95vh] overflow-y-auto relative",children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:ie,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-6 h-6 text-gray-600"})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("button",{onClick:Se,disabled:ee,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors flex items-center space-x-2 disabled:opacity-50",title:"Обновить данные",children:[n.jsx(Ri,{className:`w-4 h-4 ${ee?"animate-spin":""}`}),n.jsx("span",{children:"Обновить"})]}),n.jsxs("button",{onClick:()=>ae(u.studentId,u.studentName),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[n.jsx(tt,{className:"w-4 h-4"}),n.jsx("span",{children:"Написать"})]}),n.jsxs("button",{onClick:()=>he({id:u.studentId,name:u.studentName}),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[n.jsx(bt,{className:"w-4 h-4"}),n.jsx("span",{children:"Назначить урок"})]})]})]})}),n.jsx("div",{className:"p-6",children:ee?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ri,{className:"w-8 h-8 mx-auto mb-4 animate-spin text-blue-500"}),n.jsx("p",{className:"text-gray-600",children:"Загружаем данные профиля..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-8",children:[n.jsxs("div",{className:"flex flex-col items-center lg:items-start",children:[T!=null&&T.avatar&&T.avatar.trim()!==""?n.jsx("img",{src:T.avatar,alt:"avatar",className:"w-32 h-32 rounded-full object-cover mb-4",onError:Y=>{var ge;const ne=Y.target;ne.style.display="none",(ge=ne.nextElementSibling)==null||ge.classList.remove("hidden")}}):null,n.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center mb-4",children:n.jsx(be,{className:"h-16 w-16 text-white"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:u.studentName}),n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[J>70?n.jsx(Gs,{className:"w-5 h-5 text-green-500"}):J>30?n.jsx(Sp,{className:"w-5 h-5 text-yellow-500"}):n.jsx(Sp,{className:"w-5 h-5 text-red-500"}),n.jsxs("span",{className:`text-sm font-medium ${J>70?"text-green-600":J>30?"text-yellow-600":"text-red-600"}`,children:["Профиль заполнен на ",J,"%"]})]}),(T==null?void 0:T.grade)&&n.jsxs("div",{className:"flex items-center text-lg text-gray-600 mb-2",children:[n.jsx(as,{className:"w-5 h-5 mr-2"}),n.jsxs("span",{children:[T.grade," класс"]})]}),(T==null?void 0:T.age)&&n.jsxs("div",{className:"text-gray-600 mb-2",children:[n.jsx("span",{className:"font-medium",children:"Возраст:"})," ",T.age," лет"]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Lo,{icon:n.jsx(Be,{className:"w-8 h-8 text-blue-500"}),value:((e=B[u.studentId])==null?void 0:e.lessons.length)||0,label:"Всего уроков",color:"bg-blue-50"}),n.jsx(Lo,{icon:n.jsx(an,{className:"w-8 h-8 text-green-500"}),value:((t=B[u.studentId])==null?void 0:t.lessons.filter(Y=>Y.status==="completed").length)||0,label:"Завершено",color:"bg-green-50"}),n.jsx(Lo,{icon:n.jsx(El,{className:"w-8 h-8 text-purple-500"}),value:((r=T==null?void 0:T.subjects)==null?void 0:r.length)||0,label:"Предметов",color:"bg-purple-50"}),n.jsx(Lo,{icon:n.jsx(Jl,{className:"w-8 h-8 text-orange-500"}),value:T!=null&&T.experience?T.experience==="beginner"?"Начинающий":T.experience==="intermediate"?"Средний":"Продвинутый":"Не указан",label:"Уровень",color:"bg-orange-50"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(be,{className:"w-5 h-5 mr-2 text-blue-500"}),"Личная информация"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Gn,{icon:n.jsx(om,{className:"w-4 h-4"}),label:"Школа",value:(T==null?void 0:T.school)||"",fallback:"Не указана"}),n.jsx(Gn,{icon:n.jsx(Zt,{className:"w-4 h-4"}),label:"Город",value:(T==null?void 0:T.city)||"",fallback:"Не указан"}),n.jsx(Gn,{icon:n.jsx(xr,{className:"w-4 h-4"}),label:"Телефон",value:(T==null?void 0:T.phone)||"",fallback:"Не указан"}),n.jsx(Gn,{icon:n.jsx(be,{className:"w-4 h-4"}),label:"Родитель",value:(T==null?void 0:T.parentName)||"",fallback:"Не указан"}),n.jsx(Gn,{icon:n.jsx(xr,{className:"w-4 h-4"}),label:"Телефон родителя",value:(T==null?void 0:T.parentPhone)||"",fallback:"Не указан"}),n.jsx(Gn,{icon:n.jsx(Or,{className:"w-4 h-4"}),label:"Часовой пояс",value:(T==null?void 0:T.timeZone)||"",fallback:"Не указан"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(Be,{className:"w-5 h-5 mr-2 text-green-500"}),"Учебная информация"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 block mb-2",children:"Изучаемые предметы:"}),n.jsx(Fa,{items:(T==null?void 0:T.subjects)||[],color:"bg-blue-100 text-blue-800",emptyMessage:"Не указаны"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 block mb-2",children:"Цели обучения:"}),n.jsx(Fa,{items:(T==null?void 0:T.goals)||[],color:"bg-green-100 text-green-800",emptyMessage:"Не указаны"})]}),n.jsx(Gn,{icon:n.jsx(cm,{className:"w-4 h-4"}),label:"Стиль обучения",value:(T==null?void 0:T.learningStyle)==="visual"?"Визуальный":(T==null?void 0:T.learningStyle)==="auditory"?"Аудиальный":(T==null?void 0:T.learningStyle)==="kinesthetic"?"Кинестетический":(T==null?void 0:T.learningStyle)==="mixed"?"Смешанный":"",fallback:"Не указан"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 block mb-2",children:"Предпочитаемые форматы:"}),n.jsx(Fa,{items:(T==null?void 0:T.preferredFormats)||[],color:"bg-purple-100 text-purple-800",emptyMessage:"Не указаны"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700 block mb-2",children:"Предпочитаемая длительность:"}),n.jsx(Fa,{items:((s=T==null?void 0:T.preferredDurations)==null?void 0:s.map(Y=>`${Y} мин`))||[],color:"bg-orange-100 text-orange-800",emptyMessage:"Не указана"})]})]})]}),(T==null?void 0:T.interests)&&T.interests.length>0&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(Qt,{className:"w-5 h-5 mr-2 text-red-500"}),"Интересы и хобби"]}),n.jsx(Fa,{items:T.interests,color:"bg-red-100 text-red-800"})]}),(T==null?void 0:T.bio)&&n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(zn,{className:"w-5 h-5 mr-2 text-indigo-500"}),"О себе"]}),n.jsx("p",{className:"text-gray-700 leading-relaxed",children:T.bio})]})]}),((a=B[u.studentId])==null?void 0:a.lessons)&&B[u.studentId].lessons.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[n.jsx(bt,{className:"w-5 h-5 mr-2 text-blue-500"}),"История уроков"]}),n.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden",children:n.jsx("div",{className:"max-h-64 overflow-y-auto",children:B[u.studentId].lessons.map((Y,ge)=>n.jsx("div",{className:"p-4 border-b border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:Y.subject}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Y.date," в ",Y.startTime,"-",Y.endTime]}),Y.comment&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Y.comment})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y.status==="completed"?"bg-green-100 text-green-800":Y.status==="scheduled"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:Y.status==="completed"?"Завершен":Y.status==="scheduled"?"Запланирован":"Отменен"}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Y.price," ₽"]})]})]})},Y.id))})})]}),!T&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(be,{className:"h-6 w-6 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Профиль не заполнен"}),n.jsx("p",{className:"text-gray-600",children:"Ученик еще не заполнил информацию о себе"})]})]})})]})}),v&&m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[n.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>j(!1),title:"Закрыть",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsxs("h3",{children:["Назначить урок для ",m.name]}),n.jsxs("form",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"text",placeholder:"Предмет",value:g.subject,onChange:Y=>p({...g,subject:Y.target.value}),required:!0}),n.jsx("input",{type:"date",value:g.date,onChange:Y=>p({...g,date:Y.target.value}),required:!0}),n.jsx("input",{type:"time",value:g.startTime,onChange:Y=>p({...g,startTime:Y.target.value}),required:!0}),n.jsx("input",{type:"time",value:g.endTime,onChange:Y=>p({...g,endTime:Y.target.value}),required:!0}),n.jsx("input",{type:"number",placeholder:"Цена",value:g.price,onChange:Y=>p({...g,price:Number(Y.target.value)})}),n.jsxs("select",{value:g.lessonType,onChange:Y=>p({...g,lessonType:Y.target.value}),children:[n.jsx("option",{value:"regular",children:"Обычный"}),n.jsx("option",{value:"trial",children:"Пробный"})]}),n.jsxs("select",{value:g.format,onChange:Y=>p({...g,format:Y.target.value}),children:[n.jsx("option",{value:"online",children:"Онлайн"}),n.jsx("option",{value:"offline",children:"Оффлайн"})]}),n.jsxs("select",{value:g.experience,onChange:Y=>p({...g,experience:Y.target.value}),children:[n.jsx("option",{value:"beginner",children:"Начинающий"}),n.jsx("option",{value:"experienced",children:"Опытный"})]}),C&&n.jsx("div",{className:"text-red-500",children:C}),n.jsx("button",{type:"button",className:"btn btn-success mt-2",onClick:je,disabled:b,children:b?"Назначение...":"Назначить"})]})]})}),D&&P&&n.jsx(_s,{open:D,onClose:()=>_(!1),children:n.jsxs("div",{style:{minWidth:1100,minHeight:600,maxWidth:"98vw"},children:[n.jsxs("h2",{style:{marginBottom:16},children:["Назначить урок для ",P.name]}),n.jsx(t1,{mode:"assign",student:P,onAssign:()=>_(!1)})]})}),L&&n.jsx(g9,{userId:L,onClose:()=>H(null),onMessage:Y=>{H(null)},onBookLesson:Y=>{H(null)},isModal:!0})]})},v9=()=>{var e,t;const{user:r}=ht(),[s,a]=N.useState([]),[l,o]=N.useState(""),[c,i]=N.useState(""),[u,f]=N.useState([]),[h,d]=N.useState(null),[v,j]=N.useState(""),m=r?`teacher_materials_${r.id}`:void 0;N.useEffect(()=>{if(m)try{const x=localStorage.getItem(m);x&&a(JSON.parse(x))}catch{}},[m]),N.useEffect(()=>{if(m)try{localStorage.setItem(m,JSON.stringify(s))}catch{}},[s,m]);const y=x=>{const C=Array.from(x.target.files||[]);f(C)},g=async()=>{if(!l.trim()&&u.length===0&&!c.trim())return;const x=await Promise.all(u.map(D=>new Promise(_=>{const P=new FileReader;P.onload=()=>{_({id:Math.random().toString(36).slice(2),title:l.trim()||D.name,fileName:D.name,fileType:D.type,dataUrl:String(P.result||""),createdAt:new Date().toISOString()})},P.readAsDataURL(D)}))),C=[c.trim()?{id:Math.random().toString(36).slice(2),title:l.trim()||c.trim(),url:c.trim(),createdAt:new Date().toISOString()}:null,...x].filter(Boolean);if(C.length===0)return;a(D=>[...C,...D]),o(""),i(""),f([]);const O=document.getElementById("materials-file-input");O&&(O.value="")},p=x=>{a(C=>C.filter(O=>O.id!==x))},b=(x,C)=>{a(O=>O.map(D=>D.id===x?{...D,title:C.trim()||D.title}:D))};return n.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Материалы"}),n.jsx("p",{className:"text-gray-600",children:"Сохраняйте ссылки и описания материалов для занятий"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("input",{value:l,onChange:x=>o(x.target.value),placeholder:"Название материала",className:"input-modern w-full"}),n.jsx("input",{value:c,onChange:x=>i(x.target.value),placeholder:"Ссылка (необязательно)",className:"input-modern w-full"}),n.jsx("input",{id:"materials-file-input",type:"file",multiple:!0,onChange:y,className:"input-modern w-full",accept:".pdf,.doc,.docx,.ppt,.pptx,image/*,.txt,.xlsx,.xls,.csv,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf"}),n.jsx("button",{onClick:g,className:"btn-primary",children:"Добавить"})]}),u.length>0&&n.jsxs("div",{className:"mt-3 text-xs text-gray-600",children:["Выбрано файлов: ",u.length]}),n.jsx("div",{className:"mt-4",children:n.jsx("input",{value:v,onChange:x=>j(x.target.value),placeholder:"Поиск по названию или ссылке",className:"input-modern w-full"})})]}),n.jsx("div",{className:"space-y-3",children:s.length===0?n.jsx("div",{className:"text-gray-500 text-center py-12 bg-white rounded-2xl shadow",children:"Пока нет материалов"}):s.filter(x=>{const C=v.trim().toLowerCase();return C?x.title.toLowerCase().includes(C)||(x.url?x.url.toLowerCase().includes(C):!1)||(x.fileName?x.fileName.toLowerCase().includes(C):!1):!0}).map(x=>n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx(b9,{title:x.title,onSave:C=>b(x.id,C)}),x.url&&n.jsx("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 text-sm break-all",children:x.url}),x.dataUrl&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[x.fileName," ",x.fileType&&`• ${x.fileType}`]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[(x.dataUrl||x.url)&&n.jsx("button",{onClick:()=>{x.dataUrl?d(x):x.url&&window.open(x.url,"_blank")},className:"text-blue-600 hover:text-blue-700",children:"Открыть"}),x.dataUrl&&n.jsx("a",{href:x.dataUrl,download:x.fileName||"material",className:"text-blue-600 hover:text-blue-700",children:"Скачать"}),n.jsx("button",{onClick:()=>p(x.id),className:"text-red-600 hover:text-red-700",children:"Удалить"})]})]},x.id))}),h&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full h-[80vh] overflow-hidden relative",onClick:x=>x.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[n.jsx("div",{className:"font-semibold truncate pr-4",children:h.title}),n.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>d(null),children:"Закрыть"})]}),n.jsxs("div",{className:"w-full h-[calc(80vh-52px)] bg-gray-50 flex items-center justify-center",children:[h.dataUrl&&((e=h.fileType)==null?void 0:e.startsWith("image/"))&&n.jsx("img",{src:h.dataUrl,alt:h.title,className:"max-h-full max-w-full object-contain"}),h.dataUrl&&h.fileType==="application/pdf"&&n.jsx("iframe",{title:"pdf",src:h.dataUrl,className:"w-full h-full"}),h.dataUrl&&((t=h.fileType)==null?void 0:t.startsWith("text/"))&&n.jsx("iframe",{title:"text",src:h.dataUrl,className:"w-full h-full bg-white"}),h.dataUrl&&!/^(image\/|application\/pdf|text\/).*/.test(h.fileType||"")&&n.jsx("div",{className:"p-6 text-center text-gray-600",children:"Онлайн-просмотр для этого формата не поддерживается. Скачайте файл для просмотра."}),h.url&&!h.dataUrl&&n.jsx("iframe",{title:"url",src:h.url,className:"w-full h-full bg-white"})]})]})})]})},b9=({title:e,onSave:t})=>{const[r,s]=N.useState(!1),[a,l]=N.useState(e);return N.useEffect(()=>l(e),[e]),r?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{value:a,onChange:o=>l(o.target.value),onKeyDown:o=>{o.key==="Enter"&&(t(a),s(!1))},className:"input-modern",autoFocus:!0}),n.jsx("button",{className:"btn-primary",onClick:()=>{t(a),s(!1)},children:"OK"}),n.jsx("button",{className:"btn-secondary",onClick:()=>{l(e),s(!1)},children:"Отмена"})]}):n.jsx("div",{className:"font-semibold text-gray-900 truncate max-w-md",title:e,onDoubleClick:()=>s(!0),children:e})},y9=({setActiveTab:e})=>{const{lessons:t,cancelLesson:r,rescheduleLesson:s,getOrCreateChat:a}=$t(),{user:l}=ht(),[o,c]=N.useState(!1),[i,u]=N.useState(null),[f,h]=N.useState(""),[d,v]=N.useState(""),j=t.filter(P=>P.studentId===(l==null?void 0:l.id)),m=j.filter(P=>P.status==="scheduled"),y=j.filter(P=>P.status==="completed"),g=(P,z)=>{l&&a(l.id,P,l.name,z)},p=P=>{window.confirm("Вы уверены, что хотите отменить урок?")&&r(P)},b=()=>{i&&f&&d&&(s(i.id,f,d),c(!1),u(null),h(""),v(""))},x=P=>{u(P),h(P.date),v(P.startTime),c(!0)},C=P=>{switch(P){case"online":return n.jsx(ln,{className:"h-4 w-4"});case"offline":return n.jsx(Zt,{className:"h-4 w-4"});case"mini-group":return n.jsx(El,{className:"h-4 w-4"});default:return n.jsx(ln,{className:"h-4 w-4"})}},O=P=>{switch(P){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return P}},D=P=>P==="scheduled"?n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:[n.jsx(yk,{className:"h-4 w-4 mr-2"}),"Запланирован"]}):n.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-green-500 to-green-600 text-white shadow-sm",children:[n.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Завершен"]}),_=({lesson:P,isScheduled:z})=>n.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-4 text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white opacity-10 rounded-full translate-y-8 -translate-x-8"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold mb-1",children:P.subject}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(be,{className:"h-4 w-4 text-blue-200"}),n.jsx("span",{className:"text-blue-100 text-sm font-medium",children:P.teacherName})]})]}),D(P.status)]}),n.jsxs("div",{className:"flex items-center space-x-3 text-blue-100",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[C(P.format),n.jsx("span",{className:"text-xs font-medium",children:O(P.format)})]}),P.lessonType==="trial"&&n.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-400 bg-opacity-20 px-2 py-1 rounded-full",children:[n.jsx(Br,{className:"h-3 w-3 text-yellow-300"}),n.jsx("span",{className:"text-yellow-200 text-xs font-medium",children:"Пробный"})]})]})]})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:n.jsx(bt,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Дата"}),n.jsx("p",{className:"text-sm font-semibold text-gray-900",children:P.date})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:n.jsx(Or,{className:"h-4 w-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Время"}),n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[P.startTime," - ",P.endTime]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:n.jsx(jk,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Длительность"}),n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[P.duration," мин"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Стоимость"}),n.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[P.price,"₽"]})]})]}),z&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:()=>g(P.teacherId,P.teacherName),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[n.jsx(tt,{className:"h-4 w-4"}),n.jsx("span",{children:"Чат"})]}),P.format==="online"&&n.jsxs("button",{className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[n.jsx(ln,{className:"h-4 w-4"}),n.jsx("span",{children:"Видеозвонок"})]})]}),n.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[n.jsxs("button",{onClick:()=>x(P),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg text-sm font-medium transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[n.jsx(Sl,{className:"h-3 w-3"}),n.jsx("span",{children:"Перенести"})]}),n.jsxs("button",{onClick:()=>p(P.id),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-all duration-200 border border-red-200 hover:border-red-300",children:[n.jsx(Cl,{className:"h-3 w-3"}),n.jsx("span",{children:"Отменить"})]})]})]}),!z&&n.jsxs("div",{className:"flex items-center justify-center space-x-2 py-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[n.jsx(Gs,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Урок успешно завершен"})]})]}),n.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:n.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Мои уроки"}),n.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Управляйте вашими запланированными и завершенными уроками. Отслеживайте прогресс и достигайте новых высот в обучении."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(bt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xl font-bold text-gray-900",children:m.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Запланировано"})]})]})}),n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Gs,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xl font-bold text-gray-900",children:y.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Завершено"})]})]})}),n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Jl,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xl font-bold text-gray-900",children:j.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Всего уроков"})]})]})})]}),n.jsxs("div",{className:"mb-12",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(bt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Запланированные уроки"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ваши предстоящие занятия"})]})]}),m.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(P=>n.jsx(_,{lesson:P,isScheduled:!0},P.id))}):n.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(bt,{className:"h-8 w-8 text-blue-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет запланированных уроков"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"Забронируйте свой первый урок на главной странице и начните свой путь к знаниям"}),n.jsxs("button",{onClick:()=>{console.log("🎯 Переход к главной странице для бронирования урока"),e("home")},className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[n.jsx(kk,{className:"h-4 w-4"}),n.jsx("span",{children:"Забронировать урок"})]})]})]}),n.jsxs("div",{className:"mb-12",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(an,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Завершенные уроки"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ваши достижения и пройденный материал"})]})]}),y.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(P=>n.jsx(_,{lesson:P,isScheduled:!1},P.id))}):n.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[n.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(an,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет завершенных уроков"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"После завершения уроков здесь будут отображаться ваши достижения и прогресс"}),n.jsxs("div",{className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium",children:[n.jsx(cm,{className:"h-4 w-4"}),n.jsx("span",{children:"Достижения появятся здесь"})]})]})]}),n.jsx("div",{className:"text-center py-12 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl text-white shadow-xl",children:n.jsxs("div",{className:"max-w-xl mx-auto px-6",children:[n.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Готовы к следующему уроку?"}),n.jsx("p",{className:"text-lg text-blue-100 mb-6",children:"Продолжайте обучение и достигайте новых высот вместе с нашими преподавателями"}),n.jsxs("button",{onClick:()=>{console.log("🔍 Переход к главной странице для поиска преподавателя"),e("home")},className:"inline-flex items-center space-x-2 px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[n.jsx(xk,{className:"h-5 w-5"}),n.jsx("span",{children:"Найти преподавателя"})]})]})})]}),o&&i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Перенести урок"}),n.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Урок:"})," ",i.subject," с ",i.teacherName]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новая дата"}),n.jsx("input",{type:"date",value:f,onChange:P=>h(P.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",min:new Date().toISOString().split("T")[0]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новое время"}),n.jsx("input",{type:"time",value:d,onChange:P=>v(P.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsx("button",{onClick:b,disabled:!f||!d,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Перенести урок"}),n.jsx("button",{onClick:()=>c(!1),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Отмена"})]})]})})})]})},j9=()=>{const{chats:e,sendMessage:t,sendMessageToUser:r,allUsers:s,setAllUsers:a,teacherProfiles:l,studentProfiles:o,lessons:c,deleteChat:i,markChatAsRead:u,clearChatMessages:f,archiveChat:h,unarchiveChat:d,getOrCreateChat:v,loadChatsFromServer:j}=$t(),{user:m}=ht(),[y,g]=N.useState(null),[p,b]=N.useState(""),[x,C]=N.useState(""),[O,D]=N.useState(!1),[_,P]=N.useState(null),[z,L]=N.useState([]),[H,T]=N.useState(null),[V,ee]=N.useState(null),[R,F]=N.useState(!1),[B,G]=N.useState(!1),[ae,q]=N.useState(!1),[ie,Se]=N.useState(!1),[he,je]=N.useState(!1),[J,Y]=N.useState(""),ge=N.useRef(null),ne=N.useRef(null),{socketRef:$e}=$t(),ze=()=>{var U;(U=ge.current)==null||U.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{ze()},[y,e]),N.useEffect(()=>{m&&(console.log("ChatList: Loading chats for user:",m.id),j())},[m,j]),N.useEffect(()=>{if(e.length>0&&!y){const U=e.find(Q=>Q.participants.includes((m==null?void 0:m.id)||"")&&!Q.archived);U&&g(U.id)}},[e,y,m]),N.useEffect(()=>{var U;if(y&&m){const Q=e.find(me=>me.id===y);Q&&(U=Q.messages)!=null&&U.some(me=>me.senderId!==m.id&&!me.isRead)&&u(y)}},[y,e,m,u]);const pt=U=>{let Q=s.find(me=>me.id===U);if(!Q){const me=l?l[U]:null;me&&(Q={id:U,role:"teacher",profile:me,avatar:me.avatar||"",name:me.name||"",email:me.email||"",nickname:""});const Qe=o?o[U]:null;if(!Q&&Qe&&(Q={id:U,role:"student",profile:Qe,avatar:Qe.avatar||"",name:Qe.name||"",email:Qe.email||"",nickname:""}),Q){const Tt=[...s,Q];a(Tt),localStorage.setItem("tutoring_users",JSON.stringify(Tt))}}return Q||null},ct=e.filter(U=>U.participants.includes((m==null?void 0:m.id)||""));console.log("🔍 ChatList DEBUG INFO:"),console.log("- Current user:",{id:m==null?void 0:m.id,name:m==null?void 0:m.name,role:m==null?void 0:m.role}),console.log("- All chats count:",e.length),console.log("- User chats count:",ct.length),e.length>0&&(console.log("- All chats details:"),e.forEach((U,Q)=>{var me;console.log(`  Chat ${Q+1}:`,{id:U.id,participants:U.participants,participantNames:U.participantNames,includesUser:U.participants.includes((m==null?void 0:m.id)||""),messagesCount:((me=U.messages)==null?void 0:me.length)||0})}));const X=ct.filter(U=>{if(U.archived&&!ie||!U.archived&&ie)return!1;const Q=U.participantNames.find(me=>me!==(m==null?void 0:m.name));return Q==null?void 0:Q.toLowerCase().includes(x.toLowerCase())});console.log("- Filtered chats count:",X.length),console.log("🔍 END DEBUG INFO");const Ne=y?e.find(U=>U.id===y):null,ye=()=>{!p.trim()||!y||!m||(t(y,m.id,m.name,p.trim()),b(""),F(!1))},Ge=(U,Q)=>{if(!J.trim()||!m)return;console.log("🔍 ChatList handleSendMessageToUser DEBUG:"),console.log("- Sender:",{id:m.id,name:m.name}),console.log("- Receiver:",{id:U,name:Q}),console.log("- Message:",J.trim());const me=r(m.id,m.name,U,Q,J.trim());console.log("- Chat created/opened with ID:",me),g(me),Y(""),je(!1),console.log("🔍 END ChatList handleSendMessageToUser DEBUG")},We=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),ye())},rt=U=>U.participantNames.find(Q=>Q!==(m==null?void 0:m.name))||"Неизвестный пользователь",Te=U=>U.participants.find(Q=>Q!==(m==null?void 0:m.id))||"",gt=U=>{try{const Q=new Date(U);return lx(Q)?dt(Q,"HH:mm",{locale:dr}):ox(Q)?"Вчера":k7(Q)?dt(Q,"EEEE",{locale:dr}):dt(Q,"dd.MM.yyyy",{locale:dr})}catch{return""}},jr=U=>{try{const Q=new Date(U);return lx(Q)?dt(Q,"HH:mm",{locale:dr}):ox(Q)?"Вчера":dt(Q,"dd.MM",{locale:dr})}catch{return""}},k=U=>{console.log("handleDeleteChat called with chatId:",U),console.log("Current chats in component:",e.length);const Q=e.find(Qe=>Qe.id===U),me=Q?rt(Q):"пользователем";if(confirm(`Вы уверены, что хотите удалить чат с ${me}? Это действие нельзя отменить.`))try{console.log("User confirmed deletion. Deleting chat:",U),i(U),y===U&&(console.log("Removing selection from deleted chat"),g(null)),T(null),ee(null),setTimeout(()=>{console.log("Forcing state update after chat deletion"),T(null)},100),console.log("Chat deletion process completed")}catch(Qe){console.error("Error deleting chat:",Qe),alert("Ошибка при удалении чата. Попробуйте еще раз.")}else console.log("User cancelled chat deletion")},$=U=>{console.log("handleMarkAsRead called with chatId:",U);try{u(U),T(null),console.log("Chat marked as read successfully")}catch(Q){console.error("Error marking chat as read:",Q),alert("Ошибка при отметке чата как прочитанного.")}},w=U=>{var Q;console.log("handleClearMessages called with chatId:",U);const me=e.find(Tt=>Tt.id===U),Qe=((Q=me==null?void 0:me.messages)==null?void 0:Q.length)||0;if(Qe===0){alert("В этом чате нет сообщений для очистки."),T(null);return}if(confirm(`Вы уверены, что хотите очистить все ${Qe} сообщений в этом чате? Это действие нельзя отменить.`))try{console.log("Clearing messages for chat:",U),f(U),T(null),console.log("Messages cleared successfully")}catch(Tt){console.error("Error clearing messages:",Tt),alert("Ошибка при очистке сообщений.")}},E=U=>{console.log("handleArchiveChat called with chatId:",U);try{h(U),T(null),y===U&&g(null),console.log("Chat archived successfully")}catch(Q){console.error("Error archiving chat:",Q),alert("Ошибка при архивировании чата.")}},S=U=>{console.log("handleUnarchiveChat called with chatId:",U);try{d(U),T(null),console.log("Chat unarchived successfully")}catch(Q){console.error("Error unarchiving chat:",Q),alert("Ошибка при восстановлении чата.")}},I=()=>{alert("Функция создания нового чата будет добавлена в следующем обновлении.")},W=U=>{const Q=U.target.files;Q&&Q.length>0&&console.log("Files to upload:",Q),q(!1)},te=U=>{console.log("handleShowProfile called with chatId:",U);try{const Q=e.find(me=>me.id===U);if(console.log("Found chat:",Q),Q){const me=Te(Q);console.log("Other participant ID:",me),me?(P(me),D(!0),console.log("Profile modal opened for user:",me)):alert("Не удалось определить пользователя для показа профиля.")}else alert("Чат не найден.");T(null)}catch(Q){console.error("Error showing profile:",Q),alert("Ошибка при открытии профиля пользователя."),T(null)}},Ce=()=>{e.filter(U=>{var Q;return U.participants.includes((m==null?void 0:m.id)||"")&&!U.archived&&((Q=U.messages)==null?void 0:Q.some(me=>me.senderId!==(m==null?void 0:m.id)&&!me.isRead))}).forEach(U=>{u(U.id)})};N.useEffect(()=>{const U=Q=>{const me=Q.target,Qe=me.closest('button[onClick*="setShowChatMenu"]'),Tt=me.closest(".chat-menu");H&&!Qe&&!Tt&&(console.log("Click outside menu detected, closing menu"),T(null))};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[H]);const pe=e.filter(U=>{var Q;return U.participants.includes((m==null?void 0:m.id)||"")&&!U.archived&&((Q=U.messages)==null?void 0:Q.some(me=>me.senderId!==(m==null?void 0:m.id)&&!me.isRead))}).length;return n.jsxs("div",{className:"h-full bg-gray-50 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex-shrink-0",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"МОИ ЧАТЫ"}),n.jsx("p",{className:"text-gray-600 text-xs",children:pe>0?`${pe} непрочитанных сообщений`:"Общайтесь с преподавателями и учениками"})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[pe>0&&n.jsx("button",{onClick:Ce,className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:"Отметить все как прочитанные"}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(gc,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Se(!ie),className:`px-3 py-1 text-sm rounded-lg transition-colors ${ie?"bg-gray-200 text-gray-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:ie?"Активные":"Архив"}),n.jsx("button",{onClick:I,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Создать новый чат",children:n.jsx(Nl,{className:"w-5 h-5"})})]})]})}),n.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[n.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col flex-shrink-0",children:[n.jsxs("div",{className:"p-3 border-b border-gray-200 space-y-2 flex-shrink-0",children:[n.jsxs("div",{className:"relative",children:[n.jsx(kl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Поиск чатов...",value:x,onChange:U=>C(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),n.jsxs("button",{onClick:()=>je(!0),className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(Nl,{className:"h-4 w-4"}),n.jsx("span",{children:"Новый чат"})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:X.length>0?X.map(U=>{var Q,me;const Qe=Te(U),Tt=pt(Qe),M=y===U.id,K=(Q=U.messages)==null?void 0:Q.some(Z=>Z.senderId!==(m==null?void 0:m.id)&&!Z.isRead);return n.jsxs("div",{className:`relative p-4 hover:bg-gray-50 cursor-pointer transition-colors chat-menu ${M?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>g(U.id),children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"relative",children:[Tt!=null&&Tt.avatar?n.jsx("img",{src:Tt.avatar,alt:"avatar",className:"h-12 w-12 rounded-full object-cover",onError:Z=>{var oe;const xe=Z.target;xe.style.display="none",(oe=xe.nextElementSibling)==null||oe.classList.remove("hidden")}}):n.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium",children:rt(U).charAt(0).toUpperCase()})}),K&&n.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-medium",children:((me=U.messages)==null?void 0:me.filter(Z=>Z.senderId!==(m==null?void 0:m.id)&&!Z.isRead).length)||0})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:[rt(U),U.archived&&n.jsx("span",{className:"ml-2 text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Архив"})]}),U.lastMessage&&n.jsx("span",{className:"text-xs text-gray-400",children:jr(U.lastMessage.timestamp)})]}),U.lastMessage?n.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:U.lastMessage.content}):n.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Нет сообщений"})]}),n.jsx("button",{onClick:Z=>{console.log("Menu button clicked for chat:",U.id),Z.stopPropagation(),T(H===U.id?null:U.id)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(lb,{className:"w-4 h-4"})})]}),H===U.id&&n.jsxs("div",{className:"absolute right-2 top-12 bg-white border border-gray-200 rounded-lg shadow-xl py-1 z-50 min-w-[180px]",children:[n.jsxs("button",{onClick:Z=>{console.log("Profile button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),te(U.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[n.jsx(be,{className:"w-4 h-4"}),n.jsx("span",{children:"Профиль"})]}),n.jsxs("button",{onClick:Z=>{console.log("Mark as read button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),$(U.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[n.jsx(Ln,{className:"w-4 h-4"}),n.jsx("span",{children:"Отметить как прочитанное"})]}),n.jsxs("button",{onClick:Z=>{console.log("Archive button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),E(U.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[n.jsx(Cp,{className:"w-4 h-4"}),n.jsx("span",{children:"Архивировать"})]}),U.archived&&n.jsxs("button",{onClick:Z=>{console.log("Unarchive button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),S(U.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[n.jsx(Cp,{className:"w-4 h-4"}),n.jsx("span",{children:"Восстановить"})]}),n.jsxs("button",{onClick:Z=>{console.log("Clear messages button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),w(U.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[n.jsx(Cl,{className:"w-4 h-4"}),n.jsx("span",{children:"Очистить сообщения"})]}),n.jsx("hr",{className:"my-1"}),n.jsxs("button",{onClick:Z=>{console.log("Delete chat button clicked for chat:",U.id),Z.preventDefault(),Z.stopPropagation(),k(U.id)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2 transition-colors",children:[n.jsx(Cl,{className:"w-4 h-4"}),n.jsx("span",{children:"Удалить чат"})]})]})]},U.id)}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[n.jsx(tt,{className:"w-16 h-16 mb-4 text-gray-300"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Нет чатов"}),n.jsx("p",{className:"text-sm text-center",children:"Начните общение с преподавателями или учениками"})]})})]}),n.jsx("div",{className:"flex-1 flex flex-col bg-white min-h-0",children:Ne?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const U=Te(Ne),Q=pt(U);return Q!=null&&Q.avatar?n.jsx("img",{src:Q.avatar,alt:"avatar",className:"h-10 w-10 rounded-full object-cover"}):n.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium",children:rt(Ne).charAt(0).toUpperCase()})})})(),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:rt(Ne)}),n.jsx("p",{className:"text-sm text-gray-500",children:(()=>{const U=Te(Ne),Q=pt(U);return(Q==null?void 0:Q.role)==="teacher"?"Преподаватель":"Ученик"})()})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(xr,{className:"w-5 h-5"})}),n.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(ln,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>{const U=Te(Ne);P(U),D(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(be,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 min-h-0",children:[Ne.messages&&Ne.messages.length>0?Ne.messages.map(U=>n.jsx("div",{className:`flex ${U.senderId===(m==null?void 0:m.id)?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${U.senderId===(m==null?void 0:m.id)?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[n.jsx("p",{className:"text-sm",children:U.content}),n.jsxs("div",{className:`flex items-center justify-end mt-1 space-x-1 ${U.senderId===(m==null?void 0:m.id)?"text-blue-100":"text-gray-400"}`,children:[n.jsx("span",{className:"text-xs",children:gt(U.timestamp)}),U.senderId===(m==null?void 0:m.id)&&n.jsx(nk,{className:"w-3 h-3"})]})]})},U.id)):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[n.jsx(tt,{className:"w-16 h-16 mb-4 text-gray-300"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Начните общение"}),n.jsx("p",{className:"text-sm text-center",children:"Отправьте первое сообщение"})]}),n.jsx("div",{ref:ge})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white flex-shrink-0",children:[n.jsxs("div",{className:"flex items-end space-x-3",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("textarea",{value:p,onChange:U=>{b(U.target.value),F(U.target.value.length>0)},onKeyPress:We,placeholder:"Введите сообщение...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),n.jsxs("div",{className:"absolute right-3 bottom-3 flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>G(!B),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(im,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>q(!ae),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(Ep,{className:"w-5 h-5"})})]})]}),n.jsx("button",{onClick:ye,disabled:!p.trim(),className:"p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:n.jsx(ib,{className:"w-5 h-5"})})]}),ae&&n.jsx("div",{className:"mt-2 p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{onClick:()=>{var U;return(U=ne.current)==null?void 0:U.click()},className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsx(Ep,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Файл"})]}),n.jsxs("button",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[n.jsx(hk,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Голосовое"})]})]})}),n.jsx("input",{ref:ne,type:"file",multiple:!0,onChange:W,className:"hidden"})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[n.jsx(tt,{className:"w-24 h-24 mb-6 text-gray-300"}),n.jsx("h2",{className:"text-2xl font-medium mb-2",children:"Выберите чат"}),n.jsx("p",{className:"text-center",children:"Выберите чат из списка слева, чтобы начать общение"})]})})]}),O&&_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Профиль пользователя"}),n.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(sm,{className:"w-5 h-5"})})]}),(()=>{var U;const Q=pt(_);return Q?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[Q.avatar?n.jsx("img",{src:Q.avatar,alt:"avatar",className:"h-16 w-16 rounded-full object-cover"}):n.jsx("div",{className:"h-16 w-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium text-lg",children:((U=Q.name)==null?void 0:U.charAt(0).toUpperCase())||"U"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:Q.name||"Неизвестный пользователь"}),n.jsx("p",{className:"text-gray-500",children:Q.role==="teacher"?"Преподаватель":"Ученик"}),Q.email&&n.jsx("p",{className:"text-sm text-gray-400",children:Q.email})]})]}),Q.profile&&n.jsxs("div",{className:"space-y-4",children:[Q.profile.bio&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"О себе"}),n.jsx("p",{className:"text-gray-600",children:Q.profile.bio})]}),Q.profile.subjects&&Q.profile.subjects.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Предметы"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Q.profile.subjects.map((me,Qe)=>n.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:me},Qe))})]}),Q.profile.experience&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Опыт"}),n.jsxs("p",{className:"text-gray-600",children:[Q.profile.experience==="beginner"&&"Начинающий",Q.profile.experience==="experienced"&&"Опытный",Q.profile.experience==="professional"&&"Профессионал"]})]}),Q.profile.city&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Город"}),n.jsx("p",{className:"text-gray-600",children:Q.profile.city})]})]}),n.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[n.jsxs("button",{onClick:()=>{D(!1)},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[n.jsx(xr,{className:"w-4 h-4"}),n.jsx("span",{children:"Позвонить"})]}),n.jsxs("button",{onClick:()=>{D(!1)},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[n.jsx(ln,{className:"w-4 h-4"}),n.jsx("span",{children:"Видео"})]})]})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"Профиль пользователя не найден"})})})()]})})}),he&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Новый чат"}),n.jsx("button",{onClick:()=>je(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ft,{className:"h-6 w-6"})})]})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сообщение"}),n.jsx("textarea",{value:J,onChange:U=>Y(U.target.value),placeholder:"Введите ваше сообщение...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Выберите получателя"}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-300 rounded-lg",children:s.filter(U=>U.id!==(m==null?void 0:m.id)).map(U=>n.jsxs("button",{onClick:()=>Ge(U.id,U.name),className:"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center space-x-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:U.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:U.name}),n.jsx("div",{className:"text-sm text-gray-500 capitalize",children:U.role==="teacher"?"Преподаватель":"Ученик"})]})]},U.id))})]})]})]})})]})},r1=({isOpen:e,onClose:t,onSave:r})=>{const{user:s}=ht(),{updateStudentProfile:a}=$t(),[l,o]=N.useState({grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""}),[c,i]=N.useState(0);N.useEffect(()=>{e&&s!=null&&s.profile&&(o(s.profile),u(s.profile))},[e,s]);const u=v=>{const j=["bio","age","school","city","phone","parentName","parentPhone","subjects","goals","interests","learningStyle","experience","preferredFormats","preferredDurations","timeZone"],m=j.filter(g=>{const p=v[g];return Array.isArray(p)?p.length>0:p&&p!==""}).length,y=Math.round(m/j.length*100);i(y)};N.useEffect(()=>{u(l)},[l]);const f=()=>{s&&(a(s.id,l),r(l),t())},h=v=>{var j;const m=(j=v.target.files)==null?void 0:j[0];if(m){if(m.size>5*1024*1024){alert("Размер файла не должен превышать 5MB");return}if(!m.type.startsWith("image/")){alert("Пожалуйста, выберите изображение");return}const y=new FileReader;y.onload=g=>{var p;const b=(p=g.target)==null?void 0:p.result;o({...l,avatar:b})},y.readAsDataURL(m)}},d=v=>{switch(v){case"beginner":return"Начинающий";case"intermediate":return"Средний";case"advanced":return"Продвинутый";default:return v}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Редактирование профиля"}),n.jsxs("button",{onClick:f,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ob,{className:"w-4 h-4"}),n.jsx("span",{children:"Сохранить"})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[l!=null&&l.avatar&&l.avatar.trim()!==""&&l.avatar!=="undefined"&&l.avatar!=="null"?n.jsx("img",{src:l.avatar,alt:s==null?void 0:s.name,className:"w-24 h-24 object-cover rounded-full",onError:v=>{const j=v.target;j.style.display="none";const m=j.nextElementSibling;m&&m.classList.remove("hidden")}}):null,n.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center ${l!=null&&l.avatar&&l.avatar.trim()!==""&&l.avatar!=="undefined"&&l.avatar!=="null"?"hidden":""}`,children:n.jsx(be,{className:"h-12 w-12 text-white"})})]}),n.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-blue-600 text-white rounded-full p-2 cursor-pointer hover:bg-blue-700 transition-colors",children:[n.jsx(ub,{className:"w-4 h-4"}),n.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:h})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==null?void 0:s.name}),n.jsxs("p",{className:"text-gray-500",children:["@",s==null?void 0:s.id]})]})}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Профиль заполнен на ",c,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Be,{className:"w-4 h-4"}),n.jsx("span",{children:"1 урок"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(as,{className:"w-4 h-4"}),n.jsx("span",{children:"0 завершено"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(be,{className:"w-4 h-4"}),n.jsx("span",{children:"0 предметов"})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Jl,{className:"w-4 h-4"}),n.jsx("span",{children:l.experience?d(l.experience):"Не указан"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx(be,{className:"w-5 h-5 mr-2"}),"Личная информация"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(om,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Школа"}),n.jsx("input",{type:"text",value:l.school||"",onChange:v=>o({...l,school:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Название школы"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Zt,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Город"}),n.jsx("input",{type:"text",value:l.city||"",onChange:v=>o({...l,city:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ваш город"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон"}),n.jsx("input",{type:"tel",value:l.phone||"",onChange:v=>o({...l,phone:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+7 (999) 123-45-67"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(be,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Родитель"}),n.jsx("input",{type:"text",value:l.parentName||"",onChange:v=>o({...l,parentName:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Имя родителя"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон родителя"}),n.jsx("input",{type:"tel",value:l.parentPhone||"",onChange:v=>o({...l,parentPhone:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+7 (999) 123-45-67"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Or,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Часовой пояс"}),n.jsx("input",{type:"text",value:l.timeZone||"",onChange:v=>o({...l,timeZone:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"UTC+3 (Москва)"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx(Be,{className:"w-5 h-5 mr-2"}),"Учебная информация"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Изучаемые предметы"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Математика","Русский язык","Физика","Химия","Биология","История","География","Английский язык"].map(v=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=l.subjects)==null?void 0:j.includes(v))||!1,onChange:m=>{m.target.checked?o({...l,subjects:[...l.subjects||[],v]}):o({...l,subjects:(l.subjects||[]).filter(y=>y!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:v})]},v)})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Цели обучения"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:["Подготовка к ЕГЭ","Подготовка к ОГЭ","Повышение успеваемости","Углубленное изучение","Подготовка к олимпиаде"].map(v=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=l.goals)==null?void 0:j.includes(v))||!1,onChange:m=>{m.target.checked?o({...l,goals:[...l.goals||[],v]}):o({...l,goals:(l.goals||[]).filter(y=>y!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:v})]},v)})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ln,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Стиль обучения"}),n.jsxs("select",{value:l.learningStyle||"mixed",onChange:v=>o({...l,learningStyle:v.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"visual",children:"Визуальный"}),n.jsx("option",{value:"auditory",children:"Аудиальный"}),n.jsx("option",{value:"kinesthetic",children:"Кинестетический"}),n.jsx("option",{value:"mixed",children:"Смешанный"})]})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Предпочитаемые форматы"}),n.jsx("div",{className:"flex space-x-4",children:["online","offline","mini-group"].map(v=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=l.preferredFormats)==null?void 0:j.includes(v))||!1,onChange:m=>{m.target.checked?o({...l,preferredFormats:[...l.preferredFormats||[],v]}):o({...l,preferredFormats:(l.preferredFormats||[]).filter(y=>y!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm text-gray-700",children:v==="online"?"Онлайн":v==="offline"?"Оффлайн":"Мини-группа"})]},v)})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Предпочитаемая длительность"}),n.jsx("div",{className:"flex space-x-4",children:[30,45,60,90].map(v=>{var j;return n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:((j=l.preferredDurations)==null?void 0:j.includes(v))||!1,onChange:m=>{m.target.checked?o({...l,preferredDurations:[...l.preferredDurations||[],v]}):o({...l,preferredDurations:(l.preferredDurations||[]).filter(y=>y!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm text-gray-700",children:[v," мин"]})]},v)})})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"О себе"}),n.jsx("textarea",{value:l.bio||"",onChange:v=>o({...l,bio:v.target.value}),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Расскажите о себе, своих интересах и целях..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Возраст"}),n.jsx("input",{type:"number",value:l.age||"",onChange:v=>o({...l,age:v.target.value?Number(v.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"5",max:"25",placeholder:"Укажите возраст"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Уровень знаний"}),n.jsxs("select",{value:l.experience||"beginner",onChange:v=>o({...l,experience:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"beginner",children:"Начинающий"}),n.jsx("option",{value:"intermediate",children:"Средний"}),n.jsx("option",{value:"advanced",children:"Продвинутый"})]})]})]})]})]})}):null},w9=({isOpen:e,onClose:t})=>{var r;const{user:s}=ht(),{lessons:a}=$t(),[l,o]=N.useState(!1),[c,i]=N.useState(0),u=s==null?void 0:s.profile,f=a.filter(g=>g.studentId===(s==null?void 0:s.id)),h=f.filter(g=>g.status==="completed"),d=((r=u==null?void 0:u.subjects)==null?void 0:r.length)||0;N.useEffect(()=>{if(u){const g=["bio","age","school","city","phone","parentName","parentPhone","subjects","goals","interests","learningStyle","experience","preferredFormats","preferredDurations","timeZone"],p=g.filter(x=>{const C=u[x];return Array.isArray(C)?C.length>0:C&&C!==""}).length,b=Math.round(p/g.length*100);i(b)}},[u]);const v=g=>{switch(g){case"beginner":return"Начинающий";case"intermediate":return"Средний";case"advanced":return"Продвинутый";default:return g}},j=g=>{switch(g){case"visual":return"Визуальный";case"auditory":return"Аудиальный";case"kinesthetic":return"Кинестетический";case"mixed":return"Смешанный";default:return g}},m=()=>{o(!0)},y=g=>{o(!1)};return e?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[n.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:n.jsx(ft,{className:"w-6 h-6 text-gray-600"})}),n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Профиль ученика"}),n.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Sl,{className:"w-4 h-4"}),n.jsx("span",{children:"Редактировать"})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[u!=null&&u.avatar&&u.avatar.trim()!==""&&u.avatar!=="undefined"&&u.avatar!=="null"?n.jsx("img",{src:u.avatar,alt:s==null?void 0:s.name,className:"w-24 h-24 object-cover rounded-full",onError:g=>{const p=g.target;p.style.display="none";const b=p.nextElementSibling;b&&b.classList.remove("hidden")}}):null,n.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center ${u!=null&&u.avatar&&u.avatar.trim()!==""&&u.avatar!=="undefined"&&u.avatar!=="null"?"hidden":""}`,children:n.jsx(be,{className:"h-12 w-12 text-white"})})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==null?void 0:s.name}),n.jsxs("p",{className:"text-gray-500",children:["@",s==null?void 0:s.id]})]})}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Профиль заполнен на ",c,"%"]})]}),n.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Be,{className:"w-4 h-4"}),n.jsxs("span",{children:[f.length," уроков"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(as,{className:"w-4 h-4"}),n.jsxs("span",{children:[h.length," завершено"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(be,{className:"w-4 h-4"}),n.jsxs("span",{children:[d," предметов"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Jl,{className:"w-4 h-4"}),n.jsx("span",{children:u!=null&&u.experience?v(u.experience):"Не указан"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx(be,{className:"w-5 h-5 mr-2"}),"Личная информация"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(om,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Школа"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.school)||"Не указана"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Zt,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Город"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.city)||"Не указан"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Телефон"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.phone)||"Не указан"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(be,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Родитель"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.parentName)||"Не указан"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xr,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Телефон родителя"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.parentPhone)||"Не указан"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Or,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Часовой пояс"}),n.jsx("div",{className:"text-base text-gray-900",children:(u==null?void 0:u.timeZone)||"Не указан"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx(Be,{className:"w-5 h-5 mr-2"}),"Учебная информация"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Изучаемые предметы"}),n.jsx("div",{className:"text-base text-gray-900 mt-1",children:u!=null&&u.subjects&&u.subjects.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:u.subjects.map((g,p)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:g},p))}):"Не указаны"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Цели обучения"}),n.jsx("div",{className:"text-base text-gray-900 mt-1",children:u!=null&&u.goals&&u.goals.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:u.goals.map((g,p)=>n.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:g},p))}):"Не указаны"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ln,{className:"w-5 h-5 text-gray-400"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Стиль обучения"}),n.jsx("div",{className:"text-base text-gray-900",children:u!=null&&u.learningStyle?j(u.learningStyle):"Не указан"})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Предпочитаемые форматы"}),n.jsx("div",{className:"text-base text-gray-900 mt-1",children:u!=null&&u.preferredFormats&&u.preferredFormats.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:u.preferredFormats.map((g,p)=>n.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full",children:g==="online"?"Онлайн":g==="offline"?"Оффлайн":"Мини-группа"},p))}):"Не указаны"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Предпочитаемая длительность"}),n.jsx("div",{className:"text-base text-gray-900 mt-1",children:u!=null&&u.preferredDurations&&u.preferredDurations.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:u.preferredDurations.map((g,p)=>n.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[g," мин"]},p))}):"Не указана"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 mt-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"О себе"}),n.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed",children:(u==null?void 0:u.bio)||"Информация о себе не указана"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Возраст"}),n.jsx("div",{className:"text-base text-gray-900",children:u!=null&&u.age?`${u.age} лет`:"Не указан"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Уровень знаний"}),n.jsx("div",{className:"text-base text-gray-900",children:u!=null&&u.experience?v(u.experience):"Не указан"})]})]})]})]})}),l&&n.jsx(r1,{isOpen:l,onClose:()=>o(!1),onSave:y})]}):null},N9=()=>{var e,t,r,s,a,l,o,c;const{user:i,updateProfile:u,deleteAccount:f}=ht(),{updateStudentProfile:h,updateTeacherProfile:d,lessons:v,posts:j,createPost:m,addReaction:y,addComment:g,sharePost:p,bookmarkPost:b,editPost:x,deletePost:C}=$t(),[O,D]=N.useState(!1),[_,P]=N.useState(!1),[z,L]=N.useState(!1),[H,T]=N.useState(!1),[V,ee]=N.useState({grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""}),[R,F]=N.useState({subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}),[B,G]=N.useState(!1),[ae,q]=N.useState(!1),[ie,Se]=N.useState(!1),[he,je]=N.useState(!1),[J]=N.useState([{id:1,avatar:((e=i==null?void 0:i.profile)==null?void 0:e.avatar)||"",name:(i==null?void 0:i.name)||""}]),[Y,ge]=N.useState(!1),[ne,$e]=N.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),ze=["Математика","Русский язык","Английский язык"],pt=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],ct=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],X=[45,60],Ne=["online","offline","mini-group"];N.useEffect(()=>{if(i!=null&&i.profile)if(i.role==="student"){const k=i.profile;ee({...V,...k})}else{const k=i.profile;F({...R,...k,education:{university:"",degree:"",graduationYear:void 0,courses:[]}})}else if(i&&!i.profile){const k=i.role==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""};u(k)}},[i]);const ye=k=>{switch(k){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return k}},Ge=k=>{switch(k){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}};let We=0,rt=0;if(i&&i.role==="student"&&Array.isArray(v)){const k=v.filter($=>$.studentId===i.id);We=k.length,rt=Array.from(new Set(k.map($=>$.teacherId))).length}if(!i)return null;const Te=k=>{var $;const w=($=k.target.files)==null?void 0:$[0];if(w){if(w.size>5*1024*1024){alert("Размер файла не должен превышать 5MB");return}if(!w.type.startsWith("image/")){alert("Пожалуйста, выберите изображение");return}const E=new FileReader;E.onload=S=>{var I;try{const W=(I=S.target)==null?void 0:I.result;if(i.role==="student"){const te={...V,avatar:W};ee(te),u(te),h(i.id,te),console.log(" Аватар студента сохранен")}else{const te={...R,avatar:W};F(te),u(te),d(i.id,{...te,name:i.name,email:i.email}),console.log(" Аватар преподавателя сохранен")}}catch(W){console.error(" Ошибка при сохранении аватара:",W),alert("Ошибка при сохранении фото. Попробуйте еще раз.")}},E.onerror=()=>{console.error(" Ошибка чтения файла"),alert("Ошибка при чтении файла. Попробуйте выбрать другое изображение.")},E.readAsDataURL(w)}},gt=k=>{ee(k),i&&(u(k),h(i.id,k)),L(!1)},jr=k=>{F(k),T(!1),i&&(u(k),d(i.id,{...k,name:i.name,email:i.email})),alert("Профиль преподавателя сохранен!")};return n.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[n.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center overflow-hidden shadow-lg",children:(t=i.profile)!=null&&t.avatar?n.jsx("img",{src:i.profile.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):n.jsx(be,{className:"h-10 w-10 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-gray-900",children:i?i.name:""}),i&&i.nickname&&n.jsxs("span",{className:"text-gray-400 text-sm",children:["@",i.nickname]})]}),i&&i.role==="student"&&n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[n.jsx(Be,{className:"w-5 h-5 text-blue-500 mr-1"}),We]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Пройдено уроков"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[n.jsx(be,{className:"w-5 h-5 text-green-500 mr-1"}),rt]}),n.jsx("div",{className:"text-xs text-gray-500",children:"Учителей"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.role==="student"?n.jsx(n.Fragment,{children:n.jsxs("button",{className:"btn-primary text-sm px-3 py-2",onClick:()=>L(!0),children:[n.jsx(Sl,{className:"w-4 h-4 mr-1"}),"Редактировать"]})}):n.jsxs("button",{className:"btn-primary text-sm px-3 py-2",onClick:()=>T(!0),children:[n.jsx(Sl,{className:"w-4 h-4 mr-1"}),"Редактировать"]}),n.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-blue-600 rounded-full p-2 shadow transition-colors duration-150 focus:outline-none",style:{width:36,height:36},"aria-label":"Настройки",onClick:()=>q(!0),children:n.jsx(gc,{className:"w-5 h-5"})})]})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:n.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:n.jsx("div",{className:"flex-1 space-y-1"})})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow p-5 mb-6 card-gradient",children:[n.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"О себе"}),n.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed mb-4 text-sm",children:i.role==="student"?V.bio||"":((r=i.profile)==null?void 0:r.bio)||""}),i.role==="student"&&n.jsxs("div",{className:"space-y-3",children:[V.subjects&&V.subjects.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Предметы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:V.subjects.map((k,$)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),(V.age||V.school||V.city)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[V.age&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Возраст:"}),n.jsxs("span",{className:"text-sm text-gray-900 ml-1",children:[V.age," лет"]})]}),V.school&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Школа:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:V.school})]}),V.city&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Город:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:V.city})]})]}),V.goals&&V.goals.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Цели обучения:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:V.goals.map((k,$)=>n.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),V.interests&&V.interests.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Интересы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:V.interests.map((k,$)=>n.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),(V.learningStyle||V.experience)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[V.learningStyle&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Стиль обучения:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:V.learningStyle==="visual"?"Визуальный":V.learningStyle==="auditory"?"Аудиальный":V.learningStyle==="kinesthetic"?"Кинестетический":"Смешанный"})]}),V.experience&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Уровень:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:V.experience==="beginner"?"Начинающий":V.experience==="intermediate"?"Средний":"Продвинутый"})]})]}),(V.preferredFormats&&V.preferredFormats.length>0||V.preferredDurations&&V.preferredDurations.length>0)&&n.jsxs("div",{className:"space-y-2",children:[V.preferredFormats&&V.preferredFormats.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Форматы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:V.preferredFormats.map((k,$)=>n.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full",children:k==="online"?"Онлайн":k==="offline"?"Оффлайн":"Мини-группа"},$))})]}),V.preferredDurations&&V.preferredDurations.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Длительность:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:V.preferredDurations.map((k,$)=>n.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[k," мин"]},$))})]})]})]}),i.role==="teacher"&&n.jsxs("div",{className:"space-y-3",children:[R.subjects&&R.subjects.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Предметы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:R.subjects.map((k,$)=>n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),R.grades&&R.grades.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Классы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:R.grades.map((k,$)=>n.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),(R.city||R.age||R.experienceYears)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[R.city&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Город:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:R.city})]}),R.age&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Возраст:"}),n.jsxs("span",{className:"text-sm text-gray-900 ml-1",children:[R.age," лет"]})]}),R.experienceYears&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Опыт:"}),n.jsxs("span",{className:"text-sm text-gray-900 ml-1",children:[R.experienceYears," лет"]})]})]}),(R.experience||R.teacherType)&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[R.experience&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Уровень:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:ye(R.experience)})]}),R.teacherType&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Тип:"}),n.jsx("span",{className:"text-sm text-gray-900 ml-1",children:Ge(R.teacherType)})]})]}),R.goals&&R.goals.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Цели обучения:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:R.goals.map((k,$)=>n.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:k},$))})]}),(R.formats&&R.formats.length>0||R.durations&&R.durations.length>0)&&n.jsxs("div",{className:"space-y-2",children:[R.formats&&R.formats.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Форматы:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:R.formats.map((k,$)=>n.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full",children:k==="online"?"Онлайн":k==="offline"?"Оффлайн":"Мини-группа"},$))})]}),R.durations&&R.durations.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Длительность:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:R.durations.map((k,$)=>n.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[k," мин"]},$))})]})]}),R.hourlyRate&&n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Стоимость:"}),n.jsxs("span",{className:"text-sm text-gray-900 ml-1",children:[R.hourlyRate," руб/час"]})]}),R.education&&(R.education.university||R.education.degree)&&n.jsxs("div",{className:"border-t pt-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Образование:"}),n.jsxs("div",{className:"mt-1 space-y-1",children:[R.education.university&&n.jsx("div",{className:"text-sm text-gray-900",children:R.education.university}),R.education.degree&&n.jsx("div",{className:"text-sm text-gray-700",children:R.education.degree}),R.education.graduationYear&&n.jsxs("div",{className:"text-sm text-gray-500",children:["Год окончания: ",R.education.graduationYear]})]})]})]})]}),n.jsx(w9,{isOpen:_,onClose:()=>P(!1)}),n.jsx(r1,{isOpen:z,onClose:()=>L(!1),onSave:gt}),n.jsx(_s,{open:H,onClose:()=>T(!1),children:n.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"text-lg font-bold mb-4 text-center",children:"Редактирование профиля преподавателя"}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"text-center",children:n.jsxs("div",{className:"relative inline-block",children:[n.jsx("div",{className:"h-24 w-24 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center overflow-hidden shadow-lg mx-auto",children:R.avatar?n.jsx("img",{src:R.avatar,alt:"Avatar",className:"h-24 w-24 rounded-full object-cover"}):n.jsx(be,{className:"h-12 w-12 text-white"})}),n.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full p-2 cursor-pointer hover:bg-blue-600 transition-colors",children:[n.jsx(ub,{className:"w-4 h-4"}),n.jsx("input",{type:"file",accept:"image/*",onChange:Te,className:"hidden"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"О себе (био)"}),n.jsx("textarea",{value:R.bio||"",onChange:k=>F({...R,bio:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Расскажите о себе..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Город"}),n.jsx("input",{type:"text",value:R.city||"",onChange:k=>F({...R,city:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ваш город"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предметы"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ze.map(k=>{var $;return n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:(($=R.subjects)==null?void 0:$.includes(k))||!1,onChange:w=>{const E=w.target.checked?[...R.subjects||[],k]:(R.subjects||[]).filter(S=>S!==k);F({...R,subjects:E})},className:"mr-2"}),n.jsx("span",{className:"text-sm",children:k})]},k)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Классы"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:pt.map(k=>{var $;return n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:(($=R.grades)==null?void 0:$.includes(k))||!1,onChange:w=>{const E=w.target.checked?[...R.grades||[],k]:(R.grades||[]).filter(S=>S!==k);F({...R,grades:E})},className:"mr-2"}),n.jsx("span",{className:"text-sm",children:k})]},k)})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Уровень опыта"}),n.jsxs("select",{value:R.experience||"experienced",onChange:k=>F({...R,experience:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"beginner",children:"Начинающий"}),n.jsx("option",{value:"experienced",children:"Опытный"}),n.jsx("option",{value:"professional",children:"Профессионал"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип преподавателя"}),n.jsxs("select",{value:R.teacherType||"private",onChange:k=>F({...R,teacherType:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"private",children:"Частный преподаватель"}),n.jsx("option",{value:"school",children:"Преподаватель школы"}),n.jsx("option",{value:"both",children:"Частный + Школа"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Возраст"}),n.jsx("input",{type:"number",value:R.age||"",onChange:k=>F({...R,age:parseInt(k.target.value)||void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ваш возраст"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Годы опыта"}),n.jsx("input",{type:"number",value:R.experienceYears||"",onChange:k=>F({...R,experienceYears:parseInt(k.target.value)||void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Количество лет опыта"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели обучения"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:ct.map(k=>{var $;return n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:(($=R.goals)==null?void 0:$.includes(k))||!1,onChange:w=>{const E=w.target.checked?[...R.goals||[],k]:(R.goals||[]).filter(S=>S!==k);F({...R,goals:E})},className:"mr-2"}),n.jsx("span",{className:"text-sm",children:k})]},k)})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Форматы занятий"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Ne.map(k=>{var $;return n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:(($=R.formats)==null?void 0:$.includes(k))||!1,onChange:w=>{const E=w.target.checked?[...R.formats||[],k]:(R.formats||[]).filter(S=>S!==k);F({...R,formats:E})},className:"mr-2"}),n.jsx("span",{className:"text-sm",children:k==="online"?"Онлайн":k==="offline"?"Оффлайн":"Мини-группа"})]},k)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Длительность занятий"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:X.map(k=>{var $;return n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:(($=R.durations)==null?void 0:$.includes(k))||!1,onChange:w=>{const E=w.target.checked?[...R.durations||[],k]:(R.durations||[]).filter(S=>S!==k);F({...R,durations:E})},className:"mr-2"}),n.jsxs("span",{className:"text-sm",children:[k," мин"]})]},k)})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Стоимость за час (руб.)"}),n.jsx("input",{type:"number",value:R.hourlyRate||1500,onChange:k=>F({...R,hourlyRate:parseInt(k.target.value)||1500}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1500"})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Образование"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Университет"}),n.jsx("input",{type:"text",value:((s=R.education)==null?void 0:s.university)||"",onChange:k=>F({...R,education:{...R.education,university:k.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Название университета"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Степень/Специальность"}),n.jsx("input",{type:"text",value:((a=R.education)==null?void 0:a.degree)||"",onChange:k=>F({...R,education:{...R.education,degree:k.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Степень или специальность"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Год окончания"}),n.jsx("input",{type:"number",value:((l=R.education)==null?void 0:l.graduationYear)||"",onChange:k=>F({...R,education:{...R.education,graduationYear:parseInt(k.target.value)||void 0}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"2020"})]})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Дополнительные настройки"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:R.offlineAvailable||!1,onChange:k=>F({...R,offlineAvailable:k.target.checked}),className:"mr-3"}),n.jsx("span",{className:"text-sm",children:"Доступен для оффлайн занятий"})]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:R.overbookingEnabled||!1,onChange:k=>F({...R,overbookingEnabled:k.target.checked}),className:"mr-3"}),n.jsx("span",{className:"text-sm",children:"Разрешить перебронирование"})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[n.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Отмена"}),n.jsxs("button",{onClick:()=>jr(R),className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ob,{className:"w-4 h-4 mr-2 inline"}),"Сохранить"]})]})]})}),n.jsxs(_s,{open:B,onClose:()=>G(!1),children:[n.jsx("div",{className:"text-base font-bold mb-2",children:"Контактная информация"}),n.jsxs("div",{className:"mb-2 text-sm",children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",i.email]})]}),n.jsx(_s,{open:ae,onClose:()=>q(!1),children:n.jsxs("div",{className:"w-[320px] max-w-full",children:[n.jsx("div",{className:"text-lg font-bold mb-4 text-center",children:"Настройки"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{q(!1),Se(!0)},children:[n.jsx(rl,{className:"w-5 h-5 text-red-500"}),n.jsx("span",{className:"flex-1",children:"Push-уведомления"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(ab,{className:"w-5 h-5 text-gray-700"}),n.jsx("span",{className:"flex-1",children:"Конфиденциальность"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{q(!1),je(!0)},children:[n.jsx(be,{className:"w-5 h-5 text-blue-500"}),n.jsx("span",{className:"flex-1",children:"Аккаунт"})]}),n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gk,{className:"w-5 h-5 text-purple-500"}),n.jsx("span",{className:"flex-1",children:"Тема"})]}),n.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${ne==="dark"?"bg-gray-900":"bg-gray-300"}`,onClick:()=>{const k=ne==="dark"?"light":"dark";$e(k),k==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",k)},"aria-pressed":ne==="dark",type:"button",children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${ne==="dark"?"translate-x-5":"translate-x-1"}`})})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(ok,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{className:"flex-1",children:"Память"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(pk,{className:"w-5 h-5 text-indigo-500"}),n.jsx("span",{className:"flex-1",children:"Устройства"})]}),n.jsx("div",{className:"border-t my-2"}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(Be,{className:"w-5 h-5 text-blue-400"}),n.jsx("span",{className:"flex-1",children:"База знаний"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(tt,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"flex-1",children:"Поддержка"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(zn,{className:"w-5 h-5 text-blue-700"}),n.jsx("span",{className:"flex-1",children:"Документация"})]}),n.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[n.jsx(Br,{className:"w-5 h-5 text-yellow-500"}),n.jsx("span",{className:"flex-1",children:"Оценить приложение"})]})]})]})}),n.jsx(_s,{open:ie,onClose:()=>Se(!1),children:n.jsxs("div",{className:"w-[340px] max-w-full",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("button",{onClick:()=>Se(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:n.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[n.jsx("path",{d:"M19 12H5"}),n.jsx("path",{d:"m12 19-7-7 7-7"})]})}),n.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Уведомления"})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"СООБЩЕНИЯ"}),n.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[n.jsx(Qr,{label:"Личные сообщения"}),n.jsx(Qr,{label:"Инфобот"}),n.jsx(Qr,{label:"Лиды"})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПУБЛИКАЦИИ ОТ ПОДПИСОК"}),n.jsx("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:n.jsx(Qr,{label:"Новые публикации"})}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПОДПИСЧИКИ И ДЕЛОВЫЕ СВЯЗИ"}),n.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[n.jsx(Qr,{label:"Новые подписчики"}),n.jsx(Qr,{label:"Установлена деловая связь"})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"МАРКЕТСПЕЙС"}),n.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[n.jsx(Qr,{label:"Отклики"}),n.jsx(Qr,{label:"Рекомендации"})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ГОСЗАКУПКИ"}),n.jsx("div",{className:"bg-gray-50 rounded-xl mb-2 overflow-hidden",children:n.jsx(Qr,{label:"Подборка тендеров по ИНН"})})]})}),n.jsx(_s,{open:he,onClose:()=>je(!1),children:n.jsxs("div",{className:"w-[340px] max-w-full flex flex-col min-h-[340px]",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("button",{onClick:()=>je(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:n.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[n.jsx("path",{d:"M19 12H5"}),n.jsx("path",{d:"m12 19-7-7 7-7"})]})}),n.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Аккаунт"})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"НОМЕР ТЕЛЕФОНА"}),n.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Изменить номер"}),n.jsx("span",{className:"text-gray-400 text-sm",children:i.phone||"+7 (999) 300-18-02"}),n.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),n.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ЭЛЕКТРОННАЯ ПОЧТА"}),n.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[n.jsx("span",{className:"text-sm text-gray-900",children:"Изменить эл. почту"}),n.jsx("span",{className:"text-gray-400 text-sm truncate max-w-[120px]",children:i.email}),n.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M9 18l6-6-6-6"})})]}),n.jsx("div",{className:"flex-1"}),n.jsx("button",{onClick:f,className:"w-full mt-8 mb-2 py-3 rounded-xl bg-red-50 text-red-600 font-bold text-base hover:bg-red-100 transition",children:"Удалить аккаунт"})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"font-bold text-base",children:"Истории"}),n.jsx("button",{className:"text-blue-500 text-xs font-medium hover:underline",onClick:()=>alert("Скоро можно будет добавлять истории!"),children:"Добавить"})]}),n.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[n.jsxs("div",{className:"relative h-14 w-14 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 flex items-center justify-center overflow-hidden border-2 border-blue-400 group-hover:scale-105 transition",children:[(i.role==="student"?V.avatar:(o=i.profile)!=null&&o.avatar)?n.jsx("img",{src:i.role==="student"?V.avatar:(c=i.profile)==null?void 0:c.avatar,alt:"avatar",className:"h-14 w-14 object-cover rounded-full"}):n.jsx(be,{className:"h-7 w-7 text-white"}),n.jsx("span",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs border-2 border-white",children:"+"})]}),n.jsx("span",{className:"text-xs mt-1 text-gray-700",children:"Ваша история"})]}),J.map(k=>n.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[n.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-tr from-pink-400 to-yellow-400 flex items-center justify-center overflow-hidden border-2 border-pink-400 group-hover:scale-105 transition",children:k.avatar?n.jsx("img",{src:k.avatar,alt:k.name,className:"h-14 w-14 object-cover rounded-full"}):n.jsx(be,{className:"h-7 w-7 text-white"})}),n.jsx("span",{className:"text-xs mt-1 text-gray-700 truncate max-w-[60px]",children:k.name})]},k.id))]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"font-bold text-base",children:"Мои записи"}),n.jsxs("button",{onClick:()=>ge(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Nl,{className:"w-4 h-4"}),n.jsx("span",{children:"Создать запись"})]})]}),Y&&n.jsx("div",{className:"mb-6",children:n.jsx(rh,{onSubmit:k=>{m(k),ge(!1)},onCancel:()=>ge(!1),userName:(i==null?void 0:i.name)||"Пользователь",userAvatar:i==null?void 0:i.avatar})}),n.jsx("div",{className:"space-y-4",children:j.filter(k=>k.userId===(i==null?void 0:i.id)).length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"У вас пока нет записей"}),n.jsx("p",{className:"text-gray-500",children:"Создайте первую запись!"})]}):j.filter(k=>k.userId===(i==null?void 0:i.id)).map(k=>n.jsx(Qd,{post:k,onReaction:y,onComment:g,onShare:p,onBookmark:b,onEdit:x,onDelete:C},k.id))})]})]})},Qr=({label:e})=>{const[t,r]=N.useState(!0);return n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b last:border-b-0",children:[n.jsx("span",{className:"text-sm text-gray-900",children:e}),n.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${t?"bg-green-500":"bg-gray-300"}`,onClick:()=>r(s=>!s),"aria-pressed":t,type:"button",children:n.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${t?"translate-x-5":"translate-x-1"}`})})]})},k9=()=>{const[e,t]=N.useState(null),[r,s]=N.useState(!0),[a,l]=N.useState(!1);try{const{user:o}=ht(),[c,i]=N.useState((o==null?void 0:o.role)==="teacher"?"slots":"home");if(N.useEffect(()=>{if(o&&!a){const f=o.role==="teacher"?"slots":"home";i(f),l(!0)}s(!1)},[o,a]),r)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Загрузка приложения..."})]})});if(!o)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Добро пожаловать в Nauchi"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Платформа для репетиторов и учеников"}),n.jsx(Sk,{onSuccess:()=>{}})]})});const u=()=>{try{switch(c){case"home":return o.role==="student"?n.jsx(Tu,{setActiveTab:i}):n.jsx(Du,{});case"slots":return o.role==="teacher"?n.jsx(Du,{}):n.jsx(Tu,{setActiveTab:i});case"calendar":return o.role==="student"?n.jsx(e1,{onClose:()=>i("home")}):n.jsx(t1,{});case"lessons":return o.role==="student"?n.jsx(y9,{setActiveTab:i}):null;case"students":return o.role==="teacher"?n.jsx(x9,{}):null;case"materials":return o.role==="teacher"?n.jsx(v9,{}):null;case"chats":return n.jsx(j9,{});case"profile":return n.jsx(N9,{});default:return o.role==="student"?n.jsx(Tu,{setActiveTab:i}):n.jsx(Du,{})}}catch(f){return console.error("Error rendering content:",f),n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки контента"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Попробуйте перезагрузить страницу"}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить"})]})})}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Ck,{activeTab:c,onTabChange:i}),n.jsx("main",{className:c==="chats"?"h-[calc(100vh-64px)]":"container mx-auto px-4 py-8",children:u()})]})}catch(o){return console.error("Error in AppContent:",o),n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Произошла ошибка при загрузке приложения"}),n.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить страницу"})]})})}},S9=()=>n.jsx("div",{className:"App",children:n.jsx(Q2,{children:n.jsx(Z2,{children:n.jsxs(l2,{children:[n.jsx(Td,{path:"/teacher/:teacherId",element:n.jsx(Zy,{teacher:{},onClose:()=>{},onBookLesson:()=>{}})}),n.jsx(Td,{path:"*",element:n.jsx(k9,{})})]})})})});tb(document.getElementById("root")).render(n.jsx(N.StrictMode,{children:n.jsx(_2,{children:n.jsx(S9,{})})}));
