# Руководство по развертыванию

## Автоматическое развертывание

### GitHub
Все изменения автоматически отправляются на GitHub при выполнении:
```bash
git add .
git commit -m "описание изменений"
git push origin main
```

### Render
Render автоматически развертывает приложение при каждом push в main ветку благодаря файлу `render.yaml`.

## Структура развертывания

### 1. Фронтенд (React + Vite)
- **Сборка**: `npm run build`
- **Статические файлы**: папка `dist/`
- **Сервер**: Express статический сервер

### 2. Бэкенд (Node.js + Socket.IO)
- **Сервер**: `backend/static-server.cjs`
- **Порт**: 10000 (настраивается через переменную окружения)
- **WebSocket**: Поддержка реального времени

### 3. Данные
- **Хранение**: JSON файл `backend/server_data.json`
- **Синхронизация**: WebSocket события
- **Очистка**: Автоматическая очистка старых слотов

## Конфигурация Render

### render.yaml
```yaml
services:
  - type: web
    name: tutoring-platform
    env: node
    buildCommand: npm install && npm run build
    startCommand: cd backend && node static-server.cjs
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: HOST
        value: 0.0.0.0
    healthCheckPath: /api/health
    autoDeploy: true
    plan: starter
```

### Переменные окружения
- `NODE_ENV`: production
- `PORT`: 10000
- `HOST`: 0.0.0.0

## Проверка развертывания

### 1. Локальная проверка
```bash
# Сборка
npm run build

# Запуск production сервера
cd backend && node static-server.cjs
```

### 2. Проверка Render
1. Откройте https://render.com
2. Найдите проект `tutoring-platform`
3. Проверьте статус развертывания
4. Откройте URL приложения

### 3. Проверка функциональности
- ✅ Создание слотов преподавателем
- ✅ Отображение слотов ученикам
- ✅ Бронирование слотов
- ✅ Синхронизация в реальном времени
- ✅ Сохранение данных между перезагрузками

## Мониторинг

### Логи Render
- Доступны в панели управления Render
- Показывают ошибки и статус сервера

### Health Check
- Endpoint: `/api/health`
- Возвращает статус сервера и окружение

### WebSocket соединения
- Автоматическое переподключение
- Синхронизация данных при восстановлении соединения

## Обновления

### Автоматические обновления
1. Внесите изменения в код
2. Зафиксируйте изменения: `git commit -m "описание"`
3. Отправьте на GitHub: `git push origin main`
4. Render автоматически развернет обновления

### Ручные обновления (если нужно)
1. Войдите в панель управления Render
2. Найдите проект `tutoring-platform`
3. Нажмите "Manual Deploy"
4. Выберите ветку `main`

## Устранение неполадок

### Проблемы с развертыванием
1. Проверьте логи в Render
2. Убедитесь, что все зависимости установлены
3. Проверьте конфигурацию `render.yaml`

### Проблемы с WebSocket
1. Проверьте CORS настройки
2. Убедитесь, что порт правильно настроен
3. Проверьте SSL сертификаты в production

### Проблемы с данными
1. Проверьте права доступа к файлу `server_data.json`
2. Убедитесь, что файл создается при первом запуске
3. Проверьте логи сервера на ошибки записи

## Контакты для поддержки

- **GitHub**: https://github.com/539493/new
- **Render**: https://render.com (панель управления)
- **Документация**: См. файлы README.md и другие руководства 