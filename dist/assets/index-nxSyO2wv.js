import{r as S,a as ad,g as vt,R as _,c as ft,b as Jo}from"./vendor-tAaa2TlE.js";import{l as Qo}from"./socket-TjCxX7sJ.js";import{R as nd,a as li,B as id}from"./router-Skg1zGfq.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Zo={exports:{}},Ks={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=S,ld=Symbol.for("react.element"),cd=Symbol.for("react.fragment"),dd=Object.prototype.hasOwnProperty,ud=od.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,md={key:!0,ref:!0,__self:!0,__source:!0};function el(e,r,s){var a,n={},i=null,o=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(o=r.ref);for(a in r)dd.call(r,a)&&!md.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:ld,type:e,key:i,ref:o,props:n,_owner:ud.current}}Ks.Fragment=cd;Ks.jsx=el;Ks.jsxs=el;Zo.exports=Ks;var t=Zo.exports,tl,ci=ad;tl=ci.createRoot,ci.hydrateRoot;const Be=[];for(let e=0;e<256;++e)Be.push((e+256).toString(16).slice(1));function hd(e,r=0){return(Be[e[r+0]]+Be[e[r+1]]+Be[e[r+2]]+Be[e[r+3]]+"-"+Be[e[r+4]]+Be[e[r+5]]+"-"+Be[e[r+6]]+Be[e[r+7]]+"-"+Be[e[r+8]]+Be[e[r+9]]+"-"+Be[e[r+10]]+Be[e[r+11]]+Be[e[r+12]]+Be[e[r+13]]+Be[e[r+14]]+Be[e[r+15]]).toLowerCase()}let wa;const fd=new Uint8Array(16);function xd(){if(!wa){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wa=crypto.getRandomValues.bind(crypto)}return wa(fd)}const gd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),di={randomUUID:gd};function pd(e,r,s){var n;if(di.randomUUID&&!e)return di.randomUUID();e=e||{};const a=e.random??((n=e.rng)==null?void 0:n.call(e))??xd();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,hd(a)}const at="https://tutoring-platform-1756666331-zjfl.onrender.com",vd="https://tutoring-platform-1756666331-zjfl.onrender.com",bd={transports:["websocket","polling"],timeout:1e4,forceNew:!0,upgrade:!0,rememberUpgrade:!0},rl=S.createContext(void 0),Ye=()=>{const e=S.useContext(rl);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Fr=()=>{try{const e=localStorage.getItem("tutoring_users");return e?JSON.parse(e):[]}catch{return[]}},Na=e=>{try{localStorage.setItem("tutoring_users",JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users"),storageArea:localStorage})),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users")}}))}catch{}},Ns=e=>{try{localStorage.setItem("tutoring_currentUser",JSON.stringify(e))}catch{}},yd=()=>{try{const e=localStorage.getItem("tutoring_currentUser");return e?JSON.parse(e):null}catch{return null}},jd=({children:e})=>{const[r,s]=S.useState(()=>{try{return yd()}catch{return null}}),[a,n]=S.useState(!1);if(S.useEffect(()=>{const g=setTimeout(()=>{try{const f=Fr();n(!0)}catch{n(!0)}},100);return()=>clearTimeout(g)},[]),!a)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Инициализация авторизации..."})]})});const i=async(u,g)=>{await new Promise(y=>setTimeout(y,1e3));const m=Fr().find(y=>y.email===u);return m?(s(m),Ns(m),!0):(alert("Пользователь с таким email не найден. Пожалуйста, зарегистрируйтесь."),!1)},o=async(u,g,f,m,y,x)=>{try{const v=await fetch(`${at}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:g,name:f,nickname:m,role:y,phone:x})});if(!v.ok){const p=await v.text();try{const $=JSON.parse(p);alert($.error||"Ошибка регистрации на сервере")}catch{alert("Ошибка регистрации на сервере. Используется локальная регистрация.")}throw new Error("Server registration failed")}const b=await v.json(),E=[...Fr(),b];return Na(E),s(b),Ns(b),!0}catch{const b=Fr(),h=b.some(P=>P.email===u),E=b.some(P=>P.nickname===m);if(h)return alert("Пользователь с таким email уже существует"),!1;if(E)return alert("Пользователь с таким никнеймом уже существует"),!1;const p=y==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""},$={id:pd(),email:u,name:f,nickname:m,role:y,phone:x,profile:p,avatar:p.avatar},R=[...b,$];return Na(R),s($),Ns($),alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу."),!0}},l=()=>{s(null),localStorage.removeItem("tutoring_currentUser")},c=u=>{if(r){const g={...r,profile:u,avatar:u.avatar};s(g),Ns(g);const m=Fr().map(y=>y.id===r.id?g:y);Na(m),typeof window<"u"&&window.location.hostname!=="localhost"&&fetch("https://tutoring-platform-1756666331-zjfl.onrender.com/api/updateProfile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r.id,profileData:u,role:r.role})}).then(y=>{if(y.ok){console.log("Profile updated successfully on server");const x=window.socket;x&&x.emit("profileUpdated",{userId:r.id,profileData:u,role:r.role})}else console.error("Failed to update profile on server:",y.status)}).catch(y=>{console.error("Failed to update profile on server:",y)})}},d=()=>{s(null),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")};return t.jsx(rl.Provider,{value:{user:r,login:i,register:o,logout:l,updateProfile:c,clearAllUsers:d},children:e})},sl=S.createContext(void 0),ct=()=>{const e=S.useContext(sl);if(!e)throw new Error("useData must be used within a DataProvider");return e},ut=(e,r)=>{try{const s=localStorage.getItem(e);if(s){const a=JSON.parse(s);return Array.isArray(a)?a:r}}catch{}return r},ae=(e,r)=>{try{localStorage.setItem(e,JSON.stringify(r))}catch{}},Ss=()=>{const e=new Date,r=new Date(e);r.setDate(r.getDate()+1);const s=new Date(e);s.setDate(s.getDate()+2);const a=new Date(e);return a.setDate(a.getDate()+7),{timeSlots:[],lessons:[],chats:[],studentProfiles:{},teacherProfiles:{}}},wd=({children:e})=>{const r=S.useRef(null),[s,a]=S.useState(!1),[n,i]=S.useState(()=>{const M=ut("tutoring_timeSlots",[]);if(M.length>0)return M;const W=Ss();return ae("tutoring_timeSlots",W.timeSlots),W.timeSlots}),[o,l]=S.useState(()=>ut("tutoring_lessons",[])),[c,d]=S.useState(()=>ut("tutoring_chats",[])),[u,g]=S.useState(()=>{const M=ut("tutoring_studentProfiles",{});if(Object.keys(M).length>0)return M;const W=Ss();return ae("tutoring_studentProfiles",W.studentProfiles),W.studentProfiles}),[f,m]=S.useState(()=>{const M=ut("tutoring_teacherProfiles",{});if(Object.keys(M).length>0)return M;const W=Ss();return ae("tutoring_teacherProfiles",W.teacherProfiles),W.teacherProfiles}),[y,x]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]")}catch{return[]}}),[v,b]=S.useState(()=>ut("tutoring_posts",[])),[h,E]=S.useState(()=>ut("tutoring_notifications",[])),{user:p,updateProfile:$}=Ye(),R=()=>{const M=ut("tutoring_timeSlots",[]),W=ut("tutoring_lessons",[]),U=ut("tutoring_chats",[]),L=Ss(),j=(M.length>0?M:L.timeSlots).filter((C,D,V)=>D===V.findIndex(ne=>ne.id===C.id));i(j),l(W),d(U),g(L.studentProfiles),ae("tutoring_timeSlots",j),ae("tutoring_lessons",W),ae("tutoring_chats",U),ae("tutoring_studentProfiles",L.studentProfiles),Re()},P=async()=>{try{const M=await fetch(`${at}/api/users`);if(!M.ok)return[];const W=await M.json(),w=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]"),...W].filter((j,C,D)=>C===D.findIndex(V=>V.id===j.id));return x(w),localStorage.setItem("tutoring_users",JSON.stringify(w)),w}catch{return[]}},T=async()=>{try{console.log("Loading lessons from server...");const M=await fetch(`${at}/api/lessons`);if(!M.ok)return console.error("Failed to load lessons from server:",M.status),[];const W=await M.json();console.log("Loaded lessons from server:",W.length,W);const U=JSON.parse(localStorage.getItem("tutoring_lessons")||"[]");console.log("Local lessons:",U.length,U);const w=[...U,...W].filter((j,C,D)=>C===D.findIndex(V=>V.id===j.id));return console.log("Setting lessons in context:",w.length,w),l(w),ae("tutoring_lessons",w),w}catch(M){return console.error("Error loading lessons from server:",M),[]}},H=()=>{try{const M=JSON.parse(localStorage.getItem("tutoring_users")||"[]");x(M)}catch{x([])}},z=()=>{P(),T(),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers"))},A=async()=>{try{console.log("Force syncing data from server...");const M=await fetch(`${at}/api/sync`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!M.ok){console.warn("Failed to sync data from server:",M.status,M.statusText);return}const W=M.headers.get("content-type");if(!W||!W.includes("application/json")){console.warn("Server returned non-JSON response:",W);return}const U=await M.json();U.timeSlots&&(i(U.timeSlots),ae("tutoring_timeSlots",U.timeSlots)),U.lessons&&(l(U.lessons),ae("tutoring_lessons",U.lessons)),U.chats&&(d(U.chats),ae("tutoring_chats",U.chats)),U.posts&&(b(U.posts),ae("tutoring_posts",U.posts));const L=[];U.teacherProfiles&&Object.entries(U.teacherProfiles).forEach(([w,j])=>{const C=j;L.push({id:w,email:String(C.email||""),name:String(C.name||""),nickname:String(C.nickname||""),role:"teacher",phone:String(C.phone||""),profile:C})}),U.studentProfiles&&Object.entries(U.studentProfiles).forEach(([w,j])=>{const C=j;L.push({id:w,email:String(C.email||""),name:String(C.name||""),nickname:String(C.nickname||""),role:"student",phone:String(C.phone||""),profile:C})}),x(L),ae("tutoring_users",L),console.log("Data sync completed successfully")}catch(M){console.warn("Error syncing data (continuing with local data):",M)}};S.useEffect(()=>{const M=async()=>{try{const U=await fetch(`${at}/api/health`,{method:"GET",signal:AbortSignal.timeout(5e3)});if(U.ok){const L=await U.json();return console.log("Server health check passed:",L),!0}return!1}catch(U){return console.warn("Server not available, working in offline mode:",U),!1}};(async()=>{if(!await M()){console.log("Server not available, loading local data only"),R(),T();return}console.log("Server is available, initializing Socket.IO connection...");const L=Qo(at,{...bd,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:1e4});return r.current=L,L.on("connect",()=>{a(!0),console.log("✅ Connected to server via Socket.IO"),console.log(`🌐 Server URL: ${at}`),console.log(`🔌 Socket ID: ${L.id}`),P(),T();const w=ut("tutoring_timeSlots",[]);w.length>0&&w.forEach(j=>{r.current&&r.current.emit("createSlot",j)}),r.current&&(r.current.emit("requestAllPosts"),p&&(r.current.emit("requestUserNotifications",p.id),r.current.emit("subscribeNotifications",p.id)))}),L.on("disconnect",()=>{a(!1),console.log("🔌 Disconnected from server")}),L.on("reconnect",w=>{a(!0),console.log(`🔄 Reconnected to server after ${w} attempts`)}),L.on("reconnect_attempt",w=>{console.log(`🔄 Reconnection attempt ${w}`)}),L.on("connect_error",w=>{a(!1),console.warn("❌ Socket.IO connection error:",w),console.warn("🔧 Working in offline mode until reconnection..."),R(),T()}),L.on("initialData",w=>{const D=[...ut("tutoring_timeSlots",[]),...w.timeSlots].filter((V,ne,Ee)=>ne===Ee.findIndex(Oe=>Oe.id===V.id));i(D),l(w.lessons),ae("tutoring_timeSlots",D),ae("tutoring_lessons",w.lessons),w.chats&&(d(w.chats),ae("tutoring_chats",w.chats))}),L.on("allSlots",w=>{i(w),ae("tutoring_timeSlots",w)}),L.on("allUsers",w=>{x(w),ae("tutoring_users",w)}),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers")),L.on("slotCreated",w=>{console.log("Slot created via WebSocket:",w),i(j=>{if(j.find(D=>D.id===w.id)){const D=j.map(V=>V.id===w.id?w:V);return ae("tutoring_timeSlots",D),console.log("Existing slot updated, total slots:",D.length),D}else{const D=[...j,w];return ae("tutoring_timeSlots",D),console.log("New slot added, total slots:",D.length),D}})}),L.on("slotBooked",w=>{console.log("Slot booked via WebSocket:",w),i(j=>{const C=j.map(D=>D.id===w.slotId?{...D,isBooked:!0,bookedStudentId:w.bookedStudentId||w.lesson.studentId}:D);return ae("tutoring_timeSlots",C),C}),l(j=>{if(!j.find(D=>D.id===w.lesson.id)){const D=[...j,w.lesson];return ae("tutoring_lessons",D),console.log("New lesson added, total lessons:",D.length),D}return j})}),L.on("slotCancelled",w=>{console.log("Slot cancelled via WebSocket:",w),i(j=>{const C=j.map(D=>D.id===w.slotId?{...D,isBooked:!1,bookedStudentId:void 0}:D);return ae("tutoring_timeSlots",C),C}),l(j=>{const C=j.filter(D=>D.id!==w.lessonId);return ae("tutoring_lessons",C),console.log("Lesson removed, total lessons:",C.length),C})}),L.on("chatCreated",w=>{d(j=>{if(!j.find(D=>D.id===w.id)){const D=[...j,w];return ae("tutoring_chats",D),D}return j})}),L.on("receiveMessage",w=>{d(j=>{const C=j.map(D=>D.id===w.chatId?{...D,messages:[...D.messages,w.message],lastMessage:w.message}:D);return ae("tutoring_chats",C),C})}),L.on("chatDeleted",w=>{console.log("chatDeleted event received:",w),d(j=>{const C=j.filter(D=>D.id!==w.chatId);return console.log(`Chat ${w.chatId} removed from state. Total chats: ${C.length}`),ae("tutoring_chats",C),C})}),L.on("chatMarkedAsRead",w=>{d(j=>{const C=j.map(D=>D.id===w.chatId?{...D,messages:D.messages.map(V=>({...V,isRead:!0}))}:D);return ae("tutoring_chats",C),C})}),L.on("chatMessagesCleared",w=>{d(j=>{const C=j.map(D=>D.id===w.chatId?{...D,messages:[]}:D);return ae("tutoring_chats",C),C})}),L.on("chatArchived",w=>{d(j=>{const C=j.map(D=>D.id===w.chatId?{...D,archived:!0}:D);return ae("tutoring_chats",C),C})}),L.on("chatUnarchived",w=>{d(j=>{const C=j.map(D=>D.id===w.chatId?{...D,archived:!1}:D);return ae("tutoring_chats",C),C})}),L.on("newNotification",w=>{E(j=>{const C=[...j,w];return ae("tutoring_notifications",C),C})}),L.on("slotDeleted",w=>{console.log("Slot deleted via WebSocket:",w),i(j=>{const C=j.filter(D=>D.id!==w.slotId);return ae("tutoring_timeSlots",C),console.log("Slot removed, total slots:",C.length),C})}),L.on("allSlots",w=>{console.log("Received all slots from server:",w.length),i(w),ae("tutoring_timeSlots",w)}),L.on("allLessons",w=>{console.log("Received all lessons from server:",w.length),l(w),ae("tutoring_lessons",w)}),L.on("dataUpdated",w=>{if(console.log("Received dataUpdated event:",w.type),w.timeSlots&&(i(w.timeSlots),ae("tutoring_timeSlots",w.timeSlots),console.log("Slots updated via dataUpdated:",w.timeSlots.length)),w.lessons&&(l(w.lessons),ae("tutoring_lessons",w.lessons),console.log("Lessons updated via dataUpdated:",w.lessons.length)),w.teacherProfiles){m(w.teacherProfiles),ae("tutoring_teacherProfiles",w.teacherProfiles);const C=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(D=>D.role==="teacher"&&w.teacherProfiles[D.id]?{...D,profile:w.teacherProfiles[D.id]}:D);x(C),ae("tutoring_users",C)}if(w.studentProfiles){g(w.studentProfiles),ae("tutoring_studentProfiles",w.studentProfiles);const C=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(D=>D.role==="student"&&w.studentProfiles[D.id]?{...D,profile:w.studentProfiles[D.id]}:D);x(C),ae("tutoring_users",C)}}),L.on("userRegistered",w=>{x(j=>{if(!j.find(D=>D.id===w.id)){const D=[...j,w];return ae("tutoring_users",D),D}return j})}),r.current&&r.current.on("lessonCompleted",w=>{if(l(j=>{const C=j.map(D=>D.id===w.lesson.id?w.lesson:D);return ae("tutoring_lessons",C),C}),p&&p.role==="teacher"&&w.lesson.status==="completed"){const j={...p.profile};j.lessonsCount=(j.lessonsCount||0)+1,$(j)}}),L.on("studentProfiles",w=>{g(w||{});const C=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([D,V])=>{const ne=C.findIndex(Ee=>Ee.id===D);ne>=0?C[ne]={...C[ne],profile:V}:C.push({id:D,email:V.email||"",name:V.name||"",nickname:V.nickname||"",role:"student",phone:V.phone||"",profile:V})}),localStorage.setItem("tutoring_users",JSON.stringify(C)),x(C)}),L.on("teacherProfiles",w=>{m(w),ae("tutoring_teacherProfiles",w);const C=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([D,V])=>{const ne=C.findIndex(Ee=>Ee.id===D);ne>=0?C[ne]={...C[ne],profile:V}:C.push({id:D,email:V.email||"",name:V.name||"",nickname:V.nickname||"",role:"teacher",phone:V.phone||"",profile:V})}),localStorage.setItem("tutoring_users",JSON.stringify(C)),x(C)}),L.on("studentProfiles",w=>{g(w),ae("tutoring_studentProfiles",w);const C=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([D,V])=>{const ne=C.findIndex(Ee=>Ee.id===D);ne>=0?C[ne]={...C[ne],profile:V}:C.push({id:D,email:V.email||"",name:V.name||"",nickname:V.nickname||"",role:"student",phone:V.phone||"",profile:V})}),localStorage.setItem("tutoring_users",JSON.stringify(C)),x(C)}),L.on("studentProfileUpdated",w=>{g(j=>({...j,[w.studentId]:w.profile}))}),L.on("teacherProfileUpdated",w=>{try{const C=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(D=>D.id===w.teacherId?{...D,profile:w.profile,avatar:w.profile.avatar}:D);localStorage.setItem("tutoring_users",JSON.stringify(C)),x(C)}catch{}}),L.on("profileUpdated",w=>{try{const j=JSON.parse(localStorage.getItem("tutoring_users")||"[]");let C=!1;const D="userId"in w?w.userId:w.id,V="type"in w?w.type:w.role,ne=w.profile,Ee=j.map(Oe=>Oe.id===D?(C=!0,{...Oe,profile:ne,avatar:ne.avatar,name:ne.name||Oe.name,email:ne.email||Oe.email}):Oe);C||Ee.push({id:D,role:V,profile:ne,avatar:ne.avatar,name:ne.name||"",email:ne.email||""}),localStorage.setItem("tutoring_users",JSON.stringify(Ee)),x(Ee),V==="teacher"?m(Oe=>({...Oe,[D]:ne})):V==="student"&&g(Oe=>({...Oe,[D]:ne})),console.log("Profile updated via WebSocket:",{userId:D,role:V,profile:ne})}catch(j){console.error("Error processing profileUpdated event:",j)}}),L.on("userRegistered",w=>{try{const j=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),C=j.findIndex(D=>D.id===w.id);C>=0?j[C]=w:j.push(w),localStorage.setItem("tutoring_users",JSON.stringify(j)),x(j)}catch{}}),L.on("allPosts",w=>{b(w),ae("tutoring_posts",w)}),L.on("postCreated",w=>{b(j=>{const C=[w,...j];return ae("tutoring_posts",C),C})}),L.on("postReactionUpdated",w=>{b(j=>{const C=j.map(D=>D.id===w.postId?{...D,reactions:w.reactions,likes:w.likes}:D);return ae("tutoring_posts",C),C})}),L.on("postCommentAdded",w=>{b(j=>{const C=j.map(D=>D.id===w.postId?{...D,comments:[...D.comments,w.comment]}:D);return ae("tutoring_posts",C),C})}),L.on("postEdited",w=>{b(j=>{const C=j.map(D=>D.id===w.postId?{...D,text:w.text,tags:w.tags,editedAt:w.editedAt}:D);return ae("tutoring_posts",C),C})}),L.on("postDeleted",w=>{b(j=>{const C=j.filter(D=>D.id!==w.postId);return ae("tutoring_posts",C),C})}),L.on("postBookmarkUpdated",w=>{b(j=>{const C=j.map(D=>D.id===w.postId?{...D,bookmarks:w.bookmarks}:D);return ae("tutoring_posts",C),C})}),L.on("searchResults",w=>{}),L.on("userNotifications",w=>{E(w),ae("tutoring_notifications",w)}),L.on("newNotification",w=>{E(j=>{const C=[w,...j];return ae("tutoring_notifications",C),C})}),L.on("notificationMarkedAsRead",w=>{E(j=>{const C=j.map(D=>D.id===w.notificationId?{...D,isRead:!0,readAt:new Date().toISOString()}:D);return ae("tutoring_notifications",C),C})}),L.on("allNotificationsMarkedAsRead",w=>{E(j=>{const C=j.map(D=>D.userId===w.userId?{...D,isRead:!0,readAt:new Date().toISOString()}:D);return ae("tutoring_notifications",C),C})}),()=>{L.close(),r.current=null}})()},[]),S.useEffect(()=>{const M=U=>{if(U.key==="tutoring_users")try{const L=JSON.parse(U.newValue||"[]");x(L)}catch{x([])}},W=U=>{var L;if(((L=U.detail)==null?void 0:L.key)==="tutoring_users")try{const w=JSON.parse(U.detail.newValue||"[]");x(w)}catch{x([])}};return window.addEventListener("storage",M),window.addEventListener("customStorage",W),()=>{window.removeEventListener("storage",M),window.removeEventListener("customStorage",W)}},[]),S.useEffect(()=>{ae("tutoring_timeSlots",n)},[n]),S.useEffect(()=>{ae("tutoring_lessons",o)},[o]),S.useEffect(()=>{ae("tutoring_chats",c)},[c]),S.useEffect(()=>{ae("tutoring_posts",v)},[v]),S.useEffect(()=>{ae("tutoring_notifications",h)},[h]),S.useEffect(()=>{p&&r.current&&s&&(r.current.emit("subscribeNotifications",p.id),r.current.emit("requestUserNotifications",p.id))},[p,s]);const K=M=>{const W={...M,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};i(U=>{const L=[...U,W];return ae("tutoring_timeSlots",L),L}),r.current&&s&&r.current.emit("createSlot",W)},q=async(M,W,U,L)=>new Promise((w,j)=>{if((L==null?void 0:L.mode)==="assign"&&(!W||!U)){alert("Ошибка: не выбран ученик для назначения урока!"),j(new Error("createSlot: assign mode without studentId/studentName"));return}const C=!!W,D={...M,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isBooked:C,...C?{bookedStudentId:W}:{}};if(i(V=>{const ne=[...V,D];return ae("tutoring_timeSlots",ne),ne}),r.current&&s&&r.current.emit("createSlot",D),C&&W&&U){const V={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:W,teacherId:D.teacherId,studentName:U,teacherName:D.teacherName,subject:D.subject,date:D.date,startTime:D.startTime,endTime:D.endTime,duration:D.duration,format:D.format,status:"scheduled",price:D.price,lessonType:D.lessonType};if(l(ne=>[...ne,V]),F(W,D.teacherId,U,D.teacherName),p&&p.role==="teacher"){const ne={...p.profile};ne.students||(ne.students=[]),ne.students.includes(W)||ne.students.push(W),$(ne)}r.current&&s&&r.current.emit("bookSlot",{slotId:D.id,lesson:V,bookedStudentId:W})}w(D)}),J=(M,W,U,L)=>{const w=n.find(C=>C.id===M);if(!w||w.isBooked)return;if(p&&p.role==="teacher"){const C={...p.profile};C.students||(C.students=[]),C.students.includes(W)||C.students.push(W),$(C)}i(C=>C.map(D=>D.id===M?{...D,isBooked:!0,bookedStudentId:W}:D));const j={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:W,teacherId:w.teacherId,studentName:U,teacherName:w.teacherName,subject:w.subject,date:w.date,startTime:w.startTime,endTime:w.endTime,duration:w.duration,format:w.format,status:"scheduled",price:w.price,lessonType:w.lessonType,comment:L||""};l(C=>[...C,j]),F(W,w.teacherId,U,w.teacherName),r.current&&s&&r.current.emit("bookSlot",{slotId:M,lesson:j,bookedStudentId:W})},ie=M=>{const W=o.find(L=>L.id===M);if(!W)return;const U=n.find(L=>L.teacherId===W.teacherId&&L.date===W.date&&L.startTime===W.startTime);l(L=>L.filter(w=>w.id!==M)),U&&(i(L=>L.map(w=>w.id===U.id?{...w,isBooked:!1,bookedStudentId:void 0}:w)),r.current&&s&&r.current.emit("cancelSlot",{slotId:U.id,lessonId:M}))},se=(M,W,U)=>{const L=o.find(j=>j.id===M);if(!L)return;const w=new Date(`2000-01-01T${U}`);w.setMinutes(w.getMinutes()+L.duration),l(j=>j.map(C=>C.id===M?{...C,date:W,startTime:U,endTime:w.toTimeString().slice(0,5)}:C)),i(j=>j.map(C=>C.teacherId===L.teacherId&&C.date===L.date&&C.startTime===L.startTime?{...C,isBooked:!1,bookedStudentId:void 0}:C))},N=M=>n.filter(U=>{var j;if(U.isBooked)return!1;const L=new Date(U.date),w=new Date;if(w.setHours(0,0,0,0),L<w||M.grade&&M.grade!==""&&(!U.grades||!U.grades.includes(M.grade))||M.subject&&M.subject!==""&&U.subject!==M.subject||M.experience&&M.experience!==""&&U.experience!==M.experience||M.lessonType&&M.lessonType!==""&&U.lessonType!==M.lessonType||M.duration&&M.duration>0&&U.duration!==M.duration||M.format&&M.format!==""&&U.format!==M.format||M.minRating&&M.minRating>0&&(U.rating||0)<M.minRating||M.goals&&M.goals.length>0&&(!U.goals||!M.goals.some(C=>U.goals.includes(C))))return!1;if(M.city&&M.city!==""){const C=y.find(V=>V.id===U.teacherId),D=((j=C==null?void 0:C.profile)==null?void 0:j.city)||"";if(D&&!D.toLowerCase().includes(M.city.toLowerCase()))return!1}return!0}),F=(M,W,U,L)=>{console.log("🔍 getOrCreateChat DEBUG:"),console.log("- Participant 1:",{id:M,name:U}),console.log("- Participant 2:",{id:W,name:L}),console.log("- Current chats count:",c.length);const w=c.find(C=>C.participants.includes(M)&&C.participants.includes(W));if(w)return console.log("✅ Found existing chat:",w.id),w.id;console.log("🆕 Creating new chat...");const j={id:`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,participants:[M,W],participantNames:[U,L],messages:[]};if(console.log("📝 New chat created:",j.id),d(C=>{const D=[...C,j];return ae("tutoring_chats",D),console.log("💾 Chat saved to localStorage, total chats:",D.length),D}),r.current&&s){console.log("📡 Sending chat to server..."),r.current.emit("createChat",j);const C={id:`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:W,type:"new_chat",title:"Новый чат",message:`${U} создал с вами чат`,isRead:!1,timestamp:new Date().toISOString(),data:{chatId:j.id,studentId:M,studentName:U}};r.current.emit("createNotification",C),console.log("📬 Notification sent to server")}else console.log("⚠️ Socket not connected, chat not sent to server");return console.log("🔍 END getOrCreateChat DEBUG"),j.id},Y=(M,W,U,L)=>{console.log("🔍 sendMessage DEBUG:"),console.log("- Chat ID:",M),console.log("- Sender:",{id:W,name:U}),console.log("- Content:",L);const w=c.find(V=>V.id===M);if(!w){console.error("❌ Chat not found:",M);return}console.log("✅ Chat found:",{id:w.id,participants:w.participants,participantNames:w.participantNames});const j=w.participants.find(V=>V!==W),C=w.participantNames.find((V,ne)=>w.participants[ne]!==W);if(!j){console.error("❌ Receiver not found in chat participants");return}console.log("📬 Receiver:",{id:j,name:C});const D={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,senderId:W,senderName:U,receiverId:j,receiverName:C||"Неизвестный пользователь",content:L,timestamp:new Date().toISOString(),isRead:!1};console.log("📝 Message created:",D.id),d(V=>V.map(ne=>{if(ne.id===M){const Ee={...ne,messages:[...ne.messages,D],lastMessage:D};return ae("tutoring_chats",V.map(Oe=>Oe.id===ne.id?Ee:Oe)),console.log("💾 Message saved locally, total messages in chat:",Ee.messages.length),Ee}return ne})),r.current&&s?(console.log("📡 Sending message to server..."),r.current.emit("sendMessage",{chatId:M,message:D}),console.log("✅ Message sent to server")):console.log("⚠️ Socket not connected, message not sent to server"),console.log("🔍 END sendMessage DEBUG")},O=(M,W,U,L,w)=>{if(console.log("🔍 sendMessageToUser DEBUG:"),console.log("- Sender:",{id:M,name:W}),console.log("- Receiver:",{id:U,name:L}),console.log("- Content:",w),!M||!W||!U||!L||!w)return console.error("❌ Missing required parameters for sendMessageToUser"),"";const j=F(M,U,W,L);return console.log("- Chat ID:",j),j?(Y(j,M,W,w),console.log("✅ Message sent successfully to chat:",j),console.log("🔍 END sendMessageToUser DEBUG"),j):(console.error("❌ Failed to create or find chat"),"")},oe=M=>{r.current&&s&&r.current.emit("lessonCompleted",{lessonId:M})},ge=(M,W)=>{r.current&&r.current.emit("updateStudentProfile",{studentId:M,profile:W}),g(U=>({...U,[M]:W}))},de=M=>{i(W=>{const U=W.map(L=>L.id===M?{...L,isDeleted:!0}:L);return ae("tutoring_timeSlots",U),U}),r.current&&s&&r.current.emit("deleteSlot",{slotId:M})},fe=()=>{i([]),l([]),d([]),localStorage.removeItem("tutoring_timeSlots"),localStorage.removeItem("tutoring_lessons"),localStorage.removeItem("tutoring_chats"),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")},pe=(M,W)=>{r.current&&s&&r.current.emit("updateTeacherProfile",{teacherId:M,profile:W});try{const L=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(w=>w.id===M?{...w,profile:W,avatar:W.avatar}:w);localStorage.setItem("tutoring_users",JSON.stringify(L))}catch{}},X=M=>{if(!p)return;const W=w=>{if(!w)return[];const j=/#[\wа-яё]+/gi,C=w.match(j);return C?[...new Set(C.map(D=>D.toLowerCase()))]:[]},U=M.media.map(w=>URL.createObjectURL(w)),L={id:`post_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,userName:p.name,userAvatar:p.avatar,text:M.text,media:U,type:M.type,date:new Date().toISOString(),reactions:[],comments:[],isBookmarked:!1,tags:W(M.text),likes:0,views:0,bookmarks:[]};b(w=>{const j=[L,...w];return ae("tutoring_posts",j),j}),r.current&&s&&r.current.emit("createPost",L)},xe=(M,W)=>{p&&(b(U=>{const L=U.map(w=>{if(w.id===M){const j=w.reactions.find(V=>V.userId===p.id);let C=[...w.reactions],D=w.likes||0;return j?j.type===W?(C=w.reactions.filter(V=>V.userId!==p.id),D=Math.max(0,D-1)):j.type=W:(C.push({id:`reaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,type:W,date:new Date().toISOString()}),D++),{...w,reactions:C,likes:D}}return w});return ae("tutoring_posts",L),L}),r.current&&s&&r.current.emit("addReaction",{postId:M,reactionType:W,userId:p.id}))},$e=(M,W)=>{if(!p)return;const U={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,userName:p.name,userAvatar:p.avatar,text:W,date:new Date().toISOString()};b(L=>{const w=L.map(j=>j.id===M?{...j,comments:[...j.comments,U]}:j);return ae("tutoring_posts",w),w}),r.current&&s&&r.current.emit("addComment",{postId:M,comment:U})},Z=M=>{},ve=M=>{p&&(b(W=>{const U=W.map(L=>{if(L.id===M){const w=L.bookmarks||[],j=w.indexOf(p.id);let C=[...w];return j===-1?C.push(p.id):C.splice(j,1),{...L,bookmarks:C}}return L});return ae("tutoring_posts",U),U}),r.current&&s&&r.current.emit("bookmarkPost",{postId:M,userId:p.id}))},Se=(M,W)=>{const U=L=>{if(!L)return[];const w=/#[\wа-яё]+/gi,j=L.match(w);return j?[...new Set(j.map(C=>C.toLowerCase()))]:[]};b(L=>{const w=L.map(j=>j.id===M?{...j,text:W,tags:U(W),editedAt:new Date().toISOString()}:j);return ae("tutoring_posts",w),w}),r.current&&s&&r.current.emit("editPost",{postId:M,newText:W})},ze=M=>{b(W=>{const U=W.filter(L=>L.id!==M);return ae("tutoring_posts",U),U}),r.current&&s&&r.current.emit("deletePost",{postId:M})},Xe=M=>{console.log("deleteChat called with chatId:",M),console.log("Current chats count:",c.length),d(W=>{if(!W.find(w=>w.id===M))return console.warn("Chat not found for deletion:",M),W;const L=W.filter(w=>w.id!==M);return console.log(`Chat ${M} removed. New count: ${L.length}`),ae("tutoring_chats",L),L}),r.current&&s?(console.log("Sending deleteChat event to server"),r.current.emit("deleteChat",{chatId:M})):console.warn("Socket not connected, chat deletion not synced to server")},Ae=M=>{d(W=>{const U=W.map(L=>L.id===M?{...L,messages:L.messages.map(w=>({...w,isRead:!0}))}:L);return ae("tutoring_chats",U),U}),r.current&&s&&r.current.emit("markChatAsRead",{chatId:M})},G=M=>{d(W=>{const U=W.map(L=>L.id===M?{...L,messages:[]}:L);return ae("tutoring_chats",U),U}),r.current&&s&&r.current.emit("clearChatMessages",{chatId:M})},he=M=>{d(W=>{const U=W.map(L=>L.id===M?{...L,archived:!0}:L);return ae("tutoring_chats",U),U}),r.current&&s&&r.current.emit("archiveChat",{chatId:M})},me=M=>{d(W=>{const U=W.map(L=>L.id===M?{...L,archived:!1}:L);return ae("tutoring_chats",U),U}),r.current&&s&&r.current.emit("unarchiveChat",{chatId:M})},Re=async()=>{try{console.log("🔄 Loading chats from server:",`${at}/api/sync`);const M=await fetch(`${at}/api/sync`);if(M.ok){const W=M.headers.get("content-type");if(W&&W.includes("application/json")){const U=await M.json();U.chats&&(console.log("✅ Loaded chats from server:",U.chats.length),d(U.chats),ae("tutoring_chats",U.chats))}else console.warn("⚠️ Server returned non-JSON response, using local chats")}else console.error("❌ Failed to load chats from server:",M.status,M.statusText)}catch(M){console.warn("⚠️ Error loading chats from server, using local chats:",M)}};return t.jsx(sl.Provider,{value:{timeSlots:n,lessons:o,chats:c,posts:v,createTimeSlot:K,bookLesson:J,cancelLesson:ie,rescheduleLesson:se,getFilteredSlots:N,sendMessage:Y,sendMessageToUser:O,getOrCreateChat:F,clearAllData:fe,isConnected:s,completeLesson:oe,studentProfiles:u,updateStudentProfile:ge,deleteSlot:de,createSlot:q,allUsers:y,setAllUsers:M=>{x(M),localStorage.setItem("tutoring_users",JSON.stringify(M))},refreshUsers:H,refreshAllData:z,forceSyncData:A,teacherProfiles:f,updateTeacherProfile:pe,socketRef:r,loadInitialData:R,createPost:X,addReaction:xe,addComment:$e,sharePost:Z,bookmarkPost:ve,editPost:Se,deletePost:ze,searchPosts:M=>{r.current&&s&&r.current.emit("searchPosts",M)},getPostsByUser:M=>v.filter(W=>W.userId===M),getBookmarkedPosts:M=>v.filter(W=>{var U;return(U=W.bookmarks)==null?void 0:U.includes(M)}),notifications:h,subscribeToNotifications:M=>{r.current&&s&&r.current.emit("subscribeNotifications",M)},unsubscribeFromNotifications:M=>{r.current&&s&&r.current.emit("unsubscribeNotifications",M)},markNotificationAsRead:M=>{E(W=>{const U=W.map(L=>L.id===M?{...L,isRead:!0,readAt:new Date().toISOString()}:L);return ae("tutoring_notifications",U),U}),r.current&&s&&r.current.emit("markNotificationAsRead",M)},markAllNotificationsAsRead:M=>{E(W=>{const U=W.map(L=>L.userId===M?{...L,isRead:!0,readAt:new Date().toISOString()}:L);return ae("tutoring_notifications",U),U}),r.current&&s&&r.current.emit("markAllNotificationsAsRead",M)},deleteNotification:M=>{E(W=>{const U=W.filter(L=>L.id!==M);return ae("tutoring_notifications",U),U})},deleteChat:Xe,markChatAsRead:Ae,clearChatMessages:G,archiveChat:he,unarchiveChat:me,loadChatsFromServer:Re},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(e,r)=>{const s=S.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>S.createElement("svg",{ref:u,...Nd,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Sd(e)}`,l].join(" "),...d},[...r.map(([g,f])=>S.createElement(g,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=le("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=le("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=le("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=le("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=le("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=le("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=le("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=le("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=le("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=le("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=le("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=le("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=le("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=le("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=le("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=le("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=le("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=le("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Xd=({onSuccess:e})=>{const[r,s]=S.useState(!0),[a,n]=S.useState(""),[i,o]=S.useState(""),[l,c]=S.useState(""),[d,u]=S.useState(""),[g,f]=S.useState(""),[m,y]=S.useState("student"),[x,v]=S.useState(!1),[b,h]=S.useState(!1),{login:E,register:p}=Ye(),$=async R=>{R.preventDefault(),v(!0);try{if(r)await E(a,i),e();else{if(!b){h(!0),v(!1);return}if(!g.trim()){alert("Пожалуйста, введите никнейм"),v(!1);return}if(!d.trim()){alert("Пожалуйста, введите номер телефона"),v(!1);return}await p(a,i,l,g,m,d)&&e()}}catch{}finally{v(!1)}};return!r&&b?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-[#0D3C69] rounded-xl flex items-center justify-center mb-4",children:t.jsx(We,{className:"h-6 w-6 text-white"})}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Выберите роль"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Кто вы на нашей платформе?"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("button",{onClick:()=>y("student"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${m==="student"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`p-3 rounded-lg ${m==="student"?"bg-blue-100":"bg-gray-100"}`,children:t.jsx(ye,{className:`h-6 w-6 ${m==="student"?"text-[#0D3C69]":"text-gray-600"}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Ученик"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ищу репетитора для обучения"})]})]})}),t.jsx("button",{onClick:()=>y("teacher"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${m==="teacher"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`p-3 rounded-lg ${m==="teacher"?"bg-blue-100":"bg-gray-100"}`,children:t.jsx(Yd,{className:`h-6 w-6 ${m==="teacher"?"text-[#0D3C69]":"text-gray-600"}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Преподаватель"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Провожу уроки и делюсь знаниями"})]})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Никнейм"}),t.jsx("input",{id:"nickname",type:"text",value:g,onChange:R=>f(R.target.value),required:!0,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"Введите никнейм"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер телефона"}),t.jsxs("div",{className:"relative",children:[t.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"phone",type:"tel",value:d,onChange:R=>u(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsx("button",{onClick:$,disabled:x||!g.trim()||!d.trim(),className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Создание аккаунта...":"Завершить регистрацию"}),t.jsx("button",{onClick:()=>h(!1),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:"Назад"})]})]})}):t.jsxs("div",{className:"min-h-screen flex",children:[t.jsx("div",{className:"flex-1 bg-white flex items-center justify-center p-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Добро пожаловать"}),t.jsx("p",{className:"text-lg text-gray-600",children:r?"Войдите в свой аккаунт":"Создайте новый аккаунт"})]}),t.jsxs("form",{onSubmit:$,className:"space-y-6",children:[!r&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),t.jsxs("div",{className:"relative",children:[t.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"name",type:"text",value:l,onChange:R=>c(R.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваше имя"})]})]}),!r&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),t.jsxs("div",{className:"relative",children:[t.jsx(pr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"phone",type:"tel",value:d,onChange:R=>u(R.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"email",type:"email",value:a,onChange:R=>n(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваш email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Пароль"}),t.jsxs("div",{className:"relative",children:[t.jsx(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"password",type:"password",value:i,onChange:R=>o(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:r?"Введите пароль":"Создайте пароль"})]})]}),t.jsx("button",{type:"submit",disabled:x,className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-bold py-4 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:x?r?"Вход...":"Создание аккаунта...":r?"Войти":"Создать аккаунт"})]}),t.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Продолжая, вы соглашаетесь с"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условиями использования"})," ","и"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политикой конфиденциальности"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-gray-600",children:r?"Нет аккаунта? ":"Уже есть аккаунт? "}),t.jsx("button",{onClick:()=>{s(!r),h(!1),n(""),o(""),c(""),u(""),f("")},className:"text-[#0D3C69] hover:text-[#0A2F56] font-medium",children:r?"Зарегистрироваться":"Войти"})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{className:"text-[#0D3C69] hover:text-[#0A2F56] text-sm",children:"Получить помощь"})}),t.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["Этот сайт защищен reCAPTCHA Enterprise и применяются"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политика конфиденциальности"})," ","и"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условия использования"})," ","Google."]})]})}),t.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[t.jsx("h2",{className:"text-5xl font-bold text-white mb-8 text-center",children:"Платформа для обучения"}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("blockquote",{className:"text-xl text-gray-300 italic leading-relaxed",children:'"Важно не количество знаний, а качество их. Можно знать очень многое не зная самого нужного."'}),t.jsx("cite",{className:"text-sm text-gray-400 mt-4 block",children:"— Л. Толстой"})]}),t.jsxs("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900 via-purple-900 to-black"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 opacity-20"})}),t.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((R,P)=>t.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},P))})]})]})]})},Jd=({activeTab:e,onTabChange:r})=>{const{user:s,logout:a}=Ye(),n=[{id:"home",label:"Главная",icon:_d},{id:"lessons",label:"Мои уроки",icon:qe},{id:"chats",label:"Чаты",icon:Le},{id:"profile",label:"Профиль",icon:ye}],i=[{id:"slots",label:"Слоты",icon:qe},{id:"calendar",label:"Календарь",icon:kd},{id:"students",label:"Ученики",icon:ye},{id:"chats",label:"Чаты",icon:Le},{id:"profile",label:"Профиль",icon:ye}],o=(s==null?void 0:s.role)==="teacher"?i:n;return t.jsx("nav",{className:"bg-card-light dark:bg-card-dark shadow-lg border-b border-border-light dark:border-border-dark transition-colors",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex justify-between h-16",children:[t.jsxs("div",{className:"flex items-center space-x-8",children:[t.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center shadow-md",style:{background:"#175b8c"},children:t.jsx("span",{className:"text-white font-bold text-lg",style:{fontFamily:"Inter, sans-serif",fontSize:28},children:"Na"})}),t.jsx("span",{className:"ml-3 text-2xl font-bold",style:{color:"#175b8c",fontFamily:"Inter, sans-serif"},children:"uchi"})]}),t.jsx("div",{className:"hidden md:flex space-x-8",children:o.map(l=>{const c=l.icon;return t.jsxs("button",{onClick:()=>r(l.id),className:`flex items-center gap-2 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200 shadow-none ${e===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[t.jsx(c,{className:"h-5 w-5"}),t.jsx("span",{children:l.label})]},l.id)})})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:s==null?void 0:s.nickname.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"hidden md:block",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700",children:s==null?void 0:s.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:["@",s==null?void 0:s.nickname]})]}),t.jsx("span",{className:"hidden md:block text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:(s==null?void 0:s.role)==="teacher"?"Преподаватель":"Ученик"})]}),t.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Выйти",children:t.jsx(Ad,{className:"h-4 w-4"})})]})]}),t.jsx("div",{className:"md:hidden border-t border-border-light dark:border-border-dark",children:t.jsx("div",{className:"flex space-x-1 py-2 overflow-x-auto",children:o.map(l=>{const c=l.icon;return t.jsxs("button",{onClick:()=>r(l.id),className:`flex-shrink-0 flex flex-col items-center gap-1 px-4 py-3 rounded-xl text-xs font-semibold transition-all duration-200 ${e===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[t.jsx(c,{className:"h-5 w-5"}),t.jsx("span",{children:l.label})]},l.id)})})})]})})};function Rt(e){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rt(e)}function Qd(e,r){if(Rt(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(Rt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ml(e){var r=Qd(e,"string");return Rt(r)=="symbol"?r:r+""}function Zt(e,r,s){return(r=ml(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function fi(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function ke(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?fi(Object(s),!0).forEach(function(a){Zt(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fi(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Qs(e,r){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function Dt(e,r){if(e==null)return{};var s,a,n=Qs(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ie(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function xi(e,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ml(a.key),a)}}function Fe(e,r,s){return r&&xi(e.prototype,r),s&&xi(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rs(e){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rs(e)}function hl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hl=function(){return!!e})()}function Zd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e,r){if(r&&(Rt(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zd(e)}function Ve(e,r,s){return r=Rs(r),eu(e,hl()?Reflect.construct(r,s||[],Rs(e).constructor):r.apply(e,s))}function Ls(e,r){return Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ls(e,r)}function Ke(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Ls(e,r)}function fl(e){if(Array.isArray(e))return e}function tu(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,n,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(e)).next,r!==0)for(;!(c=(a=i.call(s)).done)&&(l.push(a.value),l.length!==r);c=!0);}catch(u){d=!0,n=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw n}}return l}}function Ua(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function un(e,r){if(e){if(typeof e=="string")return Ua(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ua(e,r):void 0}}function xl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sr(e,r){return fl(e)||tu(e,r)||un(e,r)||xl()}function gl(e){var r,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(s=gl(e[r]))&&(a&&(a+=" "),a+=s);else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Pe(){for(var e,r,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(r=gl(e))&&(a&&(a+=" "),a+=r);return a}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_e.apply(null,arguments)}var ru=function(e,r,s,a,n,i,o,l){if(!e){var c;if(r===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,a,n,i,o,l],u=0;c=new Error(r.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},su=ru;const Jr=vt(su);var au=function(){};function nu(e,r){var s={};return Object.keys(e).forEach(function(a){s[Ms(a)]=au}),s}function gi(e,r){return e[r]!==void 0}function Ms(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function iu(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function ou(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,Ls(e,r)}function pl(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function vl(e){function r(s){var a=this.constructor.getDerivedStateFromProps(e,s);return a??null}this.setState(r.bind(this))}function bl(e,r){try{var s=this.props,a=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,a)}finally{this.props=s,this.state=a}}pl.__suppressDeprecationWarning=!0;vl.__suppressDeprecationWarning=!0;bl.__suppressDeprecationWarning=!0;function lu(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof r.getSnapshotBeforeUpdate!="function")return e;var s=null,a=null,n=null;if(typeof r.componentWillMount=="function"?s="componentWillMount":typeof r.UNSAFE_componentWillMount=="function"&&(s="UNSAFE_componentWillMount"),typeof r.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof r.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof r.componentWillUpdate=="function"?n="componentWillUpdate":typeof r.UNSAFE_componentWillUpdate=="function"&&(n="UNSAFE_componentWillUpdate"),s!==null||a!==null||n!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+(n!==null?`
  `+n:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(r.componentWillMount=pl,r.componentWillReceiveProps=vl),typeof r.getSnapshotBeforeUpdate=="function"){if(typeof r.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=bl;var l=r.componentDidUpdate;r.componentDidUpdate=function(d,u,g){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:g;l.call(this,d,u,f)}}return e}var cu="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function yl(e,r,s){s===void 0&&(s=[]);var a=e.displayName||e.name||"Component",n=iu(e),i=Object.keys(r),o=i.map(Ms);n||!s.length||Jr(!1);var l=function(d){ou(u,d);function u(){for(var f,m=arguments.length,y=new Array(m),x=0;x<m;x++)y[x]=arguments[x];f=d.call.apply(d,[this].concat(y))||this,f.handlers=Object.create(null),i.forEach(function(b){var h=r[b],E=function($){if(f.props[h]){var R;f._notifying=!0;for(var P=arguments.length,T=new Array(P>1?P-1:0),H=1;H<P;H++)T[H-1]=arguments[H];(R=f.props)[h].apply(R,[$].concat(T)),f._notifying=!1}f.unmounted||f.setState(function(z){var A,K=z.values;return{values:_e(Object.create(null),K,(A={},A[b]=$,A))}})};f.handlers[h]=E}),s.length&&(f.attachRef=function(b){f.inner=b});var v=Object.create(null);return i.forEach(function(b){v[b]=f.props[Ms(b)]}),f.state={values:v,prevProps:{}},f}var g=u.prototype;return g.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(m,y){var x=y.values,v=y.prevProps,b={values:_e(Object.create(null),x),prevProps:{}};return i.forEach(function(h){b.prevProps[h]=m[h],!gi(m,h)&&gi(v,h)&&(b.values[h]=m[Ms(h)])}),b},g.componentWillUnmount=function(){this.unmounted=!0},g.render=function(){var m=this,y=this.props,x=y.innerRef,v=Qs(y,["innerRef"]);o.forEach(function(h){delete v[h]});var b={};return i.forEach(function(h){var E=m.props[h];b[h]=E!==void 0?E:m.state.values[h]}),_.createElement(e,_e({},v,b,this.handlers,{ref:x||this.attachRef}))},u}(_.Component);lu(l),l.displayName="Uncontrolled("+a+")",l.propTypes=_e({innerRef:function(){}},nu(r)),s.forEach(function(d){l.prototype[d]=function(){var g;return(g=this.inner)[d].apply(g,arguments)}});var c=l;return _.forwardRef&&(c=_.forwardRef(function(d,u){return _.createElement(l,_e({},d,{innerRef:u,__source:{fileName:cu,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,g){return u===void 0&&(u={}),yl(d,_e({},r,u),g)},c}var jl={exports:{}},du="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uu=du,mu=uu;function wl(){}function Nl(){}Nl.resetWarningCache=wl;var hu=function(){function e(a,n,i,o,l,c){if(c!==mu){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function r(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Nl,resetWarningCache:wl};return s.PropTypes=s,s};jl.exports=hu();var fu=jl.exports;const te=vt(fu);var Is="milliseconds",Qr="seconds",Zr="minutes",es="hours",ar="day",br="week",ts="month",nr="year",ir="decade",or="century",Sl={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},xu={month:1,year:12,decade:10*12,century:100*12};function gu(e){return[31,pu(e),31,30,31,30,31,31,30,31,30,31]}function pu(e){return e%4===0&&e%100!==0||e%400===0?29:28}function yt(e,r,s){switch(e=new Date(e),s){case Is:case Qr:case Zr:case es:case ar:case br:return vu(e,r*Sl[s]);case ts:case nr:case ir:case or:return bu(e,r*xu[s])}throw new TypeError('Invalid units: "'+s+'"')}function vu(e,r){var s=new Date(+e+r);return yu(e,s)}function bu(e,r){var s=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=s*12+a+r,o=Math.trunc(i/12),l=i%12,c=Math.min(n,gu(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function yu(e,r){var s=e.getTimezoneOffset(),a=r.getTimezoneOffset(),n=a-s;return new Date(+r+n*Sl.minutes)}function rs(e,r,s){return yt(e,-r,s)}function He(e,r,s){switch(e=new Date(e),r){case or:case ir:case nr:e=Us(e,0);case ts:e=Dl(e,1);case br:case ar:e=ns(e,0);case es:e=yr(e,0);case Zr:e=as(e,0);case Qr:e=ss(e,0)}return r===ir&&(e=rs(e,lr(e)%10,"year")),r===or&&(e=rs(e,lr(e)%100,"year")),r===br&&(e=Tl(e,0,s)),e}function Fs(e,r,s){switch(e=new Date(e),e=He(e,r,s),r){case or:case ir:case nr:case ts:case br:e=yt(e,1,r),e=rs(e,1,ar),e.setHours(23,59,59,999);break;case ar:e.setHours(23,59,59,999);break;case es:case Zr:case Qr:e=yt(e,1,r),e=rs(e,1,Is)}return e}var kr=$r(function(e,r){return e===r}),mn=$r(function(e,r){return e!==r}),Zs=$r(function(e,r){return e>r}),us=$r(function(e,r){return e>=r}),hn=$r(function(e,r){return e<r}),Cr=$r(function(e,r){return e<=r});function kl(){return new Date(Math.min.apply(Math,arguments))}function Cl(){return new Date(Math.max.apply(Math,arguments))}function $l(e,r,s,a){return a=a||"day",(!r||us(e,r,a))&&(!s||Cr(e,s,a))}var ss=Vt("Milliseconds"),as=Vt("Seconds"),yr=Vt("Minutes"),ns=Vt("Hours"),El=Vt("Day"),Dl=Vt("Date"),Us=Vt("Month"),lr=Vt("FullYear");function ju(e,r){return r===void 0?lr(He(e,ir)):yt(e,r+10,nr)}function wu(e,r){return r===void 0?lr(He(e,or)):yt(e,r+100,nr)}function Tl(e,r,s){var a=(El(e)+7-(s||0))%7;return r===void 0?a:yt(e,r-a,ar)}function Nu(e,r,s,a){var n,i,o;switch(s){case Is:case Qr:case Zr:case es:case ar:case br:n=r.getTime()-e.getTime();break;case ts:case nr:case ir:case or:n=(lr(r)-lr(e))*12+Us(r)-Us(e);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case Is:i=1;break;case Qr:i=1e3;break;case Zr:i=1e3*60;break;case es:i=1e3*60*60;break;case ar:i=1e3*60*60*24;break;case br:i=1e3*60*60*24*7;break;case ts:i=1;break;case nr:i=12;break;case ir:i=120;break;case or:i=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return o=n/i,a?o:Math.round(o)}function Vt(e){var r=function(s){switch(s){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(s,a){if(a===void 0)return s["get"+e]();var n=new Date(s);return n["set"+e](a),r&&n["get"+e]()!=a&&(e==="Hours"||a>=r&&n.getHours()-s.getHours()<Math.floor(a/r))&&n["set"+e](a+r),n}}function $r(e){return function(r,s,a){return e(+He(r,a),+He(s,a))}}const pi=Object.freeze(Object.defineProperty({__proto__:null,add:yt,century:wu,date:Dl,day:El,decade:ju,diff:Nu,endOf:Fs,eq:kr,gt:Zs,gte:us,hours:ns,inRange:$l,lt:hn,lte:Cr,max:Cl,milliseconds:ss,min:kl,minutes:yr,month:Us,neq:mn,seconds:as,startOf:He,subtract:rs,weekday:Tl,year:lr},Symbol.toStringTag,{value:"Module"}));function Su(e){if(Array.isArray(e))return Ua(e)}function Ml(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ku(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(e){return Su(e)||Ml(e)||un(e)||ku()}function Cu(e,r,s){var a=-1,n=e.length;r<0&&(r=-r>n?0:n+r),s=s>n?n:s,s<0&&(s+=n),n=r>s?0:s-r>>>0,r>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+r];return i}var Ol=Cu;function $u(e,r){return e===r||e!==e&&r!==r}var ms=$u,Eu=typeof ft=="object"&&ft&&ft.Object===Object&&ft,_l=Eu,Du=_l,Tu=typeof self=="object"&&self&&self.Object===Object&&self,Mu=Du||Tu||Function("return this")(),Mt=Mu,Ou=Mt,_u=Ou.Symbol,Er=_u,vi=Er,Pl=Object.prototype,Pu=Pl.hasOwnProperty,Au=Pl.toString,Ur=vi?vi.toStringTag:void 0;function Ru(e){var r=Pu.call(e,Ur),s=e[Ur];try{e[Ur]=void 0;var a=!0}catch{}var n=Au.call(e);return a&&(r?e[Ur]=s:delete e[Ur]),n}var Lu=Ru,Iu=Object.prototype,Fu=Iu.toString;function Uu(e){return Fu.call(e)}var Wu=Uu,bi=Er,Bu=Lu,Hu=Wu,zu="[object Null]",Gu="[object Undefined]",yi=bi?bi.toStringTag:void 0;function qu(e){return e==null?e===void 0?Gu:zu:yi&&yi in Object(e)?Bu(e):Hu(e)}var Dr=qu;function Yu(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Ft=Yu,Vu=Dr,Ku=Ft,Xu="[object AsyncFunction]",Ju="[object Function]",Qu="[object GeneratorFunction]",Zu="[object Proxy]";function em(e){if(!Ku(e))return!1;var r=Vu(e);return r==Ju||r==Qu||r==Xu||r==Zu}var fn=em,tm=9007199254740991;function rm(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tm}var xn=rm,sm=fn,am=xn;function nm(e){return e!=null&&am(e.length)&&!sm(e)}var hs=nm,im=9007199254740991,om=/^(?:0|[1-9]\d*)$/;function lm(e,r){var s=typeof e;return r=r??im,!!r&&(s=="number"||s!="symbol"&&om.test(e))&&e>-1&&e%1==0&&e<r}var gn=lm,cm=ms,dm=hs,um=gn,mm=Ft;function hm(e,r,s){if(!mm(s))return!1;var a=typeof r;return(a=="number"?dm(s)&&um(r,s.length):a=="string"&&r in s)?cm(s[r],e):!1}var ea=hm,fm=/\s/;function xm(e){for(var r=e.length;r--&&fm.test(e.charAt(r)););return r}var gm=xm,pm=gm,vm=/^\s+/;function bm(e){return e&&e.slice(0,pm(e)+1).replace(vm,"")}var ym=bm;function jm(e){return e!=null&&typeof e=="object"}var Kt=jm,wm=Dr,Nm=Kt,Sm="[object Symbol]";function km(e){return typeof e=="symbol"||Nm(e)&&wm(e)==Sm}var fs=km,Cm=ym,ji=Ft,$m=fs,wi=NaN,Em=/^[-+]0x[0-9a-f]+$/i,Dm=/^0b[01]+$/i,Tm=/^0o[0-7]+$/i,Mm=parseInt;function Om(e){if(typeof e=="number")return e;if($m(e))return wi;if(ji(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=ji(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=Cm(e);var s=Dm.test(e);return s||Tm.test(e)?Mm(e.slice(2),s?2:8):Em.test(e)?wi:+e}var _m=Om,Pm=_m,Ni=1/0,Am=17976931348623157e292;function Rm(e){if(!e)return e===0?e:0;if(e=Pm(e),e===Ni||e===-Ni){var r=e<0?-1:1;return r*Am}return e===e?e:0}var Al=Rm,Lm=Al;function Im(e){var r=Lm(e),s=r%1;return r===r?s?r-s:r:0}var Rl=Im,Fm=Ol,Um=ea,Wm=Rl,Bm=Math.ceil,Hm=Math.max;function zm(e,r,s){(s?Um(e,r,s):r===void 0)?r=1:r=Hm(Wm(r),0);var a=e==null?0:e.length;if(!a||r<1)return[];for(var n=0,i=0,o=Array(Bm(a/r));n<a;)o[i++]=Fm(e,n,n+=r);return o}var Gm=zm;const qm=vt(Gm);function xs(e){return e&&e.ownerDocument||document}function Ym(e){var r=xs(e);return r&&r.defaultView||window}function Vm(e,r){return Ym(e).getComputedStyle(e,r)}var Km=/([A-Z])/g;function Xm(e){return e.replace(Km,"-$1").toLowerCase()}var Jm=/^ms-/;function ks(e){return Xm(e).replace(Jm,"-ms-")}var Qm=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Zm(e){return!!(e&&Qm.test(e))}function hr(e,r){var s="",a="";if(typeof r=="string")return e.style.getPropertyValue(ks(r))||Vm(e).getPropertyValue(ks(r));Object.keys(r).forEach(function(n){var i=r[n];!i&&i!==0?e.style.removeProperty(ks(n)):Zm(n)?a+=n+"("+i+") ":s+=ks(n)+": "+i+";"}),a&&(s+="transform: "+a+";"),e.style.cssText+=";"+s}function is(e,r){if(e.contains)return e.contains(r);if(e.compareDocumentPosition)return e===r||!!(e.compareDocumentPosition(r)&16)}function eh(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function pn(e){return"window"in e&&e.window===e?e:eh(e)&&e.defaultView||!1}function Ll(e){var r=e==="pageXOffset"?"scrollLeft":"scrollTop";function s(a,n){var i=pn(a);if(n===void 0)return i?i[e]:a[r];i?i.scrollTo(i[e],n):a[r]=n}return s}const Il=Ll("pageXOffset"),Fl=Ll("pageYOffset");function er(e){var r=xs(e),s={top:0,left:0,height:0,width:0},a=r&&r.documentElement;return!a||!is(a,e)||(e.getBoundingClientRect!==void 0&&(s=e.getBoundingClientRect()),s={top:s.top+Fl(a)-(a.clientTop||0),left:s.left+Il(a)-(a.clientLeft||0),width:s.width,height:s.height}),s}var th=function(r){return!!r&&"offsetParent"in r};function rh(e){for(var r=xs(e),s=e&&e.offsetParent;th(s)&&s.nodeName!=="HTML"&&hr(s,"position")==="static";)s=s.offsetParent;return s||r.documentElement}var sh=function(r){return r.nodeName&&r.nodeName.toLowerCase()};function Ul(e,r){var s={top:0,left:0},a;if(hr(e,"position")==="fixed")a=e.getBoundingClientRect();else{var n=r||rh(e);a=er(e),sh(n)!=="html"&&(s=er(n));var i=String(hr(n,"borderTopWidth")||0);s.top+=parseInt(i,10)-Fl(n)||0;var o=String(hr(n,"borderLeftWidth")||0);s.left+=parseInt(o,10)-Il(n)||0}var l=String(hr(e,"marginTop")||0),c=String(hr(e,"marginLeft")||0);return _e({},a,{top:a.top-s.top-(parseInt(l,10)||0),left:a.left-s.left-(parseInt(c,10)||0)})}const vn=!!(typeof window<"u"&&window.document&&window.document.createElement);var Si=new Date().getTime();function ah(e){var r=new Date().getTime(),s=Math.max(0,16-(r-Si)),a=setTimeout(e,s);return Si=r,a}var nh=["","webkit","moz","o","ms"],Wa="clearTimeout",Ba=ah,ki=function(r,s){return r+(r?s[0].toUpperCase()+s.substr(1):s)+"AnimationFrame"};vn&&nh.some(function(e){var r=ki(e,"request");return r in window&&(Wa=ki(e,"cancel"),Ba=function(a){return window[r](a)}),!!Ba});var Ci=function(r){typeof window[Wa]=="function"&&window[Wa](r)},Wl=Ba,Sa;function ih(e,r){if(!Sa){var s=document.body,a=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;Sa=function(i,o){return a.call(i,o)}}return Sa(e,r)}var oh=Function.prototype.bind.call(Function.prototype.call,[].slice);function lh(e,r){return oh(e.querySelectorAll(r))}var Ha=!1,za=!1;try{var ka={get passive(){return Ha=!0},get once(){return za=Ha=!0}};vn&&(window.addEventListener("test",ka,ka),window.removeEventListener("test",ka,!0))}catch{}function ch(e,r,s,a){if(a&&typeof a!="boolean"&&!za){var n=a.once,i=a.capture,o=s;!za&&n&&(o=s.__once||function l(c){this.removeEventListener(r,l,i),s.call(this,c)},s.__once=o),e.addEventListener(r,o,Ha?a:i)}e.addEventListener(r,s,a)}function dh(e){const r=S.useRef(e);return S.useEffect(()=>{r.current=e},[e]),r}function $i(e){const r=dh(e);return S.useCallback(function(...s){return r.current&&r.current(...s)},[r])}function Ei(){return S.useState(null)}function uh(){const e=S.useRef(!0),r=S.useRef(()=>e.current);return S.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),r.current}function mh(e){const r=uh();return[e[0],S.useCallback(s=>{if(r())return e[1](s)},[r,e[1]])]}var nt="top",gt="bottom",pt="right",it="left",bn="auto",gs=[nt,gt,pt,it],jr="start",os="end",hh="clippingParents",Bl="viewport",Wr="popper",fh="reference",Di=gs.reduce(function(e,r){return e.concat([r+"-"+jr,r+"-"+os])},[]),yn=[].concat(gs,[bn]).reduce(function(e,r){return e.concat([r,r+"-"+jr,r+"-"+os])},[]),xh="beforeRead",gh="read",ph="afterRead",vh="beforeMain",bh="main",yh="afterMain",jh="beforeWrite",wh="write",Nh="afterWrite",Sh=[xh,gh,ph,vh,bh,yh,jh,wh,Nh];function $t(e){return e.split("-")[0]}function lt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function cr(e){var r=lt(e).Element;return e instanceof r||e instanceof Element}function Et(e){var r=lt(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function jn(e){if(typeof ShadowRoot>"u")return!1;var r=lt(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var tr=Math.max,Ws=Math.min,wr=Math.round;function Ga(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function Hl(){return!/^((?!chrome|android).)*safari/i.test(Ga())}function Nr(e,r,s){r===void 0&&(r=!1),s===void 0&&(s=!1);var a=e.getBoundingClientRect(),n=1,i=1;r&&Et(e)&&(n=e.offsetWidth>0&&wr(a.width)/e.offsetWidth||1,i=e.offsetHeight>0&&wr(a.height)/e.offsetHeight||1);var o=cr(e)?lt(e):window,l=o.visualViewport,c=!Hl()&&s,d=(a.left+(c&&l?l.offsetLeft:0))/n,u=(a.top+(c&&l?l.offsetTop:0))/i,g=a.width/n,f=a.height/i;return{width:g,height:f,top:u,right:d+g,bottom:u+f,left:d,x:d,y:u}}function wn(e){var r=Nr(e),s=e.offsetWidth,a=e.offsetHeight;return Math.abs(r.width-s)<=1&&(s=r.width),Math.abs(r.height-a)<=1&&(a=r.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:a}}function zl(e,r){var s=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(s&&jn(s)){var a=r;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function qt(e){return e?(e.nodeName||"").toLowerCase():null}function Lt(e){return lt(e).getComputedStyle(e)}function kh(e){return["table","td","th"].indexOf(qt(e))>=0}function Xt(e){return((cr(e)?e.ownerDocument:e.document)||window.document).documentElement}function ta(e){return qt(e)==="html"?e:e.assignedSlot||e.parentNode||(jn(e)?e.host:null)||Xt(e)}function Ti(e){return!Et(e)||Lt(e).position==="fixed"?null:e.offsetParent}function Ch(e){var r=/firefox/i.test(Ga()),s=/Trident/i.test(Ga());if(s&&Et(e)){var a=Lt(e);if(a.position==="fixed")return null}var n=ta(e);for(jn(n)&&(n=n.host);Et(n)&&["html","body"].indexOf(qt(n))<0;){var i=Lt(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function ps(e){for(var r=lt(e),s=Ti(e);s&&kh(s)&&Lt(s).position==="static";)s=Ti(s);return s&&(qt(s)==="html"||qt(s)==="body"&&Lt(s).position==="static")?r:s||Ch(e)||r}function Nn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Yr(e,r,s){return tr(e,Ws(r,s))}function $h(e,r,s){var a=Yr(e,r,s);return a>s?s:a}function Gl(){return{top:0,right:0,bottom:0,left:0}}function ql(e){return Object.assign({},Gl(),e)}function Yl(e,r){return r.reduce(function(s,a){return s[a]=e,s},{})}var Eh=function(r,s){return r=typeof r=="function"?r(Object.assign({},s.rects,{placement:s.placement})):r,ql(typeof r!="number"?r:Yl(r,gs))};function Dh(e){var r,s=e.state,a=e.name,n=e.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,l=$t(s.placement),c=Nn(l),d=[it,pt].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var g=Eh(n.padding,s),f=wn(i),m=c==="y"?nt:it,y=c==="y"?gt:pt,x=s.rects.reference[u]+s.rects.reference[c]-o[c]-s.rects.popper[u],v=o[c]-s.rects.reference[c],b=ps(i),h=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0,E=x/2-v/2,p=g[m],$=h-f[u]-g[y],R=h/2-f[u]/2+E,P=Yr(p,R,$),T=c;s.modifiersData[a]=(r={},r[T]=P,r.centerOffset=P-R,r)}}function Th(e){var r=e.state,s=e.options,a=s.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=r.elements.popper.querySelector(n),!n)||zl(r.elements.popper,n)&&(r.elements.arrow=n))}const Mh={name:"arrow",enabled:!0,phase:"main",fn:Dh,effect:Th,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sr(e){return e.split("-")[1]}var Oh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _h(e,r){var s=e.x,a=e.y,n=r.devicePixelRatio||1;return{x:wr(s*n)/n||0,y:wr(a*n)/n||0}}function Mi(e){var r,s=e.popper,a=e.popperRect,n=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,g=e.isFixed,f=o.x,m=f===void 0?0:f,y=o.y,x=y===void 0?0:y,v=typeof u=="function"?u({x:m,y:x}):{x:m,y:x};m=v.x,x=v.y;var b=o.hasOwnProperty("x"),h=o.hasOwnProperty("y"),E=it,p=nt,$=window;if(d){var R=ps(s),P="clientHeight",T="clientWidth";if(R===lt(s)&&(R=Xt(s),Lt(R).position!=="static"&&l==="absolute"&&(P="scrollHeight",T="scrollWidth")),R=R,n===nt||(n===it||n===pt)&&i===os){p=gt;var H=g&&R===$&&$.visualViewport?$.visualViewport.height:R[P];x-=H-a.height,x*=c?1:-1}if(n===it||(n===nt||n===gt)&&i===os){E=pt;var z=g&&R===$&&$.visualViewport?$.visualViewport.width:R[T];m-=z-a.width,m*=c?1:-1}}var A=Object.assign({position:l},d&&Oh),K=u===!0?_h({x:m,y:x},lt(s)):{x:m,y:x};if(m=K.x,x=K.y,c){var q;return Object.assign({},A,(q={},q[p]=h?"0":"",q[E]=b?"0":"",q.transform=($.devicePixelRatio||1)<=1?"translate("+m+"px, "+x+"px)":"translate3d("+m+"px, "+x+"px, 0)",q))}return Object.assign({},A,(r={},r[p]=h?x+"px":"",r[E]=b?m+"px":"",r.transform="",r))}function Ph(e){var r=e.state,s=e.options,a=s.gpuAcceleration,n=a===void 0?!0:a,i=s.adaptive,o=i===void 0?!0:i,l=s.roundOffsets,c=l===void 0?!0:l,d={placement:$t(r.placement),variation:Sr(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:n,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,Mi(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:o,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,Mi(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}const Ah={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ph,data:{}};var Cs={passive:!0};function Rh(e){var r=e.state,s=e.instance,a=e.options,n=a.scroll,i=n===void 0?!0:n,o=a.resize,l=o===void 0?!0:o,c=lt(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",s.update,Cs)}),l&&c.addEventListener("resize",s.update,Cs),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",s.update,Cs)}),l&&c.removeEventListener("resize",s.update,Cs)}}const Lh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Rh,data:{}};var Ih={left:"right",right:"left",bottom:"top",top:"bottom"};function _s(e){return e.replace(/left|right|bottom|top/g,function(r){return Ih[r]})}var Fh={start:"end",end:"start"};function Oi(e){return e.replace(/start|end/g,function(r){return Fh[r]})}function Sn(e){var r=lt(e),s=r.pageXOffset,a=r.pageYOffset;return{scrollLeft:s,scrollTop:a}}function kn(e){return Nr(Xt(e)).left+Sn(e).scrollLeft}function Uh(e,r){var s=lt(e),a=Xt(e),n=s.visualViewport,i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;var d=Hl();(d||!d&&r==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:i,height:o,x:l+kn(e),y:c}}function Wh(e){var r,s=Xt(e),a=Sn(e),n=(r=e.ownerDocument)==null?void 0:r.body,i=tr(s.scrollWidth,s.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=tr(s.scrollHeight,s.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+kn(e),c=-a.scrollTop;return Lt(n||s).direction==="rtl"&&(l+=tr(s.clientWidth,n?n.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function Cn(e){var r=Lt(e),s=r.overflow,a=r.overflowX,n=r.overflowY;return/auto|scroll|overlay|hidden/.test(s+n+a)}function Vl(e){return["html","body","#document"].indexOf(qt(e))>=0?e.ownerDocument.body:Et(e)&&Cn(e)?e:Vl(ta(e))}function Vr(e,r){var s;r===void 0&&(r=[]);var a=Vl(e),n=a===((s=e.ownerDocument)==null?void 0:s.body),i=lt(a),o=n?[i].concat(i.visualViewport||[],Cn(a)?a:[]):a,l=r.concat(o);return n?l:l.concat(Vr(ta(o)))}function qa(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Bh(e,r){var s=Nr(e,!1,r==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function _i(e,r,s){return r===Bl?qa(Uh(e,s)):cr(r)?Bh(r,s):qa(Wh(Xt(e)))}function Hh(e){var r=Vr(ta(e)),s=["absolute","fixed"].indexOf(Lt(e).position)>=0,a=s&&Et(e)?ps(e):e;return cr(a)?r.filter(function(n){return cr(n)&&zl(n,a)&&qt(n)!=="body"}):[]}function zh(e,r,s,a){var n=r==="clippingParents"?Hh(e):[].concat(r),i=[].concat(n,[s]),o=i[0],l=i.reduce(function(c,d){var u=_i(e,d,a);return c.top=tr(u.top,c.top),c.right=Ws(u.right,c.right),c.bottom=Ws(u.bottom,c.bottom),c.left=tr(u.left,c.left),c},_i(e,o,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Kl(e){var r=e.reference,s=e.element,a=e.placement,n=a?$t(a):null,i=a?Sr(a):null,o=r.x+r.width/2-s.width/2,l=r.y+r.height/2-s.height/2,c;switch(n){case nt:c={x:o,y:r.y-s.height};break;case gt:c={x:o,y:r.y+r.height};break;case pt:c={x:r.x+r.width,y:l};break;case it:c={x:r.x-s.width,y:l};break;default:c={x:r.x,y:r.y}}var d=n?Nn(n):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case jr:c[d]=c[d]-(r[u]/2-s[u]/2);break;case os:c[d]=c[d]+(r[u]/2-s[u]/2);break}}return c}function ls(e,r){r===void 0&&(r={});var s=r,a=s.placement,n=a===void 0?e.placement:a,i=s.strategy,o=i===void 0?e.strategy:i,l=s.boundary,c=l===void 0?hh:l,d=s.rootBoundary,u=d===void 0?Bl:d,g=s.elementContext,f=g===void 0?Wr:g,m=s.altBoundary,y=m===void 0?!1:m,x=s.padding,v=x===void 0?0:x,b=ql(typeof v!="number"?v:Yl(v,gs)),h=f===Wr?fh:Wr,E=e.rects.popper,p=e.elements[y?h:f],$=zh(cr(p)?p:p.contextElement||Xt(e.elements.popper),c,u,o),R=Nr(e.elements.reference),P=Kl({reference:R,element:E,placement:n}),T=qa(Object.assign({},E,P)),H=f===Wr?T:R,z={top:$.top-H.top+b.top,bottom:H.bottom-$.bottom+b.bottom,left:$.left-H.left+b.left,right:H.right-$.right+b.right},A=e.modifiersData.offset;if(f===Wr&&A){var K=A[n];Object.keys(z).forEach(function(q){var J=[pt,gt].indexOf(q)>=0?1:-1,ie=[nt,gt].indexOf(q)>=0?"y":"x";z[q]+=K[ie]*J})}return z}function Gh(e,r){r===void 0&&(r={});var s=r,a=s.placement,n=s.boundary,i=s.rootBoundary,o=s.padding,l=s.flipVariations,c=s.allowedAutoPlacements,d=c===void 0?yn:c,u=Sr(a),g=u?l?Di:Di.filter(function(y){return Sr(y)===u}):gs,f=g.filter(function(y){return d.indexOf(y)>=0});f.length===0&&(f=g);var m=f.reduce(function(y,x){return y[x]=ls(e,{placement:x,boundary:n,rootBoundary:i,padding:o})[$t(x)],y},{});return Object.keys(m).sort(function(y,x){return m[y]-m[x]})}function qh(e){if($t(e)===bn)return[];var r=_s(e);return[Oi(e),r,Oi(r)]}function Yh(e){var r=e.state,s=e.options,a=e.name;if(!r.modifiersData[a]._skip){for(var n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!0:o,c=s.fallbackPlacements,d=s.padding,u=s.boundary,g=s.rootBoundary,f=s.altBoundary,m=s.flipVariations,y=m===void 0?!0:m,x=s.allowedAutoPlacements,v=r.options.placement,b=$t(v),h=b===v,E=c||(h||!y?[_s(v)]:qh(v)),p=[v].concat(E).reduce(function(fe,pe){return fe.concat($t(pe)===bn?Gh(r,{placement:pe,boundary:u,rootBoundary:g,padding:d,flipVariations:y,allowedAutoPlacements:x}):pe)},[]),$=r.rects.reference,R=r.rects.popper,P=new Map,T=!0,H=p[0],z=0;z<p.length;z++){var A=p[z],K=$t(A),q=Sr(A)===jr,J=[nt,gt].indexOf(K)>=0,ie=J?"width":"height",se=ls(r,{placement:A,boundary:u,rootBoundary:g,altBoundary:f,padding:d}),N=J?q?pt:it:q?gt:nt;$[ie]>R[ie]&&(N=_s(N));var F=_s(N),Y=[];if(i&&Y.push(se[K]<=0),l&&Y.push(se[N]<=0,se[F]<=0),Y.every(function(fe){return fe})){H=A,T=!1;break}P.set(A,Y)}if(T)for(var O=y?3:1,oe=function(pe){var X=p.find(function(xe){var $e=P.get(xe);if($e)return $e.slice(0,pe).every(function(Z){return Z})});if(X)return H=X,"break"},ge=O;ge>0;ge--){var de=oe(ge);if(de==="break")break}r.placement!==H&&(r.modifiersData[a]._skip=!0,r.placement=H,r.reset=!0)}}const Vh={name:"flip",enabled:!0,phase:"main",fn:Yh,requiresIfExists:["offset"],data:{_skip:!1}};function Pi(e,r,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-r.height-s.y,right:e.right-r.width+s.x,bottom:e.bottom-r.height+s.y,left:e.left-r.width-s.x}}function Ai(e){return[nt,pt,gt,it].some(function(r){return e[r]>=0})}function Kh(e){var r=e.state,s=e.name,a=r.rects.reference,n=r.rects.popper,i=r.modifiersData.preventOverflow,o=ls(r,{elementContext:"reference"}),l=ls(r,{altBoundary:!0}),c=Pi(o,a),d=Pi(l,n,i),u=Ai(c),g=Ai(d);r.modifiersData[s]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:g},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":g})}const Xh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Kh};function Jh(e,r,s){var a=$t(e),n=[it,nt].indexOf(a)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},r,{placement:e})):s,o=i[0],l=i[1];return o=o||0,l=(l||0)*n,[it,pt].indexOf(a)>=0?{x:l,y:o}:{x:o,y:l}}function Qh(e){var r=e.state,s=e.options,a=e.name,n=s.offset,i=n===void 0?[0,0]:n,o=yn.reduce(function(u,g){return u[g]=Jh(g,r.rects,i),u},{}),l=o[r.placement],c=l.x,d=l.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=c,r.modifiersData.popperOffsets.y+=d),r.modifiersData[a]=o}const Zh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qh};function ef(e){var r=e.state,s=e.name;r.modifiersData[s]=Kl({reference:r.rects.reference,element:r.rects.popper,placement:r.placement})}const tf={name:"popperOffsets",enabled:!0,phase:"read",fn:ef,data:{}};function rf(e){return e==="x"?"y":"x"}function sf(e){var r=e.state,s=e.options,a=e.name,n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!1:o,c=s.boundary,d=s.rootBoundary,u=s.altBoundary,g=s.padding,f=s.tether,m=f===void 0?!0:f,y=s.tetherOffset,x=y===void 0?0:y,v=ls(r,{boundary:c,rootBoundary:d,padding:g,altBoundary:u}),b=$t(r.placement),h=Sr(r.placement),E=!h,p=Nn(b),$=rf(p),R=r.modifiersData.popperOffsets,P=r.rects.reference,T=r.rects.popper,H=typeof x=="function"?x(Object.assign({},r.rects,{placement:r.placement})):x,z=typeof H=="number"?{mainAxis:H,altAxis:H}:Object.assign({mainAxis:0,altAxis:0},H),A=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,K={x:0,y:0};if(R){if(i){var q,J=p==="y"?nt:it,ie=p==="y"?gt:pt,se=p==="y"?"height":"width",N=R[p],F=N+v[J],Y=N-v[ie],O=m?-T[se]/2:0,oe=h===jr?P[se]:T[se],ge=h===jr?-T[se]:-P[se],de=r.elements.arrow,fe=m&&de?wn(de):{width:0,height:0},pe=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:Gl(),X=pe[J],xe=pe[ie],$e=Yr(0,P[se],fe[se]),Z=E?P[se]/2-O-$e-X-z.mainAxis:oe-$e-X-z.mainAxis,ve=E?-P[se]/2+O+$e+xe+z.mainAxis:ge+$e+xe+z.mainAxis,Se=r.elements.arrow&&ps(r.elements.arrow),ze=Se?p==="y"?Se.clientTop||0:Se.clientLeft||0:0,Xe=(q=A==null?void 0:A[p])!=null?q:0,Ae=N+Z-Xe-ze,G=N+ve-Xe,he=Yr(m?Ws(F,Ae):F,N,m?tr(Y,G):Y);R[p]=he,K[p]=he-N}if(l){var me,Re=p==="x"?nt:it,M=p==="x"?gt:pt,W=R[$],U=$==="y"?"height":"width",L=W+v[Re],w=W-v[M],j=[nt,it].indexOf(b)!==-1,C=(me=A==null?void 0:A[$])!=null?me:0,D=j?L:W-P[U]-T[U]-C+z.altAxis,V=j?W+P[U]+T[U]-C-z.altAxis:w,ne=m&&j?$h(D,W,V):Yr(m?D:L,W,m?V:w);R[$]=ne,K[$]=ne-W}r.modifiersData[a]=K}}const af={name:"preventOverflow",enabled:!0,phase:"main",fn:sf,requiresIfExists:["offset"]};function nf(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function of(e){return e===lt(e)||!Et(e)?Sn(e):nf(e)}function lf(e){var r=e.getBoundingClientRect(),s=wr(r.width)/e.offsetWidth||1,a=wr(r.height)/e.offsetHeight||1;return s!==1||a!==1}function cf(e,r,s){s===void 0&&(s=!1);var a=Et(r),n=Et(r)&&lf(r),i=Xt(r),o=Nr(e,n,s),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!s)&&((qt(r)!=="body"||Cn(i))&&(l=of(r)),Et(r)?(c=Nr(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):i&&(c.x=kn(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function df(e){var r=new Map,s=new Set,a=[];e.forEach(function(i){r.set(i.name,i)});function n(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!s.has(l)){var c=r.get(l);c&&n(c)}}),a.push(i)}return e.forEach(function(i){s.has(i.name)||n(i)}),a}function uf(e){var r=df(e);return Sh.reduce(function(s,a){return s.concat(r.filter(function(n){return n.phase===a}))},[])}function mf(e){var r;return function(){return r||(r=new Promise(function(s){Promise.resolve().then(function(){r=void 0,s(e())})})),r}}function hf(e){var r=e.reduce(function(s,a){var n=s[a.name];return s[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,s},{});return Object.keys(r).map(function(s){return r[s]})}var Ri={placement:"bottom",modifiers:[],strategy:"absolute"};function Li(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return!r.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function ff(e){e===void 0&&(e={});var r=e,s=r.defaultModifiers,a=s===void 0?[]:s,n=r.defaultOptions,i=n===void 0?Ri:n;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ri,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},g=[],f=!1,m={state:u,setOptions:function(b){var h=typeof b=="function"?b(u.options):b;x(),u.options=Object.assign({},i,u.options,h),u.scrollParents={reference:cr(l)?Vr(l):l.contextElement?Vr(l.contextElement):[],popper:Vr(c)};var E=uf(hf([].concat(a,u.options.modifiers)));return u.orderedModifiers=E.filter(function(p){return p.enabled}),y(),m.update()},forceUpdate:function(){if(!f){var b=u.elements,h=b.reference,E=b.popper;if(Li(h,E)){u.rects={reference:cf(h,ps(E),u.options.strategy==="fixed"),popper:wn(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(z){return u.modifiersData[z.name]=Object.assign({},z.data)});for(var p=0;p<u.orderedModifiers.length;p++){if(u.reset===!0){u.reset=!1,p=-1;continue}var $=u.orderedModifiers[p],R=$.fn,P=$.options,T=P===void 0?{}:P,H=$.name;typeof R=="function"&&(u=R({state:u,options:T,name:H,instance:m})||u)}}}},update:mf(function(){return new Promise(function(v){m.forceUpdate(),v(u)})}),destroy:function(){x(),f=!0}};if(!Li(l,c))return m;m.setOptions(d).then(function(v){!f&&d.onFirstUpdate&&d.onFirstUpdate(v)});function y(){u.orderedModifiers.forEach(function(v){var b=v.name,h=v.options,E=h===void 0?{}:h,p=v.effect;if(typeof p=="function"){var $=p({state:u,name:b,instance:m,options:E}),R=function(){};g.push($||R)}})}function x(){g.forEach(function(v){return v()}),g=[]}return m}}var xf=ff({defaultModifiers:[Xh,tf,Ah,Lh,Zh,Vh,af,Mh]}),Ii=function(r){return{position:r,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},gf={name:"applyStyles",enabled:!1},pf={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(r){var s=r.state;return function(){var a=s.elements,n=a.reference,i=a.popper;if("removeAttribute"in n){var o=(n.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?n.setAttribute("aria-describedby",o.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(r){var s,a=r.state,n=a.elements,i=n.popper,o=n.reference,l=(s=i.getAttribute("role"))==null?void 0:s.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},vf=[];function bf(e,r,s){var a=s===void 0?{}:s,n=a.enabled,i=n===void 0?!0:n,o=a.placement,l=o===void 0?"bottom":o,c=a.strategy,d=c===void 0?"absolute":c,u=a.modifiers,g=u===void 0?vf:u,f=Qs(a,["enabled","placement","strategy","modifiers"]),m=S.useRef(),y=S.useCallback(function(){var p;(p=m.current)==null||p.update()},[]),x=S.useCallback(function(){var p;(p=m.current)==null||p.forceUpdate()},[]),v=mh(S.useState({placement:l,update:y,forceUpdate:x,attributes:{},styles:{popper:Ii(d),arrow:{}}})),b=v[0],h=v[1],E=S.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function($){var R=$.state,P={},T={};Object.keys(R.elements).forEach(function(H){P[H]=R.styles[H],T[H]=R.attributes[H]}),h({state:R,styles:P,attributes:T,update:y,forceUpdate:x,placement:R.placement})}}},[y,x,h]);return S.useEffect(function(){!m.current||!i||m.current.setOptions({placement:l,strategy:d,modifiers:[].concat(g,[E,gf])})},[d,l,E,i]),S.useEffect(function(){if(!(!i||e==null||r==null))return m.current=xf(e,r,_e({},f,{placement:l,strategy:d,modifiers:[].concat(g,[pf,E])})),function(){m.current!=null&&(m.current.destroy(),m.current=void 0,h(function(p){return _e({},p,{attributes:{},styles:{popper:Ii(d)}})}))}},[i,e,r]),b}function yf(e,r,s,a){var n=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(r,s,n),s.__once&&e.removeEventListener(r,s.__once,n)}function zr(e,r,s,a){return ch(e,r,s,a),function(){yf(e,r,s,a)}}var jf=function(){},wf=jf;const Nf=vt(wf);function Sf(e){return e&&"setState"in e?Jo.findDOMNode(e):e??null}const kf=function(e){return xs(Sf(e))};var Cf=27,Fi=function(){};function $f(e){return e.button===0}function Ef(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Ui=function(r){return r&&("current"in r?r.current:r)};function Df(e,r,s){var a=s===void 0?{}:s,n=a.disabled,i=a.clickTrigger,o=i===void 0?"click":i,l=S.useRef(!1),c=r||Fi,d=S.useCallback(function(f){var m,y=Ui(e);Nf(!!y,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!y||Ef(f)||!$f(f)||!!is(y,(m=f.composedPath==null?void 0:f.composedPath()[0])!=null?m:f.target)},[e]),u=$i(function(f){l.current||c(f)}),g=$i(function(f){f.keyCode===Cf&&c(f)});S.useEffect(function(){if(!(n||e==null)){var f=window.event,m=kf(Ui(e)),y=zr(m,o,d,!0),x=zr(m,o,function(h){if(h===f){f=void 0;return}u(h)}),v=zr(m,"keyup",function(h){if(h===f){f=void 0;return}g(h)}),b=[];return"ontouchstart"in m.documentElement&&(b=[].slice.call(m.body.children).map(function(h){return zr(h,"mousemove",Fi)})),function(){y(),x(),v(),b.forEach(function(h){return h()})}}},[e,n,o,d,u,g])}function Tf(e){var r={};return Array.isArray(e)?(e==null||e.forEach(function(s){r[s.name]=s}),r):e||r}function Mf(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(r){return e[r].name=r,e[r]})}function Of(e){var r,s,a,n,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,g=e.containerPadding,f=e.arrowElement,m=e.popperConfig,y=m===void 0?{}:m,x=Tf(y.modifiers);return _e({},y,{placement:l,enabled:i,strategy:u?"fixed":y.strategy,modifiers:Mf(_e({},x,{eventListeners:{enabled:o},preventOverflow:_e({},x.preventOverflow,{options:g?_e({padding:g},(r=x.preventOverflow)==null?void 0:r.options):(s=x.preventOverflow)==null?void 0:s.options}),offset:{options:_e({offset:d},(a=x.offset)==null?void 0:a.options)},arrow:_e({},x.arrow,{enabled:!!f,options:_e({},(n=x.arrow)==null?void 0:n.options,{element:f})}),flip:_e({enabled:!!c},x.flip)}))})}function _f(e,r){return e.classList?e.classList.contains(r):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+r+" ")!==-1}function Pf(e,r){e.classList?e.classList.add(r):_f(e,r)||(typeof e.className=="string"?e.className=e.className+" "+r:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+r))}function Wi(e,r){return e.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Af(e,r){e.classList?e.classList.remove(r):typeof e.className=="string"?e.className=Wi(e.className,r):e.setAttribute("class",Wi(e.className&&e.className.baseVal||"",r))}var $s;function $n(e){if((!$s&&$s!==0||e)&&vn){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),$s=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return $s}var Ca=function(r){var s;return typeof document>"u"?null:r==null?xs().body:(typeof r=="function"&&(r=r()),r&&"current"in r&&(r=r.current),(s=r)!=null&&s.nodeType&&r||null)};function Bi(e,r){var s=S.useState(function(){return Ca(e)}),a=s[0],n=s[1];if(!a){var i=Ca(e);i&&n(i)}return S.useEffect(function(){},[r,a]),S.useEffect(function(){var o=Ca(e);o!==a&&n(o)},[e,a]),a}const Hi=e=>!e||typeof e=="function"?e:r=>{e.current=r};function Rf(e,r){const s=Hi(e),a=Hi(r);return n=>{s&&s(n),a&&a(n)}}function Lf(e,r){return S.useMemo(()=>Rf(e,r),[e,r])}var En=_.forwardRef(function(e,r){var s=e.flip,a=e.offset,n=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,u=Ei(),g=u[0],f=u[1],m=Ei(),y=m[0],x=m[1],v=Lf(f,r),b=Bi(e.container),h=Bi(e.target),E=S.useState(!e.show),p=E[0],$=E[1],R=bf(h,g,Of({placement:n,enableEvents:!!e.show,containerPadding:o||5,flip:s,offset:a,arrowElement:y,popperConfig:c})),P=R.styles,T=R.attributes,H=Qs(R,["styles","attributes"]);e.show?p&&$(!1):!e.transition&&!p&&$(!0);var z=function(){$(!0),e.onExited&&e.onExited.apply(e,arguments)},A=e.show||d&&!p;if(Df(g,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!A)return null;var K=e.children(_e({},H,{show:!!e.show,props:_e({},T.popper,{style:P.popper,ref:v}),arrowProps:_e({},T.arrow,{style:P.arrow,ref:x})}));if(d){var q=e.onExit,J=e.onExiting,ie=e.onEnter,se=e.onEntering,N=e.onEntered;K=_.createElement(d,{in:e.show,appear:!0,onExit:q,onExiting:J,onExited:z,onEnter:ie,onEntering:se,onEntered:N},K)}return b?Jo.createPortal(K,b):null});En.displayName="Overlay";En.propTypes={show:te.bool,placement:te.oneOf(yn),target:te.any,container:te.any,flip:te.bool,children:te.func.isRequired,containerPadding:te.number,popperConfig:te.object,rootClose:te.bool,rootCloseEvent:te.oneOf(["click","mousedown"]),rootCloseDisabled:te.bool,onHide:function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];if(r.rootClose){var i;return(i=te.func).isRequired.apply(i,[r].concat(a))}return te.func.apply(te,[r].concat(a))},transition:te.elementType,onEnter:te.func,onEntering:te.func,onEntered:te.func,onExit:te.func,onExiting:te.func,onExited:te.func};function If(){this.__data__=[],this.size=0}var Ff=If,Uf=ms;function Wf(e,r){for(var s=e.length;s--;)if(Uf(e[s][0],r))return s;return-1}var ra=Wf,Bf=ra,Hf=Array.prototype,zf=Hf.splice;function Gf(e){var r=this.__data__,s=Bf(r,e);if(s<0)return!1;var a=r.length-1;return s==a?r.pop():zf.call(r,s,1),--this.size,!0}var qf=Gf,Yf=ra;function Vf(e){var r=this.__data__,s=Yf(r,e);return s<0?void 0:r[s][1]}var Kf=Vf,Xf=ra;function Jf(e){return Xf(this.__data__,e)>-1}var Qf=Jf,Zf=ra;function ex(e,r){var s=this.__data__,a=Zf(s,e);return a<0?(++this.size,s.push([e,r])):s[a][1]=r,this}var tx=ex,rx=Ff,sx=qf,ax=Kf,nx=Qf,ix=tx;function Tr(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}Tr.prototype.clear=rx;Tr.prototype.delete=sx;Tr.prototype.get=ax;Tr.prototype.has=nx;Tr.prototype.set=ix;var sa=Tr,ox=sa;function lx(){this.__data__=new ox,this.size=0}var cx=lx;function dx(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s}var ux=dx;function mx(e){return this.__data__.get(e)}var hx=mx;function fx(e){return this.__data__.has(e)}var xx=fx,gx=Mt,px=gx["__core-js_shared__"],vx=px,$a=vx,zi=function(){var e=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function bx(e){return!!zi&&zi in e}var yx=bx,jx=Function.prototype,wx=jx.toString;function Nx(e){if(e!=null){try{return wx.call(e)}catch{}try{return e+""}catch{}}return""}var Xl=Nx,Sx=fn,kx=yx,Cx=Ft,$x=Xl,Ex=/[\\^$.*+?()[\]{}|]/g,Dx=/^\[object .+?Constructor\]$/,Tx=Function.prototype,Mx=Object.prototype,Ox=Tx.toString,_x=Mx.hasOwnProperty,Px=RegExp("^"+Ox.call(_x).replace(Ex,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ax(e){if(!Cx(e)||kx(e))return!1;var r=Sx(e)?Px:Dx;return r.test($x(e))}var Rx=Ax;function Lx(e,r){return e==null?void 0:e[r]}var Ix=Lx,Fx=Rx,Ux=Ix;function Wx(e,r){var s=Ux(e,r);return Fx(s)?s:void 0}var ur=Wx,Bx=ur,Hx=Mt,zx=Bx(Hx,"Map"),Dn=zx,Gx=ur,qx=Gx(Object,"create"),aa=qx,Gi=aa;function Yx(){this.__data__=Gi?Gi(null):{},this.size=0}var Vx=Yx;function Kx(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Xx=Kx,Jx=aa,Qx="__lodash_hash_undefined__",Zx=Object.prototype,eg=Zx.hasOwnProperty;function tg(e){var r=this.__data__;if(Jx){var s=r[e];return s===Qx?void 0:s}return eg.call(r,e)?r[e]:void 0}var rg=tg,sg=aa,ag=Object.prototype,ng=ag.hasOwnProperty;function ig(e){var r=this.__data__;return sg?r[e]!==void 0:ng.call(r,e)}var og=ig,lg=aa,cg="__lodash_hash_undefined__";function dg(e,r){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=lg&&r===void 0?cg:r,this}var ug=dg,mg=Vx,hg=Xx,fg=rg,xg=og,gg=ug;function Mr(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}Mr.prototype.clear=mg;Mr.prototype.delete=hg;Mr.prototype.get=fg;Mr.prototype.has=xg;Mr.prototype.set=gg;var pg=Mr,qi=pg,vg=sa,bg=Dn;function yg(){this.size=0,this.__data__={hash:new qi,map:new(bg||vg),string:new qi}}var jg=yg;function wg(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Ng=wg,Sg=Ng;function kg(e,r){var s=e.__data__;return Sg(r)?s[typeof r=="string"?"string":"hash"]:s.map}var na=kg,Cg=na;function $g(e){var r=Cg(this,e).delete(e);return this.size-=r?1:0,r}var Eg=$g,Dg=na;function Tg(e){return Dg(this,e).get(e)}var Mg=Tg,Og=na;function _g(e){return Og(this,e).has(e)}var Pg=_g,Ag=na;function Rg(e,r){var s=Ag(this,e),a=s.size;return s.set(e,r),this.size+=s.size==a?0:1,this}var Lg=Rg,Ig=jg,Fg=Eg,Ug=Mg,Wg=Pg,Bg=Lg;function Or(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}Or.prototype.clear=Ig;Or.prototype.delete=Fg;Or.prototype.get=Ug;Or.prototype.has=Wg;Or.prototype.set=Bg;var Tn=Or,Hg=sa,zg=Dn,Gg=Tn,qg=200;function Yg(e,r){var s=this.__data__;if(s instanceof Hg){var a=s.__data__;if(!zg||a.length<qg-1)return a.push([e,r]),this.size=++s.size,this;s=this.__data__=new Gg(a)}return s.set(e,r),this.size=s.size,this}var Vg=Yg,Kg=sa,Xg=cx,Jg=ux,Qg=hx,Zg=xx,ep=Vg;function _r(e){var r=this.__data__=new Kg(e);this.size=r.size}_r.prototype.clear=Xg;_r.prototype.delete=Jg;_r.prototype.get=Qg;_r.prototype.has=Zg;_r.prototype.set=ep;var Mn=_r,tp="__lodash_hash_undefined__";function rp(e){return this.__data__.set(e,tp),this}var sp=rp;function ap(e){return this.__data__.has(e)}var np=ap,ip=Tn,op=sp,lp=np;function Bs(e){var r=-1,s=e==null?0:e.length;for(this.__data__=new ip;++r<s;)this.add(e[r])}Bs.prototype.add=Bs.prototype.push=op;Bs.prototype.has=lp;var cp=Bs;function dp(e,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(e[s],s,e))return!0;return!1}var up=dp;function mp(e,r){return e.has(r)}var hp=mp,fp=cp,xp=up,gp=hp,pp=1,vp=2;function bp(e,r,s,a,n,i){var o=s&pp,l=e.length,c=r.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(r);if(d&&u)return d==r&&u==e;var g=-1,f=!0,m=s&vp?new fp:void 0;for(i.set(e,r),i.set(r,e);++g<l;){var y=e[g],x=r[g];if(a)var v=o?a(x,y,g,r,e,i):a(y,x,g,e,r,i);if(v!==void 0){if(v)continue;f=!1;break}if(m){if(!xp(r,function(b,h){if(!gp(m,h)&&(y===b||n(y,b,s,a,i)))return m.push(h)})){f=!1;break}}else if(!(y===x||n(y,x,s,a,i))){f=!1;break}}return i.delete(e),i.delete(r),f}var Jl=bp,yp=Mt,jp=yp.Uint8Array,Ql=jp;function wp(e){var r=-1,s=Array(e.size);return e.forEach(function(a,n){s[++r]=[n,a]}),s}var Np=wp;function Sp(e){var r=-1,s=Array(e.size);return e.forEach(function(a){s[++r]=a}),s}var kp=Sp,Yi=Er,Vi=Ql,Cp=ms,$p=Jl,Ep=Np,Dp=kp,Tp=1,Mp=2,Op="[object Boolean]",_p="[object Date]",Pp="[object Error]",Ap="[object Map]",Rp="[object Number]",Lp="[object RegExp]",Ip="[object Set]",Fp="[object String]",Up="[object Symbol]",Wp="[object ArrayBuffer]",Bp="[object DataView]",Ki=Yi?Yi.prototype:void 0,Ea=Ki?Ki.valueOf:void 0;function Hp(e,r,s,a,n,i,o){switch(s){case Bp:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Wp:return!(e.byteLength!=r.byteLength||!i(new Vi(e),new Vi(r)));case Op:case _p:case Rp:return Cp(+e,+r);case Pp:return e.name==r.name&&e.message==r.message;case Lp:case Fp:return e==r+"";case Ap:var l=Ep;case Ip:var c=a&Tp;if(l||(l=Dp),e.size!=r.size&&!c)return!1;var d=o.get(e);if(d)return d==r;a|=Mp,o.set(e,r);var u=$p(l(e),l(r),a,n,i,o);return o.delete(e),u;case Up:if(Ea)return Ea.call(e)==Ea.call(r)}return!1}var zp=Hp;function Gp(e,r){for(var s=-1,a=r.length,n=e.length;++s<a;)e[n+s]=r[s];return e}var On=Gp,qp=Array.isArray,bt=qp,Yp=On,Vp=bt;function Kp(e,r,s){var a=r(e);return Vp(e)?a:Yp(a,s(e))}var Zl=Kp;function Xp(e,r){for(var s=-1,a=e==null?0:e.length,n=0,i=[];++s<a;){var o=e[s];r(o,s,e)&&(i[n++]=o)}return i}var Jp=Xp;function Qp(){return[]}var ec=Qp,Zp=Jp,ev=ec,tv=Object.prototype,rv=tv.propertyIsEnumerable,Xi=Object.getOwnPropertySymbols,sv=Xi?function(e){return e==null?[]:(e=Object(e),Zp(Xi(e),function(r){return rv.call(e,r)}))}:ev,_n=sv;function av(e,r){for(var s=-1,a=Array(e);++s<e;)a[s]=r(s);return a}var nv=av,iv=Dr,ov=Kt,lv="[object Arguments]";function cv(e){return ov(e)&&iv(e)==lv}var dv=cv,Ji=dv,uv=Kt,tc=Object.prototype,mv=tc.hasOwnProperty,hv=tc.propertyIsEnumerable,fv=Ji(function(){return arguments}())?Ji:function(e){return uv(e)&&mv.call(e,"callee")&&!hv.call(e,"callee")},Pn=fv,Hs={exports:{}};function xv(){return!1}var gv=xv;Hs.exports;(function(e,r){var s=Mt,a=gv,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o?s.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Hs,Hs.exports);var ia=Hs.exports,pv=Dr,vv=xn,bv=Kt,yv="[object Arguments]",jv="[object Array]",wv="[object Boolean]",Nv="[object Date]",Sv="[object Error]",kv="[object Function]",Cv="[object Map]",$v="[object Number]",Ev="[object Object]",Dv="[object RegExp]",Tv="[object Set]",Mv="[object String]",Ov="[object WeakMap]",_v="[object ArrayBuffer]",Pv="[object DataView]",Av="[object Float32Array]",Rv="[object Float64Array]",Lv="[object Int8Array]",Iv="[object Int16Array]",Fv="[object Int32Array]",Uv="[object Uint8Array]",Wv="[object Uint8ClampedArray]",Bv="[object Uint16Array]",Hv="[object Uint32Array]",Te={};Te[Av]=Te[Rv]=Te[Lv]=Te[Iv]=Te[Fv]=Te[Uv]=Te[Wv]=Te[Bv]=Te[Hv]=!0;Te[yv]=Te[jv]=Te[_v]=Te[wv]=Te[Pv]=Te[Nv]=Te[Sv]=Te[kv]=Te[Cv]=Te[$v]=Te[Ev]=Te[Dv]=Te[Tv]=Te[Mv]=Te[Ov]=!1;function zv(e){return bv(e)&&vv(e.length)&&!!Te[pv(e)]}var Gv=zv;function qv(e){return function(r){return e(r)}}var oa=qv,zs={exports:{}};zs.exports;(function(e,r){var s=_l,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i&&s.process,l=function(){try{var c=n&&n.require&&n.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(zs,zs.exports);var An=zs.exports,Yv=Gv,Vv=oa,Qi=An,Zi=Qi&&Qi.isTypedArray,Kv=Zi?Vv(Zi):Yv,Rn=Kv,Xv=nv,Jv=Pn,Qv=bt,Zv=ia,e0=gn,t0=Rn,r0=Object.prototype,s0=r0.hasOwnProperty;function a0(e,r){var s=Qv(e),a=!s&&Jv(e),n=!s&&!a&&Zv(e),i=!s&&!a&&!n&&t0(e),o=s||a||n||i,l=o?Xv(e.length,String):[],c=l.length;for(var d in e)(r||s0.call(e,d))&&!(o&&(d=="length"||n&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||e0(d,c)))&&l.push(d);return l}var rc=a0,n0=Object.prototype;function i0(e){var r=e&&e.constructor,s=typeof r=="function"&&r.prototype||n0;return e===s}var Ln=i0;function o0(e,r){return function(s){return e(r(s))}}var sc=o0,l0=sc,c0=l0(Object.keys,Object),d0=c0,u0=Ln,m0=d0,h0=Object.prototype,f0=h0.hasOwnProperty;function x0(e){if(!u0(e))return m0(e);var r=[];for(var s in Object(e))f0.call(e,s)&&s!="constructor"&&r.push(s);return r}var g0=x0,p0=rc,v0=g0,b0=hs;function y0(e){return b0(e)?p0(e):v0(e)}var vs=y0,j0=Zl,w0=_n,N0=vs;function S0(e){return j0(e,N0,w0)}var ac=S0,eo=ac,k0=1,C0=Object.prototype,$0=C0.hasOwnProperty;function E0(e,r,s,a,n,i){var o=s&k0,l=eo(e),c=l.length,d=eo(r),u=d.length;if(c!=u&&!o)return!1;for(var g=c;g--;){var f=l[g];if(!(o?f in r:$0.call(r,f)))return!1}var m=i.get(e),y=i.get(r);if(m&&y)return m==r&&y==e;var x=!0;i.set(e,r),i.set(r,e);for(var v=o;++g<c;){f=l[g];var b=e[f],h=r[f];if(a)var E=o?a(h,b,f,r,e,i):a(b,h,f,e,r,i);if(!(E===void 0?b===h||n(b,h,s,a,i):E)){x=!1;break}v||(v=f=="constructor")}if(x&&!v){var p=e.constructor,$=r.constructor;p!=$&&"constructor"in e&&"constructor"in r&&!(typeof p=="function"&&p instanceof p&&typeof $=="function"&&$ instanceof $)&&(x=!1)}return i.delete(e),i.delete(r),x}var D0=E0,T0=ur,M0=Mt,O0=T0(M0,"DataView"),_0=O0,P0=ur,A0=Mt,R0=P0(A0,"Promise"),L0=R0,I0=ur,F0=Mt,U0=I0(F0,"Set"),W0=U0,B0=ur,H0=Mt,z0=B0(H0,"WeakMap"),G0=z0,Ya=_0,Va=Dn,Ka=L0,Xa=W0,Ja=G0,nc=Dr,Pr=Xl,to="[object Map]",q0="[object Object]",ro="[object Promise]",so="[object Set]",ao="[object WeakMap]",no="[object DataView]",Y0=Pr(Ya),V0=Pr(Va),K0=Pr(Ka),X0=Pr(Xa),J0=Pr(Ja),Jt=nc;(Ya&&Jt(new Ya(new ArrayBuffer(1)))!=no||Va&&Jt(new Va)!=to||Ka&&Jt(Ka.resolve())!=ro||Xa&&Jt(new Xa)!=so||Ja&&Jt(new Ja)!=ao)&&(Jt=function(e){var r=nc(e),s=r==q0?e.constructor:void 0,a=s?Pr(s):"";if(a)switch(a){case Y0:return no;case V0:return to;case K0:return ro;case X0:return so;case J0:return ao}return r});var la=Jt,Da=Mn,Q0=Jl,Z0=zp,eb=D0,io=la,oo=bt,lo=ia,tb=Rn,rb=1,co="[object Arguments]",uo="[object Array]",Es="[object Object]",sb=Object.prototype,mo=sb.hasOwnProperty;function ab(e,r,s,a,n,i){var o=oo(e),l=oo(r),c=o?uo:io(e),d=l?uo:io(r);c=c==co?Es:c,d=d==co?Es:d;var u=c==Es,g=d==Es,f=c==d;if(f&&lo(e)){if(!lo(r))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Da),o||tb(e)?Q0(e,r,s,a,n,i):Z0(e,r,c,s,a,n,i);if(!(s&rb)){var m=u&&mo.call(e,"__wrapped__"),y=g&&mo.call(r,"__wrapped__");if(m||y){var x=m?e.value():e,v=y?r.value():r;return i||(i=new Da),n(x,v,s,a,i)}}return f?(i||(i=new Da),eb(e,r,s,a,n,i)):!1}var nb=ab,ib=nb,ho=Kt;function ic(e,r,s,a,n){return e===r?!0:e==null||r==null||!ho(e)&&!ho(r)?e!==e&&r!==r:ib(e,r,s,a,ic,n)}var In=ic,ob=In;function lb(e,r){return ob(e,r)}var cb=lb;const db=vt(cb);function Ta(e,r){var s=pn(e);return s?s.innerHeight:er(e).height}function oc(e,r,s){e.closest&&!s&&e.closest(r);var a=e;do{if(ih(a,r))return a;a=a.parentElement}while(a&&a!==s&&a.nodeType===document.ELEMENT_NODE);return null}function ub(e,r,s,a){for(var n=e.length,i=s+(a?1:-1);a?i--:++i<n;)if(r(e[i],i,e))return i;return-1}var mb=ub,hb=Mn,fb=In,xb=1,gb=2;function pb(e,r,s,a){var n=s.length,i=n,o=!a;if(e==null)return!i;for(e=Object(e);n--;){var l=s[n];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++n<i;){l=s[n];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var g=new hb;if(a)var f=a(d,u,c,e,r,g);if(!(f===void 0?fb(u,d,xb|gb,a,g):f))return!1}}return!0}var vb=pb,bb=Ft;function yb(e){return e===e&&!bb(e)}var lc=yb,jb=lc,wb=vs;function Nb(e){for(var r=wb(e),s=r.length;s--;){var a=r[s],n=e[a];r[s]=[a,n,jb(n)]}return r}var Sb=Nb;function kb(e,r){return function(s){return s==null?!1:s[e]===r&&(r!==void 0||e in Object(s))}}var cc=kb,Cb=vb,$b=Sb,Eb=cc;function Db(e){var r=$b(e);return r.length==1&&r[0][2]?Eb(r[0][0],r[0][1]):function(s){return s===e||Cb(s,e,r)}}var Tb=Db,Mb=bt,Ob=fs,_b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pb=/^\w*$/;function Ab(e,r){if(Mb(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||Ob(e)?!0:Pb.test(e)||!_b.test(e)||r!=null&&e in Object(r)}var Fn=Ab,dc=Tn,Rb="Expected a function";function Un(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Rb);var s=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=s.cache;if(i.has(n))return i.get(n);var o=e.apply(this,a);return s.cache=i.set(n,o)||i,o};return s.cache=new(Un.Cache||dc),s}Un.Cache=dc;var Lb=Un,Ib=Lb,Fb=500;function Ub(e){var r=Ib(e,function(a){return s.size===Fb&&s.clear(),a}),s=r.cache;return r}var Wb=Ub,Bb=Wb,Hb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zb=/\\(\\)?/g,Gb=Bb(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Hb,function(s,a,n,i){r.push(n?i.replace(zb,"$1"):a||s)}),r}),qb=Gb;function Yb(e,r){for(var s=-1,a=e==null?0:e.length,n=Array(a);++s<a;)n[s]=r(e[s],s,e);return n}var Wn=Yb,fo=Er,Vb=Wn,Kb=bt,Xb=fs,xo=fo?fo.prototype:void 0,go=xo?xo.toString:void 0;function uc(e){if(typeof e=="string")return e;if(Kb(e))return Vb(e,uc)+"";if(Xb(e))return go?go.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var Jb=uc,Qb=Jb;function Zb(e){return e==null?"":Qb(e)}var ey=Zb,ty=bt,ry=Fn,sy=qb,ay=ey;function ny(e,r){return ty(e)?e:ry(e,r)?[e]:sy(ay(e))}var ca=ny,iy=fs;function oy(e){if(typeof e=="string"||iy(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var bs=oy,ly=ca,cy=bs;function dy(e,r){r=ly(r,e);for(var s=0,a=r.length;e!=null&&s<a;)e=e[cy(r[s++])];return s&&s==a?e:void 0}var da=dy,uy=da;function my(e,r,s){var a=e==null?void 0:uy(e,r);return a===void 0?s:a}var hy=my;function fy(e,r){return e!=null&&r in Object(e)}var xy=fy,gy=ca,py=Pn,vy=bt,by=gn,yy=xn,jy=bs;function wy(e,r,s){r=gy(r,e);for(var a=-1,n=r.length,i=!1;++a<n;){var o=jy(r[a]);if(!(i=e!=null&&s(e,o)))break;e=e[o]}return i||++a!=n?i:(n=e==null?0:e.length,!!n&&yy(n)&&by(o,n)&&(vy(e)||py(e)))}var Ny=wy,Sy=xy,ky=Ny;function Cy(e,r){return e!=null&&ky(e,r,Sy)}var $y=Cy,Ey=In,Dy=hy,Ty=$y,My=Fn,Oy=lc,_y=cc,Py=bs,Ay=1,Ry=2;function Ly(e,r){return My(e)&&Oy(r)?_y(Py(e),r):function(s){var a=Dy(s,e);return a===void 0&&a===r?Ty(s,e):Ey(r,a,Ay|Ry)}}var Iy=Ly;function Fy(e){return e}var ua=Fy;function Uy(e){return function(r){return r==null?void 0:r[e]}}var Wy=Uy,By=da;function Hy(e){return function(r){return By(r,e)}}var zy=Hy,Gy=Wy,qy=zy,Yy=Fn,Vy=bs;function Ky(e){return Yy(e)?Gy(Vy(e)):qy(e)}var Xy=Ky,Jy=Tb,Qy=Iy,Zy=ua,ej=bt,tj=Xy;function rj(e){return typeof e=="function"?e:e==null?Zy:typeof e=="object"?ej(e)?Qy(e[0],e[1]):Jy(e):tj(e)}var ma=rj,sj=mb,aj=ma,nj=Rl,ij=Math.max;function oj(e,r,s){var a=e==null?0:e.length;if(!a)return-1;var n=s==null?0:nj(s);return n<0&&(n=ij(a+n,0)),sj(e,aj(r),n)}var lj=oj;const cj=vt(lj);var dj=Math.ceil,uj=Math.max;function mj(e,r,s,a){for(var n=-1,i=uj(dj((r-e)/(s||1)),0),o=Array(i);i--;)o[a?i:++n]=e,e+=s;return o}var hj=mj,fj=hj,xj=ea,Ma=Al;function gj(e){return function(r,s,a){return a&&typeof a!="number"&&xj(r,s,a)&&(s=a=void 0),r=Ma(r),s===void 0?(s=r,r=0):s=Ma(s),a=a===void 0?r<s?1:-1:Ma(a),fj(r,s,a,e)}}var pj=gj,vj=pj,bj=vj(),yj=bj;const jj=vt(yj);var po=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function wj(e,r){return!!(e===r||po(e)&&po(r))}function Nj(e,r){if(e.length!==r.length)return!1;for(var s=0;s<e.length;s++)if(!wj(e[s],r[s]))return!1;return!0}function mc(e,r){r===void 0&&(r=Nj);var s=null;function a(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(s&&s.lastThis===this&&r(n,s.lastArgs))return s.lastResult;var o=e.apply(this,n);return s={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){s=null},a}function Qa(e,r){var s=pn(e);return s?s.innerWidth:er(e).width}var vo=Er,Sj=Pn,kj=bt,bo=vo?vo.isConcatSpreadable:void 0;function Cj(e){return kj(e)||Sj(e)||!!(bo&&e&&e[bo])}var $j=Cj,Ej=On,Dj=$j;function hc(e,r,s,a,n){var i=-1,o=e.length;for(s||(s=Dj),n||(n=[]);++i<o;){var l=e[i];r>0&&s(l)?r>1?hc(l,r-1,s,a,n):Ej(n,l):a||(n[n.length]=l)}return n}var fc=hc;function Tj(e){return function(r,s,a){for(var n=-1,i=Object(r),o=a(r),l=o.length;l--;){var c=o[e?l:++n];if(s(i[c],c,i)===!1)break}return r}}var Mj=Tj,Oj=Mj,_j=Oj(),Pj=_j,Aj=Pj,Rj=vs;function Lj(e,r){return e&&Aj(e,r,Rj)}var Bn=Lj,Ij=hs;function Fj(e,r){return function(s,a){if(s==null)return s;if(!Ij(s))return e(s,a);for(var n=s.length,i=r?n:-1,o=Object(s);(r?i--:++i<n)&&a(o[i],i,o)!==!1;);return s}}var Uj=Fj,Wj=Bn,Bj=Uj,Hj=Bj(Wj),zj=Hj,Gj=zj,qj=hs;function Yj(e,r){var s=-1,a=qj(e)?Array(e.length):[];return Gj(e,function(n,i,o){a[++s]=r(n,i,o)}),a}var Vj=Yj;function Kj(e,r){var s=e.length;for(e.sort(r);s--;)e[s]=e[s].value;return e}var Xj=Kj,yo=fs;function Jj(e,r){if(e!==r){var s=e!==void 0,a=e===null,n=e===e,i=yo(e),o=r!==void 0,l=r===null,c=r===r,d=yo(r);if(!l&&!d&&!i&&e>r||i&&o&&c&&!l&&!d||a&&o&&c||!s&&c||!n)return 1;if(!a&&!i&&!d&&e<r||d&&s&&n&&!a&&!i||l&&s&&n||!o&&n||!c)return-1}return 0}var Qj=Jj,Zj=Qj;function ew(e,r,s){for(var a=-1,n=e.criteria,i=r.criteria,o=n.length,l=s.length;++a<o;){var c=Zj(n[a],i[a]);if(c){if(a>=l)return c;var d=s[a];return c*(d=="desc"?-1:1)}}return e.index-r.index}var tw=ew,Oa=Wn,rw=da,sw=ma,aw=Vj,nw=Xj,iw=oa,ow=tw,lw=ua,cw=bt;function dw(e,r,s){r.length?r=Oa(r,function(i){return cw(i)?function(o){return rw(o,i.length===1?i[0]:i)}:i}):r=[lw];var a=-1;r=Oa(r,iw(sw));var n=aw(e,function(i,o,l){var c=Oa(r,function(d){return d(i)});return{criteria:c,index:++a,value:i}});return nw(n,function(i,o){return ow(i,o,s)})}var uw=dw;function mw(e,r,s){switch(s.length){case 0:return e.call(r);case 1:return e.call(r,s[0]);case 2:return e.call(r,s[0],s[1]);case 3:return e.call(r,s[0],s[1],s[2])}return e.apply(r,s)}var hw=mw,fw=hw,jo=Math.max;function xw(e,r,s){return r=jo(r===void 0?e.length-1:r,0),function(){for(var a=arguments,n=-1,i=jo(a.length-r,0),o=Array(i);++n<i;)o[n]=a[r+n];n=-1;for(var l=Array(r+1);++n<r;)l[n]=a[n];return l[r]=s(o),fw(e,this,l)}}var xc=xw;function gw(e){return function(){return e}}var pw=gw,vw=ur,bw=function(){try{var e=vw(Object,"defineProperty");return e({},"",{}),e}catch{}}(),gc=bw,yw=pw,wo=gc,jw=ua,ww=wo?function(e,r){return wo(e,"toString",{configurable:!0,enumerable:!1,value:yw(r),writable:!0})}:jw,Nw=ww,Sw=800,kw=16,Cw=Date.now;function $w(e){var r=0,s=0;return function(){var a=Cw(),n=kw-(a-s);if(s=a,n>0){if(++r>=Sw)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var Ew=$w,Dw=Nw,Tw=Ew,Mw=Tw(Dw),pc=Mw,Ow=ua,_w=xc,Pw=pc;function Aw(e,r){return Pw(_w(e,r,Ow),e+"")}var vc=Aw,Rw=fc,Lw=uw,Iw=vc,No=ea,Fw=Iw(function(e,r){if(e==null)return[];var s=r.length;return s>1&&No(e,r[0],r[1])?r=[]:s>2&&No(r[0],r[1],r[2])&&(r=[r[0]]),Lw(e,Rw(r,1),[])}),Uw=Fw;const Ww=vt(Uw);function bc(e){return fl(e)||Ml(e)||un(e)||xl()}function Bw(e){var r=[];if(e!=null)for(var s in Object(e))r.push(s);return r}var Hw=Bw,zw=Ft,Gw=Ln,qw=Hw,Yw=Object.prototype,Vw=Yw.hasOwnProperty;function Kw(e){if(!zw(e))return qw(e);var r=Gw(e),s=[];for(var a in e)a=="constructor"&&(r||!Vw.call(e,a))||s.push(a);return s}var Xw=Kw,Jw=rc,Qw=Xw,Zw=hs;function eN(e){return Zw(e)?Jw(e,!0):Qw(e)}var ha=eN,tN=vc,rN=ms,sN=ea,aN=ha,yc=Object.prototype,nN=yc.hasOwnProperty,iN=tN(function(e,r){e=Object(e);var s=-1,a=r.length,n=a>2?r[2]:void 0;for(n&&sN(r[0],r[1],n)&&(a=1);++s<a;)for(var i=r[s],o=aN(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===void 0||rN(u,yc[d])&&!nN.call(e,d))&&(e[d]=i[d])}return e}),oN=iN;const lN=vt(oN);var So=gc;function cN(e,r,s){r=="__proto__"&&So?So(e,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[r]=s}var Hn=cN,dN=Hn,uN=Bn,mN=ma;function hN(e,r){var s={};return r=mN(r),uN(e,function(a,n,i){dN(s,n,r(a,n,i))}),s}var fN=hN;const xN=vt(fN);function gN(e,r){for(var s=-1,a=e==null?0:e.length;++s<a&&r(e[s],s,e)!==!1;);return e}var jc=gN,pN=Hn,vN=ms,bN=Object.prototype,yN=bN.hasOwnProperty;function jN(e,r,s){var a=e[r];(!(yN.call(e,r)&&vN(a,s))||s===void 0&&!(r in e))&&pN(e,r,s)}var wc=jN,wN=wc,NN=Hn;function SN(e,r,s,a){var n=!s;s||(s={});for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a?a(s[l],e[l],l,s,e):void 0;c===void 0&&(c=e[l]),n?NN(s,l,c):wN(s,l,c)}return s}var ys=SN,kN=ys,CN=vs;function $N(e,r){return e&&kN(r,CN(r),e)}var EN=$N,DN=ys,TN=ha;function MN(e,r){return e&&DN(r,TN(r),e)}var ON=MN,Gs={exports:{}};Gs.exports;(function(e,r){var s=Mt,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i?s.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var g=d.length,f=l?l(g):new d.constructor(g);return d.copy(f),f}e.exports=c})(Gs,Gs.exports);var _N=Gs.exports;function PN(e,r){var s=-1,a=e.length;for(r||(r=Array(a));++s<a;)r[s]=e[s];return r}var AN=PN,RN=ys,LN=_n;function IN(e,r){return RN(e,LN(e),r)}var FN=IN,UN=sc,WN=UN(Object.getPrototypeOf,Object),fa=WN,BN=On,HN=fa,zN=_n,GN=ec,qN=Object.getOwnPropertySymbols,YN=qN?function(e){for(var r=[];e;)BN(r,zN(e)),e=HN(e);return r}:GN,Nc=YN,VN=ys,KN=Nc;function XN(e,r){return VN(e,KN(e),r)}var JN=XN,QN=Zl,ZN=Nc,e1=ha;function t1(e){return QN(e,e1,ZN)}var Sc=t1,r1=Object.prototype,s1=r1.hasOwnProperty;function a1(e){var r=e.length,s=new e.constructor(r);return r&&typeof e[0]=="string"&&s1.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var n1=a1,ko=Ql;function i1(e){var r=new e.constructor(e.byteLength);return new ko(r).set(new ko(e)),r}var zn=i1,o1=zn;function l1(e,r){var s=r?o1(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var c1=l1,d1=/\w*$/;function u1(e){var r=new e.constructor(e.source,d1.exec(e));return r.lastIndex=e.lastIndex,r}var m1=u1,Co=Er,$o=Co?Co.prototype:void 0,Eo=$o?$o.valueOf:void 0;function h1(e){return Eo?Object(Eo.call(e)):{}}var f1=h1,x1=zn;function g1(e,r){var s=r?x1(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var p1=g1,v1=zn,b1=c1,y1=m1,j1=f1,w1=p1,N1="[object Boolean]",S1="[object Date]",k1="[object Map]",C1="[object Number]",$1="[object RegExp]",E1="[object Set]",D1="[object String]",T1="[object Symbol]",M1="[object ArrayBuffer]",O1="[object DataView]",_1="[object Float32Array]",P1="[object Float64Array]",A1="[object Int8Array]",R1="[object Int16Array]",L1="[object Int32Array]",I1="[object Uint8Array]",F1="[object Uint8ClampedArray]",U1="[object Uint16Array]",W1="[object Uint32Array]";function B1(e,r,s){var a=e.constructor;switch(r){case M1:return v1(e);case N1:case S1:return new a(+e);case O1:return b1(e,s);case _1:case P1:case A1:case R1:case L1:case I1:case F1:case U1:case W1:return w1(e,s);case k1:return new a;case C1:case D1:return new a(e);case $1:return y1(e);case E1:return new a;case T1:return j1(e)}}var H1=B1,z1=Ft,Do=Object.create,G1=function(){function e(){}return function(r){if(!z1(r))return{};if(Do)return Do(r);e.prototype=r;var s=new e;return e.prototype=void 0,s}}(),kc=G1,q1=kc,Y1=fa,V1=Ln;function K1(e){return typeof e.constructor=="function"&&!V1(e)?q1(Y1(e)):{}}var X1=K1,J1=la,Q1=Kt,Z1="[object Map]";function e2(e){return Q1(e)&&J1(e)==Z1}var t2=e2,r2=t2,s2=oa,To=An,Mo=To&&To.isMap,a2=Mo?s2(Mo):r2,n2=a2,i2=la,o2=Kt,l2="[object Set]";function c2(e){return o2(e)&&i2(e)==l2}var d2=c2,u2=d2,m2=oa,Oo=An,_o=Oo&&Oo.isSet,h2=_o?m2(_o):u2,f2=h2,x2=Mn,g2=jc,p2=wc,v2=EN,b2=ON,y2=_N,j2=AN,w2=FN,N2=JN,S2=ac,k2=Sc,C2=la,$2=n1,E2=H1,D2=X1,T2=bt,M2=ia,O2=n2,_2=Ft,P2=f2,A2=vs,R2=ha,L2=1,I2=2,F2=4,Cc="[object Arguments]",U2="[object Array]",W2="[object Boolean]",B2="[object Date]",H2="[object Error]",$c="[object Function]",z2="[object GeneratorFunction]",G2="[object Map]",q2="[object Number]",Ec="[object Object]",Y2="[object RegExp]",V2="[object Set]",K2="[object String]",X2="[object Symbol]",J2="[object WeakMap]",Q2="[object ArrayBuffer]",Z2="[object DataView]",eS="[object Float32Array]",tS="[object Float64Array]",rS="[object Int8Array]",sS="[object Int16Array]",aS="[object Int32Array]",nS="[object Uint8Array]",iS="[object Uint8ClampedArray]",oS="[object Uint16Array]",lS="[object Uint32Array]",Ce={};Ce[Cc]=Ce[U2]=Ce[Q2]=Ce[Z2]=Ce[W2]=Ce[B2]=Ce[eS]=Ce[tS]=Ce[rS]=Ce[sS]=Ce[aS]=Ce[G2]=Ce[q2]=Ce[Ec]=Ce[Y2]=Ce[V2]=Ce[K2]=Ce[X2]=Ce[nS]=Ce[iS]=Ce[oS]=Ce[lS]=!0;Ce[H2]=Ce[$c]=Ce[J2]=!1;function Ps(e,r,s,a,n,i){var o,l=r&L2,c=r&I2,d=r&F2;if(s&&(o=n?s(e,a,n,i):s(e)),o!==void 0)return o;if(!_2(e))return e;var u=T2(e);if(u){if(o=$2(e),!l)return j2(e,o)}else{var g=C2(e),f=g==$c||g==z2;if(M2(e))return y2(e,l);if(g==Ec||g==Cc||f&&!n){if(o=c||f?{}:D2(e),!l)return c?N2(e,b2(o,e)):w2(e,v2(o,e))}else{if(!Ce[g])return n?e:{};o=E2(e,g,l)}}i||(i=new x2);var m=i.get(e);if(m)return m;i.set(e,o),P2(e)?e.forEach(function(v){o.add(Ps(v,r,s,v,e,i))}):O2(e)&&e.forEach(function(v,b){o.set(b,Ps(v,r,s,b,e,i))});var y=d?c?k2:S2:c?R2:A2,x=u?void 0:y(e);return g2(x||e,function(v,b){x&&(b=v,v=e[b]),p2(o,b,Ps(v,r,s,b,e,i))}),o}var cS=Ps;function dS(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var uS=dS,mS=da,hS=Ol;function fS(e,r){return r.length<2?e:mS(e,hS(r,0,-1))}var xS=fS,gS=ca,pS=uS,vS=xS,bS=bs;function yS(e,r){return r=gS(r,e),e=vS(e,r),e==null||delete e[bS(pS(r))]}var jS=yS,wS=Dr,NS=fa,SS=Kt,kS="[object Object]",CS=Function.prototype,$S=Object.prototype,Dc=CS.toString,ES=$S.hasOwnProperty,DS=Dc.call(Object);function TS(e){if(!SS(e)||wS(e)!=kS)return!1;var r=NS(e);if(r===null)return!0;var s=ES.call(r,"constructor")&&r.constructor;return typeof s=="function"&&s instanceof s&&Dc.call(s)==DS}var MS=TS,OS=MS;function _S(e){return OS(e)?void 0:e}var PS=_S,AS=fc;function RS(e){var r=e==null?0:e.length;return r?AS(e,1):[]}var LS=RS,IS=LS,FS=xc,US=pc;function WS(e){return US(FS(e,void 0,IS),e+"")}var BS=WS,HS=Wn,zS=cS,GS=jS,qS=ca,YS=ys,VS=PS,KS=BS,XS=Sc,JS=1,QS=2,ZS=4,ek=KS(function(e,r){var s={};if(e==null)return s;var a=!1;r=HS(r,function(i){return i=qS(i,e),a||(a=i.length>1),i}),YS(e,XS(e),s),a&&(s=zS(s,JS|QS|ZS,VS));for(var n=r.length;n--;)GS(s,r[n]);return s}),tk=ek;const rk=vt(tk);var sk=jc,ak=kc,nk=Bn,ik=ma,ok=fa,lk=bt,ck=ia,dk=fn,uk=Ft,mk=Rn;function hk(e,r,s){var a=lk(e),n=a||ck(e)||mk(e);if(r=ik(r),s==null){var i=e&&e.constructor;n?s=a?new i:[]:uk(e)?s=dk(i)?ak(ok(e)):{}:s={}}return(n?sk:nk)(e,function(o,l,c){return r(s,o,l,c)}),s}var fk=hk;const xk=vt(fk);var gk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a,n){a.prototype.isBetween=function(i,o,l,c){var d=n(i),u=n(o),g=(c=c||"()")[0]==="(",f=c[1]===")";return(g?this.isAfter(d,l):!this.isBefore(d,l))&&(f?this.isBefore(u,l):!this.isAfter(u,l))||(g?this.isBefore(d,l):!this.isAfter(d,l))&&(f?this.isAfter(u,l):!this.isBefore(u,l))}}})})(gk);var pk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a){a.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}}})})(pk);var vk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a){a.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(vk);var bk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a,n){var i=a.prototype,o=function(g){return g&&(g.indexOf?g:g.s)},l=function(g,f,m,y,x){var v=g.name?g:g.$locale(),b=o(v[f]),h=o(v[m]),E=b||h.map(function($){return $.slice(0,y)});if(!x)return E;var p=v.weekStart;return E.map(function($,R){return E[(R+(p||0))%7]})},c=function(){return n.Ls[n.locale()]},d=function(g,f){return g.formats[f]||function(m){return m.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,x,v){return x||v.slice(1)})}(g.formats[f.toUpperCase()])},u=function(){var g=this;return{months:function(f){return f?f.format("MMMM"):l(g,"months")},monthsShort:function(f){return f?f.format("MMM"):l(g,"monthsShort","months",3)},firstDayOfWeek:function(){return g.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):l(g,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):l(g,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):l(g,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(g.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},n.localeData=function(){var g=c();return{firstDayOfWeek:function(){return g.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(f){return d(g,f)},meridiem:g.meridiem,ordinal:g.ordinal}},n.months=function(){return l(c(),"months")},n.monthsShort=function(){return l(c(),"monthsShort","months",3)},n.weekdays=function(g){return l(c(),"weekdays",null,null,g)},n.weekdaysShort=function(g){return l(c(),"weekdaysShort","weekdays",3,g)},n.weekdaysMin=function(g){return l(c(),"weekdaysMin","weekdays",2,g)}}})})(bk);var yk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,n,i){var o=n.prototype,l=o.format;i.en.formats=s,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(g,f){return g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,y,x){var v=x&&x.toUpperCase();return y||f[x]||s[x]||f[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,h,E){return h||E.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(yk);var jk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a,n){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};n.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},n.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(jk);var wk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){var s="minute",a=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(x){var v={date:x,utc:!0,args:arguments};return new o(v)},c.utc=function(x){var v=l(this.toDate(),{locale:this.$L,utc:!0});return x?v.add(this.utcOffset(),s):v},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),d.call(this,x)};var u=c.init;c.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else u.call(this)};var g=c.utcOffset;c.utcOffset=function(x,v){var b=this.$utils().u;if(b(x))return this.$u?0:b(this.$offset)?g.call(this):this.$offset;if(typeof x=="string"&&(x=function($){$===void 0&&($="");var R=$.match(a);if(!R)return null;var P=(""+R[0]).match(n)||["-",0,0],T=P[0],H=60*+P[1]+ +P[2];return H===0?0:T==="+"?H:-H}(x),x===null))return this;var h=Math.abs(x)<=16?60*x:x,E=this;if(v)return E.$offset=h,E.$u=x===0,E;if(x!==0){var p=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(h+p,s)).$offset=h,E.$x.$localOffset=p}else E=this.utc();return E};var f=c.format;c.format=function(x){var v=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,v)},c.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var m=c.toDate;c.toDate=function(x){return x==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var y=c.diff;c.diff=function(x,v,b){if(x&&this.$u===x.$u)return y.call(this,x,v,b);var h=this.local(),E=l(x).local();return y.call(h,E,v,b)}}})})(wk);var Nk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(ft,function(){return function(s,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(Nk);function wt(e){return e.children}var ot={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Ze={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Po=Object.keys(Ze).map(function(e){return Ze[e]});te.oneOfType([te.string,te.func]);te.any;te.func;te.oneOfType([te.arrayOf(te.oneOf(Po)),te.objectOf(function(e,r){var s=Po.indexOf(r)!==-1&&typeof e[r]=="boolean";if(s)return null;for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];return te.elementType.apply(te,[e,r].concat(n))})]);te.oneOfType([te.oneOf(["overlap","no-overlap"]),te.func]);var Ao={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function Tc(e,r){var s=He(e,"month");return He(s,"week",r.startOfWeek())}function Mc(e,r){var s=Fs(e,"month");return Fs(s,"week",r.startOfWeek())}function Sk(e,r){for(var s=Tc(e,r),a=Mc(e,r),n=[];Cr(s,a,"day");)n.push(s),s=yt(s,1,"day");return n}function kk(e,r){var s=He(e,r);return kr(s,e)?s:yt(s,1,r)}function Ck(e,r){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=e,n=[];Cr(a,r,s);)n.push(a),a=yt(a,1,s);return n}function $k(e,r){return r==null&&e==null?null:(r==null&&(r=new Date),e==null&&(e=new Date),e=He(e,"day"),e=ns(e,ns(r)),e=yr(e,yr(r)),e=as(e,as(r)),ss(e,ss(r)))}function Ro(e){return ns(e)===0&&yr(e)===0&&as(e)===0&&ss(e)===0}function Ek(e,r,s,a){return s==="day"&&(s="date"),Math.abs(pi[s](e,void 0,a)-pi[s](r,void 0,a))}function Gn(e,r,s){return!s||s==="milliseconds"?Math.abs(+e-+r):Math.round(Math.abs(+He(e,s)/Ao[s]-+He(r,s)/Ao[s]))}var Dk=te.oneOfType([te.string,te.func]);function Tk(e,r,s,a,n){var i=typeof a=="function"?a(s,n,e):r.call(e,s,a,n);return Jr(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function Mk(e,r,s){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,r+s,0,0)}function qn(e,r){return e.getTimezoneOffset()-r.getTimezoneOffset()}function Ok(e,r){return Gn(e,r,"minutes")+qn(e,r)}function _k(e){var r=He(e,"day");return Gn(r,e,"minutes")+qn(r,e)}function Pk(e,r){return hn(e,r,"day")}function Ak(e,r,s){var a=kr(e,r,"minutes");return a?us(r,s,"minutes"):Zs(r,s,"minutes")}function Za(e,r){return Ek(e,r,"day")}function Rk(e){var r=e.evtA,s=r.start,a=r.end,n=r.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+He(s,"day")-+He(o,"day"),u=Za(s,a),g=Za(o,l);return d||g-u||!!c-!!n||+s-+o||+a-+l}function Lk(e){var r=e.event,s=r.start,a=r.end,n=e.range,i=n.start,o=n.end,l=He(s,"day"),c=Cr(l,o,"day"),d=mn(l,a,"minutes"),u=d?Zs(a,i,"minutes"):us(a,i,"minutes");return c&&u}function Ik(e,r){return kr(e,r,"day")}function Fk(e,r){return Ro(e)&&Ro(r)}var Uk=Fe(function e(r){var s=this;Ie(this,e),Jr(typeof r.format=="function","date localizer `format(..)` must be a function"),Jr(typeof r.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=r.propType||Dk,this.formats=r.formats,this.format=function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return Tk.apply(void 0,[s,r.format].concat(n))},this.startOfWeek=r.firstOfWeek,this.merge=r.merge||$k,this.inRange=r.inRange||$l,this.lt=r.lt||hn,this.lte=r.lte||Cr,this.gt=r.gt||Zs,this.gte=r.gte||us,this.eq=r.eq||kr,this.neq=r.neq||mn,this.startOf=r.startOf||He,this.endOf=r.endOf||Fs,this.add=r.add||yt,this.range=r.range||Ck,this.diff=r.diff||Gn,this.ceil=r.ceil||kk,this.min=r.min||kl,this.max=r.max||Cl,this.minutes=r.minutes||yr,this.daySpan=r.daySpan||Za,this.firstVisibleDay=r.firstVisibleDay||Tc,this.lastVisibleDay=r.lastVisibleDay||Mc,this.visibleDays=r.visibleDays||Sk,this.getSlotDate=r.getSlotDate||Mk,this.getTimezoneOffset=r.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=r.getDstOffset||qn,this.getTotalMin=r.getTotalMin||Ok,this.getMinutesFromMidnight=r.getMinutesFromMidnight||_k,this.continuesPrior=r.continuesPrior||Pk,this.continuesAfter=r.continuesAfter||Ak,this.sortEvents=r.sortEvents||Rk,this.inEventRange=r.inEventRange||Lk,this.isSameDate=r.isSameDate||Ik,this.startAndEndAreDateOnly=r.startAndEndAreDateOnly||Fk,this.segmentOffset=r.browserTZOffset?r.browserTZOffset():0});function Wk(e,r,s,a){var n=ke(ke({},e.formats),s);return ke(ke({},e),{},{messages:a,startOfWeek:function(){return e.startOfWeek(r)},format:function(o,l){return e.format(o,n[l]||l,r)}})}var Bk=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.navigate=function(o){s.props.onNavigate(o)},s.view=function(o){s.props.onView(o)},s}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.localizer.messages,i=a.label;return _.createElement("div",{className:"rbc-toolbar"},_.createElement("span",{className:"rbc-btn-group"},_.createElement("button",{type:"button",onClick:this.navigate.bind(null,ot.TODAY)},n.today),_.createElement("button",{type:"button",onClick:this.navigate.bind(null,ot.PREVIOUS)},n.previous),_.createElement("button",{type:"button",onClick:this.navigate.bind(null,ot.NEXT)},n.next)),_.createElement("span",{className:"rbc-toolbar-label"},i),_.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(n)))}},{key:"viewNamesGroup",value:function(a){var n=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return _.createElement("button",{type:"button",key:l,className:Pe({"rbc-active":o===l}),onClick:n.view.bind(null,l)},a[l])})}}])}(_.Component);function Me(e,r){e&&e.apply(null,[].concat(r))}var Hk={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(r){return"+".concat(r," more")}};function zk(e){return ke(ke({},Hk),e)}function Gk(e){var r=e.ref,s=e.callback;S.useEffect(function(){var a=function(i){r.current&&!r.current.contains(i.target)&&s()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[r,s])}var qk=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Oc=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.style,i=a.className,o=a.event,l=a.selected,c=a.isAllDay,d=a.onSelect,u=a.onDoubleClick,g=a.onKeyPress,f=a.localizer,m=a.continuesPrior,y=a.continuesAfter,x=a.accessors,v=a.getters,b=a.children,h=a.components,E=h.event,p=h.eventWrapper,$=a.slotStart,R=a.slotEnd,P=Dt(a,qk);delete P.resizable;var T=x.title(o),H=x.tooltip(o),z=x.end(o),A=x.start(o),K=x.allDay(o),q=c||K||f.diff(A,f.ceil(z,"day"),"day")>1,J=v.eventProp(o,A,z,l),ie=_.createElement("div",{className:"rbc-event-content",title:H||void 0},E?_.createElement(E,{event:o,continuesPrior:m,continuesAfter:y,title:T,isAllDay:K,localizer:f,slotStart:$,slotEnd:R}):T);return _.createElement(p,Object.assign({},this.props,{type:"date"}),_.createElement("div",Object.assign({},P,{style:ke(ke({},J.style),n),className:Pe("rbc-event",i,J.className,{"rbc-selected":l,"rbc-event-allday":q,"rbc-event-continues-prior":m,"rbc-event-continues-after":y}),onClick:function(N){return d&&d(o,N)},onDoubleClick:function(N){return u&&u(o,N)},onKeyDown:function(N){return g&&g(o,N)}}),typeof b=="function"?b(ie):ie))}}])}(_.Component);function xa(e,r){return!e||r==null?!1:db(e,r)}function _c(e,r){var s=e.right-e.left,a=s/r;return a}function Pc(e,r,s,a){var n=_c(e,a);return s?a-1-Math.floor((r-e.left)/n):Math.floor((r-e.left)/n)}function Yk(e,r){var s=r.x,a=r.y;return a>=e.top&&a<=e.bottom&&s>=e.left&&s<=e.right}function Vk(e,r,s,a,n){var i=-1,o=-1,l=a-1,c=_c(r,a),d=Pc(r,s.x,n,a),u=r.top<s.y&&r.bottom>s.y,g=r.top<e.y&&r.bottom>e.y,f=e.y>r.bottom,m=r.top>e.y,y=s.top<r.top&&s.bottom>r.bottom;return y&&(i=0,o=l),u&&(m?(i=0,o=d):f&&(i=d,o=l)),g&&(i=o=n?l-Math.floor((e.x-r.left)/c):Math.floor((e.x-r.left)/c),u?d<i?i=d:o=d:e.y<s.y?o=l:i=0),{startIdx:i,endIdx:o}}function Kk(e){var r=e.target,s=e.offset,a=e.container,n=e.box,i=er(r),o=i.top,l=i.left,c=i.width,d=i.height,u=er(a),g=u.top,f=u.left,m=u.width,y=u.height,x=er(n),v=x.width,b=x.height,h=g+y,E=f+m,p=o+b,$=l+v,R=s.x,P=s.y,T=p>h?o-b-P:o+P+d,H=$>E?l+R-v+c:l+R;return{topOffset:T,leftOffset:H}}function Xk(e){var r=e.containerRef,s=e.accessors,a=e.getters,n=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,u=e.slotStart,g=e.slotEnd,f=e.onSelect,m=e.onDoubleClick,y=e.onKeyPress,x=e.handleDragStart,v=e.popperRef,b=e.target,h=e.offset;Gk({ref:v,callback:c}),S.useLayoutEffect(function(){var $=Kk({target:b,offset:h,container:r.current,box:v.current}),R=$.topOffset,P=$.leftOffset;v.current.style.top="".concat(R,"px"),v.current.style.left="".concat(P,"px")},[h.x,h.y,b]);var E=l.width,p={minWidth:E+E/2};return _.createElement("div",{style:p,className:"rbc-overlay",ref:v},_.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function($,R){return _.createElement(Oc,{key:R,type:"popup",localizer:o,event:$,getters:a,onSelect:f,accessors:s,components:i,onDoubleClick:m,onKeyPress:y,continuesPrior:o.lt(s.end($),u,"day"),continuesAfter:o.gte(s.start($),g,"day"),slotStart:u,slotEnd:g,selected:xa($,n),draggable:!0,onDragStart:function(){return x($)},onDragEnd:function(){return c()}})}))}var Ac=_.forwardRef(function(e,r){return _.createElement(Xk,Object.assign({},e,{popperRef:r}))});Ac.propTypes={accessors:te.object.isRequired,getters:te.object.isRequired,selected:te.object,components:te.object.isRequired,localizer:te.object.isRequired,position:te.object.isRequired,show:te.func.isRequired,events:te.array.isRequired,slotStart:te.instanceOf(Date).isRequired,slotEnd:te.instanceOf(Date),onSelect:te.func,onDoubleClick:te.func,onKeyPress:te.func,handleDragStart:te.func,style:te.object,offset:te.shape({x:te.number,y:te.number})};function Jk(e){var r=e.containerRef,s=e.popupOffset,a=s===void 0?5:s,n=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,g=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,m=e.handleDragStart,y=e.onHide,x=e.overlayDisplay,v=S.useRef(null);if(!n.position)return null;var b=a;isNaN(a)||(b={x:a,y:a});var h=n.position,E=n.events,p=n.date,$=n.end;return _.createElement(En,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:y,target:n.target},function(R){var P=R.props;return _.createElement(Ac,Object.assign({},P,{containerRef:r,ref:v,target:n.target,offset:b,accessors:i,getters:c,selected:d,components:l,localizer:o,position:h,show:x,events:E,slotStart:p,slotEnd:$,onSelect:u,onDoubleClick:g,onKeyPress:f,handleDragStart:m}))})}var Yn=_.forwardRef(function(e,r){return _.createElement(Jk,Object.assign({},e,{containerRef:r}))});Yn.propTypes={popupOffset:te.oneOfType([te.number,te.shape({x:te.number,y:te.number})]),overlay:te.shape({position:te.object,events:te.array,date:te.instanceOf(Date),end:te.instanceOf(Date)}),accessors:te.object.isRequired,localizer:te.object.isRequired,components:te.object.isRequired,getters:te.object.isRequired,selected:te.object,handleSelectEvent:te.func,handleDoubleClickEvent:te.func,handleKeyPressEvent:te.func,handleDragStart:te.func,onHide:te.func,overlayDisplay:te.func};function Ge(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return zr(s,e,r,{passive:!1})}function Qk(e,r,s){return!e||is(e,document.elementFromPoint(r,s))}function Zk(e,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return oc(n,".rbc-event",e)}function e5(e,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return oc(n,".rbc-show-more",e)}function qs(e,r){return!!Zk(e,r)}function t5(e,r){return!!e5(e,r)}function Br(e){var r=e;return e.touches&&e.touches.length&&(r=e.touches[0]),{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY}}var Lo=5,r5=250,Rc=function(){function e(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.global,n=a===void 0?!1:a,i=s.longPressThreshold,o=i===void 0?250:i,l=s.validContainers,c=l===void 0?[]:l;Ie(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=r,this.globalMouse=!r||n,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ge("touchmove",function(){},window),this._removeKeyDownListener=Ge("keydown",this._keyListener),this._removeKeyUpListener=Ge("keyup",this._keyListener),this._removeDropFromOutsideListener=Ge("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ge("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Fe(e,[{key:"on",value:function(s,a){var n=this._listeners[s]||(this._listeners[s]=[]);return n.push(a),{remove:function(){var o=n.indexOf(a);o!==-1&&n.splice(o,1)}}}},{key:"emit",value:function(s){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];var o,l=this._listeners[s]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,n))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(s){var a=this._selectRect;return!a||!this.selecting?!1:Io(a,dr(s))}},{key:"filter",value:function(s){var a=this._selectRect;return!a||!this.selecting?[]:s.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(s,a){var n=this,i=null,o=null,l=null,c=function(f){i=setTimeout(function(){u(),s(f)},n.longPressThreshold),o=Ge("touchmove",function(){return u()}),l=Ge("touchend",function(){return u()})},d=Ge("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return a&&c(a),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var s=this,a=Ge("mousedown",function(i){s._removeInitialEventListener(),s._handleInitialEvent(i),s._removeInitialEventListener=Ge("mousedown",s._handleInitialEvent)}),n=Ge("touchstart",function(i){s._removeInitialEventListener(),s._removeInitialEventListener=s._addLongPressListener(s._handleInitialEvent,i)});this._removeInitialEventListener=function(){a(),n()}}},{key:"_dropFromOutsideListener",value:function(s){var a=Br(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dropFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(s){var a=Br(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dragOverFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_handleInitialEvent",value:function(s){if(this._initialEvent=s,!this.isDetached){var a=Br(s),n=a.clientX,i=a.clientY,o=a.pageX,l=a.pageY,c=this.container(),d,u;if(!(s.which===3||s.button===2||!Qk(c,n,i))){if(!this.globalMouse&&c&&!is(c,s.target)){var g=s5(0),f=g.top,m=g.left,y=g.bottom,x=g.right;if(u=dr(c),d=Io({top:u.top-f,left:u.left-m,bottom:u.bottom+y,right:u.right+x},{top:l,left:o}),!d)return}var v=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(s.type),x:o,y:l,clientX:n,clientY:i});if(v!==!1)switch(s.type){case"mousedown":this._removeEndListener=Ge("mouseup",this._handleTerminatingEvent),this._onEscListener=Ge("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ge("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(s),this._removeEndListener=Ge("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ge("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(s){var a=s.target,n=this.validContainers;return!n||!n.length||!a?!0:n.some(function(i){return!!a.closest(i)})}},{key:"_handleTerminatingEvent",value:function(s){var a=this.selecting,n=this._selectRect;if(!a&&s.type.includes("key")&&(s=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!s){var i=!this.container||is(this.container(),s.target),o=this._isWithinValidContainer(s);return s.key==="Escape"||!o?this.emit("reset"):!a&&i?this._handleClickEvent(s):a?this.emit("select",n):this.emit("reset")}}},{key:"_handleClickEvent",value:function(s){var a=Br(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<r5?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:n,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(s){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,n=a.x,i=a.y,o=Br(s),l=o.pageX,c=o.pageY,d=Math.abs(n-l),u=Math.abs(i-c),g=Math.min(l,n),f=Math.min(c,i),m=this.selecting,y=this.isClick(l,c);y&&!m&&!(d||u)||(!m&&!y&&this.emit("selectStart",this._initialEventData),y||(this.selecting=!0,this._selectRect={top:f,left:g,x:l,y:c,right:g+d,bottom:f+u},this.emit("selecting",this._selectRect)),s.preventDefault())}}},{key:"_keyListener",value:function(s){this.ctrl=s.metaKey||s.ctrlKey}},{key:"isClick",value:function(s,a){var n=this._initialEventData,i=n.x,o=n.y,l=n.isTouch;return!l&&Math.abs(s-i)<=Lo&&Math.abs(a-o)<=Lo}}])}();function s5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Rt(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Io(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=dr(e),n=a.top,i=a.left,o=a.right,l=o===void 0?i:o,c=a.bottom,d=c===void 0?n:c,u=dr(r),g=u.top,f=u.left,m=u.right,y=m===void 0?f:m,x=u.bottom,v=x===void 0?g:x;return!(d-s<g||n+s>v||l-s<f||i+s>y)}function dr(e){if(!e.getBoundingClientRect)return e;var r=e.getBoundingClientRect(),s=r.left+Fo("left"),a=r.top+Fo("top");return{top:a,left:s,right:(e.offsetWidth||0)+s,bottom:(e.offsetHeight||0)+a}}function Fo(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var a5=function(e){function r(s,a){var n;return Ie(this,r),n=Ve(this,r,[s,a]),n.state={selecting:!1},n.containerRef=S.createRef(),n}return Ke(r,e),Fe(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,n=a.range,i=a.getNow,o=a.getters,l=a.date,c=a.components.dateCellWrapper,d=a.localizer,u=this.state,g=u.selecting,f=u.startIdx,m=u.endIdx,y=i();return _.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},n.map(function(x,v){var b=g&&v>=f&&v<=m,h=o.dayProp(x),E=h.className,p=h.style;return _.createElement(c,{key:v,value:x,range:n},_.createElement("div",{style:p,className:Pe("rbc-day-bg",E,b&&"rbc-selected-cell",d.isSameDate(x,y)&&"rbc-today",l&&d.neq(l,x,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,n=this.containerRef.current,i=this._selector=new Rc(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!qs(n,c)&&!t5(n,c)){var u=dr(n),g=a.props,f=g.range,m=g.rtl;if(Yk(u,c)){var y=Pc(u,c.x,m,f.length);a._selectSlot({startIdx:y,endIdx:y,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};i.on("selecting",function(l){var c=a.props,d=c.range,u=c.rtl,g=-1,f=-1;if(a.state.selecting||(Me(a.props.onSelectStart,[l]),a._initial={x:l.x,y:l.y}),i.isSelected(n)){var m=dr(n),y=Vk(a._initial,m,l,d.length,u);g=y.startIdx,f=y.endIdx}a.setState({selecting:!0,startIdx:g,endIdx:f})}),i.on("beforeSelect",function(l){if(a.props.selectable==="ignoreEvents")return!qs(a.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){a._selectSlot(ke(ke({},a.state),{},{action:"select",bounds:l})),a._initial={},a.setState({selecting:!1}),Me(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var n=a.endIdx,i=a.startIdx,o=a.action,l=a.bounds,c=a.box;n!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:n,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(_.Component),mt={propTypes:{slotMetrics:te.object.isRequired,selected:te.object,isAllDay:te.bool,accessors:te.object.isRequired,localizer:te.object.isRequired,components:te.object.isRequired,getters:te.object.isRequired,onSelect:te.func,onDoubleClick:te.func,onKeyPress:te.func},defaultProps:{segments:[],selected:{}},renderEvent:function(r,s){var a=r.selected;r.isAllDay;var n=r.accessors,i=r.getters,o=r.onSelect,l=r.onDoubleClick,c=r.onKeyPress,d=r.localizer,u=r.slotMetrics,g=r.components,f=r.resizable,m=u.continuesPrior(s),y=u.continuesAfter(s);return _.createElement(Oc,{event:s,getters:i,localizer:d,accessors:n,components:g,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:m,continuesAfter:y,slotStart:u.first,slotEnd:u.last,selected:xa(s,a),resizable:f})},renderSpan:function(r,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(s)/r*100+"%";return _.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},n)}},Lc=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this,n=this.props,i=n.segments,o=n.slotMetrics.slots,l=n.className,c=1;return _.createElement("div",{className:Pe(l,"rbc-row")},i.reduce(function(d,u,g){var f=u.event,m=u.left,y=u.right,x=u.span,v="_lvl_"+g,b=m-c,h=mt.renderEvent(a.props,f);return b&&d.push(mt.renderSpan(o,b,"".concat(v,"_gap"))),d.push(mt.renderSpan(o,x,v,h)),c=y+1,d},[]))}}])}(_.Component);Lc.defaultProps=ke({},mt.defaultProps);function Ic(e){var r=e.dateRange,s=e.unit,a=s===void 0?"day":s,n=e.localizer;return{first:r[0],last:n.add(r[r.length-1],1,a)}}function n5(e,r,s,a){var n=Ic({dateRange:r,localizer:a}),i=n.first,o=n.last,l=a.diff(i,o,"day"),c=a.max(a.startOf(s.start(e),"day"),i),d=a.min(a.ceil(s.end(e),"day"),o),u=cj(r,function(f){return a.isSameDate(f,c)}),g=a.diff(c,d,"day");return g=Math.min(g,l),g=Math.max(g-a.segmentOffset,1),{event:e,span:g,left:u+1,right:Math.max(u+g,1)}}function en(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,s,a,n,i=[],o=[];for(s=0;s<e.length;s++){for(n=e[s],a=0;a<i.length&&i5(n,i[a]);a++);a>=r?o.push(n):(i[a]||(i[a]=[])).push(n)}for(s=0;s<i.length;s++)i[s].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function cs(e,r,s,a,n){var i={start:a.start(e),end:a.end(e)},o={start:r,end:s};return n.inEventRange({event:i,range:o})}function i5(e,r){return r.some(function(s){return s.left<=e.right&&s.right>=e.left})}function o5(e,r,s){var a=Os(e),n=[],i=[];a.forEach(function(c){var d=r.start(c),u=r.end(c);s.daySpan(d,u)>1?n.push(c):i.push(c)});var o=n.sort(function(c,d){return tn(c,d,r,s)}),l=i.sort(function(c,d){return tn(c,d,r,s)});return[].concat(Os(o),Os(l))}function tn(e,r,s,a){var n={start:s.start(e),end:s.end(e),allDay:s.allDay(e)},i={start:s.start(r),end:s.end(r),allDay:s.allDay(r)};return a.sortEvents({evtA:n,evtB:i})}var rn=function(r,s){return r.left<=s&&r.right>=s},_a=function(r,s){return r.filter(function(a){return rn(a,s)}).map(function(a){return a.event})},Fc=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){for(var a=this.props,n=a.segments,i=a.slotMetrics.slots,o=en(n).levels[0],l=1,c=1,d=[];l<=i;){var u="_lvl_"+l,g=o.filter(function(p){return rn(p,l)})[0]||{},f=g.event,m=g.left,y=g.right,x=g.span;if(!f){var v=this.getHiddenEventsForSlot(n,l);if(v.length>0){var b=l-c;b&&d.push(mt.renderSpan(i,b,u+"_gap")),d.push(mt.renderSpan(i,1,u,this.renderShowMore(n,l))),c=l=l+1;continue}l++;continue}var h=Math.max(0,m-c);if(this.canRenderSlotEvent(m,x)){var E=mt.renderEvent(this.props,f);h&&d.push(mt.renderSpan(i,h,u+"_gap")),d.push(mt.renderSpan(i,x,u,E)),c=l=y+1}else h&&d.push(mt.renderSpan(i,h,u+"_gap")),d.push(mt.renderSpan(i,1,u,this.renderShowMore(n,l))),c=l=l+1}return _.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,n){var i=_a(a,n),o=en(a).levels[0],l=o.filter(function(c){return rn(c,n)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,n){var i=this.props.segments;return jj(a,a+n).every(function(o){var l=_a(i,o).length;return l===1})}},{key:"renderShowMore",value:function(a,n){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,u=c.getEventsForSlot(n),g=_a(a,n),f=g.length;if(d!=null&&d.showMore){var m=d.showMore,y=c.getDateForSlot(n-1);return f?_.createElement(m,{localizer:l,slotDate:y,slot:n,count:f,events:u,remainingEvents:g}):!1}return f?_.createElement("button",{type:"button",key:"sm_"+n,className:Pe("rbc-button-link","rbc-show-more"),onClick:function(v){return i.showMore(n,v)}},l.messages.showMore(f,g,u)):!1}},{key:"showMore",value:function(a,n){n.preventDefault(),n.stopPropagation(),this.props.onShowMore(a,n.target)}}])}(_.Component);Fc.defaultProps=ke({},mt.defaultProps);var l5=function(r){var s=r.children;return _.createElement("div",{className:"rbc-row-content-scroll-container"},s)},c5=function(r,s){return r.left<=s&&r.right>=s},d5=function(r,s){return r[0].range===s[0].range&&r[0].events===s[0].events};function Uc(){return mc(function(e){for(var r=e.range,s=e.events,a=e.maxRows,n=e.minRows,i=e.accessors,o=e.localizer,l=Ic({dateRange:r,localizer:o}),c=l.first,d=l.last,u=s.map(function(x){return n5(x,r,i,o)}),g=en(u,Math.max(a-1,1)),f=g.levels,m=g.extra,y=m.length>0?n-1:n;f.length<y;)f.push([]);return{first:c,last:d,levels:f,extra:m,range:r,slots:r.length,clone:function(v){var b=Uc();return b(ke(ke({},e),v))},getDateForSlot:function(v){return r[v]},getSlotForDate:function(v){return r.find(function(b){return o.isSameDate(b,v)})},getEventsForSlot:function(v){return u.filter(function(b){return c5(b,v)}).map(function(b){return b.event})},continuesPrior:function(v){return o.continuesPrior(i.start(v),c)},continuesAfter:function(v){var b=i.start(v),h=i.end(v);return o.continuesAfter(b,h,d)}}},d5)}var ds=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleSelectSlot=function(o){var l=s.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},s.handleShowMore=function(o,l){var c=s.props,d=c.range,u=c.onShowMore,g=s.slotMetrics(s.props),f=lh(s.containerRef.current,".rbc-row-bg")[0],m;f&&(m=f.children[o-1]);var y=g.getEventsForSlot(o);u(y,d[o-1],m,o,l)},s.getContainer=function(){var o=s.props.container;return o?o():s.containerRef.current},s.renderHeadingCell=function(o,l){var c=s.props,d=c.renderHeader,u=c.getNow,g=c.localizer;return d({date:o,key:"header_".concat(l),className:Pe("rbc-date-cell",g.isSameDate(o,u())&&"rbc-now")})},s.renderDummy=function(){var o=s.props,l=o.className,c=o.range,d=o.renderHeader,u=o.showAllEvents;return _.createElement("div",{className:l,ref:s.containerRef},_.createElement("div",{className:Pe("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&_.createElement("div",{className:"rbc-row",ref:s.headingRowRef},c.map(s.renderHeadingCell)),_.createElement("div",{className:"rbc-row",ref:s.eventRowRef},_.createElement("div",{className:"rbc-row-segment"},_.createElement("div",{className:"rbc-event"},_.createElement("div",{className:"rbc-event-content"}," "))))))},s.containerRef=S.createRef(),s.headingRowRef=S.createRef(),s.eventRowRef=S.createRef(),s.slotMetrics=Uc(),s}return Ke(r,e),Fe(r,[{key:"getRowLimit",value:function(){var a,n=Ta(this.eventRowRef.current),i=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?Ta(this.headingRowRef.current):0,o=Ta(this.containerRef.current)-i;return Math.max(Math.floor(o/n),1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.rtl,o=a.range,l=a.className,c=a.selected,d=a.selectable,u=a.renderForMeasure,g=a.accessors,f=a.getters,m=a.components,y=a.getNow,x=a.renderHeader,v=a.onSelect,b=a.localizer,h=a.onSelectStart,E=a.onSelectEnd,p=a.onDoubleClick,$=a.onKeyPress,R=a.resourceId,P=a.longPressThreshold,T=a.isAllDay,H=a.resizable,z=a.showAllEvents;if(u)return this.renderDummy();var A=this.slotMetrics(this.props),K=A.levels,q=A.extra,J=z?l5:wt,ie=m.weekWrapper,se={selected:c,accessors:g,getters:f,localizer:b,components:m,onSelect:v,onDoubleClick:p,onKeyPress:$,resourceId:R,slotMetrics:A,resizable:H};return _.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},_.createElement(a5,{localizer:b,date:n,getNow:y,rtl:i,range:o,selectable:d,container:this.getContainer,getters:f,onSelectStart:h,onSelectEnd:E,onSelectSlot:this.handleSelectSlot,components:m,longPressThreshold:P,resourceId:R}),_.createElement("div",{className:Pe("rbc-row-content",z&&"rbc-row-content-scrollable"),role:"row"},x&&_.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),_.createElement(J,null,_.createElement(ie,Object.assign({isAllDay:T},se,{rtl:this.props.rtl}),K.map(function(N,F){return _.createElement(Lc,Object.assign({key:F,segments:N},se))}),!!q.length&&_.createElement(Fc,Object.assign({segments:q,onShowMore:this.handleShowMore},se))))))}}])}(_.Component);ds.defaultProps={minRows:0,maxRows:1/0};var Vn=function(r){var s=r.label;return _.createElement("span",{role:"columnheader","aria-sort":"none"},s)},u5=function(r){var s=r.label,a=r.drilldownView,n=r.onDrillDown;return a?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:n},s):_.createElement("span",null,s)},m5=["date","className"],h5=function(r,s,a,n,i){return r.filter(function(o){return cs(o,s,a,n,i)})},ga=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.getContainer=function(){return s.containerRef.current},s.renderWeek=function(o,l){var c=s.props,d=c.events,u=c.components,g=c.selectable,f=c.getNow,m=c.selected,y=c.date,x=c.localizer,v=c.longPressThreshold,b=c.accessors,h=c.getters,E=c.showAllEvents,p=s.state,$=p.needLimitMeasure,R=p.rowLimit,P=h5(Os(d),o[0],o[o.length-1],b,x),T=o5(P,b,x);return _.createElement(ds,{key:l,ref:l===0?s.slotRowRef:void 0,container:s.getContainer,className:"rbc-month-row",getNow:f,date:y,range:o,events:T,maxRows:E?1/0:R,selected:m,selectable:g,components:u,accessors:b,getters:h,localizer:x,renderHeader:s.readerDateHeading,renderForMeasure:$,onShowMore:s.handleShowMore,onSelect:s.handleSelectEvent,onDoubleClick:s.handleDoubleClickEvent,onKeyPress:s.handleKeyPressEvent,onSelectSlot:s.handleSelectSlot,longPressThreshold:v,rtl:s.props.rtl,resizable:s.props.resizable,showAllEvents:E})},s.readerDateHeading=function(o){var l=o.date,c=o.className,d=Dt(o,m5),u=s.props,g=u.date,f=u.getDrilldownView,m=u.localizer,y=m.neq(g,l,"month"),x=m.isSameDate(l,g),v=f(l),b=m.format(l,"dateFormat"),h=s.props.components.dateHeader||u5;return _.createElement("div",Object.assign({},d,{className:Pe(c,y&&"rbc-off-range",x&&"rbc-current"),role:"cell"}),_.createElement(h,{label:b,date:l,drilldownView:v,isOffRange:y,onDrillDown:function(p){return s.handleHeadingClick(l,v,p)}}))},s.handleSelectSlot=function(o,l){s._pendingSelection=s._pendingSelection.concat(o),clearTimeout(s._selectTimer),s._selectTimer=setTimeout(function(){return s.selectDates(l)})},s.handleHeadingClick=function(o,l,c){c.preventDefault(),s.clearSelection(),Me(s.props.onDrillDown,[o,l])},s.handleSelectEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onKeyPressEvent,l)},s.handleShowMore=function(o,l,c,d,u){var g=s.props,f=g.popup,m=g.onDrillDown,y=g.onShowMore,x=g.getDrilldownView,v=g.doShowMoreDrillDown;if(s.clearSelection(),f){var b=Ul(c,s.containerRef.current);s.setState({overlay:{date:l,events:o,position:b,target:u}})}else v&&Me(m,[l,x(l)||Ze.DAY]);Me(y,[o,l,d])},s.overlayDisplay=function(){s.setState({overlay:null})},s.state={rowLimit:5,needLimitMeasure:!0,date:null},s.containerRef=S.createRef(),s.slotRowRef=S.createRef(),s._bgRows=[],s._pendingSelection=[],s}return Ke(r,e),Fe(r,[{key:"componentDidMount",value:function(){var a=this,n;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){n||Wl(function(){n=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.className,l=i.visibleDays(n,i),c=qm(l,7);return this._weekCount=c.length,_.createElement("div",{className:Pe("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},_.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var n=this.props,i=n.localizer,o=n.components,l=a[0],c=a[a.length-1],d=o.header||Vn;return i.range(l,c,"day").map(function(u,g){return _.createElement("div",{key:"header_"+g,className:"rbc-header"},_.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,g=l.getters,f=l.selected,m=l.popupOffset,y=l.handleDragStart,x=function(){return i.setState({overlay:null})};return _.createElement(Yn,{overlay:o,accessors:c,localizer:d,components:u,getters:g,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:x})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var n=this._pendingSelection.slice();this._pendingSelection=[],n.sort(function(l,c){return+l-+c});var i=new Date(n[0]),o=new Date(n[n.length-1]);o.setDate(n[n.length-1].getDate()+1),Me(this.props.onSelectSlot,{slots:n,start:i,end:o,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,n){var i=a.date,o=a.localizer;return{date:i,needLimitMeasure:o.neq(i,n.date,"month")}}}])}(_.Component);ga.range=function(e,r){var s=r.localizer,a=s.firstVisibleDay(e,s),n=s.lastVisibleDay(e,s);return{start:a,end:n}};ga.navigate=function(e,r,s){var a=s.localizer;switch(r){case ot.PREVIOUS:return a.add(e,-1,"month");case ot.NEXT:return a.add(e,1,"month");default:return e}};ga.title=function(e,r){var s=r.localizer;return s.format(e,"monthHeaderFormat")};var Uo=function(r){var s=r.min,a=r.max,n=r.step,i=r.slots,o=r.localizer;return"".concat(+o.startOf(s,"minutes"))+"".concat(+o.startOf(a,"minutes"))+"".concat(n,"-").concat(i)};function Kn(e){for(var r=e.min,s=e.max,a=e.step,n=e.timeslots,i=e.localizer,o=Uo({step:a,localizer:i}),l=1+i.getTotalMin(r,s),c=i.getMinutesFromMidnight(r),d=Math.ceil((l-1)/(a*n)),u=d*n,g=new Array(d),f=new Array(u),m=0;m<d;m++){g[m]=new Array(n);for(var y=0;y<n;y++){var x=m*n+y,v=x*a;f[x]=g[m][y]=i.getSlotDate(r,c,v)}}var b=f.length*a;f.push(i.getSlotDate(r,c,b));function h(E){var p=i.diff(r,E,"minutes")+i.getDstOffset(r,E);return Math.min(p,l)}return{groups:g,update:function(p){return Uo(p)!==o?Kn(p):this},dateIsInGroup:function(p,$){var R=g[$+1];return i.inRange(p,g[$][0],R?R[0]:s,"minutes")},nextSlot:function(p){var $=f[Math.min(f.findIndex(function(R){return R===p||i.eq(R,p)})+1,f.length-1)];return i.eq($,p)&&($=i.add(p,a,"minutes")),$},closestSlotToPosition:function(p){var $=Math.min(f.length-1,Math.max(0,Math.floor(p*u)));return f[$]},closestSlotFromPoint:function(p,$){var R=Math.abs($.top-$.bottom);return this.closestSlotToPosition((p.y-$.top)/R)},closestSlotFromDate:function(p){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(p,r,"minutes"))return f[0];if(i.gt(p,s,"minutes"))return f[f.length-1];var R=i.diff(r,p,"minutes");return f[(R-R%a)/a+$]},startsBeforeDay:function(p){return i.lt(p,r,"day")},startsAfterDay:function(p){return i.gt(p,s,"day")},startsBefore:function(p){return i.lt(i.merge(r,p),r,"minutes")},startsAfter:function(p){return i.gt(i.merge(s,p),s,"minutes")},getRange:function(p,$,R,P){R||(p=i.min(s,i.max(r,p))),P||($=i.min(s,i.max(r,$)));var T=h(p),H=h($),z=H>a*u&&!i.eq(s,$)?(T-a)/(a*u)*100:T/(a*u)*100;return{top:z,height:H/(a*u)*100-z,start:h(p),startDate:p,end:h($),endDate:$}},getCurrentTimePosition:function(p){var $=h(p),R=$/(a*u)*100;return R}}}var f5=function(){function e(r,s){var a=s.accessors,n=s.slotMetrics;Ie(this,e);var i=n.getRange(a.start(r),a.end(r)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,u=i.top,g=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=g,this.data=r}return Fe(e,[{key:"_width",get:function(){if(this.rows){var s=this.rows.reduce(function(n,i){return Math.max(n,i.leaves.length+1)},0)+1;return 100/s}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var s=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:s;var n=this.row.leaves,i=n.indexOf(this);return i===n.length-1?s:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var s=this.row,a=s.leaves,n=s.xOffset,i=s._width,o=a.indexOf(this)+1;return n+o*i}}])}();function x5(e,r,s){return Math.abs(r.start-e.start)<s||r.start>e.start&&r.start<e.end}function g5(e){for(var r=Ww(e,["startMs",function(l){return-l.endMs}]),s=[];r.length>0;){var a=r.shift();s.push(a);for(var n=0;n<r.length;n++){var i=r[n];if(!(a.endMs>i.startMs)){if(n>0){var o=r.splice(n,1)[0];s.push(o)}break}}}return s}function Wc(e){for(var r=e.events,s=e.minimumStartDifference,a=e.slotMetrics,n=e.accessors,i=r.map(function(u){return new f5(u,{slotMetrics:a,accessors:n})}),o=g5(i),l=[],c=function(){var g=o[d],f=l.find(function(x){return x.end>g.start||Math.abs(g.start-x.start)<s});if(!f)return g.rows=[],l.push(g),1;g.container=f;for(var m=null,y=f.rows.length-1;!m&&y>=0;y--)x5(f.rows[y],g,s)&&(m=f.rows[y]);m?(m.leaves.push(g),g.row=m):(g.leaves=[],f.rows.push(g))},d=0;d<o.length;d++)c();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function Bc(e,r,s){for(var a=0;a<e.friends.length;++a)if(!(s.indexOf(e.friends[a])>-1)){r=r>e.friends[a].idx?r:e.friends[a].idx,s.push(e.friends[a]);var n=Bc(e.friends[a],r,s);r=r>n?r:n}return r}function p5(e){var r=e.events,s=e.minimumStartDifference,a=e.slotMetrics,n=e.accessors,i=Wc({events:r,minimumStartDifference:s,slotMetrics:a,accessors:n});i.sort(function(ie,se){return ie=ie.style,se=se.style,ie.top!==se.top?ie.top>se.top?1:-1:ie.height!==se.height?ie.top+ie.height<se.top+se.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,u=c.style.top+c.style.height,g=l+1;g<i.length;++g){var f=i[g],m=f.style.top,y=f.style.top+f.style.height;(m>=d&&y<=u||y>d&&y<=u||m>=d&&m<u)&&(c.friends.push(f),f.friends.push(c))}for(var x=0;x<i.length;++x){for(var v=i[x],b=[],h=0;h<100;++h)b.push(1);for(var E=0;E<v.friends.length;++E)v.friends[E].idx!==void 0&&(b[v.friends[E].idx]=0);v.idx=b.indexOf(1)}for(var p=0;p<i.length;++p){var $=0;if(!i[p].size){var R=[],P=Bc(i[p],0,R);$=100/(P+1),i[p].size=$;for(var T=0;T<R.length;++T)R[T].size=$}}for(var H=0;H<i.length;++H){var z=i[H];z.style.left=z.idx*z.size;for(var A=0,K=0;K<z.friends.length;++K){var q=z.friends[K].idx;A=A>q?A:q}A<=z.idx&&(z.size=100-z.idx*z.size);var J=z.idx===0?0:3;z.style.width="calc(".concat(z.size,"% - ").concat(J,"px)"),z.style.height="calc(".concat(z.style.height,"% - 2px)"),z.style.xOffset="calc(".concat(z.style.left,"% + ").concat(J,"px)")}return i}var Wo={overlap:Wc,"no-overlap":p5};function v5(e){return!!(e&&e.constructor&&e.call&&e.apply)}function b5(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var r=e.dayLayoutAlgorithm,s=r;return r in Wo&&(s=Wo[r]),v5(s)?s.apply(this,arguments):[]}var Hc=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.renderSlot,i=a.resource,o=a.group,l=a.getters,c=a.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,g=u===void 0?wt:u,f=l?l.slotGroupProp(o):{};return _.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),o.map(function(m,y){var x=l?l.slotProp(m,i):{};return _.createElement(g,{key:y,value:m,resource:i},_.createElement("div",Object.assign({},x,{className:Pe("rbc-time-slot",x.className)}),n&&n(m,y)))}))}}])}(S.Component);function Ds(e){return typeof e=="string"?e:e+"%"}function y5(e){var r=e.style,s=e.className,a=e.event,n=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,g=e.onClick,f=e.onDoubleClick,m=e.isBackgroundEvent,y=e.onKeyPress,x=e.components,v=x.event,b=x.eventWrapper,h=n.title(a),E=n.tooltip(a),p=n.end(a),$=n.start(a),R=u.eventProp(a,$,p,o),P=[_.createElement("div",{key:"1",className:"rbc-event-label"},l),_.createElement("div",{key:"2",className:"rbc-event-content"},v?_.createElement(v,{event:a,title:h}):h)],T=r.height,H=r.top,z=r.width,A=r.xOffset,K=ke(ke({},R.style),{},Zt({top:Ds(H),height:Ds(T),width:Ds(z)},i?"right":"left",Ds(A)));return _.createElement(b,Object.assign({type:"time"},e),_.createElement("div",{role:"button",tabIndex:0,onClick:g,onDoubleClick:f,style:K,onKeyDown:y,title:E?(typeof l=="string"?l+": ":"")+E:void 0,className:Pe(m?"rbc-background-event":"rbc-event",s,R.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},P))}var j5=function(r){var s=r.children,a=r.className,n=r.style,i=r.innerRef;return _.createElement("div",{className:a,style:n,ref:i},s)},w5=_.forwardRef(function(e,r){return _.createElement(j5,Object.assign({},e,{innerRef:r}))}),N5=["dayProp"],S5=["eventContainerWrapper","timeIndicatorWrapper"],zc=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.state={selecting:!1,timeIndicatorPosition:null},s.intervalTriggered=!1,s.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=s.props,u=d.rtl,g=d.selected,f=d.accessors,m=d.localizer,y=d.getters,x=d.components,v=d.step,b=d.timeslots,h=d.dayLayoutAlgorithm,E=d.resizable,p=s,$=p.slotMetrics,R=m.messages,P=b5({events:l,accessors:f,slotMetrics:$,minimumStartDifference:Math.ceil(v*b/2),dayLayoutAlgorithm:h});return P.map(function(T,H){var z,A=T.event,K=T.style,q=f.end(A),J=f.start(A),ie=(z=f.eventId(A))!==null&&z!==void 0?z:"evt_"+H,se="eventTimeRangeFormat",N,F=$.startsBeforeDay(J),Y=$.startsAfterDay(q);F?se="eventTimeRangeEndFormat":Y&&(se="eventTimeRangeStartFormat"),F&&Y?N=R.allDay:N=m.format({start:J,end:q},se);var O=F||$.startsBefore(J),oe=Y||$.startsAfter(q);return _.createElement(y5,{style:K,event:A,label:N,key:ie,getters:y,rtl:u,components:x,continuesPrior:O,continuesAfter:oe,accessors:f,resource:s.props.resource,selected:xa(A,g),onClick:function(de){return s._select(ke(ke(ke({},A),s.props.resource&&{sourceResource:s.props.resource}),c&&{isBackgroundEvent:!0}),de)},onDoubleClick:function(de){return s._doubleClick(A,de)},isBackgroundEvent:c,onKeyPress:function(de){return s._keyPress(A,de)},resizable:E})})},s._selectable=function(){var o=s.containerRef.current,l=s.props,c=l.longPressThreshold,d=l.localizer,u=s._selector=new Rc(function(){return o},{longPressThreshold:c}),g=function(x){var v=s.props.onSelecting,b=s.state||{},h=f(x),E=h.startDate,p=h.endDate;v&&(d.eq(b.startDate,E,"minutes")&&d.eq(b.endDate,p,"minutes")||v({start:E,end:p,resourceId:s.props.resource})===!1)||(s.state.start!==h.start||s.state.end!==h.end||s.state.selecting!==h.selecting)&&s.setState(h)},f=function(x){var v=s.slotMetrics.closestSlotFromPoint(x,dr(o));s.state.selecting||(s._initialSlot=v);var b=s._initialSlot;d.lte(b,v)?v=s.slotMetrics.nextSlot(v):d.gt(b,v)&&(b=s.slotMetrics.nextSlot(b));var h=s.slotMetrics.getRange(d.min(b,v),d.max(b,v));return ke(ke({},h),{},{selecting:!0,top:"".concat(h.top,"%"),height:"".concat(h.height,"%")})},m=function(x,v){if(!qs(s.containerRef.current,x)){var b=f(x),h=b.startDate,E=b.endDate;s._selectSlot({startDate:h,endDate:E,action:v,box:x})}s.setState({selecting:!1})};u.on("selecting",g),u.on("selectStart",g),u.on("beforeSelect",function(y){if(s.props.selectable==="ignoreEvents")return!qs(s.containerRef.current,y)}),u.on("click",function(y){return m(y,"click")}),u.on("doubleClick",function(y){return m(y,"doubleClick")}),u.on("select",function(y){s.state.selecting&&(s._selectSlot(ke(ke({},s.state),{},{action:"select",bounds:y})),s.setState({selecting:!1}))}),u.on("reset",function(){s.state.selecting&&s.setState({selecting:!1})})},s._teardownSelectable=function(){s._selector&&(s._selector.teardown(),s._selector=null)},s._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,u=o.bounds,g=o.box,f=l,m=[];s.props.localizer.lte(f,c);)m.push(f),f=new Date(+f+s.props.step*60*1e3);Me(s.props.onSelectSlot,{slots:m,start:l,end:c,resourceId:s.props.resource,action:d,bounds:u,box:g})},s._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onSelectEvent,l)},s._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onDoubleClickEvent,l)},s._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onKeyPressEvent,l)},s.slotMetrics=Kn(s.props),s.containerRef=S.createRef(),s}return Ke(r,e),Fe(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,n){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,u=i.min,g=i.max,f=c.neq(a.getNow(),o(),"minutes");if(a.isNow!==l||f){if(this.clearTimeIndicatorInterval(),l){var m=!f&&c.eq(a.date,d,"minutes")&&n.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(m)}}else l&&(c.neq(a.min,u,"minutes")||c.neq(a.max,g,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!n&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,n=a.min,i=a.max,o=a.getNow,l=o();if(l>=n&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.max,o=a.rtl,l=a.isNow,c=a.resource,d=a.accessors,u=a.localizer,g=a.getters,f=g.dayProp,m=Dt(g,N5),y=a.components,x=y.eventContainerWrapper,v=y.timeIndicatorWrapper,b=Dt(y,S5);this.slotMetrics=this.slotMetrics.update(this.props);var h=this.slotMetrics,E=this.state,p=E.selecting,$=E.top,R=E.height,P=E.startDate,T=E.endDate,H={start:P,end:T},z=f(i,c),A=z.className,K=z.style,q={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},J=b.dayColumnWrapper||w5;return _.createElement(J,{ref:this.containerRef,date:n,style:K,className:Pe(A,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",p&&"rbc-slot-selecting"),slotMetrics:h,resource:c},h.groups.map(function(ie,se){return _.createElement(Hc,{key:se,group:ie,resource:c,getters:m,components:b})}),_.createElement(x,{localizer:u,resource:c,accessors:d,getters:m,components:b,slotMetrics:h},_.createElement("div",{className:Pe("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),p&&_.createElement("div",{className:"rbc-slot-selection",style:{top:$,height:R}},_.createElement("span",null,u.format(H,"selectRangeFormat"))),l&&this.intervalTriggered&&_.createElement(v,q,_.createElement("div",q)))}}])}(_.Component);zc.defaultProps={dragThroughEvents:!0,timeslots:2};var Gc=function(r){var s=r.label;return _.createElement(_.Fragment,null,s)},k5=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Me(s.props.onDrillDown,[o,l])},s.renderRow=function(o){var l=s.props,c=l.events,d=l.rtl,u=l.selectable,g=l.getNow,f=l.range,m=l.getters,y=l.localizer,x=l.accessors,v=l.components,b=l.resizable,h=x.resourceId(o),E=o?c.filter(function(p){return x.resource(p)===h}):c;return _.createElement(ds,{isAllDay:!0,rtl:d,getNow:g,minRows:2,maxRows:s.props.allDayMaxRows+1,range:f,events:E,resourceId:h,className:"rbc-allday-cell",selectable:u,selected:s.props.selected,components:v,accessors:x,getters:m,localizer:y,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyPress:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:b})},s}return Ke(r,e),Fe(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,g=u===void 0?Vn:u,f=c();return a.map(function(m,y){var x=l(m),v=o.format(m,"dayFormat"),b=d(m),h=b.className,E=b.style,p=_.createElement(g,{date:m,label:v,localizer:o});return _.createElement("div",{key:y,style:E,className:Pe("rbc-header",h,o.isSameDate(m,f)&&"rbc-today")},x?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(R){return n.handleHeaderClick(m,x,R)}},p):_.createElement("span",null,p))})}},{key:"render",value:function(){var a=this,n=this.props,i=n.width,o=n.rtl,l=n.resources,c=n.range,d=n.events,u=n.getNow,g=n.accessors,f=n.selectable,m=n.components,y=n.getters,x=n.scrollRef,v=n.localizer,b=n.isOverflowing,h=n.components,E=h.timeGutterHeader,p=h.resourceHeader,$=p===void 0?Gc:p,R=n.resizable,P={};b&&(P[o?"marginLeft":"marginRight"]="".concat($n()-1,"px"));var T=l.groupEvents(d);return _.createElement("div",{style:P,ref:x,className:Pe("rbc-time-header",b&&"rbc-overflowing")},_.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},E&&_.createElement(E,null)),l.map(function(H,z){var A=sr(H,2),K=A[0],q=A[1];return _.createElement("div",{className:"rbc-time-header-content",key:K||z},q&&_.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(z)},_.createElement("div",{className:"rbc-header"},_.createElement($,{index:z,label:g.resourceTitle(q),resource:q}))),_.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),_.createElement(ds,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:T.get(K)||[],resourceId:q&&K,className:"rbc-allday-cell",selectable:f,selected:a.props.selected,components:m,accessors:g,getters:y,localizer:v,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:R}))}))}}])}(_.Component),C5=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Me(s.props.onDrillDown,[o,l])},s}return Ke(r,e),Fe(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,g=u.header,f=g===void 0?Vn:g,m=u.resourceHeader,y=m===void 0?Gc:m,x=i.resources,v=i.accessors,b=i.events,h=i.rtl,E=i.selectable,p=i.components,$=i.getters,R=i.resizable,P=c(),T=x.groupEvents(b);return a.map(function(H,z){var A=l(H),K=o.format(H,"dayFormat"),q=d(H),J=q.className,ie=q.style,se=_.createElement(f,{date:H,label:K,localizer:o});return _.createElement("div",{key:z,className:"rbc-time-header-content rbc-resource-grouping"},_.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},_.createElement("div",{style:ie,className:Pe("rbc-header",J,o.isSameDate(H,P)&&"rbc-today")},A?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(F){return n.handleHeaderClick(H,A,F)}},se):_.createElement("span",null,se))),_.createElement("div",{className:"rbc-row"},x.map(function(N,F){var Y=sr(N,2),O=Y[0],oe=Y[1];return _.createElement("div",{key:"resource_".concat(O,"_").concat(F),className:Pe("rbc-header",J,o.isSameDate(H,P)&&"rbc-today")},_.createElement(y,{index:F,label:v.resourceTitle(oe),resource:oe}))})),_.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},x.map(function(N,F){var Y=sr(N,2),O=Y[0],oe=Y[1],ge=(T.get(O)||[]).filter(function(de){return o.isSameDate(de.start,H)||o.isSameDate(de.end,H)});return _.createElement(ds,{key:"resource_".concat(O,"_").concat(F),isAllDay:!0,rtl:h,getNow:c,minRows:2,maxRows:n.props.allDayMaxRows+1,range:[H],events:ge,resourceId:oe&&O,className:"rbc-allday-cell",selectable:E,selected:n.props.selected,components:p,accessors:v,getters:$,localizer:o,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:R})})))})}},{key:"render",value:function(){var a=this.props,n=a.width,i=a.rtl,o=a.range,l=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat($n()-1,"px")),_.createElement("div",{style:u,ref:l,className:Pe("rbc-time-header",c&&"rbc-overflowing")},_.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},d&&_.createElement(d,null)),this.renderHeaderCells(o))}}])}(_.Component);function $5(e){var r=e.min,s=e.max,a=e.localizer;return a.getTimezoneOffset(r)!==a.getTimezoneOffset(s)?{start:a.add(r,-1,"day"),end:a.add(s,-1,"day")}:{start:r,end:s}}var E5=function(r){var s=r.min,a=r.max,n=r.timeslots,i=r.step,o=r.localizer,l=r.getNow,c=r.resource,d=r.components,u=r.getters,g=r.gutterRef,f=d.timeGutterWrapper,m=S.useMemo(function(){return $5({min:s,max:a,localizer:o})},[s==null?void 0:s.toISOString(),a==null?void 0:a.toISOString(),o]),y=m.start,x=m.end,v=S.useState(Kn({min:y,max:x,timeslots:n,step:i,localizer:o})),b=sr(v,2),h=b[0],E=b[1];S.useEffect(function(){h&&E(h.update({min:y,max:x,timeslots:n,step:i,localizer:o}))},[y==null?void 0:y.toISOString(),x==null?void 0:x.toISOString(),n,i]);var p=S.useCallback(function($,R){if(R)return null;var P=h.dateIsInGroup(l(),R);return _.createElement("span",{className:Pe("rbc-label",P&&"rbc-now")},o.format($,"timeGutterFormat"))},[h,o,l]);return _.createElement(f,{slotMetrics:h},_.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:g},h.groups.map(function($,R){return _.createElement(Hc,{key:R,group:$,resource:c,components:d,renderSlot:p,getters:u})})))},D5=_.forwardRef(function(e,r){return _.createElement(E5,Object.assign({gutterRef:r},e))}),Pa={};function T5(e,r){return{map:function(a){return e?e.map(function(n,i){return a([r.resourceId(n),n],i)}):[a([Pa,null],0)]},groupEvents:function(a){var n=new Map;return e?(a.forEach(function(i){var o=r.resource(i)||Pa;if(Array.isArray(o))o.forEach(function(c){var d=n.get(c)||[];d.push(i),n.set(c,d)});else{var l=n.get(o)||[];l.push(i),n.set(o,l)}}),n):(n.set(Pa,a),n)}}}var Ar=function(e){function r(s){var a;return Ie(this,r),a=Ve(this,r,[s]),a.handleScroll=function(n){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=n.target.scrollLeft)},a.handleResize=function(){Ci(a.rafHandle),a.rafHandle=Wl(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Me(a.props.onKeyPressEvent,i)},a.handleSelectEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Me(a.props.onSelectEvent,i)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Me(a.props.onDoubleClickEvent,i)},a.handleShowMore=function(n,i,o,l,c){var d=a.props,u=d.popup,g=d.onDrillDown,f=d.onShowMore,m=d.getDrilldownView,y=d.doShowMoreDrillDown;if(a.clearSelection(),u){var x=Ul(o,a.containerRef.current);a.setState({overlay:{date:i,events:n,position:ke(ke({},x),{},{width:"200px"}),target:c}})}else y&&Me(g,[i,m(i)||Ze.DAY]);Me(f,[n,i,l])},a.handleSelectAllDaySlot=function(n,i){var o=a.props.onSelectSlot,l=new Date(n[0]),c=new Date(n[n.length-1]);c.setDate(n[n.length-1].getDate()+1),Me(o,{slots:n,start:l,end:c,action:i.action,resourceId:i.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var n=a.contentRef.current;if(n!=null&&n.scrollHeight){var i=n.scrollHeight>n.clientHeight;a.state.isOverflowing!==i&&(a._updatingOverflow=!0,a.setState({isOverflowing:i},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=mc(function(n,i){return T5(n,i)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=_.createRef(),a.contentRef=_.createRef(),a.containerRef=_.createRef(),a._scrollRatio=null,a.gutterRef=S.createRef(),a}return Ke(r,e),Fe(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Ci(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,n,i,o,l,c,d,u,g,f){var m=this.props,y=m.min,x=m.max,v=(o.get(n)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")}),b=(l.get(n)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")});return _.createElement(zc,Object.assign({},this.props,{localizer:c,min:c.merge(a,y),max:c.merge(a,x),resource:i&&n,components:u,isNow:c.isSameDate(a,f),key:"".concat(n,"-").concat(a),date:a,events:v,backgroundEvents:b,dayLayoutAlgorithm:g}))}},{key:"renderResourcesFirst",value:function(a,n,i,o,l,c,d,u,g){var f=this;return n.map(function(m){var y=sr(m,2),x=y[0],v=y[1];return a.map(function(b){return f.renderDayColumn(b,x,v,i,o,l,c,u,g,d)})})}},{key:"renderRangeFirst",value:function(a,n,i,o,l,c,d,u,g){var f=this;return a.map(function(m){return _.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:m},n.map(function(y){var x=sr(y,2),v=x[0],b=x[1];return _.createElement("div",{style:{flex:1},key:c.resourceId(b)},f.renderDayColumn(m,v,b,i,o,l,c,u,g,d))}))})}},{key:"renderEvents",value:function(a,n,i,o){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,g=l.components,f=l.dayLayoutAlgorithm,m=this.memoizedResources(this.props.resources,c),y=m.groupEvents(n),x=m.groupEvents(i);return u?this.renderRangeFirst(a,m,y,x,d,c,o,g,f):this.renderResourcesFirst(a,m,y,x,d,c,o,g,f)}},{key:"render",value:function(){var a,n=this.props,i=n.events,o=n.backgroundEvents,l=n.range,c=n.width,d=n.rtl,u=n.selected,g=n.getNow,f=n.resources,m=n.components,y=n.accessors,x=n.getters,v=n.localizer,b=n.min,h=n.max,E=n.showMultiDayTimes,p=n.longPressThreshold,$=n.resizable,R=n.resourceGroupingLayout;c=c||this.state.gutterWidth;var P=l[0],T=l[l.length-1];this.slots=l.length;var H=[],z=[],A=[];i.forEach(function(q){if(cs(q,P,T,y,v)){var J=y.start(q),ie=y.end(q);y.allDay(q)||v.startAndEndAreDateOnly(J,ie)||!E&&!v.isSameDate(J,ie)?H.push(q):z.push(q)}}),o.forEach(function(q){cs(q,P,T,y,v)&&A.push(q)}),H.sort(function(q,J){return tn(q,J,y,v)});var K={range:l,events:H,width:c,rtl:d,getNow:g,localizer:v,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(f,y),selectable:this.props.selectable,accessors:y,getters:x,components:m,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:p,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:$};return _.createElement("div",{className:Pe("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&R?_.createElement(C5,K):_.createElement(k5,K),this.props.popup&&this.renderOverlay(),_.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},_.createElement(D5,{date:P,ref:this.gutterRef,localizer:v,min:v.merge(P,b),max:v.merge(P,h),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:m,className:"rbc-time-gutter",getters:x}),this.renderEvents(l,z,A,g())))}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,g=l.getters,f=l.selected,m=l.popupOffset,y=l.handleDragStart,x=function(){return i.setState({overlay:null})};return _.createElement(Yn,{overlay:o,accessors:c,localizer:d,components:u,getters:g,selected:f,popupOffset:m,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:x})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var n,i=(n=a.gutterRef)!==null&&n!==void 0&&n.current?Qa(a.gutterRef.current):void 0;i&&a.state.gutterWidth!==i&&a.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=a.min,i=a.max,o=a.scrollToTime,l=a.localizer,c=l.diff(l.merge(o,n),o,"milliseconds"),d=l.diff(n,i,"milliseconds");this._scrollRatio=c/d}}])}(S.Component);Ar.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var M5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],pa=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,g=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,m=f===void 0?!0:f,y=Dt(a,M5),x=r.range(n,{localizer:i});return _.createElement(Ar,Object.assign({},y,{range:x,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:g,enableAutoScroll:m}))}}])}(_.Component);pa.range=function(e,r){var s=r.localizer;return[s.startOf(e,"day")]};pa.navigate=function(e,r,s){var a=s.localizer;switch(r){case ot.PREVIOUS:return a.add(e,-1,"day");case ot.NEXT:return a.add(e,1,"day");default:return e}};pa.title=function(e,r){var s=r.localizer;return s.format(e,"dayHeaderFormat")};var O5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Yt=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,g=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,m=f===void 0?!0:f,y=Dt(a,O5),x=r.range(n,this.props);return _.createElement(Ar,Object.assign({},y,{range:x,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:g,enableAutoScroll:m}))}}])}(_.Component);Yt.defaultProps=Ar.defaultProps;Yt.navigate=function(e,r,s){var a=s.localizer;switch(r){case ot.PREVIOUS:return a.add(e,-1,"week");case ot.NEXT:return a.add(e,1,"week");default:return e}};Yt.range=function(e,r){var s=r.localizer,a=s.startOfWeek(),n=s.startOf(e,"week",a),i=s.endOf(e,"week",a);return s.range(n,i)};Yt.title=function(e,r){var s=r.localizer,a=Yt.range(e,{localizer:s}),n=bc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var _5=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Xn(e,r){return Yt.range(e,r).filter(function(s){return[6,0].indexOf(s.getDay())===-1})}var js=function(e){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,u=a.scrollToTime,g=u===void 0?i.startOf(new Date,"day"):u,f=a.enableAutoScroll,m=f===void 0?!0:f,y=Dt(a,_5),x=Xn(n,this.props);return _.createElement(Ar,Object.assign({},y,{range:x,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:g,enableAutoScroll:m}))}}])}(_.Component);js.defaultProps=Ar.defaultProps;js.range=Xn;js.navigate=Yt.navigate;js.title=function(e,r){var s=r.localizer,a=Xn(e,{localizer:s}),n=bc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var va=30;function ba(e){var r=e.accessors,s=e.components,a=e.date,n=e.events,i=e.getters,o=e.length,l=o===void 0?va:o,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,g=e.selected,f=S.useRef(null),m=S.useRef(null),y=S.useRef(null),x=S.useRef(null),v=S.useRef(null);S.useEffect(function(){E()});var b=function(T,H,z){var A=s.event,K=s.date;return H=H.filter(function(q){return cs(q,c.startOf(T,"day"),c.endOf(T,"day"),r,c)}),H.map(function(q,J){var ie=r.title(q),se=r.end(q),N=r.start(q),F=i.eventProp(q,N,se,xa(q,g)),Y=J===0&&c.format(T,"agendaDateFormat"),O=J===0?_.createElement("td",{rowSpan:H.length,className:"rbc-agenda-date-cell"},K?_.createElement(K,{day:T,label:Y}):Y):!1;return _.createElement("tr",{key:z+"_"+J,className:F.className,style:F.style},O,_.createElement("td",{className:"rbc-agenda-time-cell"},h(T,q)),_.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(ge){return u&&u(q,ge)},onDoubleClick:function(ge){return d&&d(q,ge)}},A?_.createElement(A,{event:q,title:ie}):ie))},[])},h=function(T,H){var z="",A=s.time,K=c.messages.allDay,q=r.end(H),J=r.start(H);return r.allDay(H)||(c.eq(J,q)?K=c.format(J,"agendaTimeFormat"):c.isSameDate(J,q)?K=c.format({start:J,end:q},"agendaTimeRangeFormat"):c.isSameDate(T,J)?K=c.format(J,"agendaTimeFormat"):c.isSameDate(T,q)&&(K=c.format(q,"agendaTimeFormat"))),c.gt(T,J,"day")&&(z="rbc-continues-prior"),c.lt(T,q,"day")&&(z+=" rbc-continues-after"),_.createElement("span",{className:z.trim()},A?_.createElement(A,{event:H,day:T,label:K}):K)},E=function(){if(v.current){var T=f.current,H=v.current.firstChild;if(H){var z=x.current.scrollHeight>x.current.clientHeight,A=[],K=A;A=[Qa(H.children[0]),Qa(H.children[1])],(K[0]!==A[0]||K[1]!==A[1])&&(m.current.style.width=A[0]+"px",y.current.style.width=A[1]+"px"),z?(Pf(T,"rbc-header-overflowing"),T.style.marginRight=$n()+"px"):Af(T,"rbc-header-overflowing")}}},p=c.messages,$=c.add(a,l,"day"),R=c.range(a,$,"day");return n=n.filter(function(P){return cs(P,c.startOf(a,"day"),c.endOf($,"day"),r,c)}),n.sort(function(P,T){return+r.start(P)-+r.start(T)}),_.createElement("div",{className:"rbc-agenda-view"},n.length!==0?_.createElement(_.Fragment,null,_.createElement("table",{ref:f,className:"rbc-agenda-table"},_.createElement("thead",null,_.createElement("tr",null,_.createElement("th",{className:"rbc-header",ref:m},p.date),_.createElement("th",{className:"rbc-header",ref:y},p.time),_.createElement("th",{className:"rbc-header"},p.event)))),_.createElement("div",{className:"rbc-agenda-content",ref:x},_.createElement("table",{className:"rbc-agenda-table"},_.createElement("tbody",{ref:v},R.map(function(P,T){return b(P,n,T)}))))):_.createElement("span",{className:"rbc-agenda-empty"},p.noEventsInRange))}ba.range=function(e,r){var s=r.length,a=s===void 0?va:s,n=r.localizer,i=n.add(e,a,"day");return{start:e,end:i}};ba.navigate=function(e,r,s){var a=s.length,n=a===void 0?va:a,i=s.localizer;switch(r){case ot.PREVIOUS:return i.add(e,-n,"day");case ot.NEXT:return i.add(e,n,"day");default:return e}};ba.title=function(e,r){var s=r.length,a=s===void 0?va:s,n=r.localizer,i=n.add(e,a,"day");return n.format({start:e,end:i},"agendaHeaderFormat")};var As=Zt(Zt(Zt(Zt(Zt({},Ze.MONTH,ga),Ze.WEEK,Yt),Ze.WORK_WEEK,js),Ze.DAY,pa),Ze.AGENDA,ba),P5=["action","date","today"];function A5(e,r){var s=r.action,a=r.date,n=r.today,i=Dt(r,P5);switch(e=typeof e=="string"?As[e]:e,s){case ot.TODAY:a=n||new Date;break;case ot.DATE:break;default:Jr(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=e.navigate(a,s,i)}return a}function R5(e,r){var s=null;return typeof r=="function"?s=r(e):typeof r=="string"&&Rt(e)==="object"&&e!=null&&r in e&&(s=e[r]),s}var _t=function(r){return function(s){return R5(s,r)}},L5=["view","date","getNow","onNavigate"],I5=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function qc(e){if(Array.isArray(e))return e;for(var r=[],s=0,a=Object.entries(e);s<a.length;s++){var n=sr(a[s],2),i=n[0],o=n[1];o&&r.push(i)}return r}function F5(e,r){var s=r.views,a=qc(s);return a.indexOf(e)!==-1}var Yc=function(e){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.getViews=function(){var o=s.props.views;return Array.isArray(o)?xk(o,function(l,c){return l[c]=As[c]},{}):Rt(o)==="object"?xN(o,function(l,c){return l===!0?As[c]:l}):As},s.getView=function(){var o=s.getViews();return o[s.props.view]},s.getDrilldownView=function(o){var l=s.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(o,c,Object.keys(s.getViews())):d},s.handleRangeChange=function(o,l,c){var d=s.props,u=d.onRangeChange,g=d.localizer;u&&l.range&&u(l.range(o,{localizer:g}),c)},s.handleNavigate=function(o,l){var c=s.props,d=c.view,u=c.date,g=c.getNow,f=c.onNavigate,m=Dt(c,L5),y=s.getView(),x=g();u=A5(y,ke(ke({},m),{},{action:o,date:l||u||x,today:x})),f(u,d,o),s.handleRangeChange(u,y)},s.handleViewChange=function(o){o!==s.props.view&&F5(o,s.props)&&s.props.onView(o);var l=s.getViews();s.handleRangeChange(s.props.date||s.props.getNow(),l[o],o)},s.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Me(s.props.onKeyPressEvent,l)},s.handleSelectSlot=function(o){Me(s.props.onSelectSlot,o)},s.handleDrillDown=function(o,l){var c=s.props.onDrillDown;if(c){c(o,l,s.drilldownView);return}l&&s.handleViewChange(l),s.handleNavigate(ot.DATE,o)},s.state={context:r.getContext(s.props)},s}return Ke(r,e),Fe(r,[{key:"render",value:function(){var a=this.props,n=a.view,i=a.toolbar,o=a.events,l=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,u=a.className,g=a.elementProps,f=a.date,m=a.getNow,y=a.length,x=a.showMultiDayTimes,v=a.onShowMore,b=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var h=Dt(a,I5);f=f||m();var E=this.getView(),p=this.state.context,$=p.accessors,R=p.components,P=p.getters,T=p.localizer,H=p.viewNames,z=R.toolbar||Bk,A=E.title(f,{localizer:T,length:y});return _.createElement("div",Object.assign({},g,{className:Pe(u,"rbc-calendar",h.rtl&&"rbc-rtl"),style:d}),i&&_.createElement(z,{date:f,view:n,views:H,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:T}),_.createElement(E,Object.assign({},h,{events:o,backgroundEvents:l,date:f,getNow:m,length:y,localizer:T,getters:P,components:R,accessors:$,showMultiDayTimes:x,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:b,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:r.getContext(a)}}},{key:"getContext",value:function(a){var n=a.startAccessor,i=a.endAccessor,o=a.allDayAccessor,l=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,u=a.resourceIdAccessor,g=a.resourceTitleAccessor,f=a.eventIdAccessor,m=a.eventPropGetter,y=a.backgroundEventPropGetter,x=a.slotPropGetter,v=a.slotGroupPropGetter,b=a.dayPropGetter,h=a.view,E=a.views,p=a.localizer,$=a.culture,R=a.messages,P=R===void 0?{}:R,T=a.components,H=T===void 0?{}:T,z=a.formats,A=z===void 0?{}:z,K=qc(E),q=zk(P);return{viewNames:K,localizer:Wk(p,$,A,q),getters:{eventProp:function(){return m&&m.apply(void 0,arguments)||{}},backgroundEventProp:function(){return y&&y.apply(void 0,arguments)||{}},slotProp:function(){return x&&x.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return b&&b.apply(void 0,arguments)||{}}},components:lN(H[h]||{},rk(H,K),{eventWrapper:wt,backgroundEventWrapper:wt,eventContainerWrapper:wt,dateCellWrapper:wt,weekWrapper:wt,timeSlotWrapper:wt,timeGutterWrapper:wt,timeIndicatorWrapper:wt}),accessors:{start:_t(n),end:_t(i),allDay:_t(o),tooltip:_t(l),title:_t(c),resource:_t(d),resourceId:_t(u),resourceTitle:_t(g),eventId:_t(f)}}}}])}(_.Component);Yc.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Ze.MONTH,views:[Ze.MONTH,Ze.WEEK,Ze.DAY,Ze.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Ze.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Jn=yl(Yc,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),U5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"P",s)," – ").concat(a.format(i,"P",s))},Aa=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"p",s)," – ").concat(a.format(i,"p",s))},W5=function(r,s,a){var n=r.start;return"".concat(a.format(n,"h:mma",s)," – ")},B5=function(r,s,a){var n=r.end;return" – ".concat(a.format(n,"h:mma",s))},H5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"MMMM dd",s)," – ").concat(a.format(i,kr(n,i,"month")?"dd":"MMMM dd",s))},z5={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Aa,eventTimeRangeFormat:Aa,eventTimeRangeStartFormat:W5,eventTimeRangeEndFormat:B5,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:H5,agendaHeaderFormat:U5,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Aa},Qn=function(r){var s=r.startOfWeek,a=r.getDay,n=r.format,i=r.locales;return new Uk({formats:z5,firstOfWeek:function(l){return a(s(new Date,{locale:i[l]}))},format:function(l,c,d){return n(new Date(l),c,{locale:i[d]})}})};function dt(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function It(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}function G5(e,r){const s=dt(e);return isNaN(r)?It(e,NaN):(s.setDate(s.getDate()+r),s)}const Vc=6048e5,q5=864e5;let Y5={};function ya(){return Y5}function Tt(e,r){var l,c,d,u;const s=ya(),a=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,n=dt(e),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Ys(e){return Tt(e,{weekStartsOn:1})}function Kc(e){const r=dt(e),s=r.getFullYear(),a=It(e,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const n=Ys(a),i=It(e,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=Ys(i);return r.getTime()>=n.getTime()?s+1:r.getTime()>=o.getTime()?s:s-1}function Vs(e){const r=dt(e);return r.setHours(0,0,0,0),r}function Bo(e){const r=dt(e),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+e-+s}function V5(e,r){const s=Vs(e),a=Vs(r),n=+s-Bo(s),i=+a-Bo(a);return Math.round((n-i)/q5)}function K5(e){const r=Kc(e),s=It(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Ys(s)}function Zn(e){return It(e,Date.now())}function Xc(e,r){const s=Vs(e),a=Vs(r);return+s==+a}function X5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function J5(e){if(!X5(e)&&typeof e!="number")return!1;const r=dt(e);return!isNaN(Number(r))}function Q5(e){const r=dt(e),s=It(e,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}const Z5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eC=(e,r,s)=>{let a;const n=Z5[e];return typeof n=="string"?a=n:r===1?a=n.one:a=n.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function xr(e){return(r={})=>{const s=r.width?String(r.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const tC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aC={date:xr({formats:tC,defaultWidth:"full"}),time:xr({formats:rC,defaultWidth:"full"}),dateTime:xr({formats:sC,defaultWidth:"full"})},nC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iC=(e,r,s,a)=>nC[e];function Nt(e){return(r,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let n;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;n=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;n=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(r):r;return n[i]}}const oC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hC=(e,r)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},fC={ordinalNumber:hC,era:Nt({values:oC,defaultWidth:"wide"}),quarter:Nt({values:lC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nt({values:cC,defaultWidth:"wide"}),day:Nt({values:dC,defaultWidth:"wide"}),dayPeriod:Nt({values:uC,defaultWidth:"wide",formattingValues:mC,defaultFormattingWidth:"wide"})};function St(e){return(r,s={})=>{const a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=r.match(n);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?gC(l,g=>g.test(o)):xC(l,g=>g.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const u=r.slice(o.length);return{value:d,rest:u}}}function xC(e,r){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&r(e[s]))return s}function gC(e,r){for(let s=0;s<e.length;s++)if(r(e[s]))return s}function Jc(e){return(r,s={})=>{const a=r.match(e.matchPattern);if(!a)return null;const n=a[0],i=r.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=r.slice(n.length);return{value:o,rest:l}}}const pC=/^(\d+)(th|st|nd|rd)?/i,vC=/\d+/i,bC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yC={any:[/^b/i,/^(a|c)/i]},jC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wC={any:[/1/i,/2/i,/3/i,/4/i]},NC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},SC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},CC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$C={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},EC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DC={ordinalNumber:Jc({matchPattern:pC,parsePattern:vC,valueCallback:e=>parseInt(e,10)}),era:St({matchPatterns:bC,defaultMatchWidth:"wide",parsePatterns:yC,defaultParseWidth:"any"}),quarter:St({matchPatterns:jC,defaultMatchWidth:"wide",parsePatterns:wC,defaultParseWidth:"any",valueCallback:e=>e+1}),month:St({matchPatterns:NC,defaultMatchWidth:"wide",parsePatterns:SC,defaultParseWidth:"any"}),day:St({matchPatterns:kC,defaultMatchWidth:"wide",parsePatterns:CC,defaultParseWidth:"any"}),dayPeriod:St({matchPatterns:$C,defaultMatchWidth:"any",parsePatterns:EC,defaultParseWidth:"any"})},TC={code:"en-US",formatDistance:eC,formatLong:aC,formatRelative:iC,localize:fC,match:DC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function MC(e){const r=dt(e);return V5(r,Q5(r))+1}function OC(e){const r=dt(e),s=+Ys(r)-+K5(r);return Math.round(s/Vc)+1}function Qc(e,r){var u,g,f,m;const s=dt(e),a=s.getFullYear(),n=ya(),i=(r==null?void 0:r.firstWeekContainsDate)??((g=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=It(e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Tt(o,r),c=It(e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Tt(c,r);return s.getTime()>=l.getTime()?a+1:s.getTime()>=d.getTime()?a:a-1}function _C(e,r){var l,c,d,u;const s=ya(),a=(r==null?void 0:r.firstWeekContainsDate)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,n=Qc(e,r),i=It(e,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Tt(i,r)}function PC(e,r){const s=dt(e),a=+Tt(s,r)-+_C(s,r);return Math.round(a/Vc)+1}function je(e,r){const s=e<0?"-":"",a=Math.abs(e).toString().padStart(r,"0");return s+a}const Bt={y(e,r){const s=e.getFullYear(),a=s>0?s:1-s;return je(r==="yy"?a%100:a,r.length)},M(e,r){const s=e.getMonth();return r==="M"?String(s+1):je(s+1,2)},d(e,r){return je(e.getDate(),r.length)},a(e,r){const s=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,r){return je(e.getHours()%12||12,r.length)},H(e,r){return je(e.getHours(),r.length)},m(e,r){return je(e.getMinutes(),r.length)},s(e,r){return je(e.getSeconds(),r.length)},S(e,r){const s=r.length,a=e.getMilliseconds(),n=Math.trunc(a*Math.pow(10,s-3));return je(n,r.length)}},mr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ho={G:function(e,r,s){const a=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(e,r,s){if(r==="yo"){const a=e.getFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return Bt.y(e,r)},Y:function(e,r,s,a){const n=Qc(e,a),i=n>0?n:1-n;if(r==="YY"){const o=i%100;return je(o,2)}return r==="Yo"?s.ordinalNumber(i,{unit:"year"}):je(i,r.length)},R:function(e,r){const s=Kc(e);return je(s,r.length)},u:function(e,r){const s=e.getFullYear();return je(s,r.length)},Q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return je(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return je(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,r,s){const a=e.getMonth();switch(r){case"M":case"MM":return Bt.M(e,r);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,r,s){const a=e.getMonth();switch(r){case"L":return String(a+1);case"LL":return je(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,r,s,a){const n=PC(e,a);return r==="wo"?s.ordinalNumber(n,{unit:"week"}):je(n,r.length)},I:function(e,r,s){const a=OC(e);return r==="Io"?s.ordinalNumber(a,{unit:"week"}):je(a,r.length)},d:function(e,r,s){return r==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):Bt.d(e,r)},D:function(e,r,s){const a=MC(e);return r==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):je(a,r.length)},E:function(e,r,s){const a=e.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,r,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return je(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,r,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return je(i,r.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,r,s){const a=e.getDay(),n=a===0?7:a;switch(r){case"i":return String(n);case"ii":return je(n,r.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,r,s){const n=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,r,s){const a=e.getHours();let n;switch(a===12?n=mr.noon:a===0?n=mr.midnight:n=a/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,r,s){const a=e.getHours();let n;switch(a>=17?n=mr.evening:a>=12?n=mr.afternoon:a>=4?n=mr.morning:n=mr.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,r,s){if(r==="ho"){let a=e.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Bt.h(e,r)},H:function(e,r,s){return r==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):Bt.H(e,r)},K:function(e,r,s){const a=e.getHours()%12;return r==="Ko"?s.ordinalNumber(a,{unit:"hour"}):je(a,r.length)},k:function(e,r,s){let a=e.getHours();return a===0&&(a=24),r==="ko"?s.ordinalNumber(a,{unit:"hour"}):je(a,r.length)},m:function(e,r,s){return r==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Bt.m(e,r)},s:function(e,r,s){return r==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Bt.s(e,r)},S:function(e,r){return Bt.S(e,r)},X:function(e,r,s){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Go(a);case"XXXX":case"XX":return Qt(a);case"XXXXX":case"XXX":default:return Qt(a,":")}},x:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"x":return Go(a);case"xxxx":case"xx":return Qt(a);case"xxxxx":case"xxx":default:return Qt(a,":")}},O:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+zo(a,":");case"OOOO":default:return"GMT"+Qt(a,":")}},z:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+zo(a,":");case"zzzz":default:return"GMT"+Qt(a,":")}},t:function(e,r,s){const a=Math.trunc(e.getTime()/1e3);return je(a,r.length)},T:function(e,r,s){const a=e.getTime();return je(a,r.length)}};function zo(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),i=a%60;return i===0?s+String(n):s+String(n)+r+je(i,2)}function Go(e,r){return e%60===0?(e>0?"-":"+")+je(Math.abs(e)/60,2):Qt(e,r)}function Qt(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),n=je(Math.trunc(a/60),2),i=je(a%60,2);return s+n+r+i}const qo=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Zc=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},AC=(e,r)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return qo(e,r);let i;switch(a){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",qo(a,r)).replace("{{time}}",Zc(n,r))},RC={p:Zc,P:AC},LC=/^D+$/,IC=/^Y+$/,FC=["D","DD","YY","YYYY"];function UC(e){return LC.test(e)}function WC(e){return IC.test(e)}function BC(e,r,s){const a=HC(e,r,s);if(console.warn(a),FC.includes(e))throw new RangeError(a)}function HC(e,r,s){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qC=/^'([^]*?)'?$/,YC=/''/g,VC=/[a-zA-Z]/;function Ue(e,r,s){var u,g,f,m,y,x,v,b;const a=ya(),n=(s==null?void 0:s.locale)??a.locale??TC,i=(s==null?void 0:s.firstWeekContainsDate)??((g=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(s==null?void 0:s.weekStartsOn)??((x=(y=s==null?void 0:s.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??a.weekStartsOn??((b=(v=a.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??0,l=dt(e);if(!J5(l))throw new RangeError("Invalid time value");let c=r.match(GC).map(h=>{const E=h[0];if(E==="p"||E==="P"){const p=RC[E];return p(h,n.formatLong)}return h}).join("").match(zC).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const E=h[0];if(E==="'")return{isToken:!1,value:KC(h)};if(Ho[E])return{isToken:!0,value:h};if(E.match(VC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:h}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(h=>{if(!h.isToken)return h.value;const E=h.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&WC(E)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&UC(E))&&BC(E,r,String(e));const p=Ho[E[0]];return p(l,E,n.localize,d)}).join("")}function KC(e){const r=e.match(qC);return r?r[1].replace(YC,"'"):e}function ei(e){return dt(e).getDay()}function sn(e,r,s){const a=Tt(e,s),n=Tt(r,s);return+a==+n}function XC(e,r){return sn(e,Zn(e),r)}function Yo(e){return Xc(e,Zn(e))}function JC(e,r){return G5(e,-1)}function Vo(e){return Xc(e,JC(Zn(e)))}function Hr(e,r){if(e.one!==void 0&&r===1)return e.one;const s=r%10,a=r%100;return s===1&&a!==11?e.singularNominative.replace("{{count}}",String(r)):s>=2&&s<=4&&(a<10||a>20)?e.singularGenitive.replace("{{count}}",String(r)):e.pluralGenitive.replace("{{count}}",String(r))}function Qe(e){return(r,s)=>s!=null&&s.addSuffix?s.comparison&&s.comparison>0?e.future?Hr(e.future,r):"через "+Hr(e.regular,r):e.past?Hr(e.past,r):Hr(e.regular,r)+" назад":Hr(e.regular,r)}const QC={lessThanXSeconds:Qe({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Qe({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:Qe({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Qe({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Qe({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Qe({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Qe({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Qe({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Qe({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Qe({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Qe({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Qe({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Qe({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Qe({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Qe({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},ZC=(e,r,s)=>QC[e](r,s),e3={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},t3={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},r3={any:"{{date}}, {{time}}"},s3={date:xr({formats:e3,defaultWidth:"full"}),time:xr({formats:t3,defaultWidth:"full"}),dateTime:xr({formats:r3,defaultWidth:"any"})},ti=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function a3(e){const r=ti[e];switch(e){case 0:return"'в прошлое "+r+" в' p";case 1:case 2:case 4:return"'в прошлый "+r+" в' p";case 3:case 5:case 6:return"'в прошлую "+r+" в' p"}}function Ko(e){const r=ti[e];return e===2?"'во "+r+" в' p":"'в "+r+" в' p"}function n3(e){const r=ti[e];switch(e){case 0:return"'в следующее "+r+" в' p";case 1:case 2:case 4:return"'в следующий "+r+" в' p";case 3:case 5:case 6:return"'в следующую "+r+" в' p"}}const i3={lastWeek:(e,r,s)=>{const a=e.getDay();return sn(e,r,s)?Ko(a):a3(a)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,r,s)=>{const a=e.getDay();return sn(e,r,s)?Ko(a):n3(a)},other:"P"},o3=(e,r,s,a)=>{const n=i3[e];return typeof n=="function"?n(r,s,a):n},l3={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},c3={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},d3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},u3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},m3={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},h3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},f3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},x3=(e,r)=>{const s=Number(e),a=r==null?void 0:r.unit;let n;return a==="date"?n="-е":a==="week"||a==="minute"||a==="second"?n="-я":n="-й",s+n},g3={ordinalNumber:x3,era:Nt({values:l3,defaultWidth:"wide"}),quarter:Nt({values:c3,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nt({values:d3,defaultWidth:"wide",formattingValues:u3,defaultFormattingWidth:"wide"}),day:Nt({values:m3,defaultWidth:"wide"}),dayPeriod:Nt({values:h3,defaultWidth:"any",formattingValues:f3,defaultFormattingWidth:"wide"})},p3=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,v3=/\d+/i,b3={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},y3={any:[/^д/i,/^н/i]},j3={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},w3={any:[/1/i,/2/i,/3/i,/4/i]},N3={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},S3={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},k3={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},C3={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},$3={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},E3={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},D3={ordinalNumber:Jc({matchPattern:p3,parsePattern:v3,valueCallback:e=>parseInt(e,10)}),era:St({matchPatterns:b3,defaultMatchWidth:"wide",parsePatterns:y3,defaultParseWidth:"any"}),quarter:St({matchPatterns:j3,defaultMatchWidth:"wide",parsePatterns:w3,defaultParseWidth:"any",valueCallback:e=>e+1}),month:St({matchPatterns:N3,defaultMatchWidth:"wide",parsePatterns:S3,defaultParseWidth:"any"}),day:St({matchPatterns:k3,defaultMatchWidth:"wide",parsePatterns:C3,defaultParseWidth:"any"}),dayPeriod:St({matchPatterns:$3,defaultMatchWidth:"wide",parsePatterns:E3,defaultParseWidth:"any"})},ht={code:"ru",formatDistance:ZC,formatLong:s3,formatRelative:o3,localize:g3,match:D3,options:{weekStartsOn:1,firstWeekContainsDate:1}},ri=({isOpen:e,onClose:r,onConfirm:s,slot:a,teacher:n,student:i})=>{var y;const[o,l]=S.useState(""),[c,d]=S.useState(!1),u=async()=>{d(!0);try{await s(o),r()}catch{}finally{d(!1)}},g=x=>{switch(x){case"online":return t.jsx(We,{className:"h-4 w-4"});case"offline":return t.jsx(kt,{className:"h-4 w-4"});case"mini-group":return t.jsx(dn,{className:"h-4 w-4"});default:return t.jsx(We,{className:"h-4 w-4"})}},f=x=>{switch(x){case"online":return"Онлайн";case"offline":return"Очно";case"mini-group":return"Мини-группа";default:return x}},m=x=>{switch(x){case"regular":return"Обычный урок";case"consultation":return"Консультация";case"exam_prep":return"Подготовка к экзамену";case"homework_help":return"Помощь с домашним заданием";default:return x}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Подтверждение бронирования"}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(et,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Преподаватель"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[n!=null&&n.avatar?t.jsx("img",{src:n.avatar,alt:n.name,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(ye,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:(n==null?void 0:n.name)||"Преподаватель"}),t.jsx("p",{className:"text-sm text-gray-600",children:a==null?void 0:a.subject}),((y=n==null?void 0:n.profile)==null?void 0:y.rating)&&t.jsxs("div",{className:"flex items-center mt-1",children:[t.jsx("span",{className:"text-yellow-500",children:"★"}),t.jsx("span",{className:"text-sm text-gray-600 ml-1",children:n.profile.rating})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Детали урока"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(qe,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Дата: ",new Date(a==null?void 0:a.date).toLocaleDateString("ru-RU")]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(Gt,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Время: ",a==null?void 0:a.startTime," - ",a==null?void 0:a.endTime]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(We,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Предмет: ",a==null?void 0:a.subject]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[g(a==null?void 0:a.format),t.jsxs("span",{className:"text-sm",children:["Формат: ",f(a==null?void 0:a.format)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(Rd,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Тип: ",m(a==null?void 0:a.lessonType)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(al,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Стоимость: ",a==null?void 0:a.price," ₽"]})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Студент"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[i!=null&&i.avatar?t.jsx("img",{src:i.avatar,alt:i.name,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(ye,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:i==null?void 0:i.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Студент"})]})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Примечание к уроку"}),t.jsx("textarea",{value:o,onChange:x=>l(x.target.value),placeholder:"Опишите ваши цели, задачи или особые пожелания к уроку...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4}),t.jsx("p",{className:"text-sm text-gray-500",children:"Это поможет преподавателю лучше подготовиться к уроку"})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Отмена"}),t.jsx("button",{onClick:u,disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Бронирование..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(We,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать урок"})]})})]})]})}):null},ed=({teacher:e,onClose:r,onBookLesson:s,onMessage:a})=>{var $e;const{user:n}=Ye(),{timeSlots:i,bookLesson:o,posts:l,createPost:c,addReaction:d,addComment:u,sharePost:g,bookmarkPost:f,editPost:m,deletePost:y}=ct(),[x,v]=S.useState(!1),[b,h]=S.useState(!1),[E,p]=S.useState(!1),[$,R]=S.useState(!1),[P,T]=S.useState(!1),[H,z]=S.useState(null),[A,K]=S.useState("about"),[q,J]=S.useState(null),[ie,se]=S.useState({}),N=i.filter(Z=>Z.teacherId===e.id),F=N.filter(Z=>!Z.isBooked),Y=N.filter(Z=>Z.isBooked),O=e.profile,oe=l.filter(Z=>Z.userId===e.id),ge=Z=>{switch(Z){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return Z}},de=Z=>{switch(Z){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},fe=Z=>{switch(Z){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return Z}},pe=Z=>{z(Z),T(!0)},X=async Z=>{n&&H&&(o(H.id,n.id,n.name,Z),T(!1),z(null))},xe=(Z,ve)=>new Date(`${Z}T${ve}`).toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return t.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(nn,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>h(!b),className:`p-2 rounded-full transition-colors ${b?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Xs,{className:`w-5 h-5 ${b?"fill-current":""}`})}),t.jsx("button",{onClick:()=>v(!x),className:`p-2 rounded-full transition-colors ${x?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(xt,{className:`w-5 h-5 ${x?"fill-current":""}`})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(zt,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),t.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{className:"text-white flex-1 mr-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(O==null?void 0:O.name)||e.name||"Репетитор"}),t.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[(O==null?void 0:O.experience)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Ht,{className:"h-4 w-4 text-yellow-300"}),t.jsx("span",{className:"font-semibold text-xs",children:ge(O.experience)})]}),(O==null?void 0:O.rating)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Ct,{className:"h-4 w-4 text-yellow-300 fill-current"}),t.jsx("span",{className:"font-semibold text-xs",children:O.rating})]}),(O==null?void 0:O.city)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(kt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-semibold text-xs",children:O.city})]})]})]}),t.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:(O==null?void 0:O.lessonsCount)||0}),t.jsx("div",{className:"text-sm opacity-80",children:"уроков"})]})]})})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[t.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[t.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),O!=null&&O.avatar&&O.avatar.trim()!==""&&O.avatar!=="undefined"&&O.avatar!=="null"?t.jsx("img",{src:O.avatar,alt:(O==null?void 0:O.name)||e.name||"Репетитор",className:"w-36 h-36 object-cover rounded-full",onError:Z=>{const ve=Z.target;ve.style.display="none";const Se=ve.nextElementSibling;Se&&Se.classList.remove("hidden")},onLoad:Z=>{const Se=Z.target.nextElementSibling;Se&&Se.classList.add("hidden")}}):null,t.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${O!=null&&O.avatar&&O.avatar.trim()!==""&&O.avatar!=="undefined"&&O.avatar!=="null"?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx(ye,{className:"h-16 w-16 text-white mb-2"}),t.jsx("div",{className:"text-white text-sm font-semibold",children:((O==null?void 0:O.name)||e.name||"Репетитор").charAt(0).toUpperCase()})]})})]}),t.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>v(!x),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${x?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:t.jsx(xt,{className:`w-5 h-5 ${x?"fill-current":""}`})}),t.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:t.jsx(zt,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[t.jsxs("button",{onClick:()=>s(e.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(We,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),a&&t.jsxs("button",{onClick:()=>a(e.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Le,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),t.jsxs("button",{onClick:()=>R(!$),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(qe,{className:"h-6 w-6"}),t.jsxs("span",{className:"text-lg",children:["Слоты (",F.length,")"]})]}),t.jsxs("button",{onClick:()=>p(!E),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(gr,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]})]})]}),E&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.phone&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(pr,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:e.phone})]}),e.email&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(ln,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:e.email})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(O==null?void 0:O.lessonsCount)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Проведено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(($e=O==null?void 0:O.students)==null?void 0:$e.length)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Учеников"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(O==null?void 0:O.rating)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Рейтинг"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:F.length}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Свободных слотов"})]})]}),oe.length>0&&t.jsxs("div",{className:"mb-8 mt-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[t.jsx(rr,{className:"w-5 h-5 mr-2 text-blue-600"}),"Записи ",(O==null?void 0:O.name)||e.name,t.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 py-0.5 px-2 rounded-full text-sm",children:oe.length})]})}),t.jsxs("div",{className:"space-y-4",children:[oe.slice(0,3).map(Z=>t.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:((O==null?void 0:O.name)||e.name).charAt(0).toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.name)||e.name}),t.jsx("span",{className:"text-gray-500 text-sm",children:new Date(Z.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),t.jsx("div",{className:"text-gray-700 mb-3 whitespace-pre-line",children:Z.text.length>200?`${Z.text.substring(0,200)}...`:Z.text}),Z.tags&&Z.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[Z.tags.slice(0,3).map((ve,Se)=>t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs font-medium",children:["#",ve]},Se)),Z.tags.length>3&&t.jsxs("span",{className:"text-gray-500 text-xs",children:["+",Z.tags.length-3," еще"]})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(xt,{className:"w-4 h-4"}),t.jsx("span",{children:Z.likes||Z.reactions.length})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Le,{className:"w-4 h-4"}),t.jsx("span",{children:Z.comments.length})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(gr,{className:"w-4 h-4"}),t.jsx("span",{children:Z.views||0})]})]})]})]})},Z.id)),oe.length>3&&t.jsx("div",{className:"text-center",children:t.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:["Показать все записи (",oe.length,")"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"about",label:"О преподавателе",count:null},{id:"slots",label:"Расписание",count:F.length},{id:"reviews",label:"Отзывы",count:0}].map(Z=>t.jsxs("button",{onClick:()=>K(Z.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A===Z.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[Z.label,Z.count!==null&&t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:Z.count})]},Z.id))})}),t.jsxs("div",{className:"min-h-[400px]",children:[A==="about"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Основная информация"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ye,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Имя"}),t.jsx("div",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.name)||e.name||"Репетитор"})]})]}),(O==null?void 0:O.experience)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Ht,{className:"w-5 h-5 text-yellow-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Опыт"}),t.jsx("div",{className:"font-semibold text-gray-900",children:ge(O.experience)})]})]}),(O==null?void 0:O.experienceYears)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ul,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Лет преподавания"}),t.jsx("div",{className:"font-semibold text-gray-900",children:O.experienceYears})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Ts,{className:"w-5 h-5 text-indigo-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Тип преподавателя"}),t.jsx("div",{className:"font-semibold text-gray-900",children:de((O==null?void 0:O.teacherType)||"private")})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[(O==null?void 0:O.rating)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Ct,{className:"w-5 h-5 text-yellow-500 fill-current"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Рейтинг"}),t.jsxs("div",{className:"font-semibold text-gray-900",children:[O.rating,"/5"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(We,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Проведено уроков"}),t.jsx("div",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.lessonsCount)||0})]})]}),(O==null?void 0:O.hourlyRate)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-green-600 font-bold text-lg",children:"₽"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Стоимость урока"}),t.jsxs("div",{className:"font-semibold text-gray-900",children:[O.hourlyRate," ₽/час"]})]})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(O==null?void 0:O.subjects)&&O.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Предметы"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:O.subjects.map((Z,ve)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-green-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-green-200/50 shadow-sm",children:Z},ve))})]}),(O==null?void 0:O.grades)&&O.grades.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Классы"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:O.grades.map((Z,ve)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-purple-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-purple-200/50 shadow-sm",children:Z},ve))})]})]}),(O==null?void 0:O.education)&&t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-orange-500 to-red-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Образование"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.education.university&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"🎓"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Университет"}),t.jsx("div",{className:"font-semibold text-gray-900",children:O.education.university})]})]}),O.education.degree&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📜"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Степень"}),t.jsx("div",{className:"font-semibold text-gray-900",children:O.education.degree})]})]}),O.education.graduationYear&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📅"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Год выпуска"}),t.jsx("div",{className:"font-semibold text-gray-900",children:O.education.graduationYear})]})]})]})]}),(O==null?void 0:O.bio)&&t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"О преподавателе"]}),t.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-indigo-200/50",children:t.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line",children:O.bio})})]}),(O==null?void 0:O.formats)&&O.formats.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-teal-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-teal-500 to-cyan-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Форматы обучения"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:O.formats.map((Z,ve)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-teal-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-teal-200/50 shadow-sm",children:fe(Z)},ve))})]})]}),A==="slots"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Доступные слоты"}),F.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(Z=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:Z.subject}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Gt,{className:"h-4 w-4"}),t.jsx("span",{children:xe(Z.date,Z.startTime)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(kt,{className:"h-4 w-4"}),t.jsx("span",{children:fe(Z.format)})]})]}),t.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-3",children:[Z.price," ₽"]})]})}),t.jsxs("button",{onClick:()=>pe(Z),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(We,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать"})]})]},Z.id))}):t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8 text-center",children:[t.jsx(qe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"Нет доступных слотов"}),t.jsx("p",{className:"text-gray-500",children:"Попробуйте позже или свяжитесь с преподавателем"})]})]}),Y.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Забронированные уроки"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(Z=>t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:Z.subject}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Gt,{className:"h-4 w-4"}),t.jsx("span",{children:xe(Z.date,Z.startTime)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(kt,{className:"h-4 w-4"}),t.jsx("span",{children:fe(Z.format)})]})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-3",children:[Z.price," ₽"]})]})}),t.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-xl text-sm font-medium text-center",children:"Забронировано"})]},Z.id))})]})]}),A==="reviews"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ct,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),t.jsx("p",{className:"text-gray-500",children:"Будьте первым, кто оставит отзыв о преподавателе"})]})]})]})]}),P&&H&&t.jsx(ri,{isOpen:P,slot:H,onClose:()=>T(!1),onConfirm:X,teacher:e,student:n})]})},Xo="https://tutoring-platform-1756666331-zjfl.onrender.com",T3=({teacher:e,onClose:r,onBookLesson:s,onMessage:a})=>{var q,J,ie,se;const{user:n}=Ye(),{timeSlots:i,posts:o,lessons:l,refreshUsers:c}=ct(),[d,u]=S.useState(!1),[g,f]=S.useState(!1),[m,y]=S.useState("about"),[x,v]=S.useState(!1),b=async()=>{var N,F;v(!0);try{const Y=await fetch(`${Xo}/api/users/${e.id}`);if(Y.ok){const O=await Y.json();console.log("Fresh teacher data from refresh button:",O);const ge=JSON.parse(localStorage.getItem("allUsers")||"[]").map(fe=>fe.id===O.id?O:fe);localStorage.setItem("allUsers",JSON.stringify(ge)),c();const de={...e,name:O.name||e.name,email:O.email||e.email,avatar:((N=O.profile)==null?void 0:N.avatar)||O.avatar||e.avatar,profile:{...e.profile,...O.profile,avatar:((F=O.profile)==null?void 0:F.avatar)||O.avatar||e.avatar,name:O.name||e.name,email:O.email||e.email}};console.log("Updated teacher data in modal:",de)}else console.warn("Failed to refresh teacher data:",Y.status)}catch(Y){console.error("Error refreshing teacher data:",Y)}finally{v(!1)}},h=e.profile;console.log("Teacher in modal:",e),console.log("Profile in modal:",h),S.useEffect(()=>{(async()=>{var F,Y;try{const O=await fetch(`${Xo}/api/users/${e.id}`);if(O.ok){const oe=await O.json();console.log("Fresh teacher data in modal:",oe);const de=JSON.parse(localStorage.getItem("allUsers")||"[]").map(pe=>pe.id===oe.id?oe:pe);localStorage.setItem("allUsers",JSON.stringify(de)),c();const fe={...e,name:oe.name||e.name,email:oe.email||e.email,avatar:((F=oe.profile)==null?void 0:F.avatar)||oe.avatar||e.avatar,profile:{...e.profile,...oe.profile,avatar:((Y=oe.profile)==null?void 0:Y.avatar)||oe.avatar||e.avatar,name:oe.name||e.name,email:oe.email||e.email}};console.log("Updated teacher data in modal useEffect:",fe)}else console.warn("Failed to refresh teacher data in modal:",O.status)}catch(O){console.error("Error refreshing teacher data in modal:",O)}})()},[e.id]);const E=i.filter(N=>N.teacherId===e.id),p=E.filter(N=>!N.isBooked),$=o.filter(N=>N.userId===e.id),P=l.filter(N=>N.teacherId===e.id).filter(N=>N.status==="completed");console.log("Teacher ID:",e.id),console.log("All timeSlots:",i),console.log("Teacher slots:",E),console.log("Available slots:",p);const T=N=>{switch(N){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return N}},H=N=>{switch(N){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},z=N=>{switch(N){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return N}},A=N=>{const F=new Date(N),O=Math.floor((new Date().getTime()-F.getTime())/(1e3*60*60));return O<1?"только что":O<24?`${O}ч назад`:O<48?"вчера":F.toLocaleDateString("ru-RU")},K=N=>new Date(N).toLocaleDateString("ru-RU",{weekday:"short",month:"short",day:"numeric"});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(et,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>f(!g),className:`p-2 rounded-full transition-colors ${g?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Xs,{className:`w-5 h-5 ${g?"fill-current":""}`})}),t.jsx("button",{onClick:()=>u(!d),className:`p-2 rounded-full transition-colors ${d?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(xt,{className:`w-5 h-5 ${d?"fill-current":""}`})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(zt,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[t.jsx("div",{className:"relative",children:t.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[t.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full shadow-sm"}),(()=>{const N=(h==null?void 0:h.avatar)||e.avatar;return N&&N.trim()!==""&&N!=="undefined"&&N!=="null"?t.jsx("img",{src:N,alt:e.name,className:"w-24 h-24 object-cover rounded-full",onError:Y=>{const O=Y.target;O.style.display="none";const oe=O.nextElementSibling;oe&&oe.classList.remove("hidden")},onLoad:Y=>{const oe=Y.target.nextElementSibling;oe&&oe.classList.add("hidden")}}):null})(),t.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const N=(h==null?void 0:h.avatar)||e.avatar;return N&&N.trim()!==""&&N!=="undefined"&&N!=="null"?"hidden":""})()}`,children:t.jsx(ye,{className:"h-12 w-12 text-white"})})]})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-500",children:["@",e.id]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:b,disabled:x,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Обновить данные",children:t.jsx(Fa,{className:`w-5 h-5 ${x?"animate-spin":""}`})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(zt,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(h==null?void 0:h.rating)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ct,{className:"w-4 h-4 text-yellow-400 fill-current"}),t.jsx("span",{children:h.rating})]}),(h==null?void 0:h.lessonsCount)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(We,{className:"w-4 h-4"}),t.jsxs("span",{children:[h.lessonsCount," уроков"]})]}),(h==null?void 0:h.experienceYears)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ht,{className:"w-4 h-4"}),t.jsxs("span",{children:[h.experienceYears," лет опыта"]})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"Статистика"}),t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:P.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Проведено уроков"})]}),t.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-green-600 mb-1",children:p.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Свободных слотов"})]}),t.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-purple-600 mb-1",children:$.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Записей"})]}),t.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:(h==null?void 0:h.reviewsCount)||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Отзывов"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>s(e.id),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[t.jsx(We,{className:"w-5 h-5"}),t.jsx("span",{children:"Записаться на урок"})]}),t.jsxs("button",{onClick:()=>a(e.id),className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[t.jsx(Le,{className:"w-5 h-5"}),t.jsx("span",{children:"Написать сообщение"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),"О преподавателе"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(We,{className:"w-3 h-3 mr-1"}),"Предметы:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((q=h==null?void 0:h.subjects)==null?void 0:q.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:h.subjects.map((N,F)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:N},F))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Ts,{className:"w-3 h-3 mr-1"}),"Классы:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((J=h==null?void 0:h.grades)==null?void 0:J.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:h.grades.map((N,F)=>t.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:N},F))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(cl,{className:"w-3 h-3 mr-1"}),"Цели обучения:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((ie=h==null?void 0:h.goals)==null?void 0:ie.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:h.goals.map((N,F)=>t.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full text-xs font-medium",children:N},F))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Ht,{className:"w-3 h-3 mr-1"}),"Опыт:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:h!=null&&h.experience?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full text-xs font-medium",children:T(h.experience)}),h.experienceYears&&t.jsxs("span",{className:"text-gray-600 text-xs",children:["(",h.experienceYears," лет)"]})]}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Ts,{className:"w-3 h-3 mr-1"}),"Тип преподавателя:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:t.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-medium",children:H((h==null?void 0:h.teacherType)||"private")})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(kt,{className:"w-3 h-3 mr-1"}),"Город:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:h!=null&&h.city?t.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:h.city}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Md,{className:"w-3 h-3 mr-1"}),"Форматы обучения:"]}),t.jsx("div",{className:"text-base text-gray-900 mt-2",children:((se=h==null?void 0:h.formats)==null?void 0:se.length)>0?t.jsx("div",{className:"flex flex-wrap gap-2",children:h.formats.map((N,F)=>t.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:z(N)},F))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]})]})]}),(h==null?void 0:h.education)&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Образование"]}),t.jsxs("div",{className:"space-y-2",children:[h.education.university&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Университет:"}),t.jsx("div",{className:"text-sm text-gray-900",children:h.education.university})]}),h.education.degree&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Специальность:"}),t.jsx("div",{className:"text-sm text-gray-900",children:h.education.degree})]}),h.education.graduationYear&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Год выпуска:"}),t.jsx("div",{className:"text-sm text-gray-900",children:h.education.graduationYear})]}),h.education.courses&&h.education.courses.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Курсы:"}),t.jsx("div",{className:"space-y-1 mt-1",children:h.education.courses.map((N,F)=>t.jsxs("div",{className:"text-xs text-gray-700",children:["• ",N.name," (",N.institution,", ",N.year,")"]},F))})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(al,{className:"w-4 h-4 mr-2"}),"Стоимость и услуги"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Базовая стоимость:"}),t.jsx("div",{className:"text-xl font-bold text-blue-600 mt-1",children:h!=null&&h.hourlyRate?`${h.hourlyRate} ₽/час`:"Не указана"})]}),(h==null?void 0:h.durations)&&h.durations.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Длительности занятий:"}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:h.durations.map((N,F)=>t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:[N," мин"]},F))})]}),(h==null?void 0:h.lessonTypes)&&h.lessonTypes.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Типы уроков:"}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:h.lessonTypes.map((N,F)=>t.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:N},F))})]})]}),t.jsxs("div",{className:"space-y-3",children:[(h==null?void 0:h.rating)&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Рейтинг:"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(N=>t.jsx(Ct,{className:`w-4 h-4 ${N<=(h.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},N))}),t.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[h.rating,"/5"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Автоподбор:"}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:h!=null&&h.overbookingEnabled?t.jsx("span",{className:"text-green-600 font-medium",children:"✓ Доступен"}):t.jsx("span",{className:"text-gray-500",children:"Недоступен"})})]})]})]}),t.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:t.jsx("p",{className:"text-xs text-blue-700",children:"💡 Стоимость может варьироваться в зависимости от формата, длительности занятия и сложности материала"})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(qe,{className:"w-4 h-4 mr-2"}),"Доступные слоты (",p.length,")"]}),p.length>0?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Сводка по ценам:"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Минимальная цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.min(...p.map(N=>N.price))," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Максимальная цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.max(...p.map(N=>N.price))," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Средняя цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(p.reduce((N,F)=>N+F.price,0)/p.length)," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Всего слотов:"}),t.jsx("div",{className:"font-semibold text-blue-600",children:p.length})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.slice(0,6).map(N=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(We,{className:"w-3 h-3 text-blue-600"}),t.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:N.subject})]}),t.jsxs("span",{className:"text-base font-bold text-green-600",children:[N.price," ₽"]})]}),t.jsxs("div",{className:"space-y-1 mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(Gt,{className:"w-3 h-3"}),t.jsxs("span",{children:[K(N.date)," • ",N.startTime,"-",N.endTime]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(kt,{className:"w-3 h-3"}),t.jsxs("span",{children:[z(N.format)," • ",N.duration," мин"]})]}),N.experience&&t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(Ht,{className:"w-3 h-3"}),t.jsxs("span",{children:["Опыт: ",T(N.experience)]})]})]}),t.jsxs("button",{onClick:()=>s(e.id),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 text-sm font-semibold",children:["Записаться за ",N.price," ₽"]})]},N.id))}),p.length>6&&t.jsx("div",{className:"text-center pt-4",children:t.jsxs("p",{className:"text-gray-600 text-sm",children:["И еще ",p.length-6," доступных слотов"]})})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 mb-2",children:"Нет доступных слотов"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Следите за обновлениями расписания"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center",children:[t.jsx(rr,{className:"w-4 h-4 mr-2"}),"Записи преподавателя (",$.length,")"]})}),$.length>0?t.jsxs("div",{className:"space-y-3",children:[$.slice(0,3).map(N=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center flex-shrink-0",children:t.jsx(ye,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:N.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:A(N.date)})]}),t.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed text-sm",children:N.text}),N.tags&&N.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:N.tags.map((F,Y)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:F},Y))}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[t.jsx(dl,{className:"w-3 h-3"}),t.jsx("span",{children:N.reactions.length})]}),t.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[t.jsx(Le,{className:"w-3 h-3"}),t.jsx("span",{children:N.comments.length})]}),t.jsx("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:t.jsx(zt,{className:"w-3 h-3"})})]})]})]})},N.id)),$.length>3&&t.jsx("div",{className:"text-center pt-3",children:t.jsxs("p",{className:"text-gray-600 text-xs",children:["И еще ",$.length-3," записей"]})})]}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(rr,{className:"w-6 h-6 text-gray-400"})}),t.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:"У преподавателя пока нет записей"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Записи появятся здесь, когда преподаватель начнет публиковать контент"})]})]})]})]})})},M3={ru:ht},O3=Qn({format:Ue,startOfWeek:Tt,getDay:ei,locales:M3}),td=({onClose:e})=>{const{timeSlots:r,bookLesson:s}=ct(),{user:a}=Ye(),[n,i]=S.useState(null),[o,l]=S.useState(!1),[c,d]=S.useState(!1),[u,g]=S.useState(null),m=r.filter(p=>!p.isBooked).map(p=>({id:p.id,title:`${p.teacherName} - ${p.subject}`,start:new Date(`${p.date}T${p.startTime}`),end:new Date(`${p.date}T${p.endTime}`),slot:p,teacherName:p.teacherName,subject:p.subject,price:p.price,format:p.format,experience:p.experience,rating:p.rating,city:p.city,teacherAvatar:p.teacherAvatar})),y=S.useCallback(p=>{let $={backgroundColor:"#3B82F6",borderRadius:"6px",opacity:.95,color:"white",border:"0px",display:"block",padding:"3px 6px",fontSize:"11px",fontWeight:"500",margin:"1px 0",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s ease"};return p.format==="offline"?$.backgroundColor="#10B981":p.format==="mini-group"&&($.backgroundColor="#8B5CF6"),{style:$}},[]),x=S.useCallback(p=>{i(p),l(!0)},[]),v=p=>{if(!a){alert("Пожалуйста, войдите в систему для бронирования");return}g(p),d(!0),l(!1)},b=async p=>{if(a&&u)try{await s(u.id,a.id,a.name,p),d(!1),g(null),window.location.reload()}catch{alert("Произошла ошибка при бронировании. Попробуйте еще раз.")}},h=p=>{switch(p){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return p}},E=p=>{switch(p){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return p}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden relative",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 p-6 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Календарь свободных слотов"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Выберите удобное время для занятия с преподавателем"})]}),t.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(et,{className:"w-6 h-6 text-gray-600"})})]})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:t.jsx(Jn,{localizer:O3,events:m,startAccessor:"start",endAccessor:"end",style:{height:600},eventPropGetter:y,onSelectEvent:x,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет свободных слотов в выбранном диапазоне",showMore:p=>`+${p} еще`}})})}),o&&n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",onClick:p=>{p.target===p.currentTarget&&l(!1)},children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Детали слота"}),t.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(et,{className:"w-5 h-5 text-gray-600"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden",children:n.teacherAvatar?t.jsx("img",{src:n.teacherAvatar,alt:n.teacherName,className:"w-12 h-12 object-cover rounded-full"}):t.jsx(ye,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:n.teacherName}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.rating&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ct,{className:"h-3 w-3 text-yellow-400 fill-current"}),t.jsx("span",{children:n.rating})]}),n.experience&&t.jsx("span",{className:"text-blue-600",children:h(n.experience)})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(We,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:n.subject})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Gt,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-gray-700",children:[Ue(n.start,"dd MMMM yyyy, HH:mm",{locale:ht})," - ",Ue(n.end,"HH:mm",{locale:ht})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(kt,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-gray-700",children:E(n.format)})]}),t.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[n.price," ₽"]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsxs("button",{onClick:()=>v(n.slot),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(We,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать"})]}),t.jsx("button",{onClick:()=>l(!1),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})]})}),c&&u&&t.jsx(ri,{slot:u,onClose:()=>d(!1),onConfirm:b})]})})},_3=({title:e,description:r,actionPrimary:s,actionSecondary:a,icon:n})=>t.jsx("div",{className:"col-span-full text-center py-14 card-gradient",children:t.jsxs("div",{className:"flex flex-col items-center",children:[n&&t.jsx("div",{className:"mb-3 text-blue-500",children:n}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),r&&t.jsx("p",{className:"text-gray-500 max-w-xl mx-auto mb-5",children:r}),t.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[s&&t.jsx("button",{type:"button",onClick:s.onClick,className:`btn-primary px-5 py-2 rounded-lg ${s.variant==="secondary"?"btn-secondary":""}`,"aria-label":s.label,children:s.label}),a&&t.jsx("button",{type:"button",onClick:a.onClick,className:`btn-secondary px-5 py-2 rounded-lg ${a.variant==="primary"?"btn-primary":""}`,"aria-label":a.label,children:a.label})]})]})}),Ra=({setActiveTab:e})=>{var Ir;const{getFilteredSlots:r,bookLesson:s,timeSlots:a,isConnected:n,allUsers:i,refreshUsers:o,refreshAllData:l,forceSyncData:c,getOrCreateChat:d,sendMessage:u,sendMessageToUser:g}=ct(),{user:f}=Ye(),[m,y]=S.useState({}),[x,v]=S.useState(!1),[b,h]=S.useState([]),[E,p]=S.useState(!1),[$,R]=S.useState(!1),[P,T]=S.useState({grade:"",subject:"",goals:[],experience:"",duration:60,format:"online",city:"",date:"",startTime:"",comment:""}),[H,z]=S.useState(!1),[A,K]=S.useState(null),[q,J]=S.useState(!1),[ie,se]=S.useState(!1),[N,F]=S.useState(null),[Y,O]=S.useState(()=>{const k=new Date,B=k.getDay(),ee=k.getDate()-B+(B===0?-6:1);return new Date(k.setDate(ee))}),[oe,ge]=S.useState(null),[de,fe]=S.useState(null),[pe,X]=S.useState(""),xe=["Математика","Русский язык","Английский язык"],$e=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],Z=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],ve=["beginner","experienced","professional"],Se=["online","offline","mini-group"],ze=[45,60],Ae=Qn({format:Ue,startOfWeek:Tt,getDay:ei,locales:{ru:ht}}),[G,he]=S.useState([]),me=async()=>{try{await c();const k=await fetch(`${at}/api/teachers`);if(k.ok){const ee=k.headers.get("content-type");if(ee&&ee.includes("application/json")){const ce=await k.json();console.log("Teachers loaded from server:",ce),he(Array.isArray(ce)?ce:[])}else console.warn("Server returned non-JSON response for teachers"),he([])}else console.warn("Failed to load teachers from server:",k.status),he([]);const B=await fetch(`${at}/api/users`);if(B.ok){const ee=B.headers.get("content-type");if(ee&&ee.includes("application/json")){const ce=await B.json();console.log("Users loaded from server:",ce);const De=ce.filter(re=>re.role==="teacher");console.log("Teachers from users API:",De),o()}else console.warn("Server returned non-JSON response for users")}else console.warn("Failed to load users from server:",B.status)}catch(k){console.error("Error loading teachers/users from server:",k),he([])}};S.useEffect(()=>{me()},[c,o]);const Re=async()=>{p(!0);try{await c(),await me(),console.log("Force sync completed successfully")}catch(k){console.error("Error during force sync:",k)}finally{p(!1)}},M=_.useRef(null);_.useEffect(()=>{M.current||(M.current=Qo(vd),M.current.on("slotCreated",k=>{setTimeout(()=>{W()},100)}),M.current.on("userRegistered",k=>{setTimeout(()=>{l(),W()},100)}),M.current.on("profileUpdated",k=>{console.log("Profile updated via WebSocket:",k),setTimeout(()=>{l(),W()},100)}))},[]);const W=()=>{const k=a.filter(B=>{if(B.isBooked)return!1;const ee=new Date(B.date),ce=new Date;return ce.setHours(0,0,0,0),!(ee<ce)});return h(k),k},U=()=>{p(!0);try{let k=a.filter(B=>{if(B.isBooked)return!1;const ee=new Date(B.date),ce=new Date;return ce.setHours(0,0,0,0),!(ee<ce)});if(m.grade&&m.grade!==""&&(k=k.filter(B=>B.grades&&B.grades.includes(m.grade))),m.subject&&m.subject!==""&&(k=k.filter(B=>B.subject===m.subject)),m.experience&&m.experience!==""&&(k=k.filter(B=>B.experience===m.experience)),m.format&&m.format!==""&&(k=k.filter(B=>B.format===m.format)),m.duration&&m.duration>0&&(k=k.filter(B=>B.duration===m.duration)),m.minRating&&m.minRating>0&&(k=k.filter(B=>(B.rating||0)>=m.minRating)),m.goals&&m.goals.length>0&&(k=k.filter(B=>B.goals&&m.goals.some(ee=>B.goals.includes(ee)))),oe){const B=Ue(oe,"yyyy-MM-dd");k=k.filter(ee=>ee.date===B)}de&&(k=k.filter(B=>{const ee=parseInt(B.startTime.split(":")[0]),ce=parseInt(de.start.split(":")[0]),De=parseInt(de.end.split(":")[0]);return ee>=ce&&ee<De})),h(k),v(!1)}catch(k){console.error("Error applying filters:",k)}finally{p(!1)}},L=()=>{y({}),ge(null),fe(null),X(""),W(),v(!1)},w=()=>{p(!0),l(),setTimeout(()=>{Object.keys(m).length===0&&!oe&&!de?W():U(),p(!1)},1e3)},j=async k=>{f&&A&&(s(A.id,f.id,f.name,k),setTimeout(()=>{Object.keys(m).length===0&&!oe&&!de?W():U()},100))},C=()=>{if(R(!1),M.current){const k={studentId:f==null?void 0:f.id,studentName:f==null?void 0:f.name,...P};M.current.emit("overbookingRequest",k)}alert("Заявка на овербукинг отправлена! Мы подберем лучшего преподавателя за 5 часов до занятия.")},D=k=>{switch(k){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return k}},V=_.useMemo(()=>{const k=G.map(re=>{var Ne,tt,rt;return{id:re.id,name:re.name||((Ne=re.profile)==null?void 0:Ne.name)||"Репетитор",avatar:re.avatar||((tt=re.profile)==null?void 0:tt.avatar)||"",rating:(rt=re.profile)==null?void 0:rt.rating,profile:re.profile}}),B=(i==null?void 0:i.filter(re=>re.role==="teacher").map(re=>{var Ne,tt,rt;return{id:re.id,name:re.name||((Ne=re.profile)==null?void 0:Ne.name)||"Репетитор",avatar:re.avatar||((tt=re.profile)==null?void 0:tt.avatar)||"",rating:(rt=re.profile)==null?void 0:rt.rating,profile:re.profile}}))||[],ee=a.filter(re=>re.teacherId&&re.teacherName).map(re=>({id:re.teacherId,name:re.teacherName,avatar:re.teacherAvatar||"",rating:re.rating,profile:{subjects:re.subject?[re.subject]:[],experience:re.experience||"beginner",grades:re.grades||[],goals:re.goals||[],city:"",bio:"",rating:re.rating||0,hourlyRate:re.price||0}})),ce=new Map;[...k,...B,...ee].forEach(re=>{const Ne=ce.get(re.id);if(!Ne)ce.set(re.id,re);else{const tt=re.avatar&&re.avatar.trim()!==""&&re.avatar!=="undefined"&&re.avatar!=="null",rt=Ne.avatar&&Ne.avatar.trim()!==""&&Ne.avatar!=="undefined"&&Ne.avatar!=="null";tt&&!rt&&ce.set(re.id,re)}});const De=Array.from(ce.values());return console.log("All teachers processed:",De.map(re=>({id:re.id,name:re.name,hasAvatar:!!(re.avatar&&re.avatar.trim()!==""&&re.avatar!=="undefined"&&re.avatar!=="null"),avatar:re.avatar}))),De},[G,i,a]),ne=_.useMemo(()=>{let k=V;if((Object.keys(m).length>0||oe||de)&&(console.log("Применяем фильтры:",m),console.log("Всего преподавателей до фильтрации:",V.length),k=V.filter(B=>{const ee=B.profile;let ce=!0;return m.subject&&m.subject!==""&&(!(ee!=null&&ee.subjects)||!ee.subjects.includes(m.subject))&&(console.log(`Преподаватель ${B.name} отфильтрован: не преподает ${m.subject}`),ce=!1),m.experience&&m.experience!==""&&ce&&(ee==null?void 0:ee.experience)!==m.experience&&(console.log(`Преподаватель ${B.name} отфильтрован: опыт не совпадает`),ce=!1),m.format&&m.format!==""&&ce&&(!(ee!=null&&ee.formats)||!ee.formats.includes(m.format))&&(console.log(`Преподаватель ${B.name} отфильтрован: формат не совпадает`),ce=!1),m.city&&m.city!==""&&ce&&(!(ee!=null&&ee.city)||!ee.city.toLowerCase().includes(m.city.toLowerCase()))&&(console.log(`Преподаватель ${B.name} отфильтрован: город не совпадает`),ce=!1),m.minRating&&m.minRating>0&&ce&&((ee==null?void 0:ee.rating)||0)<m.minRating&&(console.log(`Преподаватель ${B.name} отфильтрован: рейтинг ниже ${m.minRating}`),ce=!1),m.duration&&m.duration>0&&ce&&(!(ee!=null&&ee.durations)||!ee.durations.includes(m.duration))&&(console.log(`Преподаватель ${B.name} отфильтрован: длительность не совпадает`),ce=!1),m.grade&&m.grade!==""&&ce&&(!(ee!=null&&ee.grades)||!ee.grades.includes(m.grade))&&(console.log(`Преподаватель ${B.name} отфильтрован: класс не совпадает`),ce=!1),m.goals&&m.goals.length>0&&ce&&(!(ee!=null&&ee.goals)||!m.goals.some(De=>ee.goals.includes(De)))&&(console.log(`Преподаватель ${B.name} отфильтрован: цели не совпадают`),ce=!1),(oe||de)&&ce&&b.filter(re=>re.teacherId===B.id).length===0&&(console.log(`Преподаватель ${B.name} отфильтрован: нет подходящих слотов по дате/времени`),ce=!1),ce&&console.log(`Преподаватель ${B.name} прошел все фильтры`),ce}),console.log("Преподавателей после фильтрации:",k.length)),pe.trim()){const B=pe.toLowerCase().trim();k=k.filter(ee=>{const ce=ee.profile;return!!(ee.name.toLowerCase().includes(B)||ce!=null&&ce.subjects&&ce.subjects.some(De=>De.toLowerCase().includes(B))||ce!=null&&ce.city&&ce.city.toLowerCase().includes(B))})}return k},[V,m,oe,de,b,pe]);function Ee(k){try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]").find(ee=>ee.id===k&&ee.role==="teacher")||null}catch{return null}}const[Oe,jt]=S.useState(null),[Ot,ja]=S.useState(null),[Rr,I]=S.useState(!1),[Q,ue]=S.useState(!1),[we,Je]=S.useState([]);S.useEffect(()=>{if(!Ot)return;function k(){const B=Ee(Ot.id);Je((B==null?void 0:B.posts)||[])}return k(),window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[Ot]),_.useEffect(()=>{Object.keys(m).length>0||oe||de?U():W()},[m,oe,de,a]),_.useEffect(()=>{W()},[i]),_.useEffect(()=>{const k=ee=>{ee.key==="tutoring_users"&&(o(),he([]),fetch(`${at}/api/teachers`).then(ce=>ce.json()).then(ce=>he(Array.isArray(ce)?ce:[])).catch(()=>he([])),W())},B=ee=>{var ce;((ce=ee.detail)==null?void 0:ce.key)==="tutoring_users"&&(o(),he([]),fetch(`${at}/api/teachers`).then(De=>De.json()).then(De=>he(Array.isArray(De)?De:[])).catch(()=>he([])),W())};return window.addEventListener("storage",k),window.addEventListener("customStorage",B),()=>{window.removeEventListener("storage",k),window.removeEventListener("customStorage",B)}},[]),_.useEffect(()=>{W()},[a]);const Ut=async k=>{var ee,ce,De,re,Ne,tt,rt,Wt,ai,ni;console.log("Teacher clicked:",k);try{const ws=await fetch(`${at}/api/users/${k.id}`);if(ws.ok){const st=await ws.json();if(console.log("Fresh teacher data from server:",st),st){const sd=JSON.parse(localStorage.getItem("allUsers")||"[]").map(oi=>oi.id===st.id?st:oi);localStorage.setItem("allUsers",JSON.stringify(sd));const ii={id:st.id,name:st.name,email:st.email,avatar:((ee=st.profile)==null?void 0:ee.avatar)||st.avatar,role:"teacher",profile:{...st.profile,avatar:((ce=st.profile)==null?void 0:ce.avatar)||st.avatar,name:st.name,email:st.email}};console.log("Updated teacher data for modal:",ii),ja(ii),I(!0);return}}}catch(ws){console.error("Error fetching fresh teacher data:",ws)}let B=Ee(k.id);B?B={...B,name:k.name||B.name,email:((rt=k.profile)==null?void 0:rt.email)||k.email||B.email,avatar:((Wt=k.profile)==null?void 0:Wt.avatar)||k.avatar||B.avatar,profile:{...B.profile,...k.profile,avatar:((ai=k.profile)==null?void 0:ai.avatar)||k.avatar||B.avatar,name:k.name||B.name,email:((ni=k.profile)==null?void 0:ni.email)||k.email||B.email}}:B={id:k.id,name:k.name,email:((De=k.profile)==null?void 0:De.email)||k.email||"",avatar:((re=k.profile)==null?void 0:re.avatar)||k.avatar,role:"teacher",profile:{...k.profile,avatar:((Ne=k.profile)==null?void 0:Ne.avatar)||k.avatar,name:k.name,email:((tt=k.profile)==null?void 0:tt.email)||k.email}},console.log("Fallback teacher data for modal:",B),ja(B),I(!0)},Lr=k=>{const B=i.find(ee=>ee.id===k);B&&(F(B),se(!0)),ue(!1)},be=k=>{console.log("🔍 StudentHome handleMessage DEBUG:"),console.log("- Student user:",{id:f==null?void 0:f.id,name:f==null?void 0:f.name,role:f==null?void 0:f.role}),console.log("- Target teacher ID:",k);const B=i.find(ee=>ee.id===k);if(console.log("- Found teacher:",B),B&&f){console.log("- Sending message to teacher:",{studentId:f.id,teacherId:k,studentName:f.name,teacherName:B.name});const ee=g(f.id,f.name,k,B.name,`Привет! Меня зовут ${f.name}. Можете ли вы помочь мне с обучением?`);console.log("- Message sent, chat ID:",ee),e("chats")}else console.log("❌ Teacher not found or user not available");console.log("🔍 END StudentHome DEBUG"),ue(!1)};return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3",children:"Найди своего идеального репетитора"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Изучай профили преподавателей, читай их записи и записывайся на уроки"})]}),t.jsx("div",{className:"flex items-center justify-center mb-6",children:n?t.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-full px-4 py-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx(hi,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-700",children:"Подключено в реальном времени"})]}):t.jsxs("div",{className:"flex items-center space-x-2 bg-amber-50 border border-amber-200 rounded-full px-4 py-2",children:[t.jsx(Vd,{className:"h-4 w-4 text-amber-600"}),t.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Офлайн режим (кэшированные данные)"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"ml-2 text-xs bg-amber-100 text-amber-700 px-3 py-1 rounded-full hover:bg-amber-200 transition-colors",children:"Переподключиться"})]})})]}),t.jsxs("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[t.jsxs("button",{onClick:()=>R(!0),className:"group bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(We,{className:"h-5 w-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Овербукинг"}),t.jsx("div",{className:"text-xs opacity-90",children:"Автоподбор"})]})]}),t.jsxs("button",{onClick:()=>J(!0),className:"group bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-purple-600 hover:via-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(qe,{className:"h-5 w-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Календарь"}),t.jsx("div",{className:"text-xs opacity-90",children:"Слоты"})]})]}),t.jsxs("button",{onClick:w,disabled:E,className:"group bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(Fa,{className:`h-5 w-5 ${E?"animate-spin":""}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Обновить"}),t.jsx("div",{className:"text-xs opacity-90",children:"Данные"})]})]}),t.jsxs("button",{onClick:Re,disabled:E,className:"group bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(hi,{className:`h-5 w-5 ${E?"animate-pulse":""}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Синхронизация"}),t.jsx("div",{className:"text-xs opacity-90",children:"Сервер"})]})]})]}),t.jsxs("div",{className:"mb-6 space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsxs("div",{className:"flex-1 relative group",children:[t.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),t.jsx("input",{type:"text",value:pe,onChange:k=>X(k.target.value),placeholder:"🔍 Поиск по предмету, преподавателю или городу...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base placeholder-gray-400"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>v(!x),className:`flex items-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm ${x?"bg-blue-600 text-white shadow-md":"bg-white border-2 border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:[t.jsx(on,{className:"h-4 w-4"}),t.jsx("span",{children:"Фильтры"}),(Object.keys(m).length>0||oe||de||pe.trim())&&t.jsx("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs font-bold",children:Object.keys(m).length+(oe?1:0)+(de?1:0)+(pe.trim()?1:0)})]}),t.jsx("button",{onClick:U,disabled:E,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2.5 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center space-x-2 text-sm",children:E?t.jsxs(t.Fragment,{children:[t.jsx(Fa,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Применение..."})]}):t.jsx(t.Fragment,{children:t.jsx("span",{children:"Применить"})})}),(Object.keys(m).length>0||oe||de||pe.trim())&&t.jsx("button",{onClick:L,className:"bg-white border-2 border-gray-300 text-gray-700 px-4 py-2.5 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 text-sm",children:"Сбросить"})]})]}),x&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-100 shadow-lg",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Класс"}),t.jsxs("select",{value:m.grade||"",onChange:k=>y({...m,grade:k.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой класс"}),$e.map(k=>t.jsx("option",{value:k,children:k},k))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Предмет"}),t.jsxs("select",{value:m.subject||"",onChange:k=>y({...m,subject:k.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой предмет"}),xe.map(k=>t.jsx("option",{value:k,children:k},k))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Опыт"}),t.jsxs("select",{value:m.experience||"",onChange:k=>y({...m,experience:k.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой опыт"}),ve.map(k=>t.jsx("option",{value:k,children:D(k)},k))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Формат"}),t.jsxs("select",{value:m.format||"",onChange:k=>y({...m,format:k.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой формат"}),Se.map(k=>t.jsx("option",{value:k,children:k==="online"?"Онлайн":k==="offline"?"Оффлайн":"Мини-группа"},k))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Длительность"}),t.jsxs("select",{value:m.duration||"",onChange:k=>y({...m,duration:k.target.value?parseInt(k.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любая длительность"}),ze.map(k=>t.jsxs("option",{value:k,children:[k," мин"]},k))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Мин. рейтинг"}),t.jsxs("select",{value:m.minRating||"",onChange:k=>y({...m,minRating:k.target.value?parseFloat(k.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой рейтинг"}),t.jsx("option",{value:"4",children:"4+ звезды"}),t.jsx("option",{value:"4.5",children:"4.5+ звезды"}),t.jsx("option",{value:"5",children:"5 звезд"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Город"}),t.jsx("input",{type:"text",value:m.city||"",onChange:k=>y({...m,city:k.target.value}),placeholder:"Введите город",className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Цели обучения"}),t.jsxs("select",{value:((Ir=m.goals)==null?void 0:Ir[0])||"",onChange:k=>y({...m,goals:k.target.value?[k.target.value]:void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любые цели"}),Z.map(k=>t.jsx("option",{value:k,children:k},k))]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"Выберите дату и время"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Дата"}),t.jsx("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden shadow-lg",children:t.jsx(Jn,{localizer:Ae,events:[],startAccessor:"start",endAccessor:"end",style:{height:280},views:["month"],view:"month",selectable:!0,onSelectSlot:k=>{ge(k.start)},onSelectEvent:()=>{}})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Время"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Начало"}),t.jsx("input",{type:"time",value:(de==null?void 0:de.start)||"",onChange:k=>fe(B=>({start:k.target.value,end:(B==null?void 0:B.end)||"23:00"})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Конец"}),t.jsx("input",{type:"time",value:(de==null?void 0:de.end)||"",onChange:k=>fe(B=>({start:(B==null?void 0:B.start)||"00:00",end:k.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]})]}),oe&&t.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(qe,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Выбрана дата:"})]}),t.jsx("p",{className:"text-base font-medium text-blue-900",children:Ue(oe,"dd MMMM yyyy",{locale:ht})})]})]})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:ne.length>0?`Найдено ${ne.length} преподавателей`:"Преподаватели"}),t.jsx("p",{className:"text-gray-500 text-sm",children:ne.length>0?"Выберите подходящего преподавателя и забронируйте урок":"Попробуйте изменить фильтры или воспользоваться овербукингом"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ne.length===0?t.jsx(_3,{title:Object.keys(m).length>0||oe||de?"Нет преподавателей подходящих под фильтры":"Нет зарегистрированных преподавателей",description:Object.keys(m).length>0||oe||de?"Попробуйте изменить фильтры или воспользоваться овербукингом":"Попробуйте воспользоваться овербукингом или обратитесь к администратору",actionPrimary:{label:"Овербукинг",onClick:()=>R(!0)},actionSecondary:{label:"Сбросить фильтры",onClick:L,variant:"secondary"}}):t.jsx(t.Fragment,{children:ne.map(k=>{const B=k.profile,ee=a.filter(re=>re.teacherId===k.id),ce=ee.filter(re=>!re.isBooked);ee.length>0?Math.min(...ee.map(re=>re.price)):B!=null&&B.hourlyRate,ee.length>0?Math.max(...ee.map(re=>re.price)):B!=null&&B.hourlyRate;const De=ce.length>0;return t.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden transform hover:-translate-y-2",onClick:()=>Ut(k),children:[t.jsxs("div",{className:"h-32 relative overflow-hidden",style:{background:B!=null&&B.cardBackground?B.cardBackground.startsWith("http")||B.cardBackground.startsWith("data:")?`url(${B.cardBackground}) center/cover`:B.cardBackground:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),t.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2",children:[t.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:re=>{re.stopPropagation()},children:t.jsx(xt,{className:"h-3 w-3"})}),t.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:re=>{re.stopPropagation()},children:t.jsx(zt,{className:"h-3 w-3"})})]})]}),t.jsx("div",{className:"relative -mt-12 flex justify-center",children:t.jsxs("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-2 border-white rounded-full shadow-lg"}),(()=>{const re=(B==null?void 0:B.avatar)||k.avatar;return re&&re.trim()!==""&&re!=="undefined"&&re!=="null"?t.jsx("img",{src:re,alt:k.name,className:"w-32 h-32 object-cover rounded-full",onError:tt=>{const rt=tt.target;rt.style.display="none";const Wt=rt.nextElementSibling;Wt&&Wt.classList.remove("hidden")},onLoad:tt=>{const Wt=tt.target.nextElementSibling;Wt&&Wt.classList.add("hidden")}}):null})(),t.jsx("div",{className:`w-32 h-32 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const re=(B==null?void 0:B.avatar)||k.avatar;return re&&re.trim()!==""&&re!=="undefined"&&re!=="null"?"hidden":""})()}`,children:t.jsx(ye,{className:"h-16 w-16 text-white"})})]})}),t.jsxs("div",{className:"px-6 pb-6 pt-4",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:(B==null?void 0:B.name)||k.name||"Репетитор"}),t.jsx("p",{className:"text-sm text-gray-600",children:(B==null?void 0:B.teacherType)==="private"?"Частный преподаватель":(B==null?void 0:B.teacherType)==="school"?"Преподаватель школы":(B==null?void 0:B.teacherType)==="both"?"Частный + Школа":"Частный преподаватель"})]}),t.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600 mb-4",children:[(B==null?void 0:B.age)&&t.jsxs("span",{children:["возраст ",B.age," лет"]}),(B==null?void 0:B.experienceYears)&&t.jsxs("span",{children:["стаж ",B.experienceYears," лет"]})]}),t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-3 py-1.5 rounded-full",children:[t.jsx(Le,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-700",children:B!=null&&B.reviewsCount&&B.reviewsCount>0?`${B.reviewsCount} отзывов`:"отзывов нет"})]})}),t.jsx("div",{className:"text-center mb-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-600",children:[t.jsx(kt,{className:"h-4 w-4"}),t.jsx("span",{children:(B==null?void 0:B.city)||"Город не указан"})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:re=>{re.stopPropagation(),De?(F(k),se(!0)):Ut(k)},className:`w-full py-3 rounded-xl font-semibold transition-all duration-200 text-base ${De?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}`,children:De?"Забронировать":"Профиль"}),t.jsx("button",{onClick:re=>{re.stopPropagation(),Ut(k)},className:"w-full py-2 text-gray-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"Подробнее →"})]})]})]},k.id)})})})]}),$&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Овербукинг - Автоподбор преподавателя"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Заполните форму, и мы автоматически подберем лучшего доступного преподавателя за 5 часов до занятия"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Класс"}),t.jsxs("select",{value:P.grade,onChange:k=>T({...P,grade:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Выберите класс"}),$e.map(k=>t.jsx("option",{value:k,children:k},k))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предмет"}),t.jsxs("select",{value:P.subject,onChange:k=>T({...P,subject:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Выберите предмет"}),xe.map(k=>t.jsx("option",{value:k,children:k},k))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата занятия"}),t.jsx("input",{type:"date",value:P.date,onChange:k=>T({...P,date:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Время начала"}),t.jsx("input",{type:"time",value:P.startTime,onChange:k=>T({...P,startTime:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цель занятий"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(k=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:P.goals.includes(k),onChange:B=>{B.target.checked?T({...P,goals:[...P.goals,k]}):T({...P,goals:P.goals.filter(ee=>ee!==k)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавателя"}),t.jsxs("select",{value:P.experience,onChange:k=>T({...P,experience:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Любой"}),ve.map(k=>t.jsx("option",{value:k,children:D(k)},k))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность"}),t.jsx("select",{value:P.duration,onChange:k=>T({...P,duration:Number(k.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:ze.map(k=>t.jsxs("option",{value:k,children:[k," мин"]},k))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Формат"}),t.jsx("select",{value:P.format,onChange:k=>T({...P,format:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Se.map(k=>t.jsx("option",{value:k,children:k==="online"?"Онлайн":k==="offline"?"Оффлайн":"Мини-группа"},k))})]})]}),P.format==="offline"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:P.city,onChange:k=>T({...P,city:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Примечание"}),t.jsx("textarea",{value:P.comment,onChange:k=>T({...P,comment:k.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Например: хочу разобрать домашнее задание или подготовиться к контрольной..."})]})]}),t.jsxs("div",{className:"flex space-x-4 mt-6",children:[t.jsx("button",{onClick:C,disabled:!P.grade||!P.subject||!P.date||!P.startTime,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200 disabled:opacity-50",children:"Отправить заявку"}),t.jsx("button",{onClick:()=>R(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})})}),Rr&&Ot&&t.jsx(T3,{teacher:Ot,onClose:()=>I(!1),onBookLesson:k=>{I(!1),Lr(k)},onMessage:k=>{I(!1),be(k)}}),H&&A&&f&&t.jsx(ri,{isOpen:H,onClose:()=>{z(!1),K(null)},onConfirm:j,slot:A,teacher:Ee(A.teacherId),student:f}),Q&&Ot&&t.jsx(ed,{teacher:Ot,onClose:()=>ue(!1),onBookLesson:Lr,onMessage:be}),q&&t.jsx(td,{onClose:()=>J(!1)}),ie&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:t.jsx(ye,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Календарь ",(N==null?void 0:N.name)||"Преподавателя"]}),t.jsx("p",{className:"text-gray-600",children:"Выберите удобное время для занятия"})]})]}),t.jsx("button",{onClick:()=>{se(!1),F(null)},className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(et,{className:"w-5 h-5 text-gray-600"})})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>{const k=new Date(Y);k.setDate(k.getDate()-7),O(k)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[Y.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})," — ",new Date(Y.getTime()+6*24*60*60*1e3).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})]}),t.jsx("button",{onClick:()=>{const k=new Date(Y);k.setDate(k.getDate()+7),O(k)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsx("button",{onClick:()=>{const k=new Date,B=k.getDay(),ee=k.getDate()-B+(B===0?-6:1);O(new Date(k.setDate(ee)))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Сегодня"})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[t.jsx("div",{className:"w-20 p-3 border-r border-gray-200"}),Array.from({length:7},(k,B)=>{const ee=new Date(Y);return ee.setDate(ee.getDate()+B),t.jsxs("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 text-center",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.toLocaleDateString("ru-RU",{weekday:"short"})}),t.jsx("div",{className:"text-xs text-gray-600",children:ee.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})})]},B)})]}),t.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:Array.from({length:24},(k,B)=>B).map(k=>t.jsxs("div",{className:"flex border-b border-gray-200 last:border-b-0",children:[t.jsxs("div",{className:"w-20 bg-gray-50 p-3 border-r border-gray-200 flex items-center justify-center text-sm font-medium text-gray-600 sticky left-0",children:[k.toString().padStart(2,"0"),":00"]}),Array.from({length:7},(B,ee)=>{const ce=new Date(Y);ce.setDate(ce.getDate()+ee);const De=ce.toISOString().split("T")[0],re=a.filter(Ne=>Ne.teacherId===(N==null?void 0:N.id)&&!Ne.isBooked&&Ne.date===De&&parseInt(Ne.startTime.split(":")[0])===k);return t.jsx("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 min-h-[60px]",children:re.map(Ne=>t.jsxs("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-2 mb-2 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>{f&&(K(Ne),z(!0),se(!1),F(null))},children:[t.jsxs("div",{className:"text-xs font-medium text-blue-900",children:[Ne.startTime," - ",Ne.endTime]}),t.jsx("div",{className:"text-xs text-blue-700",children:Ne.subject}),t.jsxs("div",{className:"text-xs text-blue-600",children:[Ne.price," ₽"]})]},Ne.id))},ee)})]},k))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[t.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Доступные слоты: ",a.filter(k=>k.teacherId===(N==null?void 0:N.id)&&!k.isBooked).length]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите на любой слот в календаре для бронирования"})]})]})]})})]})},La=()=>{const{timeSlots:e,lessons:r,createSlot:s,cancelLesson:a,getOrCreateChat:n,completeLesson:i,deleteSlot:o,isConnected:l,socketRef:c}=ct(),{user:d}=Ye(),[u,g]=S.useState(!1),[f,m]=S.useState({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3}),[y,x]=_.useState(null),[v,b]=_.useState(!1),[h,E]=_.useState(null),[p,$]=S.useState(!1),[R,P]=S.useState([]),[T,H]=S.useState(null),[z,A]=S.useState(!1);_.useEffect(()=>{c.current&&(d!=null&&d.id)&&l&&c.current.emit("subscribeOverbooking",d.id)},[c.current,d==null?void 0:d.id,l]),_.useEffect(()=>{if(!c.current)return;const G=()=>{d!=null&&d.id&&(d!=null&&d.profile)&&l&&c.current.emit("subscribeOverbooking",d.id)};return c.current.off("connect",G),c.current.on("connect",G),d!=null&&d.id&&(d!=null&&d.profile)&&(c.current.emit("subscribeOverbooking",d.id),c.current.on("overbookingRequests",he=>{P(he),setTimeout(()=>{},100)}),c.current.on("newOverbookingRequest",he=>{P(me=>[...me,he])}),c.current.on("overbookingRequestAccepted",he=>{P(me=>me.filter(Re=>Re.id!==he.id))})),()=>{c.current&&(c.current.off("overbookingRequests"),c.current.off("newOverbookingRequest"),c.current.off("overbookingRequestAccepted"),c.current.off("connect",G))}},[d==null?void 0:d.id,d==null?void 0:d.profile,l]),_.useEffect(()=>{d&&d.profile&&Array.isArray(d.profile.subjects)&&d.profile.subjects.length>=1&&m(G=>({...G,subject:d.profile.subjects[0]}))},[d]);const q=e.filter(G=>G.teacherId===(d==null?void 0:d.id)).filter(G=>!G.isBooked),J=r.filter(G=>G.teacherId===(d==null?void 0:d.id)),ie=J.filter(G=>G.status==="scheduled"),se=J.filter(G=>G.status==="completed"),N=(G,he)=>{const me=new Date(`${G.date}T${G.startTime}`),Re=new Date(`${he.date}T${he.startTime}`);return me.getTime()-Re.getTime()},F=[...q].sort(N),Y=[...ie].sort(N),O=[...se].sort(N),oe=()=>{if(!d||!f.date||!f.startTime||!f.subject){alert("Пожалуйста, заполните все обязательные поля");return}const G=new Date(`2000-01-01T${f.startTime}`),he=new Date(G.getTime()+f.duration*6e4);let me;d.profile&&d.role==="teacher"&&(me=d.profile);const Re={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar,date:f.date,startTime:f.startTime,endTime:he.toTimeString().slice(0,5),duration:f.duration,subject:f.subject,lessonType:f.lessonType,format:f.format,price:f.price,experience:(me==null?void 0:me.experience)||"beginner",goals:(me==null?void 0:me.goals)||[],grades:(me==null?void 0:me.grades)||[],rating:me==null?void 0:me.rating,bio:(me==null?void 0:me.bio)||"",...f.format==="offline"&&(me!=null&&me.city)?{city:me.city}:{}};s(Re),g(!1),m({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3})},ge=G=>{d&&(x(G),E(null),b(!0))},de=G=>{d&&(E(G),x(null),b(!0))},fe=()=>{b(!1),x(null),E(null)},pe=async G=>{var me,Re,M,W,U,L;if(!d)return;c.current&&c.current.emit("acceptOverbookingRequest",{requestId:G.id,teacherId:d.id});const he={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar||"",date:G.date||new Date().toISOString().slice(0,10),startTime:G.startTime||"15:00",endTime:G.endTime||"16:00",duration:G.duration||60,subject:G.subject,lessonType:"regular",format:G.format,price:1e3,experience:((me=d.profile)==null?void 0:me.experience)||"beginner",goals:((Re=d.profile)==null?void 0:Re.goals)||[],grades:((M=d.profile)==null?void 0:M.grades)||[],rating:(W=d.profile)==null?void 0:W.rating,bio:((U=d.profile)==null?void 0:U.bio)||"",city:((L=d.profile)==null?void 0:L.city)||""};await s(he,G.studentId,G.studentName),$(!1),alert("Вы приняли заявку. Слот создан и забронирован!")},X=G=>{switch(G){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return G}},xe=G=>{switch(G){case"trial":return"Пробный";case"regular":return"Обычный";default:return G}},$e=({slot:G,isBooked:he,onClick:me})=>t.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${he?"border-green-500":"border-blue-500"} cursor-pointer`,onClick:me,children:t.jsxs("div",{className:"p-3",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:G.subject}),t.jsxs("div",{className:"text-xs text-gray-500",children:[G.date," • ",G.startTime,"–",G.endTime]})]})}),Z=({lesson:G,status:he,onClick:me})=>t.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${he==="completed"?"border-gray-400":"border-green-500"} cursor-pointer`,onClick:me,children:t.jsxs("div",{className:"p-3",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:G.subject}),t.jsxs("div",{className:"text-xs text-gray-500",children:[G.date," • ",G.startTime,"–",G.endTime]})]})}),ve=(d==null?void 0:d.profile)&&"overbookingEnabled"in d.profile&&d.profile.overbookingEnabled,Se=d!=null&&d.profile&&"subjects"in d.profile?d.profile.subjects:[],ze=[45,60,90],Xe=["regular","trial"],Ae=["online","offline","mini-group"];return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8 relative",children:[ve&&t.jsxs("button",{className:"absolute top-0 right-0 p-2 rounded-full hover:bg-gray-100 transition z-10",title:"Уведомления",onClick:()=>$(!0),children:[t.jsx(Gr,{className:"w-7 h-7 text-blue-500"}),R.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5",children:R.length})]}),t.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Управление слотами"}),t.jsx("p",{className:"text-gray-600",children:"Создавайте временные слоты для уроков и управляйте своим расписанием"})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>$(!1),title:"Закрыть",children:t.jsx(et,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Заявки на овербукинг"}),R.length===0?t.jsx("div",{className:"text-gray-500 text-center",children:"Нет новых заявок"}):t.jsx("div",{className:"space-y-2",children:R.map(G=>t.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2 bg-purple-50 cursor-pointer hover:bg-purple-100 transition",onClick:()=>{H(G),A(!0)},children:[t.jsx("span",{className:"font-semibold text-purple-800",children:G.studentName}),t.jsx("span",{className:"text-xs text-gray-500",children:G.subject}),t.jsx("span",{className:"text-xs text-gray-500",children:G.startTime||"—"})]},G.id))})]})}),t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:()=>g(!0),className:"btn-primary flex items-center space-x-2",children:[t.jsx(vr,{className:"h-5 w-5"}),t.jsx("span",{children:"Создать новый слот"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Свободные слоты"}),F.length>0?t.jsx("div",{className:"space-y-4",children:F.map(G=>t.jsx($e,{slot:G,isBooked:!1,onClick:()=>ge(G)},G.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет свободных слотов"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-green-700 mb-4",children:"Забронированные уроки"}),Y.length>0?t.jsx("div",{className:"space-y-4",children:Y.map(G=>t.jsx(Z,{lesson:G,status:"scheduled",onClick:()=>de(G)},G.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет забронированных уроков"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Завершённые уроки"}),O.length>0?t.jsx("div",{className:"space-y-4",children:O.map(G=>t.jsx(Z,{lesson:G,status:"completed",onClick:()=>de(G)},G.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет завершённых уроков"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-purple-700 mb-4",children:"Овербукинг"}),t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет новых заявок"})]})]}),u&&t.jsx("div",{className:"fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Создать новый слот"}),t.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Предмет *"}),t.jsxs("select",{value:f.subject,onChange:G=>m({...f,subject:G.target.value}),className:"input-modern w-full",children:[t.jsx("option",{value:"",children:"Выберите предмет"}),Se.map(G=>t.jsx("option",{value:G,children:G},G))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Дата *"}),t.jsx("input",{type:"date",value:f.date,onChange:G=>m({...f,date:G.target.value}),className:"input-modern w-full",min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Время начала *"}),t.jsx("input",{type:"time",value:f.startTime,onChange:G=>m({...f,startTime:G.target.value}),className:"input-modern w-full"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Длительность"}),t.jsx("select",{value:f.duration,onChange:G=>m({...f,duration:parseInt(G.target.value)}),className:"input-modern w-full",children:ze.map(G=>t.jsxs("option",{value:G,children:[G," минут"]},G))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Цена (₽)"}),t.jsx("input",{type:"number",value:f.price,onChange:G=>m({...f,price:parseInt(G.target.value)}),className:"input-modern w-full",min:"100",step:"100"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Тип урока"}),t.jsx("select",{value:f.lessonType,onChange:G=>m({...f,lessonType:G.target.value}),className:"input-modern w-full",children:Xe.map(G=>t.jsx("option",{value:G,children:xe(G)},G))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Формат"}),t.jsx("select",{value:f.format,onChange:G=>m({...f,format:G.target.value}),className:"input-modern w-full",children:Ae.map(G=>t.jsx("option",{value:G,children:X(G)},G))})]})]}),t.jsxs("div",{className:"flex space-x-4 pt-4",children:[t.jsx("button",{onClick:oe,className:"btn-primary flex-1",children:"Создать слот"}),t.jsx("button",{onClick:()=>g(!1),className:"btn-secondary flex-1",children:"Отмена"})]})]})]})})}),v&&(y||h)&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[t.jsx("button",{onClick:fe,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h3",{className:"text-xl font-bold mb-4",children:y?"Детали слота":"Детали урока"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Предмет:"})," ",(y||h).subject]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Дата:"})," ",(y||h).date," ",(y||h).startTime," - ",(y||h).endTime]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Формат:"})," ",(y||h).format]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Цена:"})," ",(y||h).price,"₽"]}),y&&y.studentName&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",y.studentName]}),h&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",h.studentName]}),((h==null?void 0:h.comment)||(y==null?void 0:y.comment))&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[t.jsx("span",{className:"font-medium",children:"Комментарий ученика:"})," ",(h==null?void 0:h.comment)||(y==null?void 0:y.comment)]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[y&&y.isBooked&&y.studentId&&d&&t.jsxs("button",{onClick:()=>{n(d.id,y.studentId,d.name,y.studentName),fe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[t.jsx(Le,{className:"w-5 h-5"})," Чат с учеником"]}),y&&y.isBooked&&y.format==="online"&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[t.jsx(At,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Видеозвонок"})]})}),y&&y.isBooked&&t.jsxs("button",{onClick:()=>{i(y.lessonId),fe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[t.jsx(qr,{className:"w-5 h-5"})," Завершить урок"]}),y&&t.jsx("button",{onClick:()=>{o(y.id),fe()},className:"absolute top-4 left-4 text-red-500 hover:text-red-700",children:t.jsx(Xr,{className:"w-6 h-6"})}),h&&h.status==="scheduled"&&d&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{n(d.id,h.studentId,d.name,h.studentName),fe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[t.jsx(Le,{className:"w-5 h-5"})," Чат с учеником"]}),h.format==="online"&&t.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[t.jsx(At,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Видеозвонок"})]}),t.jsxs("button",{onClick:()=>{i(h.id),fe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[t.jsx(qr,{className:"w-5 h-5"})," Завершить урок"]})]}),h&&h.status==="completed"&&t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-center text-gray-800",children:"Урок завершён"})]})]})}),z&&T&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[t.jsx("button",{onClick:()=>{A(!1),H(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h3",{className:"text-xl font-bold mb-4",children:"Заявка на овербукинг"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",T.studentName]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Предмет:"})," ",T.subject]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Класс:"})," ",T.grade]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Формат:"})," ",T.format]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Длительность:"})," ",T.duration," мин"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Время:"})," ",T.startTime||"—"," - ",T.endTime||"—"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Цели:"})," ",Array.isArray(T.goals)?T.goals.join(", "):T.goals]}),T.comment&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[t.jsx("span",{className:"font-medium",children:"Комментарий:"})," ",T.comment]})]}),t.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",onClick:()=>{pe(T),A(!1),H(null)},children:"Забронировать слот"})]})})]})},P3={ru:ht},A3=Qn({format:Ue,startOfWeek:Tt,getDay:ei,locales:P3}),rd=({mode:e,student:r,onAssign:s})=>{const{timeSlots:a,lessons:n,bookLesson:i,createSlot:o}=ct(),{user:l}=Ye(),[c,d]=S.useState(null),[u,g]=S.useState(!1),[f,m]=S.useState(""),[y,x]=S.useState(!1),[v,b]=S.useState(!1),[h,E]=S.useState({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),[p,$]=S.useState(!1),[R,P]=S.useState(null),[T,H]=S.useState(!1),[z,A]=S.useState(""),K=a.filter(X=>{if(X.teacherId!==(l==null?void 0:l.id)||X.status==="completed")return!1;if(e==="assign"&&r){if(X.isBooked&&X.bookedStudentId!==r.id)return!1}else if(X.isBooked)return!1;return!0}),q=n.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"),J=e==="assign"?a.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"):K,ie=e==="assign"?n.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"):q,se=J.map(X=>({id:X.id,title:`${X.subject} - ${X.isBooked?"Забронирован":"Свободен"}`,start:new Date(`${X.date}T${X.startTime}`),end:new Date(`${X.date}T${X.endTime}`),resource:X,type:"slot",isBooked:X.isBooked,subject:X.subject,price:X.price,format:X.format,lessonType:X.lessonType})),N=ie.map(X=>({id:X.id,title:`${X.subject} - ${X.studentName}`,start:new Date(`${X.date}T${X.startTime}`),end:new Date(`${X.date}T${X.endTime}`),resource:X,type:"lesson",studentName:X.studentName,subject:X.subject,price:X.price,format:X.format,status:X.status})),F=[...se,...N],Y=S.useCallback(X=>{let xe={borderRadius:"8px",border:"none",padding:"4px 8px",fontSize:"12px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"};return X.type==="slot"?X.isBooked?(xe.backgroundColor="#10b981",xe.color="white"):(xe.backgroundColor="#3b82f6",xe.color="white"):X.type==="lesson"&&(xe.backgroundColor="#f59e0b",xe.color="white"),{style:xe}},[]),O=S.useCallback(X=>{d(X),g(!0),m("")},[]),oe=()=>{g(!1),d(null),m("")},ge=async X=>{e==="assign"&&r&&(await i(X.id,r.id,r.name),s&&s())},de=S.useCallback(X=>{const{start:xe,end:$e}=X,Z=Ue(xe,"yyyy-MM-dd"),ve=Ue(xe,"HH:mm"),Se=Ue($e,"HH:mm");E({date:Z,startTime:ve,endTime:Se,subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),b(!0)},[]),fe=async()=>{if(!l||!h.subject.trim()){alert("Пожалуйста, заполните все обязательные поля");return}if(!h.startTime||!h.endTime||h.startTime>=h.endTime){alert("Проверьте корректность времени начала и окончания");return}$(!0);try{if(e==="assign"&&r){await o({...h,teacherId:l.id,teacherName:l.name,duration:60,lessonType:h.lessonType,format:h.format,experience:h.experience,goals:h.goals||[],grades:h.grades||[]},r.id,r.name,{mode:"assign"}),b(!1),E({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]});return}await o({...h,teacherId:l.id,teacherName:l.name,duration:60,lessonType:h.lessonType,format:h.format,experience:h.experience,goals:h.goals||[],grades:h.grades||[]}),b(!1),E({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),alert("Слот успешно создан!")}catch{alert("Ошибка при создании слота")}finally{$(!1)}},pe=async X=>{if(r){H(!0);try{await i(X.id,r.id,r.name),A(`Урок назначен для ${r.name}`),setTimeout(()=>{A(""),P(null),s&&s()},1200)}catch{alert("Ошибка при бронировании слота")}finally{H(!1)}}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-2",children:[t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Календарь занятий"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Управляйте своим расписанием и отслеживайте забронированные уроки"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:t.jsx("div",{className:"p-3",children:t.jsx(Jn,{localizer:A3,events:F,startAccessor:"start",endAccessor:"end",style:{height:400},eventPropGetter:Y,onSelectEvent:O,onSelectSlot:de,selectable:!0,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет событий в выбранном диапазоне",showMore:X=>`+${X} еще`},className:"custom-calendar"})})}),t.jsxs("div",{className:"mt-3 bg-white rounded-lg shadow-sm border border-gray-100 p-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Легенда"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Свободные слоты"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Забронированные слоты"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Запланированные уроки"})]})]})]})]}),u&&c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-xs w-full p-3 transform transition-all duration-300 scale-100",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900",children:c.type==="slot"?"Детали слота":"Детали урока"}),t.jsx("button",{onClick:oe,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Предмет:"}),t.jsx("p",{className:"text-xs text-gray-900",children:c.subject})]}),c.type==="slot"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),t.jsx("p",{className:`text-xs font-medium ${c.isBooked?"text-green-600":"text-blue-600"}`,children:c.isBooked?"Забронирован":"Свободен"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Тип урока:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.lessonType})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),t.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]}),!c.isBooked&&t.jsxs("div",{className:"mt-3",children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Имя студента для бронирования:"}),t.jsx("input",{type:"text",value:f,onChange:X=>m(X.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Введите имя студента"}),t.jsx("button",{onClick:()=>ge(c.resource),disabled:y,className:"mt-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:y?"Бронирую...":"Забронировать слот"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Ученик:"}),t.jsx("p",{className:"text-xs text-gray-900",children:c.studentName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.status})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),t.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Время:"}),t.jsxs("p",{className:"text-gray-900 text-xs",children:[Ue(c.start,"HH:mm")," - ",Ue(c.end,"HH:mm")]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Дата:"}),t.jsx("p",{className:"text-gray-900 text-xs",children:Ue(c.start,"dd MMMM yyyy",{locale:ht})})]})]}),t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsx("button",{onClick:oe,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Закрыть"})})]})}),v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 transform transition-all duration-300 scale-100",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Создать новый слот"}),t.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Предмет *"}),t.jsx("input",{type:"text",value:h.subject,onChange:X=>E({...h,subject:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Например: Математика",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время начала"}),t.jsx("input",{type:"time",value:h.startTime,onChange:X=>E({...h,startTime:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время окончания"}),t.jsx("input",{type:"time",value:h.endTime,onChange:X=>E({...h,endTime:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Тип урока"}),t.jsxs("select",{value:h.lessonType,onChange:X=>E({...h,lessonType:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"regular",children:"Обычный"}),t.jsx("option",{value:"trial",children:"Пробный"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Формат"}),t.jsxs("select",{value:h.format,onChange:X=>E({...h,format:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"online",children:"Онлайн"}),t.jsx("option",{value:"offline",children:"Офлайн"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Цена (₽)"}),t.jsx("input",{type:"number",value:h.price,onChange:X=>E({...h,price:parseInt(X.target.value)||0}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"1000",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Опыт"}),t.jsxs("select",{value:h.experience,onChange:X=>E({...h,experience:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"experienced",children:"Опытный"})]})]})]}),t.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Отмена"}),t.jsx("button",{onClick:fe,disabled:p||!h.subject.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:p?"Создаю...":"Создать слот"})]})]})}),e==="assign"&&r&&R&&!R.isBooked&&t.jsx("button",{onClick:()=>pe(R),disabled:T,style:{marginTop:12,padding:"6px 16px",fontSize:14},children:T?"Назначение...":`Забронировать для ${r.name}`}),z&&t.jsx("div",{style:{color:"green",marginTop:8,fontSize:14},children:z})]})},R3={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},L3={background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.15)",padding:24,minWidth:320,maxHeight:"90vh",overflowY:"auto",position:"relative"},I3={position:"absolute",top:12,right:16,fontSize:24,background:"none",border:"none",cursor:"pointer",color:"#888"},fr=({open:e,onClose:r,children:s,style:a})=>e?t.jsx("div",{style:R3,onClick:r,children:t.jsxs("div",{style:{...L3,...a},onClick:n=>n.stopPropagation(),children:[t.jsx("button",{style:I3,onClick:r,"aria-label":"Закрыть",children:"×"}),s]})}):null,si=({onSubmit:e,onCancel:r,initialText:s="",isEditing:a=!1,userName:n="U",userAvatar:i})=>{const[o,l]=S.useState(s),[c,d]=S.useState([]),[u,g]=S.useState([]),f=S.useRef(null),m=b=>{const h=Array.from(b.target.files||[]);if(h.length===0)return;const E=[...c,...h];d(E);const p=h.map($=>URL.createObjectURL($));g([...u,...p]),f.current&&(f.current.value="")},y=b=>{const h=c.filter((p,$)=>$!==b),E=u.filter((p,$)=>$!==b);d(h),g(E)},x=()=>{if(!o.trim()&&c.length===0)return;const b=c.length>0?c.some(E=>E.type.startsWith("video/"))?"video":"image":"text",h={text:o.trim(),media:c,type:b};e(h),u.forEach(E=>URL.revokeObjectURL(E))},v=!o.trim()&&c.length===0;return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center overflow-hidden",children:i?t.jsx("img",{src:i,alt:n,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:n.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("textarea",{value:o,onChange:b=>l(b.target.value),placeholder:a?"Редактировать запись...":"Что нового?",className:"w-full border-none resize-none focus:ring-0 text-gray-900 placeholder-gray-500",rows:3}),u.length>0&&t.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:u.map((b,h)=>{var E;return t.jsxs("div",{className:"relative group",children:[(E=c[h])!=null&&E.type.startsWith("video/")?t.jsx("video",{src:b,className:"w-full h-24 object-cover rounded-lg",controls:!0}):t.jsx("img",{src:b,alt:"Preview",className:"w-full h-24 object-cover rounded-lg"}),t.jsx("button",{onClick:()=>y(h),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(et,{className:"w-3 h-3"})})]},h)})}),t.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>{var b;return(b=f.current)==null?void 0:b.click()},className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",title:"Добавить фото или видео",children:t.jsx(Ia,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:t.jsx(cn,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Отмена"}),t.jsx("button",{onClick:x,disabled:v,className:`px-4 py-2 rounded-lg font-medium transition-colors ${v?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a?"Сохранить":"Опубликовать"})]})]})]})]}),t.jsx("input",{ref:f,type:"file",multiple:!0,accept:"image/*,video/*",onChange:m,className:"hidden"})]})},an=({post:e,onReaction:r,onComment:s,onShare:a,onBookmark:n,onEdit:i,onDelete:o})=>{const[l,c]=S.useState(!1),[d,u]=S.useState(""),[g,f]=S.useState(!1),[m,y]=S.useState(!1),x=p=>{r(e.id,p),y(!1)},v=()=>{d.trim()&&(s(e.id,d.trim()),u(""))},b=p=>{i&&(i(e.id,p),f(!1))},h=()=>{o&&o(e.id)},E=p=>{const $=new Date(p),P=Math.floor((new Date().getTime()-$.getTime())/(1e3*60*60));return P<1?"только что":P<24?`${P}ч назад`:P<48?"вчера":$.toLocaleDateString("ru-RU")};return e.reactions.reduce((p,$)=>p+$.count,0),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-4",children:[t.jsx("div",{className:"p-4 pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.userAvatar?t.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full rounded-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:e.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.userName}),t.jsx("div",{className:"text-sm text-gray-500",children:E(e.date)})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(il,{className:"w-5 h-5"})}),t.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10",children:[i&&t.jsx("button",{onClick:()=>f(!0),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Редактировать"}),o&&t.jsx("button",{onClick:h,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Удалить"})]})]})]})}),g&&i&&t.jsx("div",{className:"px-4 pb-4",children:t.jsx(si,{onSubmit:({text:p})=>b(p),onCancel:()=>f(!1),initialText:e.text,isEditing:!0})}),!g&&t.jsxs(t.Fragment,{children:[e.text&&t.jsxs("div",{className:"px-4 pb-3",children:[t.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:e.text}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map(p=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 font-medium",children:["#",p]},p))})]}),e.media&&e.media.length>0&&t.jsx("div",{className:"px-4 pb-3",children:e.type==="video"?t.jsxs("div",{className:"relative",children:[t.jsx("video",{src:e.media[0],className:"w-full rounded-lg",controls:!0}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Wd,{className:"w-12 h-12 text-white opacity-80"})})]}):t.jsx("div",{className:`grid gap-2 ${e.media.length===1?"grid-cols-1":e.media.length===2?"grid-cols-2":"grid-cols-3"}`,children:e.media.map((p,$)=>t.jsx("div",{className:"relative aspect-square",children:t.jsx("img",{src:p,alt:"Post media",className:"w-full h-full object-cover rounded-lg"})},$))})}),(e.likes&&e.likes>0||e.comments.length>0||e.views&&e.views>0)&&t.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[e.likes&&e.likes>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(xt,{className:"w-4 h-4 text-red-500 fill-current"}),t.jsx("span",{children:e.likes})]}),e.comments.length>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Le,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{children:e.comments.length})]}),e.views&&e.views>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(gr,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e.views})]})]}),e.editedAt&&t.jsx("span",{className:"text-xs text-gray-400",children:"ред."})]})}),t.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>y(!m),className:`flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ${e.reactions.some(p=>p.userReacted)?"text-red-500 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[t.jsx(xt,{className:`w-5 h-5 ${e.reactions.some(p=>p.userReacted)?"fill-current":""}`}),t.jsx("span",{className:"text-sm",children:"Нравится"})]}),m&&t.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>x("like"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Нравится",children:t.jsx(dl,{className:"w-6 h-6 text-blue-500"})}),t.jsx("button",{onClick:()=>x("love"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Любовь",children:t.jsx(xt,{className:"w-6 h-6 text-red-500"})}),t.jsx("button",{onClick:()=>x("smile"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Улыбка",children:t.jsx(cn,{className:"w-6 h-6 text-yellow-500"})})]})]}),t.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[t.jsx(Le,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm",children:"Комментировать"})]}),t.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[t.jsx(Hd,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),t.jsx("button",{onClick:()=>n(e.id),className:`p-2 rounded-full transition-colors ${e.isBookmarked?"text-blue-500 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:t.jsx(Xs,{className:`w-5 h-5 ${e.isBookmarked?"fill-current":""}`})})]})}),l&&t.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:[t.jsx("div",{className:"space-y-3 mb-3",children:e.comments.map(p=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:p.userAvatar?t.jsx("img",{src:p.userAvatar,alt:p.userName,className:"w-full h-full rounded-full object-cover"}):t.jsx("span",{className:"text-white text-xs font-medium",children:p.userName.charAt(0).toUpperCase()})}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-gray-900",children:p.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:E(p.date)})]}),t.jsx("p",{className:"text-sm text-gray-800",children:p.text})]})})]},p.id))}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs font-medium",children:"U"})}),t.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-white rounded-full px-3 py-2",children:[t.jsx("input",{type:"text",value:d,onChange:p=>u(p.target.value),placeholder:"Написать комментарий...",className:"flex-1 border-none outline-none text-sm",onKeyPress:p=>p.key==="Enter"&&v()}),t.jsx("button",{onClick:v,disabled:!d.trim(),className:`p-1 rounded-full transition-colors ${d.trim()?"text-blue-500 hover:bg-blue-50":"text-gray-400"}`,children:t.jsx(ol,{className:"w-4 h-4"})})]})]})]})]})]})},F3=({onSearchResults:e,onClose:r,className:s=""})=>{var se;const{posts:a,searchPosts:n}=ct(),[i,o]=S.useState(""),[l,c]=S.useState([]),[d,u]=S.useState("all"),[g,f]=S.useState(""),[m,y]=S.useState(""),[x,v]=S.useState(""),[b,h]=S.useState("date"),[E,p]=S.useState(!1),[$,R]=S.useState([]),[P,T]=S.useState(!1),H=S.useRef(),z=Array.from(new Set(a.flatMap(N=>N.tags||[]))).sort(),A=Array.from(new Set(a.map(N=>({id:N.userId,name:N.userName})))).filter((N,F,Y)=>F===Y.findIndex(O=>O.id===N.id)),K=()=>{T(!0);const N={query:i.trim()||void 0,tags:l.length>0?l:void 0,userId:g||void 0,dateFrom:m||void 0,dateTo:x||void 0,type:d==="all"?void 0:d,limit:50};let F=[...a];if(N.query){const Y=N.query.toLowerCase();F=F.filter(O=>O.text.toLowerCase().includes(Y)||O.userName.toLowerCase().includes(Y))}N.tags&&N.tags.length>0&&(F=F.filter(Y=>Y.tags&&N.tags.some(O=>Y.tags.includes(O)))),N.userId&&(F=F.filter(Y=>Y.userId===N.userId)),N.type&&(F=F.filter(Y=>Y.type===N.type)),N.dateFrom&&(F=F.filter(Y=>Y.date>=N.dateFrom)),N.dateTo&&(F=F.filter(Y=>Y.date<=N.dateTo)),F.sort((Y,O)=>{switch(b){case"likes":return(O.likes||0)-(Y.likes||0);case"comments":return O.comments.length-Y.comments.length;case"views":return(O.views||0)-(Y.views||0);case"date":default:return new Date(O.date).getTime()-new Date(Y.date).getTime()}}),R(F),T(!1),e&&e(F),n(N)};S.useEffect(()=>(H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{i.trim()||l.length>0||g||d!=="all"||m||x?K():(R([]),e&&e([]))},300),()=>{H.current&&clearTimeout(H.current)}),[i,l,g,d,m,x,b]);const q=()=>{o(""),c([]),f(""),u("all"),y(""),v(""),h("date"),R([]),e&&e([])},J=N=>{c(F=>F.includes(N)?F.filter(Y=>Y!==N):[...F,N])},ie=N=>{const F=new Date(N),O=Math.floor((new Date().getTime()-F.getTime())/(1e3*60*60));return O<1?"только что":O<24?`${O}ч назад`:O<48?"вчера":F.toLocaleDateString("ru-RU")};return t.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200 ${s}`,children:[t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Поиск записей"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>p(!E),className:`p-2 rounded-full transition-colors ${E?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,title:"Фильтры",children:t.jsx(on,{className:"w-5 h-5"})}),t.jsx("button",{onClick:q,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Очистить поиск",children:t.jsx(et,{className:"w-5 h-5"})}),r&&t.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Закрыть",children:t.jsx(et,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"mt-4 relative",children:[t.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",value:i,onChange:N=>o(N.target.value),placeholder:"Поиск по записям...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),P&&t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),(l.length>0||g||d!=="all"||m||x)&&t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[l.map(N=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700",children:[t.jsx(Od,{className:"w-3 h-3 mr-1"}),N,t.jsx("button",{onClick:()=>J(N),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:t.jsx(et,{className:"w-3 h-3"})})]},N)),g&&t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-700",children:[t.jsx(ye,{className:"w-3 h-3 mr-1"}),((se=A.find(N=>N.id===g))==null?void 0:se.name)||g,t.jsx("button",{onClick:()=>f(""),className:"ml-2 hover:bg-green-200 rounded-full p-0.5",children:t.jsx(et,{className:"w-3 h-3"})})]}),d!=="all"&&t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-700",children:[d==="text"&&t.jsx(rr,{className:"w-3 h-3 mr-1"}),d==="image"&&t.jsx(Ia,{className:"w-3 h-3 mr-1"}),d==="video"&&t.jsx(At,{className:"w-3 h-3 mr-1"}),d==="text"?"Текст":d==="image"?"Изображения":"Видео",t.jsx("button",{onClick:()=>u("all"),className:"ml-2 hover:bg-purple-200 rounded-full p-0.5",children:t.jsx(et,{className:"w-3 h-3"})})]})]})]}),E&&t.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип контента"}),t.jsxs("select",{value:d,onChange:N=>u(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"all",children:"Все типы"}),t.jsx("option",{value:"text",children:"Только текст"}),t.jsx("option",{value:"image",children:"С изображениями"}),t.jsx("option",{value:"video",children:"С видео"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Автор"}),t.jsxs("select",{value:g,onChange:N=>f(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Все авторы"}),A.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортировка"}),t.jsxs("select",{value:b,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"date",children:"По дате"}),t.jsx("option",{value:"likes",children:"По лайкам"}),t.jsx("option",{value:"comments",children:"По комментариям"}),t.jsx("option",{value:"views",children:"По просмотрам"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата от"}),t.jsx("input",{type:"date",value:m,onChange:N=>y(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата до"}),t.jsx("input",{type:"date",value:x,onChange:N=>v(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),z.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Популярные теги"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:z.slice(0,10).map(N=>t.jsxs("button",{onClick:()=>J(N),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${l.includes(N)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",N]},N))})]})]}),$.length>0&&t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Найдено ",$.length," записей"]})}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:$.map(N=>t.jsx("div",{className:"p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center flex-shrink-0",children:N.userAvatar?t.jsx("img",{src:N.userAvatar,alt:N.userName,className:"w-10 h-10 rounded-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:N.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-gray-900",children:N.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:ie(N.date)}),N.type!=="text"&&t.jsx("span",{className:"text-xs text-gray-500",children:N.type==="image"?t.jsx(Ia,{className:"w-3 h-3 inline"}):t.jsx(At,{className:"w-3 h-3 inline"})})]}),t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:N.text}),N.tags&&N.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[N.tags.slice(0,3).map(F=>t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["#",F]},F)),N.tags.length>3&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",N.tags.length-3]})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(xt,{className:"w-3 h-3"}),t.jsx("span",{children:N.likes||0})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(Le,{className:"w-3 h-3"}),t.jsx("span",{children:N.comments.length})]}),N.views&&t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(gr,{className:"w-3 h-3"}),t.jsx("span",{children:N.views})]})]})]})]})},N.id))})]}),i.trim()&&$.length===0&&!P&&t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Kr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"По вашему запросу ничего не найдено"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Попробуйте изменить параметры поиска"})]})]})},U3=({className:e=""})=>{const{notifications:r,markNotificationAsRead:s,markAllNotificationsAsRead:a,deleteNotification:n}=ct(),{user:i}=Ye(),[o,l]=S.useState(!1),[c,d]=S.useState(!1),[u,g]=S.useState("all"),f=S.useRef(null),m=r.filter(p=>!p.isRead).length;S.useEffect(()=>{const p=$=>{f.current&&!f.current.contains($.target)&&l(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const y=r.filter(p=>u==="unread"?!p.isRead:u==="read"?p.isRead:!0),x=c?y:y.slice(0,5),v=p=>{switch(p){case"new_post":return t.jsx(rr,{className:"w-5 h-5 text-blue-500"});case"reaction":return t.jsx(xt,{className:"w-5 h-5 text-red-500"});case"comment":return t.jsx(Le,{className:"w-5 h-5 text-green-500"});case"new_message":return t.jsx(Le,{className:"w-5 h-5 text-blue-500"});case"follow":return t.jsx(dn,{className:"w-5 h-5 text-purple-500"});case"lesson_reminder":return t.jsx(qe,{className:"w-5 h-5 text-orange-500"});case"system":return t.jsx(Js,{className:"w-5 h-5 text-gray-500"});default:return t.jsx(Gr,{className:"w-5 h-5 text-gray-500"})}},b=p=>{const $=new Date(p),P=Math.floor((new Date().getTime()-$.getTime())/(1e3*60));return P<1?"только что":P<60?`${P}м назад`:P<1440?`${Math.floor(P/60)}ч назад`:$.toLocaleDateString("ru-RU")},h=()=>{i&&a(i.id)},E=p=>{var $,R;p.isRead||s(p.id),p.type==="new_message"&&(($=p.data)!=null&&$.chatId)?(window.location.href=`#chat-${p.data.chatId}`,l(!1)):(R=p.data)!=null&&R.postId};return t.jsxs("div",{className:`relative ${e}`,ref:f,children:[t.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[t.jsx(Gr,{className:"w-6 h-6 text-gray-600"}),m>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:m>99?"99+":m})]}),o&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Уведомления"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[m>0&&t.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Отметить все как прочитанные"}),t.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(et,{className:"w-4 h-4 text-gray-500"})})]})]}),t.jsx("div",{className:"flex items-center space-x-2 mt-3",children:[{key:"all",label:"Все",count:r.length},{key:"unread",label:"Непрочитанные",count:m},{key:"read",label:"Прочитанные",count:r.length-m}].map(({key:p,label:$,count:R})=>t.jsxs("button",{onClick:()=>g(p),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${u===p?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[$," (",R,")"]},p))})]}),t.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:x.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Gr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsxs("p",{className:"text-gray-500",children:[u==="all"&&"Нет уведомлений",u==="unread"&&"Нет непрочитанных уведомлений",u==="read"&&"Нет прочитанных уведомлений"]})]}):t.jsx("div",{className:"divide-y divide-gray-100",children:x.map(p=>t.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${p.isRead?"":"bg-blue-50"}`,onClick:()=>E(p),children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:v(p.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:b(p.createdAt)})]}),!p.isRead&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})}),t.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[!p.isRead&&t.jsx("button",{onClick:$=>{$.stopPropagation(),s(p.id)},className:"p-1 rounded-full hover:bg-green-100 transition-colors",title:"Отметить как прочитанное",children:t.jsx($d,{className:"w-4 h-4 text-green-600"})}),t.jsx("button",{onClick:$=>{$.stopPropagation(),n(p.id)},className:"p-1 rounded-full hover:bg-red-100 transition-colors",title:"Удалить",children:t.jsx(Xr,{className:"w-4 h-4 text-red-600"})})]})]})},p.id))})}),y.length>5&&t.jsx("div",{className:"p-4 border-t border-gray-100",children:t.jsx("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Dd,{className:"w-4 h-4"}),t.jsx("span",{children:"Показать меньше"})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ed,{className:"w-4 h-4"}),t.jsxs("span",{children:["Показать все (",y.length,")"]})]})})})]})]})},W3=({posts:e,currentUserId:r,currentUserName:s,currentUserAvatar:a,onCreatePost:n,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:u,showCreateButton:g=!0,title:f="Записи",showSearch:m=!0,showNotifications:y=!0,showTrending:x=!0,showBookmarks:v=!0})=>{const[b,h]=S.useState(!1),[E,p]=S.useState(!1),[$,R]=S.useState("all"),[P,T]=S.useState(e),[H,z]=S.useState([]);S.useEffect(()=>{let K=e;$==="my"?K=e.filter(q=>q.userId===r):$==="others"?K=e.filter(q=>q.userId!==r):$==="trending"?K=[...e].sort((q,J)=>{const ie=(q.likes||0)+q.comments.length;return(J.likes||0)+J.comments.length-ie}).slice(0,20):$==="bookmarks"&&(K=e.filter(q=>{var J;return(J=q.bookmarks)==null?void 0:J.includes(r)})),T(K)},[e,$,r]);const A=K=>{n(K),h(!1)};return t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:f}),t.jsxs("div",{className:"flex items-center space-x-2",children:[y&&t.jsx(U3,{className:"mr-2"}),m&&t.jsx("button",{onClick:()=>p(!E),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Поиск",children:t.jsx(Kr,{className:"w-5 h-5"})}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:$,onChange:K=>R(K.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Все записи"}),t.jsx("option",{value:"my",children:"Мои записи"}),t.jsx("option",{value:"others",children:"Записи других"}),x&&t.jsx("option",{value:"trending",children:"Популярные"}),v&&t.jsx("option",{value:"bookmarks",children:"Закладки"})]}),t.jsx(on,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),g&&t.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(vr,{className:"w-4 h-4"}),t.jsx("span",{children:"Создать запись"})]})]})]}),E&&t.jsx("div",{className:"mb-6",children:t.jsx(F3,{onSearchResults:z,onClose:()=>p(!1)})}),b&&t.jsx("div",{className:"mb-6",children:t.jsx(si,{onSubmit:A,onCancel:()=>h(!1),userName:s,userAvatar:a})}),t.jsxs("div",{className:"space-y-4",children:[H.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Результаты поиска (",H.length,")"]}),t.jsx("div",{className:"space-y-4",children:H.map(K=>t.jsx(an,{post:K,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:u},K.id))})]}),P.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsxs("div",{className:"text-gray-400 text-lg mb-2",children:[$==="all"&&"Пока нет записей",$==="my"&&"У вас пока нет записей",$==="others"&&"Пока нет записей от других",$==="trending"&&"Пока нет популярных записей",$==="bookmarks"&&"У вас пока нет закладок"]}),t.jsxs("p",{className:"text-gray-500",children:[$==="my"&&g&&"Создайте первую запись!",$==="others"&&"Записи от других пользователей появятся здесь",$==="trending"&&"Популярные записи появятся здесь",$==="bookmarks"&&"Добавляйте записи в закладки!"]})]}):P.map(K=>t.jsx(an,{post:K,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:u},K.id))]})]})},B3=({userId:e,onClose:r,onMessage:s,onBookLesson:a,isModal:n=!1})=>{const{user:i}=Ye(),{posts:o,createPost:l,addReaction:c,addComment:d,sharePost:u,bookmarkPost:g,editPost:f,deletePost:m,allUsers:y}=ct(),[x,v]=S.useState(!1),[b,h]=S.useState(!1),[E,p]=S.useState(!1),[$,R]=S.useState("posts"),P=y.find(ie=>ie.id===e),T=(i==null?void 0:i.id)===e,H=(P==null?void 0:P.role)==="teacher",z=o.filter(ie=>ie.userId===e),A=P==null?void 0:P.profile,K=ie=>{switch(ie){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ie}},q=ie=>{switch(ie){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ie}};if(!P)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(ye,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пользователь не найден"}),t.jsx("p",{className:"text-gray-500",children:"Пользователь с таким ID не существует"})]})});const J=()=>{var ie;return t.jsx("div",{className:`${n?"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4":""}`,children:t.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative ${n?"":"border border-gray-200"}`,children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[r&&t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(nn,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!T&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>h(!b),className:`p-2 rounded-full transition-colors ${b?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Xs,{className:`w-5 h-5 ${b?"fill-current":""}`})}),t.jsx("button",{onClick:()=>v(!x),className:`p-2 rounded-full transition-colors ${x?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(xt,{className:`w-5 h-5 ${x?"fill-current":""}`})})]}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(zt,{className:"w-5 h-5"})}),T&&t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Js,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),t.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{className:"text-white flex-1 mr-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(A==null?void 0:A.name)||P.name||"Пользователь"}),t.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[H&&(A==null?void 0:A.experience)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Ht,{className:"h-4 w-4 text-yellow-300"}),t.jsx("span",{className:"font-semibold text-xs",children:K(A.experience)})]}),(A==null?void 0:A.rating)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Ct,{className:"h-4 w-4 text-yellow-300 fill-current"}),t.jsx("span",{className:"font-semibold text-xs",children:A.rating})]}),(A==null?void 0:A.city)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(kt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-semibold text-xs",children:A.city})]})]})]}),t.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:z.length}),t.jsx("div",{className:"text-sm opacity-80",children:"записей"})]})]})})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[t.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[t.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),A!=null&&A.avatar&&A.avatar.trim()!==""?t.jsx("img",{src:A.avatar,alt:P.name,className:"w-36 h-36 object-cover rounded-full",onError:se=>{var F;const N=se.target;N.style.display="none",(F=N.nextElementSibling)==null||F.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${A!=null&&A.avatar&&A.avatar.trim()!==""?"hidden":""}`,children:t.jsx(ye,{className:"h-20 w-20 text-white"})})]}),!T&&t.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>v(!x),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${x?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:t.jsx(xt,{className:`w-5 h-5 ${x?"fill-current":""}`})}),t.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:t.jsx(zt,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[!T&&t.jsxs(t.Fragment,{children:[H&&a&&t.jsxs("button",{onClick:()=>a(P.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(We,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),s&&t.jsxs("button",{onClick:()=>s(P.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Le,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),t.jsxs("button",{onClick:()=>p(!E),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(gr,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]}),T&&t.jsxs("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(ll,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Редактировать профиль"})]})]})]})]}),E&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.phone&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(pr,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:P.phone})]}),P.email&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(ln,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:P.email})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:z.length}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Записей"})]}),H&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(A==null?void 0:A.lessonsCount)||0}),t.jsx("div",{className:"text-green-100 text-xs",children:"Проведено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:((ie=A==null?void 0:A.students)==null?void 0:ie.length)||0}),t.jsx("div",{className:"text-purple-100 text-xs",children:"Учеников"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(A==null?void 0:A.rating)||0}),t.jsx("div",{className:"text-orange-100 text-xs",children:"Рейтинг"})]})]}),!H&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-green-100 text-xs",children:"Посещено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-purple-100 text-xs",children:"Преподавателей"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-orange-100 text-xs",children:"Дней в системе"})]})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"posts",label:"Записи",count:z.length},{id:"about",label:"О пользователе",count:null},{id:"lessons",label:H?"Расписание":"Мои уроки",count:0},{id:"reviews",label:"Отзывы",count:0}].map(se=>t.jsxs("button",{onClick:()=>R(se.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${$===se.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[se.label,se.count!==null&&t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:se.count})]},se.id))})}),t.jsxs("div",{className:"min-h-[400px]",children:[$==="posts"&&t.jsx("div",{className:"space-y-6",children:t.jsx(W3,{posts:z,currentUserId:(i==null?void 0:i.id)||"",currentUserName:(i==null?void 0:i.name)||"",currentUserAvatar:i==null?void 0:i.avatar,onCreatePost:l,onReaction:c,onComment:d,onShare:u,onBookmark:g,onEdit:f,onDelete:m,showCreateButton:T,title:`Записи ${(A==null?void 0:A.name)||P.name}`,showSearch:!0,showNotifications:!1,showTrending:!1,showBookmarks:!0})}),$==="about"&&t.jsxs("div",{className:"space-y-3",children:[(A==null?void 0:A.bio)&&t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-indigo-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"О пользователе"]}),t.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-md p-2 border border-indigo-200/50",children:t.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line text-xs",children:A.bio})})]}),H&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[(A==null?void 0:A.subjects)&&A.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Предметы"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.subjects.map((se,N)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:se},N))})]}),(A==null?void 0:A.grades)&&A.grades.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Классы"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.grades.map((se,N)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-0.5 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:se},N))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2.5",children:[(A==null?void 0:A.hourlyRate)&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-2.5 text-center shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-purple-900 mb-1.5 flex items-center justify-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-purple-500 to-violet-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Стоимость"]}),t.jsxs("div",{className:"text-base font-bold text-purple-700 bg-white/60 backdrop-blur-sm rounded-md py-1 px-1.5 border border-purple-200/50",children:[A.hourlyRate," ₽/час"]})]}),(A==null?void 0:A.formats)&&A.formats.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-orange-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-orange-500 to-amber-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Форматы"]}),t.jsx("div",{className:"space-y-1",children:A.formats.map((se,N)=>t.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-orange-200/50",children:[t.jsx(Gt,{className:"h-3 w-3 text-orange-600"}),t.jsx("span",{className:"text-orange-800 text-xs font-medium",children:q(se)})]},N))})]}),(A==null?void 0:A.durations)&&A.durations.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-cyan-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Длительность"]}),t.jsx("div",{className:"space-y-1",children:A.durations.map((se,N)=>t.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-cyan-200/50",children:[t.jsx(Gt,{className:"h-3 w-3 text-cyan-600"}),t.jsxs("span",{className:"text-cyan-800 text-xs font-medium",children:[se," минут"]})]},N))})]})]})]}),!H&&A&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[A.subjects&&A.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Интересуется предметами"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.subjects.map((se,N)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:se},N))})]}),A.grade&&t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Класс"]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-1 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:A.grade})]})]})]}),$==="lessons"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(qe,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:H?"Расписание пока не настроено":"Уроки пока не запланированы"}),t.jsx("p",{className:"text-gray-500",children:H?"Настройте расписание для проведения уроков":"Запишитесь на уроки к преподавателям"})]}),$==="reviews"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Ct,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),t.jsx("p",{className:"text-gray-500",children:"Отзывы о пользователе появятся здесь"})]})]})]})]})})};return n?t.jsx(J,{}):t.jsx(J,{})},H3=()=>{const{lessons:e,studentProfiles:r,createSlot:s,bookLesson:a}=ct(),{user:n}=Ye(),[i,o]=S.useState(),[l,c]=S.useState(!1),[d,u]=S.useState(!1),[g,f]=S.useState(null),[m,y]=S.useState({subject:"",date:"",startTime:"",endTime:"",duration:60,lessonType:"regular",format:"online",price:1e3,experience:"beginner",grades:[],goals:[]}),[x,v]=S.useState(!1),[b,h]=S.useState(""),[E,p]=S.useState(!1),[$,R]=S.useState(null),[P,T]=S.useState(null),H=e.filter(F=>F.teacherId===(n==null?void 0:n.id)),z={};H.forEach(F=>{z[F.studentId]||(z[F.studentId]={studentName:F.studentName,studentId:F.studentId,lessons:[]}),z[F.studentId].lessons.push(F)});const A=Object.values(z),K=(F,Y)=>{alert(`Чат с ${Y} открыт! Перейдите в раздел 'Чаты' для общения.`)},q=F=>{o(F),c(!0)},J=()=>{c(!1),o(null)},ie=F=>{R(F),p(!0)},se=async()=>{if(!(!n||!g)){v(!0),h("");try{await s({...m,teacherId:n.id,teacherName:n.name},g.id,g.name,{mode:"assign"}),u(!1)}catch{h("Ошибка при создании или бронировании слота")}finally{v(!1)}}},N=i?r[i.studentId]:void 0;return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ученики"}),t.jsx("p",{className:"text-gray-600",children:"Здесь отображаются все ученики, которые бронировали у вас уроки, и история ваших занятий с ними"})]}),A.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(ye,{className:"h-6 w-6 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет учеников"}),t.jsx("p",{className:"text-gray-600",children:"Ученики появятся здесь после бронирования уроков"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(F=>t.jsx("div",{className:"card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden cursor-pointer",onClick:()=>q(F),children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:t.jsx(ye,{className:"h-6 w-6 text-white"})}),t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:F.studentName})}),t.jsxs("div",{className:"ml-auto flex items-center space-x-1",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Просмотреть записи",onClick:Y=>{Y.stopPropagation(),T(F.studentId)},children:t.jsx(rr,{className:"h-5 w-5"})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Подробнее о профиле",onClick:Y=>{Y.stopPropagation(),q(F)},children:t.jsx(Pd,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-md font-bold text-gray-800 mb-2 flex items-center",children:[t.jsx(qe,{className:"h-4 w-4 mr-1 text-blue-500"}),"Забронированные уроки"]}),F.lessons.length===0?t.jsx("div",{className:"text-gray-500 text-sm",children:"Нет уроков"}):t.jsx("ul",{className:"space-y-2",children:F.lessons.map(Y=>t.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:Y.subject}),t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:[Y.date," ",Y.startTime,"-",Y.endTime]}),t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",Y.status==="completed"?"Завершен":"Запланирован",")"]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{onClick:O=>{O.stopPropagation(),K(F.studentId,F.studentName)},className:"p-1 text-blue-600 hover:bg-blue-50 rounded-full",title:"Чат с учеником",children:t.jsx(Le,{className:"h-4 w-4"})})})]},Y.id))})]})]})},F.studentId))}),l&&i&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:J,title:"Закрыть",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"flex flex-col items-center mb-6",children:[N!=null&&N.avatar&&N.avatar.trim()!==""?t.jsx("img",{src:N.avatar,alt:"avatar",className:"w-20 h-20 rounded-full object-cover mb-2",onError:F=>{var O;const Y=F.target;Y.style.display="none",(O=Y.nextElementSibling)==null||O.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center mb-2 ${N!=null&&N.avatar&&N.avatar.trim()!==""?"hidden":""}`,children:t.jsx(ye,{className:"h-10 w-10 text-white"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.studentName})]}),t.jsxs("div",{className:"space-y-2",children:[(N==null?void 0:N.grade)&&t.jsxs("div",{className:"flex items-center text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"Класс:"})," ",N.grade]}),(N==null?void 0:N.subjects)&&N.subjects.length>0&&t.jsxs("div",{className:"flex items-center text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"Предметы:"})," ",N.subjects.join(", ")]}),(N==null?void 0:N.bio)&&t.jsxs("div",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"О себе:"})," ",N.bio]}),!N&&t.jsx("div",{className:"text-gray-400 text-sm",children:"Профиль не заполнен"}),t.jsx("button",{onClick:()=>ie({id:i.studentId,name:i.studentName}),className:"btn btn-primary mt-4",children:"Назначить урок"})]})]})}),d&&g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>u(!1),title:"Закрыть",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("h3",{children:["Назначить урок для ",g.name]}),t.jsxs("form",{className:"flex flex-col gap-2",children:[t.jsx("input",{type:"text",placeholder:"Предмет",value:m.subject,onChange:F=>y({...m,subject:F.target.value}),required:!0}),t.jsx("input",{type:"date",value:m.date,onChange:F=>y({...m,date:F.target.value}),required:!0}),t.jsx("input",{type:"time",value:m.startTime,onChange:F=>y({...m,startTime:F.target.value}),required:!0}),t.jsx("input",{type:"time",value:m.endTime,onChange:F=>y({...m,endTime:F.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Цена",value:m.price,onChange:F=>y({...m,price:Number(F.target.value)})}),t.jsxs("select",{value:m.lessonType,onChange:F=>y({...m,lessonType:F.target.value}),children:[t.jsx("option",{value:"regular",children:"Обычный"}),t.jsx("option",{value:"trial",children:"Пробный"})]}),t.jsxs("select",{value:m.format,onChange:F=>y({...m,format:F.target.value}),children:[t.jsx("option",{value:"online",children:"Онлайн"}),t.jsx("option",{value:"offline",children:"Оффлайн"})]}),t.jsxs("select",{value:m.experience,onChange:F=>y({...m,experience:F.target.value}),children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"experienced",children:"Опытный"})]}),b&&t.jsx("div",{className:"text-red-500",children:b}),t.jsx("button",{type:"button",className:"btn btn-success mt-2",onClick:se,disabled:x,children:x?"Назначение...":"Назначить"})]})]})}),E&&$&&t.jsx(fr,{open:E,onClose:()=>p(!1),children:t.jsxs("div",{style:{minWidth:1100,minHeight:600,maxWidth:"98vw"},children:[t.jsxs("h2",{style:{marginBottom:16},children:["Назначить урок для ",$.name]}),t.jsx(rd,{mode:"assign",student:$,onAssign:()=>p(!1)})]})}),P&&t.jsx(B3,{userId:P,onClose:()=>T(null),onMessage:F=>{T(null)},onBookLesson:F=>{T(null)},isModal:!0})]})},z3=()=>{const{lessons:e,cancelLesson:r,rescheduleLesson:s,getOrCreateChat:a}=ct(),{user:n}=Ye(),[i,o]=S.useState(!1),[l,c]=S.useState(null),[d,u]=S.useState(""),[g,f]=S.useState(""),m=e.filter(T=>T.studentId===(n==null?void 0:n.id)),y=m.filter(T=>T.status==="scheduled"),x=m.filter(T=>T.status==="completed"),v=(T,H)=>{n&&a(n.id,T,n.name,H)},b=T=>{window.confirm("Вы уверены, что хотите отменить урок?")&&r(T)},h=()=>{l&&d&&g&&(s(l.id,d,g),o(!1),c(null),u(""),f(""))},E=T=>{c(T),u(T.date),f(T.startTime),o(!0)},p=T=>{switch(T){case"online":return t.jsx(At,{className:"h-4 w-4"});case"offline":return t.jsx(kt,{className:"h-4 w-4"});case"mini-group":return t.jsx(dn,{className:"h-4 w-4"});default:return t.jsx(At,{className:"h-4 w-4"})}},$=T=>{switch(T){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return T}},R=T=>T==="scheduled"?t.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:[t.jsx(zd,{className:"h-4 w-4 mr-2"}),"Запланирован"]}):t.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-green-500 to-green-600 text-white shadow-sm",children:[t.jsx(qr,{className:"h-4 w-4 mr-2"}),"Завершен"]}),P=({lesson:T,isScheduled:H})=>t.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-4 text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white opacity-10 rounded-full translate-y-8 -translate-x-8"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold mb-1",children:T.subject}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ye,{className:"h-4 w-4 text-blue-200"}),t.jsx("span",{className:"text-blue-100 text-sm font-medium",children:T.teacherName})]})]}),R(T.status)]}),t.jsxs("div",{className:"flex items-center space-x-3 text-blue-100",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[p(T.format),t.jsx("span",{className:"text-xs font-medium",children:$(T.format)})]}),T.lessonType==="trial"&&t.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-400 bg-opacity-20 px-2 py-1 rounded-full",children:[t.jsx(Ct,{className:"h-3 w-3 text-yellow-300"}),t.jsx("span",{className:"text-yellow-200 text-xs font-medium",children:"Пробный"})]})]})]})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:t.jsx(qe,{className:"h-4 w-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Дата"}),t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:T.date})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:t.jsx(Gt,{className:"h-4 w-4 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Время"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[T.startTime," - ",T.endTime]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:t.jsx(Gd,{className:"h-4 w-4 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Длительность"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[T.duration," мин"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Стоимость"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[T.price,"₽"]})]})]}),H&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>v(T.teacherId,T.teacherName),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[t.jsx(Le,{className:"h-4 w-4"}),t.jsx("span",{children:"Чат"})]}),T.format==="online"&&t.jsxs("button",{className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[t.jsx(At,{className:"h-4 w-4"}),t.jsx("span",{children:"Видеозвонок"})]})]}),t.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[t.jsxs("button",{onClick:()=>E(T),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg text-sm font-medium transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[t.jsx(ll,{className:"h-3 w-3"}),t.jsx("span",{children:"Перенести"})]}),t.jsxs("button",{onClick:()=>b(T.id),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-all duration-200 border border-red-200 hover:border-red-300",children:[t.jsx(Xr,{className:"h-3 w-3"}),t.jsx("span",{children:"Отменить"})]})]})]}),!H&&t.jsxs("div",{className:"flex items-center justify-center space-x-2 py-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[t.jsx(qr,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Урок успешно завершен"})]})]}),t.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]});return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Мои уроки"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Управляйте вашими запланированными и завершенными уроками. Отслеживайте прогресс и достигайте новых высот в обучении."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(qe,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-gray-900",children:y.length}),t.jsx("p",{className:"text-sm text-gray-600",children:"Запланировано"})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(qr,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-gray-900",children:x.length}),t.jsx("p",{className:"text-sm text-gray-600",children:"Завершено"})]})]})}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(ul,{className:"h-6 w-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl font-bold text-gray-900",children:m.length}),t.jsx("p",{className:"text-sm text-gray-600",children:"Всего уроков"})]})]})})]}),t.jsxs("div",{className:"mb-12",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(qe,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Запланированные уроки"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ваши предстоящие занятия"})]})]}),y.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(T=>t.jsx(P,{lesson:T,isScheduled:!0},T.id))}):t.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(qe,{className:"h-8 w-8 text-blue-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет запланированных уроков"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"Забронируйте свой первый урок на главной странице и начните свой путь к знаниям"}),t.jsxs("button",{className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[t.jsx(Kd,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать урок"})]})]})]}),t.jsxs("div",{className:"mb-12",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(Ht,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Завершенные уроки"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ваши достижения и пройденный материал"})]})]}),x.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(T=>t.jsx(P,{lesson:T,isScheduled:!1},T.id))}):t.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(Ht,{className:"h-8 w-8 text-green-600"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет завершенных уроков"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"После завершения уроков здесь будут отображаться ваши достижения и прогресс"}),t.jsxs("div",{className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium",children:[t.jsx(cl,{className:"h-4 w-4"}),t.jsx("span",{children:"Достижения появятся здесь"})]})]})]}),t.jsx("div",{className:"text-center py-12 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl text-white shadow-xl",children:t.jsxs("div",{className:"max-w-xl mx-auto px-6",children:[t.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Готовы к следующему уроку?"}),t.jsx("p",{className:"text-lg text-blue-100 mb-6",children:"Продолжайте обучение и достигайте новых высот вместе с нашими преподавателями"}),t.jsxs("button",{className:"inline-flex items-center space-x-2 px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[t.jsx(Ud,{className:"h-5 w-5"}),t.jsx("span",{children:"Найти преподавателя"})]})]})})]}),i&&l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Перенести урок"}),t.jsx("button",{onClick:()=>o(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx(et,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Урок:"})," ",l.subject," с ",l.teacherName]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новая дата"}),t.jsx("input",{type:"date",value:d,onChange:T=>u(T.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новое время"}),t.jsx("input",{type:"time",value:g,onChange:T=>f(T.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),t.jsxs("div",{className:"flex space-x-4 mt-8",children:[t.jsx("button",{onClick:h,disabled:!d||!g,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Перенести урок"}),t.jsx("button",{onClick:()=>o(!1),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Отмена"})]})]})})})]})},G3=()=>{const{chats:e,sendMessage:r,sendMessageToUser:s,allUsers:a,setAllUsers:n,teacherProfiles:i,studentProfiles:o,lessons:l,deleteChat:c,markChatAsRead:d,clearChatMessages:u,archiveChat:g,unarchiveChat:f,getOrCreateChat:m,loadChatsFromServer:y,socketRef:x}=ct(),{user:v}=Ye(),[b,h]=S.useState(null),[E,p]=S.useState(""),[$,R]=S.useState(""),[P,T]=S.useState(!1),[H,z]=S.useState(null),[A,K]=S.useState([]),[q,J]=S.useState(null),[ie,se]=S.useState(null),[N,F]=S.useState(!1),[Y,O]=S.useState(!1),[oe,ge]=S.useState(!1),[de,fe]=S.useState(!1),[pe,X]=S.useState(!1),[xe,$e]=S.useState(""),Z=S.useRef(null),ve=S.useRef(null),Se=S.useCallback(()=>{var I;(I=Z.current)==null||I.scrollIntoView({behavior:"smooth"})},[]);S.useEffect(()=>{Se()},[b,G.length,Se]);const ze=S.useMemo(()=>{if(!v)return[];const I=e.filter(Q=>Q.participants.includes(v.id)&&(de?Q.archived:!Q.archived));return $?I.filter(Q=>{var we,Je;const ue=Q.participantNames.find(Ut=>Ut!==v.name);return(ue==null?void 0:ue.toLowerCase().includes($.toLowerCase()))||((Je=(we=Q.lastMessage)==null?void 0:we.content)==null?void 0:Je.toLowerCase().includes($.toLowerCase()))}):I},[e,v,$,de]);S.useEffect(()=>{v&&(console.log("ChatList: Loading chats for user:",v.id),y())},[v,y]),S.useEffect(()=>{if(e.length>0&&!b){const I=e.find(Q=>Q.participants.includes((v==null?void 0:v.id)||"")&&!Q.archived);I&&h(I.id)}},[e,b,v]),S.useEffect(()=>{var I;if(b&&v){const Q=e.find(ue=>ue.id===b);Q&&((I=Q.messages)!=null&&I.some(we=>we.senderId!==v.id&&!we.isRead))&&d(b)}},[b,e,v,d]);const Xe=I=>{let Q=a.find(ue=>ue.id===I);if(!Q){const ue=i?i[I]:null;ue&&(Q={id:I,role:"teacher",profile:ue,avatar:ue.avatar||"",name:ue.name||"",email:ue.email||"",nickname:""});const we=o?o[I]:null;if(!Q&&we&&(Q={id:I,role:"student",profile:we,avatar:we.avatar||"",name:we.name||"",email:we.email||"",nickname:""}),Q){const Je=[...a,Q];n(Je),localStorage.setItem("tutoring_users",JSON.stringify(Je))}}return Q||null};console.log("🔍 ChatList DEBUG INFO:"),console.log("- Current user:",{id:v==null?void 0:v.id,name:v==null?void 0:v.name,role:v==null?void 0:v.role}),console.log("- All chats count:",e.length),console.log("- User chats count:",ze.length),e.length>0&&(console.log("- All chats details:"),e.forEach((I,Q)=>{var ue;console.log(`  Chat ${Q+1}:`,{id:I.id,participants:I.participants,participantNames:I.participantNames,includesUser:I.participants.includes((v==null?void 0:v.id)||""),messagesCount:((ue=I.messages)==null?void 0:ue.length)||0})})),console.log("- Filtered chats count:",ze.length),console.log("🔍 END DEBUG INFO");const Ae=S.useMemo(()=>b?e.find(I=>I.id===b):null,[b,e]),G=S.useMemo(()=>(Ae==null?void 0:Ae.messages)||[],[Ae]),he=S.useCallback(()=>{!E.trim()||!b||!v||(r(b,v.id,v.name,E.trim()),p(""),F(!1))},[E,b,v,r]),me=S.useMemo(()=>!v||!a?[]:a.filter(I=>I.id!==v.id),[a,v]),Re=S.useCallback((I,Q)=>{if(!xe.trim()||!v)return;console.log("🔍 ChatList handleSendMessageToUser DEBUG:"),console.log("- Sender:",{id:v.id,name:v.name}),console.log("- Receiver:",{id:I,name:Q}),console.log("- Message:",xe.trim());const ue=s(v.id,v.name,I,Q,xe.trim());console.log("- Chat created/opened with ID:",ue),h(ue),$e(""),X(!1),console.log("🔍 END ChatList handleSendMessageToUser DEBUG")},[xe,v,s]),M=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),he())},W=I=>I.participantNames.find(Q=>Q!==(v==null?void 0:v.name))||"Неизвестный пользователь",U=I=>I.participants.find(Q=>Q!==(v==null?void 0:v.id))||"",L=I=>{try{const Q=new Date(I);return Yo(Q)?Ue(Q,"HH:mm",{locale:ht}):Vo(Q)?"Вчера":XC(Q)?Ue(Q,"EEEE",{locale:ht}):Ue(Q,"dd.MM.yyyy",{locale:ht})}catch{return""}},w=I=>{try{const Q=new Date(I);return Yo(Q)?Ue(Q,"HH:mm",{locale:ht}):Vo(Q)?"Вчера":Ue(Q,"dd.MM",{locale:ht})}catch{return""}},j=I=>{console.log("handleDeleteChat called with chatId:",I),console.log("Current chats in component:",e.length);const Q=e.find(we=>we.id===I),ue=Q?W(Q):"пользователем";if(confirm(`Вы уверены, что хотите удалить чат с ${ue}? Это действие нельзя отменить.`))try{console.log("User confirmed deletion. Deleting chat:",I),c(I),b===I&&(console.log("Removing selection from deleted chat"),h(null)),J(null),se(null),setTimeout(()=>{console.log("Forcing state update after chat deletion"),J(null)},100),console.log("Chat deletion process completed")}catch(we){console.error("Error deleting chat:",we),alert("Ошибка при удалении чата. Попробуйте еще раз.")}else console.log("User cancelled chat deletion")},C=I=>{console.log("handleMarkAsRead called with chatId:",I);try{d(I),J(null),console.log("Chat marked as read successfully")}catch(Q){console.error("Error marking chat as read:",Q),alert("Ошибка при отметке чата как прочитанного.")}},D=I=>{var we;console.log("handleClearMessages called with chatId:",I);const Q=e.find(Je=>Je.id===I),ue=((we=Q==null?void 0:Q.messages)==null?void 0:we.length)||0;if(ue===0){alert("В этом чате нет сообщений для очистки."),J(null);return}if(confirm(`Вы уверены, что хотите очистить все ${ue} сообщений в этом чате? Это действие нельзя отменить.`))try{console.log("Clearing messages for chat:",I),u(I),J(null),console.log("Messages cleared successfully")}catch(Je){console.error("Error clearing messages:",Je),alert("Ошибка при очистке сообщений.")}},V=I=>{console.log("handleArchiveChat called with chatId:",I);try{g(I),J(null),b===I&&h(null),console.log("Chat archived successfully")}catch(Q){console.error("Error archiving chat:",Q),alert("Ошибка при архивировании чата.")}},ne=I=>{console.log("handleUnarchiveChat called with chatId:",I);try{f(I),J(null),console.log("Chat unarchived successfully")}catch(Q){console.error("Error unarchiving chat:",Q),alert("Ошибка при восстановлении чата.")}},Ee=()=>{alert("Функция создания нового чата будет добавлена в следующем обновлении.")},Oe=I=>{const Q=I.target.files;Q&&Q.length>0&&console.log("Files to upload:",Q),ge(!1)},jt=I=>{console.log("handleShowProfile called with chatId:",I);try{const Q=e.find(ue=>ue.id===I);if(console.log("Found chat:",Q),Q){const ue=U(Q);console.log("Other participant ID:",ue),ue?(z(ue),T(!0),console.log("Profile modal opened for user:",ue)):alert("Не удалось определить пользователя для показа профиля.")}else alert("Чат не найден.");J(null)}catch(Q){console.error("Error showing profile:",Q),alert("Ошибка при открытии профиля пользователя."),J(null)}},Ot=()=>{e.filter(Q=>{var ue;return Q.participants.includes((v==null?void 0:v.id)||"")&&!Q.archived&&((ue=Q.messages)==null?void 0:ue.some(we=>we.senderId!==(v==null?void 0:v.id)&&!we.isRead))}).forEach(Q=>{d(Q.id)})};S.useEffect(()=>{const I=Q=>{const ue=Q.target,we=ue.closest('button[onClick*="setShowChatMenu"]'),Je=ue.closest(".chat-menu");q&&!we&&!Je&&(console.log("Click outside menu detected, closing menu"),J(null))};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[q]);const Rr=e.filter(I=>{var Q;return I.participants.includes((v==null?void 0:v.id)||"")&&!I.archived&&((Q=I.messages)==null?void 0:Q.some(ue=>ue.senderId!==(v==null?void 0:v.id)&&!ue.isRead))}).length;return t.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Мои чаты"}),t.jsx("p",{className:"text-gray-600 text-sm",children:Rr>0?`${Rr} непрочитанных сообщений`:"Общайтесь с преподавателями и учениками"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[Rr>0&&t.jsx("button",{onClick:Ot,className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:"Отметить все как прочитанные"}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(Js,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>fe(!de),className:`px-3 py-1 text-sm rounded-lg transition-colors ${de?"bg-gray-200 text-gray-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:de?"Активные":"Архив"}),t.jsx("button",{onClick:Ee,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Создать новый чат",children:t.jsx(vr,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Поиск чатов...",value:$,onChange:I=>R(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),t.jsxs("button",{onClick:()=>X(!0),className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[t.jsx(vr,{className:"h-4 w-4"}),t.jsx("span",{children:"Новый чат"})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:ze.length>0?ze.map(I=>{var Ut,Lr;const Q=U(I),ue=Xe(Q),we=b===I.id,Je=(Ut=I.messages)==null?void 0:Ut.some(be=>be.senderId!==(v==null?void 0:v.id)&&!be.isRead);return t.jsxs("div",{className:`relative p-4 hover:bg-gray-50 cursor-pointer transition-colors chat-menu ${we?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>h(I.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[ue!=null&&ue.avatar?t.jsx("img",{src:ue.avatar,alt:"avatar",className:"h-12 w-12 rounded-full object-cover",onError:be=>{var k;const Ir=be.target;Ir.style.display="none",(k=Ir.nextElementSibling)==null||k.classList.remove("hidden")}}):t.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:W(I).charAt(0).toUpperCase()})}),Je&&t.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs font-medium",children:((Lr=I.messages)==null?void 0:Lr.filter(be=>be.senderId!==(v==null?void 0:v.id)&&!be.isRead).length)||0})})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:[W(I),I.archived&&t.jsx("span",{className:"ml-2 text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Архив"})]}),I.lastMessage&&t.jsx("span",{className:"text-xs text-gray-400",children:w(I.lastMessage.timestamp)})]}),I.lastMessage?t.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:I.lastMessage.content}):t.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Нет сообщений"})]}),t.jsx("button",{onClick:be=>{console.log("Menu button clicked for chat:",I.id),be.stopPropagation(),J(q===I.id?null:I.id)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(il,{className:"w-4 h-4"})})]}),q===I.id&&t.jsxs("div",{className:"absolute right-2 top-12 bg-white border border-gray-200 rounded-lg shadow-xl py-1 z-50 min-w-[180px]",children:[t.jsxs("button",{onClick:be=>{console.log("Profile button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),jt(I.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(ye,{className:"w-4 h-4"}),t.jsx("span",{children:"Профиль"})]}),t.jsxs("button",{onClick:be=>{console.log("Mark as read button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),C(I.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(gr,{className:"w-4 h-4"}),t.jsx("span",{children:"Отметить как прочитанное"})]}),t.jsxs("button",{onClick:be=>{console.log("Archive button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),V(I.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(ui,{className:"w-4 h-4"}),t.jsx("span",{children:"Архивировать"})]}),I.archived&&t.jsxs("button",{onClick:be=>{console.log("Unarchive button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),ne(I.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(ui,{className:"w-4 h-4"}),t.jsx("span",{children:"Восстановить"})]}),t.jsxs("button",{onClick:be=>{console.log("Clear messages button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),D(I.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(Xr,{className:"w-4 h-4"}),t.jsx("span",{children:"Очистить сообщения"})]}),t.jsx("hr",{className:"my-1"}),t.jsxs("button",{onClick:be=>{console.log("Delete chat button clicked for chat:",I.id),be.preventDefault(),be.stopPropagation(),j(I.id)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2 transition-colors",children:[t.jsx(Xr,{className:"w-4 h-4"}),t.jsx("span",{children:"Удалить чат"})]})]})]},I.id)}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[t.jsx(Le,{className:"w-16 h-16 mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"Нет чатов"}),t.jsx("p",{className:"text-sm text-center",children:"Начните общение с преподавателями или учениками"})]})})]}),t.jsx("div",{className:"flex-1 flex flex-col bg-white",children:Ae?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const I=U(Ae),Q=Xe(I);return Q!=null&&Q.avatar?t.jsx("img",{src:Q.avatar,alt:"avatar",className:"h-10 w-10 rounded-full object-cover"}):t.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:W(Ae).charAt(0).toUpperCase()})})})(),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:W(Ae)}),t.jsx("p",{className:"text-sm text-gray-500",children:(()=>{const I=U(Ae),Q=Xe(I);return(Q==null?void 0:Q.role)==="teacher"?"Преподаватель":"Ученик"})()})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(pr,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(At,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{const I=U(Ae);z(I),T(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(ye,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[G&&G.length>0?G.map(I=>t.jsx("div",{className:`flex ${I.senderId===(v==null?void 0:v.id)?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${I.senderId===(v==null?void 0:v.id)?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[t.jsx("p",{className:"text-sm",children:I.content}),t.jsxs("div",{className:`flex items-center justify-end mt-1 space-x-1 ${I.senderId===(v==null?void 0:v.id)?"text-blue-100":"text-gray-400"}`,children:[t.jsx("span",{className:"text-xs",children:L(I.timestamp)}),I.senderId===(v==null?void 0:v.id)&&t.jsx(Cd,{className:"w-3 h-3"})]})]})},I.id)):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[t.jsx(Le,{className:"w-16 h-16 mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"Начните общение"}),t.jsx("p",{className:"text-sm text-center",children:"Отправьте первое сообщение"})]}),t.jsx("div",{ref:Z})]}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-end space-x-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("textarea",{value:E,onChange:I=>{p(I.target.value),F(I.target.value.length>0)},onKeyPress:M,placeholder:"Введите сообщение...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),t.jsxs("div",{className:"absolute right-3 bottom-3 flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>O(!Y),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(cn,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>ge(!oe),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(mi,{className:"w-5 h-5"})})]})]}),t.jsx("button",{onClick:he,disabled:!E.trim(),className:"p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:t.jsx(ol,{className:"w-5 h-5"})})]}),oe&&t.jsx("div",{className:"mt-2 p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>{var I;return(I=ve.current)==null?void 0:I.click()},className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx(mi,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Файл"})]}),t.jsxs("button",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx(Ld,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Голосовое"})]})]})}),t.jsx("input",{ref:ve,type:"file",multiple:!0,onChange:Oe,className:"hidden"})]})]}):t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[t.jsx(Le,{className:"w-24 h-24 mb-6 text-gray-300"}),t.jsx("h2",{className:"text-2xl font-medium mb-2",children:"Выберите чат"}),t.jsx("p",{className:"text-center",children:"Выберите чат из списка слева, чтобы начать общение"})]})})]}),P&&H&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Профиль пользователя"}),t.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(nn,{className:"w-5 h-5"})})]}),(()=>{var Q;const I=Xe(H);return I?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[I.avatar?t.jsx("img",{src:I.avatar,alt:"avatar",className:"h-16 w-16 rounded-full object-cover"}):t.jsx("div",{className:"h-16 w-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium text-lg",children:((Q=I.name)==null?void 0:Q.charAt(0).toUpperCase())||"U"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:I.name||"Неизвестный пользователь"}),t.jsx("p",{className:"text-gray-500",children:I.role==="teacher"?"Преподаватель":"Ученик"}),I.email&&t.jsx("p",{className:"text-sm text-gray-400",children:I.email})]})]}),I.profile&&t.jsxs("div",{className:"space-y-4",children:[I.profile.bio&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"О себе"}),t.jsx("p",{className:"text-gray-600",children:I.profile.bio})]}),I.profile.subjects&&I.profile.subjects.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Предметы"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:I.profile.subjects.map((ue,we)=>t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:ue},we))})]}),I.profile.experience&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Опыт"}),t.jsxs("p",{className:"text-gray-600",children:[I.profile.experience==="beginner"&&"Начинающий",I.profile.experience==="experienced"&&"Опытный",I.profile.experience==="professional"&&"Профессионал"]})]}),I.profile.city&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Город"}),t.jsx("p",{className:"text-gray-600",children:I.profile.city})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[t.jsxs("button",{onClick:()=>{T(!1)},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(pr,{className:"w-4 h-4"}),t.jsx("span",{children:"Позвонить"})]}),t.jsxs("button",{onClick:()=>{T(!1)},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(At,{className:"w-4 h-4"}),t.jsx("span",{children:"Видео"})]})]})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"Профиль пользователя не найден"})})})()]})})}),pe&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Новый чат"}),t.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(et,{className:"h-6 w-6"})})]})}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сообщение"}),t.jsx("textarea",{value:xe,onChange:I=>$e(I.target.value),placeholder:"Введите ваше сообщение...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Выберите получателя"}),t.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-300 rounded-lg",children:me.map(I=>t.jsxs("button",{onClick:()=>Re(I.id,I.name),className:"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:I.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:I.name}),t.jsx("div",{className:"text-sm text-gray-500 capitalize",children:I.role==="teacher"?"Преподаватель":"Ученик"})]})]},I.id))})]})]})]})})]})},q3=()=>{var xe,$e,Z,ve,Se,ze,Xe,Ae,G,he,me,Re,M,W,U,L,w;const{user:e,updateProfile:r}=Ye(),{updateStudentProfile:s,updateTeacherProfile:a,lessons:n,posts:i,createPost:o,addReaction:l,addComment:c,sharePost:d,bookmarkPost:u,editPost:g,deletePost:f}=ct(),[m,y]=S.useState(!1),[x,v]=S.useState({grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""}),[b,h]=S.useState({subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}),[E,p]=S.useState(!1),[$,R]=S.useState(!1),[P,T]=S.useState(!1),[H,z]=S.useState(!1),[A]=S.useState([{id:1,avatar:((xe=e==null?void 0:e.profile)==null?void 0:xe.avatar)||"",name:(e==null?void 0:e.name)||""}]),[K,q]=S.useState(!1),[J,ie]=S.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),se=["Математика","Русский язык","Английский язык"],N=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],F=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],Y=["beginner","experienced","professional"],O=[45,60],oe=["online","offline","mini-group"];S.useEffect(()=>{if(e!=null&&e.profile)if(e.role==="student"){const j=e.profile;v({...x,...j,goals:j.goals||[],interests:j.interests||[],preferredFormats:j.preferredFormats||[],preferredDurations:j.preferredDurations||[]})}else{const j=e.profile;h({...b,...j,formats:j.formats||[],subjects:j.subjects||[],grades:j.grades||[],goals:j.goals||[],lessonTypes:j.lessonTypes||[],durations:j.durations||[],education:j.education||{university:"",degree:"",graduationYear:void 0,courses:[]}})}else if(e&&!e.profile){const j=e.role==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""};r(j)}},[e]);const ge=()=>{if(!e)return;const j=e.role==="student"?x:b;r(j),e.role==="student"?s(e.id,x):e.role==="teacher"&&a(e.id,{...b,name:e.name,email:e.email}),y(!1),alert("Профиль сохранен!")},de=j=>{switch(j){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return j}};let fe=0,pe=0;if(e&&e.role==="student"&&Array.isArray(n)){const j=n.filter(C=>C.studentId===e.id);fe=j.length,pe=Array.from(new Set(j.map(C=>C.teacherId))).length}if(!e)return null;const X=j=>{var D;const C=(D=j.target.files)==null?void 0:D[0];if(C){const V=new FileReader;V.onload=ne=>{var Oe;const Ee=(Oe=ne.target)==null?void 0:Oe.result;if(e.role==="student"){const jt={...x,avatar:Ee};v(jt),r(jt),s(e.id,jt)}else{const jt={...b,avatar:Ee};h(jt),r(jt),a(e.id,{...jt,name:e.name,email:e.email})}},V.readAsDataURL(C)}};return t.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[t.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center overflow-hidden shadow-lg",children:($e=e.profile)!=null&&$e.avatar?t.jsx("img",{src:e.profile.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):t.jsx(ye,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg font-bold text-gray-900",children:e?e.name:""}),e&&e.nickname&&t.jsxs("span",{className:"text-gray-400 text-sm",children:["@",e.nickname]})]}),e&&e.role==="student"&&t.jsxs("div",{className:"flex gap-4 mt-2",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[t.jsx(We,{className:"w-5 h-5 text-blue-500 mr-1"}),fe]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Пройдено уроков"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[t.jsx(ye,{className:"w-5 h-5 text-green-500 mr-1"}),pe]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Учителей"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsx("button",{className:"btn-primary text-sm px-3 py-2",onClick:()=>y(!0),children:"Редактировать"}),t.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-blue-600 rounded-full p-2 shadow transition-colors duration-150 focus:outline-none",style:{width:36,height:36},"aria-label":"Настройки",onClick:()=>R(!0),children:t.jsx(Js,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:t.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:t.jsx("div",{className:"flex-1 space-y-1"})})}),t.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"О себе"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed mb-2",children:e.role==="student"?x.bio||"—":((Z=e.profile)==null?void 0:Z.bio)||"—"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Предметы:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Se=(ve=e.profile)==null?void 0:ve.subjects)==null?void 0:Se.join(", "))||"—"})]}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Классы:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Xe=(ze=e.profile)==null?void 0:ze.grades)==null?void 0:Xe.join(", "))||"—"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Страна:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Ae=e.profile)==null?void 0:Ae.country)||"—"})]})]})]}),e.role==="teacher"&&((G=e.profile)==null?void 0:G.experience)&&t.jsxs("div",{className:"mt-2",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Опыт:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:e.profile.experience})]})]}),t.jsxs(fr,{open:E,onClose:()=>p(!1),children:[t.jsx("div",{className:"text-base font-bold mb-2",children:"Контактная информация"}),t.jsxs("div",{className:"mb-2 text-sm",children:[t.jsx("span",{className:"font-semibold",children:"Email:"})," ",e.email]})]}),t.jsx(fr,{open:$,onClose:()=>R(!1),children:t.jsxs("div",{className:"w-[320px] max-w-full",children:[t.jsx("div",{className:"text-lg font-bold mb-4 text-center",children:"Настройки"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{R(!1),T(!0)},children:[t.jsx(Gr,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"flex-1",children:"Push-уведомления"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(nl,{className:"w-5 h-5 text-gray-700"}),t.jsx("span",{className:"flex-1",children:"Конфиденциальность"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{R(!1),z(!0)},children:[t.jsx(ye,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"flex-1",children:"Аккаунт"})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Fd,{className:"w-5 h-5 text-purple-500"}),t.jsx("span",{className:"flex-1",children:"Тема"})]}),t.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${J==="dark"?"bg-gray-900":"bg-gray-300"}`,onClick:()=>{const j=J==="dark"?"light":"dark";ie(j),j==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",j)},"aria-pressed":J==="dark",type:"button",children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${J==="dark"?"translate-x-5":"translate-x-1"}`})})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Td,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"flex-1",children:"Память"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Id,{className:"w-5 h-5 text-indigo-500"}),t.jsx("span",{className:"flex-1",children:"Устройства"})]}),t.jsx("div",{className:"border-t my-2"}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(We,{className:"w-5 h-5 text-blue-400"}),t.jsx("span",{className:"flex-1",children:"База знаний"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Le,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"flex-1",children:"Поддержка"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(rr,{className:"w-5 h-5 text-blue-700"}),t.jsx("span",{className:"flex-1",children:"Документация"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Ct,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"flex-1",children:"Оценить приложение"})]})]})]})}),t.jsx(fr,{open:P,onClose:()=>T(!1),children:t.jsxs("div",{className:"w-[340px] max-w-full",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("button",{onClick:()=>T(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:t.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[t.jsx("path",{d:"M19 12H5"}),t.jsx("path",{d:"m12 19-7-7 7-7"})]})}),t.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Уведомления"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"СООБЩЕНИЯ"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Pt,{label:"Личные сообщения"}),t.jsx(Pt,{label:"Инфобот"}),t.jsx(Pt,{label:"Лиды"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПУБЛИКАЦИИ ОТ ПОДПИСОК"}),t.jsx("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:t.jsx(Pt,{label:"Новые публикации"})}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПОДПИСЧИКИ И ДЕЛОВЫЕ СВЯЗИ"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Pt,{label:"Новые подписчики"}),t.jsx(Pt,{label:"Установлена деловая связь"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"МАРКЕТСПЕЙС"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Pt,{label:"Отклики"}),t.jsx(Pt,{label:"Рекомендации"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ГОСЗАКУПКИ"}),t.jsx("div",{className:"bg-gray-50 rounded-xl mb-2 overflow-hidden",children:t.jsx(Pt,{label:"Подборка тендеров по ИНН"})})]})}),t.jsx(fr,{open:H,onClose:()=>z(!1),children:t.jsxs("div",{className:"w-[340px] max-w-full flex flex-col min-h-[340px]",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("button",{onClick:()=>z(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:t.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[t.jsx("path",{d:"M19 12H5"}),t.jsx("path",{d:"m12 19-7-7 7-7"})]})}),t.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Аккаунт"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"НОМЕР ТЕЛЕФОНА"}),t.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:"Изменить номер"}),t.jsx("span",{className:"text-gray-400 text-sm",children:e.phone||"+7 (999) 300-18-02"}),t.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 18l6-6-6-6"})})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ЭЛЕКТРОННАЯ ПОЧТА"}),t.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:"Изменить эл. почту"}),t.jsx("span",{className:"text-gray-400 text-sm truncate max-w-[120px]",children:e.email}),t.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 18l6-6-6-6"})})]}),t.jsx("div",{className:"flex-1"}),t.jsx("button",{className:"w-full mt-8 mb-2 py-3 rounded-xl bg-red-50 text-red-600 font-bold text-base hover:bg-red-100 transition",children:"Удалить аккаунт"})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"font-bold text-base",children:"Истории"}),t.jsx("button",{className:"text-blue-500 text-xs font-medium hover:underline",onClick:()=>alert("Скоро можно будет добавлять истории!"),children:"Добавить"})]}),t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[t.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[t.jsxs("div",{className:"relative h-14 w-14 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 flex items-center justify-center overflow-hidden border-2 border-blue-400 group-hover:scale-105 transition",children:[(e.role==="student"?x.avatar:(he=e.profile)!=null&&he.avatar)?t.jsx("img",{src:e.role==="student"?x.avatar:(me=e.profile)==null?void 0:me.avatar,alt:"avatar",className:"h-14 w-14 object-cover rounded-full"}):t.jsx(ye,{className:"h-7 w-7 text-white"}),t.jsx("span",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs border-2 border-white",children:"+"})]}),t.jsx("span",{className:"text-xs mt-1 text-gray-700",children:"Ваша история"})]}),A.map(j=>t.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[t.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-tr from-pink-400 to-yellow-400 flex items-center justify-center overflow-hidden border-2 border-pink-400 group-hover:scale-105 transition",children:j.avatar?t.jsx("img",{src:j.avatar,alt:j.name,className:"h-14 w-14 object-cover rounded-full"}):t.jsx(ye,{className:"h-7 w-7 text-white"})}),t.jsx("span",{className:"text-xs mt-1 text-gray-700 truncate max-w-[60px]",children:j.name})]},j.id))]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"font-bold text-base",children:"Мои записи"}),t.jsxs("button",{onClick:()=>q(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(vr,{className:"w-4 h-4"}),t.jsx("span",{children:"Создать запись"})]})]}),K&&t.jsx("div",{className:"mb-6",children:t.jsx(si,{onSubmit:j=>{o(j),q(!1)},onCancel:()=>q(!1),userName:(e==null?void 0:e.name)||"Пользователь",userAvatar:e==null?void 0:e.avatar})}),t.jsx("div",{className:"space-y-4",children:i.filter(j=>j.userId===(e==null?void 0:e.id)).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"У вас пока нет записей"}),t.jsx("p",{className:"text-gray-500",children:"Создайте первую запись!"})]}):i.filter(j=>j.userId===(e==null?void 0:e.id)).map(j=>t.jsx(an,{post:j,onReaction:l,onComment:c,onShare:d,onBookmark:u,onEdit:g,onDelete:f},j.id))})]}),t.jsx(fr,{open:m,onClose:()=>y(!1),children:t.jsx("div",{className:"w-[720px] max-w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"space-y-8 p-4",children:[t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsx("div",{className:"h-20 w-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center overflow-hidden",children:(e.role==="student"?x.avatar:b.avatar)?t.jsx("img",{src:e.role==="student"?x.avatar:b.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):t.jsx(ye,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{children:[t.jsxs("label",{className:"btn-primary cursor-pointer",children:[t.jsx(qd,{className:"h-4 w-4"}),t.jsx("span",{children:"Загрузить фото"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:X})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Рекомендуемый размер: 200x200px"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),t.jsx("input",{type:"text",value:e==null?void 0:e.name,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Никнейм"}),t.jsx("input",{type:"text",value:`@${e==null?void 0:e.nickname}`,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:e==null?void 0:e.email,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),t.jsx("input",{type:"tel",value:(e==null?void 0:e.phone)||"",onChange:j=>{if(e)try{const C=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),D=C.findIndex(V=>V.id===e.id);D!==-1&&(C[D].phone=j.target.value,localStorage.setItem("tutoring_users",JSON.stringify(C)))}catch{}},className:"input-modern w-full",placeholder:"+7 (999) 123-45-67"})]})]}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предметы, которые вы преподаете"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:se.map(j=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.subjects.includes(j),onChange:C=>{C.target.checked?h({...b,subjects:[...b.subjects,j]}):h({...b,subjects:b.subjects.filter(D=>D!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j})]},j))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Классы, с которыми работаете"}),t.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:N.map(j=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.grades.includes(j),onChange:C=>{C.target.checked?h({...b,grades:[...b.grades,j]}):h({...b,grades:b.grades.filter(D=>D!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j})]},j))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавания"}),t.jsx("select",{value:b.experience,onChange:j=>h({...b,experience:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Y.map(j=>t.jsx("option",{value:j,children:de(j)},j))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип преподавателя"}),t.jsxs("select",{value:b.teacherType||"private",onChange:j=>h({...b,teacherType:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"private",children:"Частный преподаватель"}),t.jsx("option",{value:"school",children:"Преподаватель школы"}),t.jsx("option",{value:"both",children:"Частный + Школа"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),t.jsx("input",{type:"number",value:b.age||"",onChange:j=>h({...b,age:j.target.value?Number(j.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"18",max:"100",placeholder:"Укажите возраст"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Лет опыта"}),t.jsx("input",{type:"number",value:b.experienceYears||"",onChange:j=>h({...b,experienceYears:j.target.value?Number(j.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",max:"50",placeholder:"Количество лет"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стоимость часа (₽)"}),t.jsx("input",{type:"number",value:b.hourlyRate,onChange:j=>h({...b,hourlyRate:Number(j.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели занятий"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(j=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.goals.includes(j),onChange:C=>{C.target.checked?h({...b,goals:[...b.goals,j]}):h({...b,goals:b.goals.filter(D=>D!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j})]},j))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность уроков"}),t.jsx("div",{className:"flex space-x-4",children:O.map(j=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.durations.includes(j),onChange:C=>{C.target.checked?h({...b,durations:[...b.durations,j]}):h({...b,durations:b.durations.filter(D=>D!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[j," мин"]})]},j))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Форматы проведения"}),t.jsx("div",{className:"flex space-x-4",children:oe.map(j=>{var C;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:((C=b.formats)==null?void 0:C.includes(j))||!1,onChange:D=>{D.target.checked?h({...b,formats:[...b.formats||[],j]}):h({...b,formats:(b.formats||[]).filter(V=>V!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j==="online"?"Онлайн":j==="offline"?"Оффлайн":"Мини-группа"})]},j)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.offlineAvailable,onChange:j=>h({...b,offlineAvailable:j.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Провожу оффлайн занятия"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:b.overbookingEnabled,onChange:j=>h({...b,overbookingEnabled:j.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Участвую в овербукинге"})]})})]})]}),b.offlineAvailable&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:b.city,onChange:j=>h({...b,city:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"О себе"}),t.jsx("textarea",{value:e.role==="student"?x.bio:b.bio,onChange:j=>{e.role==="student"?v({...x,bio:j.target.value}):h({...b,bio:j.target.value})},rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Расскажите о себе..."})]}),e.role==="student"&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Дополнительная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),t.jsx("input",{type:"number",value:x.age||"",onChange:j=>v({...x,age:j.target.value?Number(j.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"5",max:"25",placeholder:"Укажите возраст"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Школа"}),t.jsx("input",{type:"text",value:x.school||"",onChange:j=>v({...x,school:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название школы"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:x.city||"",onChange:j=>v({...x,city:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон"}),t.jsx("input",{type:"tel",value:x.phone||"",onChange:j=>v({...x,phone:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя родителя"}),t.jsx("input",{type:"text",value:x.parentName||"",onChange:j=>v({...x,parentName:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Имя родителя"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон родителя"}),t.jsx("input",{type:"tel",value:x.parentPhone||"",onChange:j=>v({...x,parentPhone:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели обучения"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(j=>{var C;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:((C=x.goals)==null?void 0:C.includes(j))||!1,onChange:D=>{D.target.checked?v({...x,goals:[...x.goals||[],j]}):v({...x,goals:(x.goals||[]).filter(V=>V!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j})]},j)})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Интересы и хобби"}),t.jsx("textarea",{value:((Re=x.interests)==null?void 0:Re.join(", "))||"",onChange:j=>v({...x,interests:j.target.value.split(",").map(C=>C.trim()).filter(C=>C)}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Напишите через запятую: спорт, музыка, рисование..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стиль обучения"}),t.jsxs("select",{value:x.learningStyle||"mixed",onChange:j=>v({...x,learningStyle:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"visual",children:"Визуальный"}),t.jsx("option",{value:"auditory",children:"Аудиальный"}),t.jsx("option",{value:"kinesthetic",children:"Кинестетический"}),t.jsx("option",{value:"mixed",children:"Смешанный"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Уровень знаний"}),t.jsxs("select",{value:x.experience||"beginner",onChange:j=>v({...x,experience:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"intermediate",children:"Средний"}),t.jsx("option",{value:"advanced",children:"Продвинутый"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемые форматы занятий"}),t.jsx("div",{className:"flex space-x-4",children:oe.map(j=>{var C;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:((C=x.preferredFormats)==null?void 0:C.includes(j))||!1,onChange:D=>{D.target.checked?v({...x,preferredFormats:[...x.preferredFormats||[],j]}):v({...x,preferredFormats:(x.preferredFormats||[]).filter(V=>V!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:j==="online"?"Онлайн":j==="offline"?"Оффлайн":"Мини-группа"})]},j)})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемая длительность занятий"}),t.jsx("div",{className:"flex space-x-4",children:O.map(j=>{var C;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:((C=x.preferredDurations)==null?void 0:C.includes(j))||!1,onChange:D=>{D.target.checked?v({...x,preferredDurations:[...x.preferredDurations||[],j]}):v({...x,preferredDurations:(x.preferredDurations||[]).filter(V=>V!==j)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[j," мин"]})]},j)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Часовой пояс"}),t.jsx("input",{type:"text",value:x.timeZone||"",onChange:j=>v({...x,timeZone:j.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"UTC+3 (Москва)"})]})]})}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Образование"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Университет"}),t.jsx("input",{type:"text",value:((M=b.education)==null?void 0:M.university)||"",onChange:j=>h({...b,education:{...b.education,university:j.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название университета"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Специальность/Степень"}),t.jsx("input",{type:"text",value:((W=b.education)==null?void 0:W.degree)||"",onChange:j=>h({...b,education:{...b.education,degree:j.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваша специальность"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Год окончания"}),t.jsx("input",{type:"number",value:((U=b.education)==null?void 0:U.graduationYear)||"",onChange:j=>h({...b,education:{...b.education,graduationYear:j.target.value?Number(j.target.value):void 0}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год окончания"})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Курсы и сертификаты"}),t.jsxs("div",{className:"space-y-4",children:[(w=(L=b.education)==null?void 0:L.courses)==null?void 0:w.map((j,C)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название курса"}),t.jsx("input",{type:"text",value:j.name,onChange:D=>{var ne;const V=[...((ne=b.education)==null?void 0:ne.courses)||[]];V[C]={...j,name:D.target.value},h({...b,education:{...b.education,courses:V}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название курса"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Учреждение"}),t.jsx("input",{type:"text",value:j.institution,onChange:D=>{var ne;const V=[...((ne=b.education)==null?void 0:ne.courses)||[]];V[C]={...j,institution:D.target.value},h({...b,education:{...b.education,courses:V}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название учреждения"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Год прохождения"}),t.jsx("input",{type:"number",value:j.year,onChange:D=>{var ne;const V=[...((ne=b.education)==null?void 0:ne.courses)||[]];V[C]={...j,year:Number(D.target.value)},h({...b,education:{...b.education,courses:V}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ссылка на сертификат"}),t.jsx("input",{type:"url",value:j.certificate||"",onChange:D=>{var ne;const V=[...((ne=b.education)==null?void 0:ne.courses)||[]];V[C]={...j,certificate:D.target.value},h({...b,education:{...b.education,courses:V}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/certificate.pdf"})]})]}),t.jsx("button",{type:"button",onClick:()=>{var V,ne;const D=((ne=(V=b.education)==null?void 0:V.courses)==null?void 0:ne.filter((Ee,Oe)=>Oe!==C))||[];h({...b,education:{...b.education,courses:D}})},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Удалить курс"})]},C)),t.jsxs("button",{type:"button",onClick:()=>{var C;const j={name:"",institution:"",year:new Date().getFullYear(),certificate:""};h({...b,education:{...b.education,courses:[...((C=b.education)==null?void 0:C.courses)||[],j]}})},className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 transition-colors flex items-center justify-center gap-2",children:[t.jsx(vr,{className:"h-5 w-5"}),"Добавить курс"]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsxs("button",{onClick:ge,className:"btn-primary flex items-center gap-2",children:[t.jsx(Bd,{className:"h-5 w-5"}),t.jsx("span",{children:"Сохранить профиль"})]}),t.jsx("button",{onClick:()=>y(!1),className:"btn-secondary",children:"Отмена"})]})]})})})]})},Pt=({label:e})=>{const[r,s]=S.useState(!0);return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b last:border-b-0",children:[t.jsx("span",{className:"text-sm text-gray-900",children:e}),t.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${r?"bg-green-500":"bg-gray-300"}`,onClick:()=>s(a=>!a),"aria-pressed":r,type:"button",children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${r?"translate-x-5":"translate-x-1"}`})})]})},Y3=()=>{const[e,r]=S.useState(null),[s,a]=S.useState(!0),[n,i]=S.useState(!1);try{const{user:o}=Ye(),[l,c]=S.useState((o==null?void 0:o.role)==="teacher"?"slots":"home");if(S.useEffect(()=>{if(o&&!n){const u=o.role==="teacher"?"slots":"home";c(u),i(!0)}a(!1)},[o,n]),s)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Загрузка приложения..."})]})});if(!o)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Добро пожаловать в Nauchi"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Платформа для репетиторов и учеников"}),t.jsx(Xd,{onSuccess:()=>{}})]})});const d=()=>{try{switch(l){case"home":return o.role==="student"?t.jsx(Ra,{setActiveTab:c}):t.jsx(La,{});case"slots":return o.role==="teacher"?t.jsx(La,{}):t.jsx(Ra,{setActiveTab:c});case"calendar":return o.role==="student"?t.jsx(td,{onClose:()=>c("home")}):t.jsx(rd,{});case"lessons":return o.role==="student"?t.jsx(z3,{}):null;case"students":return o.role==="teacher"?t.jsx(H3,{}):null;case"chats":return t.jsx(G3,{});case"profile":return t.jsx(q3,{});default:return o.role==="student"?t.jsx(Ra,{setActiveTab:c}):t.jsx(La,{})}}catch(u){return console.error("Error rendering content:",u),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки контента"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Попробуйте перезагрузить страницу"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить"})]})})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Jd,{activeTab:l,onTabChange:c}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:d()})]})}catch(o){return console.error("Error in AppContent:",o),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Произошла ошибка при загрузке приложения"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить страницу"})]})})}},V3=()=>t.jsx("div",{className:"App",children:t.jsx(jd,{children:t.jsx(wd,{children:t.jsxs(nd,{children:[t.jsx(li,{path:"/teacher/:teacherId",element:t.jsx(ed,{teacher:{},onClose:()=>{},onBookLesson:()=>{}})}),t.jsx(li,{path:"*",element:t.jsx(Y3,{})})]})})})});tl(document.getElementById("root")).render(t.jsx(S.StrictMode,{children:t.jsx(id,{children:t.jsx(V3,{})})}));
