import{r as $,a as Xc,g as pt,R as M,c as ht,b as Ho}from"./vendor-tAaa2TlE.js";import{l as zo}from"./socket-TjCxX7sJ.js";import{R as Jc,a as ei,B as Qc}from"./router-Skg1zGfq.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Go={exports:{}},Gs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=$,ed=Symbol.for("react.element"),td=Symbol.for("react.fragment"),rd=Object.prototype.hasOwnProperty,sd=Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ad={key:!0,ref:!0,__self:!0,__source:!0};function qo(t,r,s){var a,n={},i=null,o=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(o=r.ref);for(a in r)rd.call(r,a)&&!ad.hasOwnProperty(a)&&(n[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:ed,type:t,key:i,ref:o,props:n,_owner:sd.current}}Gs.Fragment=td;Gs.jsx=qo;Gs.jsxs=qo;Go.exports=Gs;var e=Go.exports,Yo,ti=Xc;Yo=ti.createRoot,ti.hydrateRoot;const Be=[];for(let t=0;t<256;++t)Be.push((t+256).toString(16).slice(1));function nd(t,r=0){return(Be[t[r+0]]+Be[t[r+1]]+Be[t[r+2]]+Be[t[r+3]]+"-"+Be[t[r+4]]+Be[t[r+5]]+"-"+Be[t[r+6]]+Be[t[r+7]]+"-"+Be[t[r+8]]+Be[t[r+9]]+"-"+Be[t[r+10]]+Be[t[r+11]]+Be[t[r+12]]+Be[t[r+13]]+Be[t[r+14]]+Be[t[r+15]]).toLowerCase()}let va;const id=new Uint8Array(16);function od(){if(!va){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");va=crypto.getRandomValues.bind(crypto)}return va(id)}const ld=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ri={randomUUID:ld};function cd(t,r,s){var n;if(ri.randomUUID&&!t)return ri.randomUUID();t=t||{};const a=t.random??((n=t.rng)==null?void 0:n.call(t))??od();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,nd(a)}const tt="https://tutoring-platform-1756666331-zjfl.onrender.com",dd="https://tutoring-platform-1756666331-zjfl.onrender.com",ud={transports:["websocket","polling"],timeout:1e4,forceNew:!0,upgrade:!0,rememberUpgrade:!0},Vo=$.createContext(void 0),Ye=()=>{const t=$.useContext(Vo);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},_r=()=>{try{const t=localStorage.getItem("tutoring_users");return t?JSON.parse(t):[]}catch{return[]}},ba=t=>{try{localStorage.setItem("tutoring_users",JSON.stringify(t)),window.dispatchEvent(new StorageEvent("storage",{key:"tutoring_users",newValue:JSON.stringify(t),oldValue:localStorage.getItem("tutoring_users"),storageArea:localStorage})),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_users",newValue:JSON.stringify(t),oldValue:localStorage.getItem("tutoring_users")}}))}catch{}},vs=t=>{try{localStorage.setItem("tutoring_currentUser",JSON.stringify(t))}catch{}},md=()=>{try{const t=localStorage.getItem("tutoring_currentUser");return t?JSON.parse(t):null}catch{return null}},hd=({children:t})=>{const[r,s]=$.useState(()=>{try{return md()}catch{return null}}),[a,n]=$.useState(!1);if($.useEffect(()=>{const h=setTimeout(()=>{try{const x=_r();n(!0)}catch{n(!0)}},100);return()=>clearTimeout(h)},[]),!a)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Инициализация авторизации..."})]})});const i=async(m,h)=>{await new Promise(y=>setTimeout(y,1e3));const b=_r().find(y=>y.email===m);return b?(s(b),vs(b),!0):(alert("Пользователь с таким email не найден. Пожалуйста, зарегистрируйтесь."),!1)},o=async(m,h,x,b,y,u)=>{try{const j=await fetch(`${tt}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:h,name:x,nickname:b,role:y,phone:u})});if(!j.ok){const g=await j.text();try{const D=JSON.parse(g);alert(D.error||"Ошибка регистрации на сервере")}catch{alert("Ошибка регистрации на сервере. Используется локальная регистрация.")}throw new Error("Server registration failed")}const v=await j.json(),C=[..._r(),v];return ba(C),s(v),vs(v),!0}catch{const v=_r(),f=v.some(I=>I.email===m),C=v.some(I=>I.nickname===b);if(f)return alert("Пользователь с таким email уже существует"),!1;if(C)return alert("Пользователь с таким никнеймом уже существует"),!1;const g=y==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""},D={id:cd(),email:m,name:x,nickname:b,role:y,phone:u,profile:g,avatar:g.avatar},R=[...v,D];return ba(R),s(D),vs(D),alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу."),!0}},l=()=>{s(null),localStorage.removeItem("tutoring_currentUser")},c=m=>{if(r){const h={...r,profile:m,avatar:m.avatar};s(h),vs(h);const b=_r().map(y=>y.id===r.id?h:y);ba(b),typeof window<"u"&&window.location.hostname!=="localhost"&&fetch("https://tutoring-platform-1756666331-zjfl.onrender.com/api/updateProfile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r.id,profileData:m,role:r.role})}).then(y=>{if(y.ok){console.log("Profile updated successfully on server");const u=window.socket;u&&u.emit("profileUpdated",{userId:r.id,profileData:m,role:r.role})}else console.error("Failed to update profile on server:",y.status)}).catch(y=>{console.error("Failed to update profile on server:",y)})}},d=()=>{s(null),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")};return e.jsx(Vo.Provider,{value:{user:r,login:i,register:o,logout:l,updateProfile:c,clearAllUsers:d},children:t})},Ko=$.createContext(void 0),nt=()=>{const t=$.useContext(Ko);if(!t)throw new Error("useData must be used within a DataProvider");return t},dt=(t,r)=>{try{const s=localStorage.getItem(t);if(s){const a=JSON.parse(s);return Array.isArray(a)?a:r}}catch{}return r},se=(t,r)=>{try{localStorage.setItem(t,JSON.stringify(r))}catch{}},bs=()=>{const t=new Date,r=new Date(t);r.setDate(r.getDate()+1);const s=new Date(t);s.setDate(s.getDate()+2);const a=new Date(t);return a.setDate(a.getDate()+7),{timeSlots:[],lessons:[],chats:[],studentProfiles:{},teacherProfiles:{}}},fd=({children:t})=>{const r=$.useRef(null),[s,a]=$.useState(!1),[n,i]=$.useState(()=>{const T=dt("tutoring_timeSlots",[]);if(T.length>0)return T;const H=bs();return se("tutoring_timeSlots",H.timeSlots),H.timeSlots}),[o,l]=$.useState(()=>dt("tutoring_lessons",[])),[c,d]=$.useState(()=>dt("tutoring_chats",[])),[m,h]=$.useState(()=>{const T=dt("tutoring_studentProfiles",{});if(Object.keys(T).length>0)return T;const H=bs();return se("tutoring_studentProfiles",H.studentProfiles),H.studentProfiles}),[x,b]=$.useState(()=>{const T=dt("tutoring_teacherProfiles",{});if(Object.keys(T).length>0)return T;const H=bs();return se("tutoring_teacherProfiles",H.teacherProfiles),H.teacherProfiles}),[y,u]=$.useState(()=>{try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]")}catch{return[]}}),[j,v]=$.useState(()=>dt("tutoring_posts",[])),[f,C]=$.useState(()=>dt("tutoring_notifications",[])),{user:g,updateProfile:D}=Ye(),R=()=>{const T=dt("tutoring_timeSlots",[]),H=dt("tutoring_lessons",[]),W=dt("tutoring_chats",[]),A=bs(),p=(T.length>0?T:A.timeSlots).filter((k,E,K)=>E===K.findIndex(ne=>ne.id===k.id));i(p),l(H),d(W),h(A.studentProfiles),se("tutoring_timeSlots",p),se("tutoring_lessons",H),se("tutoring_chats",W),se("tutoring_studentProfiles",A.studentProfiles),_e()},I=async()=>{try{console.log("🔄 Загружаем пользователей с сервера...");const T=await fetch(`${tt}/api/users`);if(!T.ok)return console.warn("⚠️ Не удалось загрузить пользователей с сервера:",T.status),[];const H=await T.json();console.log("✅ Пользователи загружены с сервера:",H.length);const W=JSON.parse(localStorage.getItem("tutoring_users")||"[]");console.log("📱 Локальные пользователи:",W.length);const w=[...W,...H].filter((p,k,E)=>k===E.findIndex(K=>K.id===p.id));return console.log("✅ Уникальные пользователи:",w.length),console.log("👨‍🏫 Преподаватели:",w.filter(p=>p.role==="teacher").length),console.log("👨‍🎓 Студенты:",w.filter(p=>p.role==="student").length),u(w),localStorage.setItem("tutoring_users",JSON.stringify(w)),w}catch(T){return console.error("❌ Ошибка загрузки пользователей с сервера:",T),[]}},B=async()=>{try{console.log("Loading lessons from server...");const T=await fetch(`${tt}/api/lessons`);if(!T.ok)return console.error("Failed to load lessons from server:",T.status),[];const H=await T.json();console.log("Loaded lessons from server:",H.length,H);const W=JSON.parse(localStorage.getItem("tutoring_lessons")||"[]");console.log("Local lessons:",W.length,W);const w=[...W,...H].filter((p,k,E)=>k===E.findIndex(K=>K.id===p.id));return console.log("Setting lessons in context:",w.length,w),l(w),se("tutoring_lessons",w),w}catch(T){return console.error("Error loading lessons from server:",T),[]}},_=()=>{try{const T=JSON.parse(localStorage.getItem("tutoring_users")||"[]");u(T)}catch{u([])}},q=()=>{I(),B(),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers"))},P=async()=>{try{console.log("🔄 Принудительная синхронизация данных с сервера..."),await I();const T=await fetch(`${tt}/api/sync`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!T.ok){console.warn("⚠️ Не удалось синхронизировать данные с сервера:",T.status,T.statusText);return}const H=T.headers.get("content-type");if(!H||!H.includes("application/json")){console.warn("⚠️ Сервер вернул не-JSON ответ:",H);return}const W=await T.json();console.log("✅ Данные синхронизации получены:",Object.keys(W)),W.timeSlots&&(i(W.timeSlots),se("tutoring_timeSlots",W.timeSlots),console.log("✅ Слоты обновлены:",W.timeSlots.length)),W.lessons&&(l(W.lessons),se("tutoring_lessons",W.lessons),console.log("✅ Уроки обновлены:",W.lessons.length)),W.chats&&(d(W.chats),se("tutoring_chats",W.chats),console.log("✅ Чаты обновлены:",W.chats.length)),W.posts&&(v(W.posts),se("tutoring_posts",W.posts),console.log("✅ Посты обновлены:",W.posts.length));const A=[];W.teacherProfiles&&Object.entries(W.teacherProfiles).forEach(([w,p])=>{const k=p;A.push({id:w,email:String(k.email||""),name:String(k.name||""),nickname:String(k.nickname||""),role:"teacher",phone:String(k.phone||""),profile:k})}),W.studentProfiles&&Object.entries(W.studentProfiles).forEach(([w,p])=>{const k=p;A.push({id:w,email:String(k.email||""),name:String(k.name||""),nickname:String(k.nickname||""),role:"student",phone:String(k.phone||""),profile:k})}),u(A),se("tutoring_users",A),console.log("Data sync completed successfully")}catch(T){console.warn("Error syncing data (continuing with local data):",T)}};$.useEffect(()=>{const T=async()=>{try{const W=await fetch(`${tt}/api/health`,{method:"GET",signal:AbortSignal.timeout(5e3)});if(W.ok){const A=await W.json();return console.log("Server health check passed:",A),!0}return!1}catch(W){return console.warn("Server not available, working in offline mode:",W),!1}};(async()=>{if(!await T()){console.log("Server not available, loading local data only"),R(),B();return}console.log("Server is available, initializing Socket.IO connection...");const A=zo(tt,{...ud,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:1e4});return r.current=A,A.on("connect",()=>{a(!0),console.log("✅ Connected to server via Socket.IO"),console.log(`🌐 Server URL: ${tt}`),console.log(`🔌 Socket ID: ${A.id}`),I(),B();const w=dt("tutoring_timeSlots",[]);w.length>0&&w.forEach(p=>{r.current&&r.current.emit("createSlot",p)}),r.current&&(r.current.emit("requestAllPosts"),g&&(r.current.emit("requestUserNotifications",g.id),r.current.emit("subscribeNotifications",g.id)))}),A.on("disconnect",()=>{a(!1),console.log("🔌 Disconnected from server")}),A.on("reconnect",w=>{a(!0),console.log(`🔄 Reconnected to server after ${w} attempts`)}),A.on("reconnect_attempt",w=>{console.log(`🔄 Reconnection attempt ${w}`)}),A.on("connect_error",w=>{a(!1),console.warn("❌ Socket.IO connection error:",w),console.warn("🔧 Working in offline mode until reconnection..."),R(),B()}),A.on("initialData",w=>{const E=[...dt("tutoring_timeSlots",[]),...w.timeSlots].filter((K,ne,Se)=>ne===Se.findIndex(Me=>Me.id===K.id));i(E),l(w.lessons),se("tutoring_timeSlots",E),se("tutoring_lessons",w.lessons),w.chats&&(d(w.chats),se("tutoring_chats",w.chats))}),A.on("allSlots",w=>{i(w),se("tutoring_timeSlots",w)}),A.on("allUsers",w=>{u(w),se("tutoring_users",w)}),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers")),A.on("slotCreated",w=>{console.log("Slot created via WebSocket:",w),i(p=>{if(p.find(E=>E.id===w.id)){const E=p.map(K=>K.id===w.id?w:K);return se("tutoring_timeSlots",E),console.log("Existing slot updated, total slots:",E.length),E}else{const E=[...p,w];return se("tutoring_timeSlots",E),console.log("New slot added, total slots:",E.length),E}})}),A.on("slotBooked",w=>{console.log("Slot booked via WebSocket:",w),i(p=>{const k=p.map(E=>E.id===w.slotId?{...E,isBooked:!0,bookedStudentId:w.bookedStudentId||w.lesson.studentId}:E);return se("tutoring_timeSlots",k),k}),l(p=>{if(!p.find(E=>E.id===w.lesson.id)){const E=[...p,w.lesson];return se("tutoring_lessons",E),console.log("New lesson added, total lessons:",E.length),E}return p})}),A.on("slotCancelled",w=>{console.log("Slot cancelled via WebSocket:",w),i(p=>{const k=p.map(E=>E.id===w.slotId?{...E,isBooked:!1,bookedStudentId:void 0}:E);return se("tutoring_timeSlots",k),k}),l(p=>{const k=p.filter(E=>E.id!==w.lessonId);return se("tutoring_lessons",k),console.log("Lesson removed, total lessons:",k.length),k})}),A.on("chatCreated",w=>{d(p=>{if(!p.find(E=>E.id===w.id)){const E=[...p,w];return se("tutoring_chats",E),E}return p})}),A.on("receiveMessage",w=>{d(p=>p.map(k=>{if(k.id===w.chatId){const E={...k,messages:[...k.messages,w.message],lastMessage:w.message};return se("tutoring_chats",p.map(K=>K.id===k.id?E:K)),E}return k}))}),A.on("chatDeleted",w=>{console.log("chatDeleted event received:",w),d(p=>{const k=p.filter(E=>E.id!==w.chatId);return console.log(`Chat ${w.chatId} removed from state. Total chats: ${k.length}`),se("tutoring_chats",k),k})}),A.on("chatMarkedAsRead",w=>{d(p=>{const k=p.map(E=>E.id===w.chatId?{...E,messages:E.messages.map(K=>({...K,isRead:!0}))}:E);return se("tutoring_chats",k),k})}),A.on("chatMessagesCleared",w=>{d(p=>{const k=p.map(E=>E.id===w.chatId?{...E,messages:[]}:E);return se("tutoring_chats",k),k})}),A.on("chatArchived",w=>{d(p=>{const k=p.map(E=>E.id===w.chatId?{...E,archived:!0}:E);return se("tutoring_chats",k),k})}),A.on("chatUnarchived",w=>{d(p=>{const k=p.map(E=>E.id===w.chatId?{...E,archived:!1}:E);return se("tutoring_chats",k),k})}),A.on("newNotification",w=>{C(p=>{const k=[...p,w];return se("tutoring_notifications",k),k})}),A.on("slotDeleted",w=>{console.log("Slot deleted via WebSocket:",w),i(p=>{const k=p.filter(E=>E.id!==w.slotId);return se("tutoring_timeSlots",k),console.log("Slot removed, total slots:",k.length),k})}),A.on("allSlots",w=>{console.log("Received all slots from server:",w.length),i(w),se("tutoring_timeSlots",w)}),A.on("allLessons",w=>{console.log("Received all lessons from server:",w.length),l(w),se("tutoring_lessons",w)}),A.on("dataUpdated",w=>{if(console.log("Received dataUpdated event:",w.type),w.timeSlots&&(i(w.timeSlots),se("tutoring_timeSlots",w.timeSlots),console.log("Slots updated via dataUpdated:",w.timeSlots.length)),w.lessons&&(l(w.lessons),se("tutoring_lessons",w.lessons),console.log("Lessons updated via dataUpdated:",w.lessons.length)),w.teacherProfiles){b(w.teacherProfiles),se("tutoring_teacherProfiles",w.teacherProfiles);const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(E=>E.role==="teacher"&&w.teacherProfiles[E.id]?{...E,profile:w.teacherProfiles[E.id]}:E);u(k),se("tutoring_users",k)}if(w.studentProfiles){h(w.studentProfiles),se("tutoring_studentProfiles",w.studentProfiles);const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(E=>E.role==="student"&&w.studentProfiles[E.id]?{...E,profile:w.studentProfiles[E.id]}:E);u(k),se("tutoring_users",k)}}),A.on("userRegistered",w=>{u(p=>{if(!p.find(E=>E.id===w.id)){const E=[...p,w];return se("tutoring_users",E),E}return p})}),r.current&&r.current.on("lessonCompleted",w=>{if(l(p=>{const k=p.map(E=>E.id===w.lesson.id?w.lesson:E);return se("tutoring_lessons",k),k}),g&&g.role==="teacher"&&w.lesson.status==="completed"){const p={...g.profile};p.lessonsCount=(p.lessonsCount||0)+1,D(p)}}),A.on("studentProfiles",w=>{h(w||{});const k=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([E,K])=>{const ne=k.findIndex(Se=>Se.id===E);ne>=0?k[ne]={...k[ne],profile:K}:k.push({id:E,email:K.email||"",name:K.name||"",nickname:K.nickname||"",role:"student",phone:K.phone||"",profile:K})}),localStorage.setItem("tutoring_users",JSON.stringify(k)),u(k)}),A.on("teacherProfiles",w=>{b(w),se("tutoring_teacherProfiles",w);const k=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([E,K])=>{const ne=k.findIndex(Se=>Se.id===E);ne>=0?k[ne]={...k[ne],profile:K}:k.push({id:E,email:K.email||"",name:K.name||"",nickname:K.nickname||"",role:"teacher",phone:K.phone||"",profile:K})}),localStorage.setItem("tutoring_users",JSON.stringify(k)),u(k)}),A.on("studentProfiles",w=>{h(w),se("tutoring_studentProfiles",w);const k=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([E,K])=>{const ne=k.findIndex(Se=>Se.id===E);ne>=0?k[ne]={...k[ne],profile:K}:k.push({id:E,email:K.email||"",name:K.name||"",nickname:K.nickname||"",role:"student",phone:K.phone||"",profile:K})}),localStorage.setItem("tutoring_users",JSON.stringify(k)),u(k)}),A.on("studentProfileUpdated",w=>{h(p=>({...p,[w.studentId]:w.profile}))}),A.on("teacherProfileUpdated",w=>{try{const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(E=>E.id===w.teacherId?{...E,profile:w.profile,avatar:w.profile.avatar}:E);localStorage.setItem("tutoring_users",JSON.stringify(k)),u(k)}catch{}}),A.on("profileUpdated",w=>{try{const p=JSON.parse(localStorage.getItem("tutoring_users")||"[]");let k=!1;const E="userId"in w?w.userId:w.id,K="type"in w?w.type:w.role,ne=w.profile,Se=p.map(Me=>Me.id===E?(k=!0,{...Me,profile:ne,avatar:ne.avatar,name:ne.name||Me.name,email:ne.email||Me.email}):Me);k||Se.push({id:E,role:K,profile:ne,avatar:ne.avatar,name:ne.name||"",email:ne.email||""}),localStorage.setItem("tutoring_users",JSON.stringify(Se)),u(Se),K==="teacher"?b(Me=>({...Me,[E]:ne})):K==="student"&&h(Me=>({...Me,[E]:ne})),console.log("Profile updated via WebSocket:",{userId:E,role:K,profile:ne})}catch(p){console.error("Error processing profileUpdated event:",p)}}),A.on("userRegistered",w=>{try{const p=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),k=p.findIndex(E=>E.id===w.id);k>=0?p[k]=w:p.push(w),localStorage.setItem("tutoring_users",JSON.stringify(p)),u(p)}catch{}}),A.on("allPosts",w=>{v(w),se("tutoring_posts",w)}),A.on("postCreated",w=>{v(p=>{const k=[w,...p];return se("tutoring_posts",k),k})}),A.on("postReactionUpdated",w=>{v(p=>{const k=p.map(E=>E.id===w.postId?{...E,reactions:w.reactions,likes:w.likes}:E);return se("tutoring_posts",k),k})}),A.on("postCommentAdded",w=>{v(p=>{const k=p.map(E=>E.id===w.postId?{...E,comments:[...E.comments,w.comment]}:E);return se("tutoring_posts",k),k})}),A.on("postEdited",w=>{v(p=>{const k=p.map(E=>E.id===w.postId?{...E,text:w.text,tags:w.tags,editedAt:w.editedAt}:E);return se("tutoring_posts",k),k})}),A.on("postDeleted",w=>{v(p=>{const k=p.filter(E=>E.id!==w.postId);return se("tutoring_posts",k),k})}),A.on("postBookmarkUpdated",w=>{v(p=>{const k=p.map(E=>E.id===w.postId?{...E,bookmarks:w.bookmarks}:E);return se("tutoring_posts",k),k})}),A.on("searchResults",w=>{}),A.on("userNotifications",w=>{C(w),se("tutoring_notifications",w)}),A.on("newNotification",w=>{C(p=>{const k=[w,...p];return se("tutoring_notifications",k),k})}),A.on("notificationMarkedAsRead",w=>{C(p=>{const k=p.map(E=>E.id===w.notificationId?{...E,isRead:!0,readAt:new Date().toISOString()}:E);return se("tutoring_notifications",k),k})}),A.on("allNotificationsMarkedAsRead",w=>{C(p=>{const k=p.map(E=>E.userId===w.userId?{...E,isRead:!0,readAt:new Date().toISOString()}:E);return se("tutoring_notifications",k),k})}),()=>{A.close(),r.current=null}})()},[]),$.useEffect(()=>{const T=W=>{if(W.key==="tutoring_users")try{const A=JSON.parse(W.newValue||"[]");u(A)}catch{u([])}},H=W=>{var A;if(((A=W.detail)==null?void 0:A.key)==="tutoring_users")try{const w=JSON.parse(W.detail.newValue||"[]");u(w)}catch{u([])}};return window.addEventListener("storage",T),window.addEventListener("customStorage",H),()=>{window.removeEventListener("storage",T),window.removeEventListener("customStorage",H)}},[]),$.useEffect(()=>{se("tutoring_timeSlots",n)},[n]),$.useEffect(()=>{se("tutoring_lessons",o)},[o]),$.useEffect(()=>{se("tutoring_chats",c)},[c]),$.useEffect(()=>{se("tutoring_posts",j)},[j]),$.useEffect(()=>{se("tutoring_notifications",f)},[f]),$.useEffect(()=>{g&&r.current&&s&&(r.current.emit("subscribeNotifications",g.id),r.current.emit("requestUserNotifications",g.id))},[g,s]);const V=T=>{const H={...T,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};i(W=>{const A=[...W,H];return se("tutoring_timeSlots",A),A}),r.current&&s&&r.current.emit("createSlot",H)},z=async(T,H,W,A)=>new Promise((w,p)=>{if((A==null?void 0:A.mode)==="assign"&&(!H||!W)){alert("Ошибка: не выбран ученик для назначения урока!"),p(new Error("createSlot: assign mode without studentId/studentName"));return}const k=!!H,E={...T,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isBooked:k,...k?{bookedStudentId:H}:{}};if(i(K=>{const ne=[...K,E];return se("tutoring_timeSlots",ne),ne}),r.current&&s&&r.current.emit("createSlot",E),k&&H&&W){const K={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:H,teacherId:E.teacherId,studentName:W,teacherName:E.teacherName,subject:E.subject,date:E.date,startTime:E.startTime,endTime:E.endTime,duration:E.duration,format:E.format,status:"scheduled",price:E.price,lessonType:E.lessonType};if(l(ne=>[...ne,K]),U(H,E.teacherId,W,E.teacherName),g&&g.role==="teacher"){const ne={...g.profile};ne.students||(ne.students=[]),ne.students.includes(H)||ne.students.push(H),D(ne)}r.current&&s&&r.current.emit("bookSlot",{slotId:E.id,lesson:K,bookedStudentId:H})}w(E)}),te=(T,H,W,A)=>{const w=n.find(k=>k.id===T);if(!w||w.isBooked)return;if(g&&g.role==="teacher"){const k={...g.profile};k.students||(k.students=[]),k.students.includes(H)||k.students.push(H),D(k)}i(k=>k.map(E=>E.id===T?{...E,isBooked:!0,bookedStudentId:H}:E));const p={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:H,teacherId:w.teacherId,studentName:W,teacherName:w.teacherName,subject:w.subject,date:w.date,startTime:w.startTime,endTime:w.endTime,duration:w.duration,format:w.format,status:"scheduled",price:w.price,lessonType:w.lessonType,comment:A||""};l(k=>[...k,p]),U(H,w.teacherId,W,w.teacherName),r.current&&s&&r.current.emit("bookSlot",{slotId:T,lesson:p,bookedStudentId:H})},ae=T=>{const H=o.find(A=>A.id===T);if(!H)return;const W=n.find(A=>A.teacherId===H.teacherId&&A.date===H.date&&A.startTime===H.startTime);l(A=>A.filter(w=>w.id!==T)),W&&(i(A=>A.map(w=>w.id===W.id?{...w,isBooked:!1,bookedStudentId:void 0}:w)),r.current&&s&&r.current.emit("cancelSlot",{slotId:W.id,lessonId:T}))},re=(T,H,W)=>{const A=o.find(p=>p.id===T);if(!A)return;const w=new Date(`2000-01-01T${W}`);w.setMinutes(w.getMinutes()+A.duration),l(p=>p.map(k=>k.id===T?{...k,date:H,startTime:W,endTime:w.toTimeString().slice(0,5)}:k)),i(p=>p.map(k=>k.teacherId===A.teacherId&&k.date===A.date&&k.startTime===A.startTime?{...k,isBooked:!1,bookedStudentId:void 0}:k))},S=T=>n.filter(W=>{var p;if(W.isBooked)return!1;const A=new Date(W.date),w=new Date;if(w.setHours(0,0,0,0),A<w||T.grade&&T.grade!==""&&(!W.grades||!W.grades.includes(T.grade))||T.subject&&T.subject!==""&&W.subject!==T.subject||T.experience&&T.experience!==""&&W.experience!==T.experience||T.lessonType&&T.lessonType!==""&&W.lessonType!==T.lessonType||T.duration&&T.duration>0&&W.duration!==T.duration||T.format&&T.format!==""&&W.format!==T.format||T.minRating&&T.minRating>0&&(W.rating||0)<T.minRating||T.goals&&T.goals.length>0&&(!W.goals||!T.goals.some(k=>W.goals.includes(k))))return!1;if(T.city&&T.city!==""){const k=y.find(K=>K.id===W.teacherId),E=((p=k==null?void 0:k.profile)==null?void 0:p.city)||"";if(E&&!E.toLowerCase().includes(T.city.toLowerCase()))return!1}return!0}),U=(T,H,W,A)=>{console.log("🔍 getOrCreateChat DEBUG:"),console.log("- Participant 1:",{id:T,name:W}),console.log("- Participant 2:",{id:H,name:A}),console.log("- Current chats count:",c.length);const w=c.find(k=>k.participants.includes(T)&&k.participants.includes(H));if(w)return console.log("✅ Found existing chat:",w.id),w.id;console.log("🆕 Creating new chat...");const p={id:`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,participants:[T,H],participantNames:[W,A],messages:[]};if(console.log("📝 New chat created:",p.id),d(k=>{const E=[...k,p];return se("tutoring_chats",E),console.log("💾 Chat saved to localStorage, total chats:",E.length),E}),r.current&&s){console.log("📡 Sending chat to server..."),r.current.emit("createChat",p);const k={id:`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:H,type:"new_chat",title:"Новый чат",message:`${W} создал с вами чат`,isRead:!1,timestamp:new Date().toISOString(),data:{chatId:p.id,studentId:T,studentName:W}};r.current.emit("createNotification",k),console.log("📬 Notification sent to server")}else console.log("⚠️ Socket not connected, chat not sent to server");return console.log("🔍 END getOrCreateChat DEBUG"),p.id},Y=(T,H,W,A)=>{console.log("🔍 sendMessage DEBUG:"),console.log("- Chat ID:",T),console.log("- Sender:",{id:H,name:W}),console.log("- Content:",A);const w=c.find(K=>K.id===T);if(!w){console.error("❌ Chat not found:",T);return}console.log("✅ Chat found:",{id:w.id,participants:w.participants,participantNames:w.participantNames});const p=w.participants.find(K=>K!==H),k=w.participantNames.find((K,ne)=>w.participants[ne]!==H);if(!p){console.error("❌ Receiver not found in chat participants");return}console.log("📬 Receiver:",{id:p,name:k});const E={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,senderId:H,senderName:W,receiverId:p,receiverName:k||"Неизвестный пользователь",content:A,timestamp:new Date().toISOString(),isRead:!1};console.log("📝 Message created:",E.id),d(K=>K.map(ne=>{if(ne.id===T){const Se={...ne,messages:[...ne.messages,E],lastMessage:E};return se("tutoring_chats",K.map(Me=>Me.id===ne.id?Se:Me)),console.log("💾 Message saved locally, total messages in chat:",Se.messages.length),Se}return ne})),r.current&&s?(console.log("📡 Sending message to server..."),r.current.emit("sendMessage",{chatId:T,message:E}),console.log("✅ Message sent to server")):console.log("⚠️ Socket not connected, message not sent to server"),console.log("🔍 END sendMessage DEBUG")},O=(T,H,W,A,w)=>{if(console.log("🔍 sendMessageToUser DEBUG:"),console.log("- Sender:",{id:T,name:H}),console.log("- Receiver:",{id:W,name:A}),console.log("- Content:",w),!T||!H||!W||!A||!w)return console.error("❌ Missing required parameters for sendMessageToUser"),"";const p=U(T,W,H,A);return console.log("- Chat ID:",p),p?(Y(p,T,H,w),console.log("✅ Message sent successfully to chat:",p),console.log("🔍 END sendMessageToUser DEBUG"),p):(console.error("❌ Failed to create or find chat"),"")},de=T=>{r.current&&s&&r.current.emit("lessonCompleted",{lessonId:T})},he=(T,H)=>{r.current&&r.current.emit("updateStudentProfile",{studentId:T,profile:H}),h(W=>({...W,[T]:H}))},xe=T=>{i(H=>{const W=H.map(A=>A.id===T?{...A,isDeleted:!0}:A);return se("tutoring_timeSlots",W),W}),r.current&&s&&r.current.emit("deleteSlot",{slotId:T})},fe=()=>{i([]),l([]),d([]),localStorage.removeItem("tutoring_timeSlots"),localStorage.removeItem("tutoring_lessons"),localStorage.removeItem("tutoring_chats"),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")},ye=(T,H)=>{r.current&&s&&r.current.emit("updateTeacherProfile",{teacherId:T,profile:H});try{const A=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(w=>w.id===T?{...w,profile:H,avatar:H.avatar}:w);localStorage.setItem("tutoring_users",JSON.stringify(A))}catch{}},X=T=>{if(!g)return;const H=w=>{if(!w)return[];const p=/#[\wа-яё]+/gi,k=w.match(p);return k?[...new Set(k.map(E=>E.toLowerCase()))]:[]},W=T.media.map(w=>URL.createObjectURL(w)),A={id:`post_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:g.id,userName:g.name,userAvatar:g.avatar,text:T.text,media:W,type:T.type,date:new Date().toISOString(),reactions:[],comments:[],isBookmarked:!1,tags:H(T.text),likes:0,views:0,bookmarks:[]};v(w=>{const p=[A,...w];return se("tutoring_posts",p),p}),r.current&&s&&r.current.emit("createPost",A)},ge=(T,H)=>{g&&(v(W=>{const A=W.map(w=>{if(w.id===T){const p=w.reactions.find(K=>K.userId===g.id);let k=[...w.reactions],E=w.likes||0;return p?p.type===H?(k=w.reactions.filter(K=>K.userId!==g.id),E=Math.max(0,E-1)):p.type=H:(k.push({id:`reaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:g.id,type:H,date:new Date().toISOString()}),E++),{...w,reactions:k,likes:E}}return w});return se("tutoring_posts",A),A}),r.current&&s&&r.current.emit("addReaction",{postId:T,reactionType:H,userId:g.id}))},De=(T,H)=>{if(!g)return;const W={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:g.id,userName:g.name,userAvatar:g.avatar,text:H,date:new Date().toISOString()};v(A=>{const w=A.map(p=>p.id===T?{...p,comments:[...p.comments,W]}:p);return se("tutoring_posts",w),w}),r.current&&s&&r.current.emit("addComment",{postId:T,comment:W})},ee=T=>{},we=T=>{g&&(v(H=>{const W=H.map(A=>{if(A.id===T){const w=A.bookmarks||[],p=w.indexOf(g.id);let k=[...w];return p===-1?k.push(g.id):k.splice(p,1),{...A,bookmarks:k}}return A});return se("tutoring_posts",W),W}),r.current&&s&&r.current.emit("bookmarkPost",{postId:T,userId:g.id}))},Ne=(T,H)=>{const W=A=>{if(!A)return[];const w=/#[\wа-яё]+/gi,p=A.match(w);return p?[...new Set(p.map(k=>k.toLowerCase()))]:[]};v(A=>{const w=A.map(p=>p.id===T?{...p,text:H,tags:W(H),editedAt:new Date().toISOString()}:p);return se("tutoring_posts",w),w}),r.current&&s&&r.current.emit("editPost",{postId:T,newText:H})},Ee=T=>{v(H=>{const W=H.filter(A=>A.id!==T);return se("tutoring_posts",W),W}),r.current&&s&&r.current.emit("deletePost",{postId:T})},ze=T=>{console.log("deleteChat called with chatId:",T),console.log("Current chats count:",c.length),d(H=>{if(!H.find(w=>w.id===T))return console.warn("Chat not found for deletion:",T),H;const A=H.filter(w=>w.id!==T);return console.log(`Chat ${T} removed. New count: ${A.length}`),se("tutoring_chats",A),A}),r.current&&s?(console.log("Sending deleteChat event to server"),r.current.emit("deleteChat",{chatId:T})):console.warn("Socket not connected, chat deletion not synced to server")},Ze=T=>{d(H=>{const W=H.map(A=>A.id===T?{...A,messages:A.messages.map(w=>({...w,isRead:!0}))}:A);return se("tutoring_chats",W),W}),r.current&&s&&r.current.emit("markChatAsRead",{chatId:T})},G=T=>{d(H=>{const W=H.map(A=>A.id===T?{...A,messages:[]}:A);return se("tutoring_chats",W),W}),r.current&&s&&r.current.emit("clearChatMessages",{chatId:T})},me=T=>{d(H=>{const W=H.map(A=>A.id===T?{...A,archived:!0}:A);return se("tutoring_chats",W),W}),r.current&&s&&r.current.emit("archiveChat",{chatId:T})},ue=T=>{d(H=>{const W=H.map(A=>A.id===T?{...A,archived:!1}:A);return se("tutoring_chats",W),W}),r.current&&s&&r.current.emit("unarchiveChat",{chatId:T})},_e=async()=>{try{console.log("🔄 Loading chats from server:",`${tt}/api/sync`);const T=await fetch(`${tt}/api/sync`);if(T.ok){const H=T.headers.get("content-type");if(H&&H.includes("application/json")){const W=await T.json();W.chats&&(console.log("✅ Loaded chats from server:",W.chats.length),d(W.chats),se("tutoring_chats",W.chats))}else console.warn("⚠️ Server returned non-JSON response, using local chats")}else console.error("❌ Failed to load chats from server:",T.status,T.statusText)}catch(T){console.warn("⚠️ Error loading chats from server, using local chats:",T)}};return e.jsx(Ko.Provider,{value:{timeSlots:n,lessons:o,chats:c,posts:j,createTimeSlot:V,bookLesson:te,cancelLesson:ae,rescheduleLesson:re,getFilteredSlots:S,sendMessage:Y,sendMessageToUser:O,getOrCreateChat:U,clearAllData:fe,isConnected:s,completeLesson:de,studentProfiles:m,updateStudentProfile:he,deleteSlot:xe,createSlot:z,allUsers:y,setAllUsers:T=>{u(T),localStorage.setItem("tutoring_users",JSON.stringify(T))},refreshUsers:_,refreshAllData:q,forceSyncData:P,teacherProfiles:x,updateTeacherProfile:ye,socketRef:r,loadInitialData:R,createPost:X,addReaction:ge,addComment:De,sharePost:ee,bookmarkPost:we,editPost:Ne,deletePost:Ee,searchPosts:T=>{r.current&&s&&r.current.emit("searchPosts",T)},getPostsByUser:T=>j.filter(H=>H.userId===T),getBookmarkedPosts:T=>j.filter(H=>{var W;return(W=H.bookmarks)==null?void 0:W.includes(T)}),notifications:f,subscribeToNotifications:T=>{r.current&&s&&r.current.emit("subscribeNotifications",T)},unsubscribeFromNotifications:T=>{r.current&&s&&r.current.emit("unsubscribeNotifications",T)},markNotificationAsRead:T=>{C(H=>{const W=H.map(A=>A.id===T?{...A,isRead:!0,readAt:new Date().toISOString()}:A);return se("tutoring_notifications",W),W}),r.current&&s&&r.current.emit("markNotificationAsRead",T)},markAllNotificationsAsRead:T=>{C(H=>{const W=H.map(A=>A.userId===T?{...A,isRead:!0,readAt:new Date().toISOString()}:A);return se("tutoring_notifications",W),W}),r.current&&s&&r.current.emit("markAllNotificationsAsRead",T)},deleteNotification:T=>{C(H=>{const W=H.filter(A=>A.id!==T);return se("tutoring_notifications",W),W})},deleteChat:ze,markChatAsRead:Ze,clearChatMessages:G,archiveChat:me,unarchiveChat:ue,loadChatsFromServer:_e},children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(t,r)=>{const s=$.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},m)=>$.createElement("svg",{ref:m,...xd,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${gd(t)}`,l].join(" "),...d},[...r.map(([h,x])=>$.createElement(h,x)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=oe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=oe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=oe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=oe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=oe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=oe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=oe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=oe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=oe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=oe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Bd=({onSuccess:t})=>{const[r,s]=$.useState(!0),[a,n]=$.useState(""),[i,o]=$.useState(""),[l,c]=$.useState(""),[d,m]=$.useState(""),[h,x]=$.useState(""),[b,y]=$.useState("student"),[u,j]=$.useState(!1),[v,f]=$.useState(!1),{login:C,register:g}=Ye(),D=async R=>{R.preventDefault(),j(!0);try{if(r)await C(a,i),t();else{if(!v){f(!0),j(!1);return}if(!h.trim()){alert("Пожалуйста, введите никнейм"),j(!1);return}if(!d.trim()){alert("Пожалуйста, введите номер телефона"),j(!1);return}await g(a,i,l,h,b,d)&&t()}}catch{}finally{j(!1)}};return!r&&v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-[#0D3C69] rounded-xl flex items-center justify-center mb-4",children:e.jsx(Ue,{className:"h-6 w-6 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Выберите роль"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Кто вы на нашей платформе?"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>y("student"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${b==="student"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${b==="student"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(be,{className:`h-6 w-6 ${b==="student"?"text-[#0D3C69]":"text-gray-600"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Ученик"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ищу репетитора для обучения"})]})]})}),e.jsx("button",{onClick:()=>y("teacher"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${b==="teacher"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${b==="teacher"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(Fd,{className:`h-6 w-6 ${b==="teacher"?"text-[#0D3C69]":"text-gray-600"}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Преподаватель"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Провожу уроки и делюсь знаниями"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Никнейм"}),e.jsx("input",{id:"nickname",type:"text",value:h,onChange:R=>x(R.target.value),required:!0,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"Введите никнейм"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер телефона"}),e.jsxs("div",{className:"relative",children:[e.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"phone",type:"tel",value:d,onChange:R=>m(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"+7 (999) 123-45-67"})]})]}),e.jsx("button",{onClick:D,disabled:u||!h.trim()||!d.trim(),className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Создание аккаунта...":"Завершить регистрацию"}),e.jsx("button",{onClick:()=>f(!1),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:"Назад"})]})]})}):e.jsxs("div",{className:"min-h-screen flex",children:[e.jsx("div",{className:"flex-1 bg-white flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Добро пожаловать"}),e.jsx("p",{className:"text-lg text-gray-600",children:r?"Войдите в свой аккаунт":"Создайте новый аккаунт"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[!r&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"name",type:"text",value:l,onChange:R=>c(R.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваше имя"})]})]}),!r&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),e.jsxs("div",{className:"relative",children:[e.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"phone",type:"tel",value:d,onChange:R=>m(R.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"+7 (999) 123-45-67"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:a,onChange:R=>n(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваш email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Пароль"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:"password",value:i,onChange:R=>o(R.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:r?"Введите пароль":"Создайте пароль"})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-bold py-4 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:u?r?"Вход...":"Создание аккаунта...":r?"Войти":"Создать аккаунт"})]}),e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Продолжая, вы соглашаетесь с"," ",e.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условиями использования"})," ","и"," ",e.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политикой конфиденциальности"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-gray-600",children:r?"Нет аккаунта? ":"Уже есть аккаунт? "}),e.jsx("button",{onClick:()=>{s(!r),f(!1),n(""),o(""),c(""),m(""),x("")},className:"text-[#0D3C69] hover:text-[#0A2F56] font-medium",children:r?"Зарегистрироваться":"Войти"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"text-[#0D3C69] hover:text-[#0A2F56] text-sm",children:"Получить помощь"})}),e.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["Этот сайт защищен reCAPTCHA Enterprise и применяются"," ",e.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политика конфиденциальности"})," ","и"," ",e.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условия использования"})," ","Google."]})]})}),e.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[e.jsx("h2",{className:"text-5xl font-bold text-white mb-8 text-center",children:"Платформа для обучения"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("blockquote",{className:"text-xl text-gray-300 italic leading-relaxed",children:'"Важно не количество знаний, а качество их. Можно знать очень многое не зная самого нужного."'}),e.jsx("cite",{className:"text-sm text-gray-400 mt-4 block",children:"— Л. Толстой"})]}),e.jsxs("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900 via-purple-900 to-black"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 opacity-20"})}),e.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((R,I)=>e.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},I))})]})]})]})},Hd=({activeTab:t,onTabChange:r})=>{const{user:s,logout:a}=Ye(),n=[{id:"home",label:"Главная",icon:kd},{id:"lessons",label:"Мои уроки",icon:qe},{id:"chats",label:"Чаты",icon:Re},{id:"profile",label:"Профиль",icon:be}],i=[{id:"slots",label:"Слоты",icon:qe},{id:"calendar",label:"Календарь",icon:pd},{id:"students",label:"Ученики",icon:be},{id:"chats",label:"Чаты",icon:Re},{id:"profile",label:"Профиль",icon:be}],o=(s==null?void 0:s.role)==="teacher"?i:n;return e.jsx("nav",{className:"bg-card-light dark:bg-card-dark shadow-lg border-b border-border-light dark:border-border-dark transition-colors",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center shadow-md",style:{background:"#175b8c"},children:e.jsx("span",{className:"text-white font-bold text-lg",style:{fontFamily:"Inter, sans-serif",fontSize:28},children:"Na"})}),e.jsx("span",{className:"ml-3 text-2xl font-bold",style:{color:"#175b8c",fontFamily:"Inter, sans-serif"},children:"uchi"})]}),e.jsx("div",{className:"hidden md:flex space-x-8",children:o.map(l=>{const c=l.icon;return e.jsxs("button",{onClick:()=>r(l.id),className:`flex items-center gap-2 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200 shadow-none ${t===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:l.label})]},l.id)})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:s==null?void 0:s.nickname.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s==null?void 0:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["@",s==null?void 0:s.nickname]})]}),e.jsx("span",{className:"hidden md:block text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:(s==null?void 0:s.role)==="teacher"?"Преподаватель":"Ученик"})]}),e.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Выйти",children:e.jsx($d,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"md:hidden border-t border-border-light dark:border-border-dark",children:e.jsx("div",{className:"flex space-x-1 py-2 overflow-x-auto",children:o.map(l=>{const c=l.icon;return e.jsxs("button",{onClick:()=>r(l.id),className:`flex-shrink-0 flex flex-col items-center gap-1 px-4 py-3 rounded-xl text-xs font-semibold transition-all duration-200 ${t===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:l.label})]},l.id)})})})]})})};function _t(t){"@babel/helpers - typeof";return _t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_t(t)}function zd(t,r){if(_t(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,r);if(_t(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function al(t){var r=zd(t,"string");return _t(r)=="symbol"?r:r+""}function Vt(t,r,s){return(r=al(r))in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function ii(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,a)}return s}function ke(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ii(Object(s),!0).forEach(function(a){Vt(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ii(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}function Ks(t,r){if(t==null)return{};var s={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(r.indexOf(a)!==-1)continue;s[a]=t[a]}return s}function $t(t,r){if(t==null)return{};var s,a,n=Ks(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Ie(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function oi(t,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,al(a.key),a)}}function Le(t,r,s){return r&&oi(t.prototype,r),s&&oi(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ms(t){return Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ms(t)}function nl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nl=function(){return!!t})()}function Gd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qd(t,r){if(r&&(_t(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gd(t)}function Ve(t,r,s){return r=Ms(r),qd(t,nl()?Reflect.construct(r,s||[],Ms(t).constructor):r.apply(t,s))}function _s(t,r){return _s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_s(t,r)}function Ke(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_s(t,r)}function il(t){if(Array.isArray(t))return t}function Yd(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var a,n,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(a=i.call(s)).done)&&(l.push(a.value),l.length!==r);c=!0);}catch(m){d=!0,n=m}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw n}}return l}}function Aa(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,a=Array(r);s<r;s++)a[s]=t[s];return a}function an(t,r){if(t){if(typeof t=="string")return Aa(t,r);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Aa(t,r):void 0}}function ol(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qt(t,r){return il(t)||Yd(t,r)||an(t,r)||ol()}function ll(t){var r,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(s=ll(t[r]))&&(a&&(a+=" "),a+=s);else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function Ae(){for(var t,r,s=0,a="";s<arguments.length;)(t=arguments[s++])&&(r=ll(t))&&(a&&(a+=" "),a+=r);return a}function Pe(){return Pe=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)({}).hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Pe.apply(null,arguments)}var Vd=function(t,r,s,a,n,i,o,l){if(!t){var c;if(r===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,a,n,i,o,l],m=0;c=new Error(r.replace(/%s/g,function(){return d[m++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Kd=Vd;const Gr=pt(Kd);var Xd=function(){};function Jd(t,r){var s={};return Object.keys(t).forEach(function(a){s[$s(a)]=Xd}),s}function li(t,r){return t[r]!==void 0}function $s(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function Qd(t){return!!t&&(typeof t!="function"||t.prototype&&t.prototype.isReactComponent)}function Zd(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,_s(t,r)}function cl(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function dl(t){function r(s){var a=this.constructor.getDerivedStateFromProps(t,s);return a??null}this.setState(r.bind(this))}function ul(t,r){try{var s=this.props,a=this.state;this.props=t,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,a)}finally{this.props=s,this.state=a}}cl.__suppressDeprecationWarning=!0;dl.__suppressDeprecationWarning=!0;ul.__suppressDeprecationWarning=!0;function eu(t){var r=t.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof r.getSnapshotBeforeUpdate!="function")return t;var s=null,a=null,n=null;if(typeof r.componentWillMount=="function"?s="componentWillMount":typeof r.UNSAFE_componentWillMount=="function"&&(s="UNSAFE_componentWillMount"),typeof r.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof r.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof r.componentWillUpdate=="function"?n="componentWillUpdate":typeof r.UNSAFE_componentWillUpdate=="function"&&(n="UNSAFE_componentWillUpdate"),s!==null||a!==null||n!==null){var i=t.displayName||t.name,o=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+(n!==null?`
  `+n:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(r.componentWillMount=cl,r.componentWillReceiveProps=dl),typeof r.getSnapshotBeforeUpdate=="function"){if(typeof r.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=ul;var l=r.componentDidUpdate;r.componentDidUpdate=function(d,m,h){var x=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;l.call(this,d,m,x)}}return t}var tu="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function ml(t,r,s){s===void 0&&(s=[]);var a=t.displayName||t.name||"Component",n=Qd(t),i=Object.keys(r),o=i.map($s);n||!s.length||Gr(!1);var l=function(d){Zd(m,d);function m(){for(var x,b=arguments.length,y=new Array(b),u=0;u<b;u++)y[u]=arguments[u];x=d.call.apply(d,[this].concat(y))||this,x.handlers=Object.create(null),i.forEach(function(v){var f=r[v],C=function(D){if(x.props[f]){var R;x._notifying=!0;for(var I=arguments.length,B=new Array(I>1?I-1:0),_=1;_<I;_++)B[_-1]=arguments[_];(R=x.props)[f].apply(R,[D].concat(B)),x._notifying=!1}x.unmounted||x.setState(function(q){var P,V=q.values;return{values:Pe(Object.create(null),V,(P={},P[v]=D,P))}})};x.handlers[f]=C}),s.length&&(x.attachRef=function(v){x.inner=v});var j=Object.create(null);return i.forEach(function(v){j[v]=x.props[$s(v)]}),x.state={values:j,prevProps:{}},x}var h=m.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},m.getDerivedStateFromProps=function(b,y){var u=y.values,j=y.prevProps,v={values:Pe(Object.create(null),u),prevProps:{}};return i.forEach(function(f){v.prevProps[f]=b[f],!li(b,f)&&li(j,f)&&(v.values[f]=b[$s(f)])}),v},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var b=this,y=this.props,u=y.innerRef,j=Ks(y,["innerRef"]);o.forEach(function(f){delete j[f]});var v={};return i.forEach(function(f){var C=b.props[f];v[f]=C!==void 0?C:b.state.values[f]}),M.createElement(t,Pe({},j,v,this.handlers,{ref:u||this.attachRef}))},m}(M.Component);eu(l),l.displayName="Uncontrolled("+a+")",l.propTypes=Pe({innerRef:function(){}},Jd(r)),s.forEach(function(d){l.prototype[d]=function(){var h;return(h=this.inner)[d].apply(h,arguments)}});var c=l;return M.forwardRef&&(c=M.forwardRef(function(d,m){return M.createElement(l,Pe({},d,{innerRef:m,__source:{fileName:tu,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=t,c.deferControlTo=function(d,m,h){return m===void 0&&(m={}),ml(d,Pe({},r,m),h)},c}var hl={exports:{}},ru="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",su=ru,au=su;function fl(){}function xl(){}xl.resetWarningCache=fl;var nu=function(){function t(a,n,i,o,l,c){if(c!==au){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function r(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:xl,resetWarningCache:fl};return s.PropTypes=s,s};hl.exports=nu();var iu=hl.exports;const Z=pt(iu);var Ps="milliseconds",qr="seconds",Yr="minutes",Vr="hours",Zt="day",gr="week",Kr="month",er="year",tr="decade",rr="century",gl={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},ou={month:1,year:12,decade:10*12,century:100*12};function lu(t){return[31,cu(t),31,30,31,30,31,31,30,31,30,31]}function cu(t){return t%4===0&&t%100!==0||t%400===0?29:28}function bt(t,r,s){switch(t=new Date(t),s){case Ps:case qr:case Yr:case Vr:case Zt:case gr:return du(t,r*gl[s]);case Kr:case er:case tr:case rr:return uu(t,r*ou[s])}throw new TypeError('Invalid units: "'+s+'"')}function du(t,r){var s=new Date(+t+r);return mu(t,s)}function uu(t,r){var s=t.getFullYear(),a=t.getMonth(),n=t.getDate(),i=s*12+a+r,o=Math.trunc(i/12),l=i%12,c=Math.min(n,lu(o)[l]),d=new Date(t);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function mu(t,r){var s=t.getTimezoneOffset(),a=r.getTimezoneOffset(),n=a-s;return new Date(+r+n*gl.minutes)}function Xr(t,r,s){return bt(t,-r,s)}function He(t,r,s){switch(t=new Date(t),r){case rr:case tr:case er:t=Rs(t,0);case Kr:t=jl(t,1);case gr:case Zt:t=Zr(t,0);case Vr:t=pr(t,0);case Yr:t=Qr(t,0);case qr:t=Jr(t,0)}return r===tr&&(t=Xr(t,sr(t)%10,"year")),r===rr&&(t=Xr(t,sr(t)%100,"year")),r===gr&&(t=wl(t,0,s)),t}function As(t,r,s){switch(t=new Date(t),t=He(t,r,s),r){case rr:case tr:case er:case Kr:case gr:t=bt(t,1,r),t=Xr(t,1,Zt),t.setHours(23,59,59,999);break;case Zt:t.setHours(23,59,59,999);break;case Vr:case Yr:case qr:t=bt(t,1,r),t=Xr(t,1,Ps)}return t}var wr=Sr(function(t,r){return t===r}),nn=Sr(function(t,r){return t!==r}),Xs=Sr(function(t,r){return t>r}),ns=Sr(function(t,r){return t>=r}),on=Sr(function(t,r){return t<r}),Nr=Sr(function(t,r){return t<=r});function pl(){return new Date(Math.min.apply(Math,arguments))}function vl(){return new Date(Math.max.apply(Math,arguments))}function bl(t,r,s,a){return a=a||"day",(!r||ns(t,r,a))&&(!s||Nr(t,s,a))}var Jr=Ht("Milliseconds"),Qr=Ht("Seconds"),pr=Ht("Minutes"),Zr=Ht("Hours"),yl=Ht("Day"),jl=Ht("Date"),Rs=Ht("Month"),sr=Ht("FullYear");function hu(t,r){return r===void 0?sr(He(t,tr)):bt(t,r+10,er)}function fu(t,r){return r===void 0?sr(He(t,rr)):bt(t,r+100,er)}function wl(t,r,s){var a=(yl(t)+7-(s||0))%7;return r===void 0?a:bt(t,r-a,Zt)}function xu(t,r,s,a){var n,i,o;switch(s){case Ps:case qr:case Yr:case Vr:case Zt:case gr:n=r.getTime()-t.getTime();break;case Kr:case er:case tr:case rr:n=(sr(r)-sr(t))*12+Rs(r)-Rs(t);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case Ps:i=1;break;case qr:i=1e3;break;case Yr:i=1e3*60;break;case Vr:i=1e3*60*60;break;case Zt:i=1e3*60*60*24;break;case gr:i=1e3*60*60*24*7;break;case Kr:i=1;break;case er:i=12;break;case tr:i=120;break;case rr:i=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return o=n/i,a?o:Math.round(o)}function Ht(t){var r=function(s){switch(s){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(t);return function(s,a){if(a===void 0)return s["get"+t]();var n=new Date(s);return n["set"+t](a),r&&n["get"+t]()!=a&&(t==="Hours"||a>=r&&n.getHours()-s.getHours()<Math.floor(a/r))&&n["set"+t](a+r),n}}function Sr(t){return function(r,s,a){return t(+He(r,a),+He(s,a))}}const ci=Object.freeze(Object.defineProperty({__proto__:null,add:bt,century:fu,date:jl,day:yl,decade:hu,diff:xu,endOf:As,eq:wr,gt:Xs,gte:ns,hours:Zr,inRange:bl,lt:on,lte:Nr,max:vl,milliseconds:Jr,min:pl,minutes:pr,month:Rs,neq:nn,seconds:Qr,startOf:He,subtract:Xr,weekday:wl,year:sr},Symbol.toStringTag,{value:"Module"}));function gu(t){if(Array.isArray(t))return Aa(t)}function Nl(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ds(t){return gu(t)||Nl(t)||an(t)||pu()}function vu(t,r,s){var a=-1,n=t.length;r<0&&(r=-r>n?0:n+r),s=s>n?n:s,s<0&&(s+=n),n=r>s?0:s-r>>>0,r>>>=0;for(var i=Array(n);++a<n;)i[a]=t[a+r];return i}var Sl=vu;function bu(t,r){return t===r||t!==t&&r!==r}var is=bu,yu=typeof ht=="object"&&ht&&ht.Object===Object&&ht,kl=yu,ju=kl,wu=typeof self=="object"&&self&&self.Object===Object&&self,Nu=ju||wu||Function("return this")(),Et=Nu,Su=Et,ku=Su.Symbol,kr=ku,di=kr,Cl=Object.prototype,Cu=Cl.hasOwnProperty,$u=Cl.toString,Pr=di?di.toStringTag:void 0;function Du(t){var r=Cu.call(t,Pr),s=t[Pr];try{t[Pr]=void 0;var a=!0}catch{}var n=$u.call(t);return a&&(r?t[Pr]=s:delete t[Pr]),n}var Eu=Du,Tu=Object.prototype,Ou=Tu.toString;function Mu(t){return Ou.call(t)}var _u=Mu,ui=kr,Pu=Eu,Au=_u,Ru="[object Null]",Iu="[object Undefined]",mi=ui?ui.toStringTag:void 0;function Lu(t){return t==null?t===void 0?Iu:Ru:mi&&mi in Object(t)?Pu(t):Au(t)}var Cr=Lu;function Fu(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Rt=Fu,Wu=Cr,Uu=Rt,Bu="[object AsyncFunction]",Hu="[object Function]",zu="[object GeneratorFunction]",Gu="[object Proxy]";function qu(t){if(!Uu(t))return!1;var r=Wu(t);return r==Hu||r==zu||r==Bu||r==Gu}var ln=qu,Yu=9007199254740991;function Vu(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Yu}var cn=Vu,Ku=ln,Xu=cn;function Ju(t){return t!=null&&Xu(t.length)&&!Ku(t)}var os=Ju,Qu=9007199254740991,Zu=/^(?:0|[1-9]\d*)$/;function em(t,r){var s=typeof t;return r=r??Qu,!!r&&(s=="number"||s!="symbol"&&Zu.test(t))&&t>-1&&t%1==0&&t<r}var dn=em,tm=is,rm=os,sm=dn,am=Rt;function nm(t,r,s){if(!am(s))return!1;var a=typeof r;return(a=="number"?rm(s)&&sm(r,s.length):a=="string"&&r in s)?tm(s[r],t):!1}var Js=nm,im=/\s/;function om(t){for(var r=t.length;r--&&im.test(t.charAt(r)););return r}var lm=om,cm=lm,dm=/^\s+/;function um(t){return t&&t.slice(0,cm(t)+1).replace(dm,"")}var mm=um;function hm(t){return t!=null&&typeof t=="object"}var zt=hm,fm=Cr,xm=zt,gm="[object Symbol]";function pm(t){return typeof t=="symbol"||xm(t)&&fm(t)==gm}var ls=pm,vm=mm,hi=Rt,bm=ls,fi=NaN,ym=/^[-+]0x[0-9a-f]+$/i,jm=/^0b[01]+$/i,wm=/^0o[0-7]+$/i,Nm=parseInt;function Sm(t){if(typeof t=="number")return t;if(bm(t))return fi;if(hi(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=hi(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=vm(t);var s=jm.test(t);return s||wm.test(t)?Nm(t.slice(2),s?2:8):ym.test(t)?fi:+t}var km=Sm,Cm=km,xi=1/0,$m=17976931348623157e292;function Dm(t){if(!t)return t===0?t:0;if(t=Cm(t),t===xi||t===-xi){var r=t<0?-1:1;return r*$m}return t===t?t:0}var $l=Dm,Em=$l;function Tm(t){var r=Em(t),s=r%1;return r===r?s?r-s:r:0}var Dl=Tm,Om=Sl,Mm=Js,_m=Dl,Pm=Math.ceil,Am=Math.max;function Rm(t,r,s){(s?Mm(t,r,s):r===void 0)?r=1:r=Am(_m(r),0);var a=t==null?0:t.length;if(!a||r<1)return[];for(var n=0,i=0,o=Array(Pm(a/r));n<a;)o[i++]=Om(t,n,n+=r);return o}var Im=Rm;const Lm=pt(Im);function cs(t){return t&&t.ownerDocument||document}function Fm(t){var r=cs(t);return r&&r.defaultView||window}function Wm(t,r){return Fm(t).getComputedStyle(t,r)}var Um=/([A-Z])/g;function Bm(t){return t.replace(Um,"-$1").toLowerCase()}var Hm=/^ms-/;function ys(t){return Bm(t).replace(Hm,"-ms-")}var zm=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Gm(t){return!!(t&&zm.test(t))}function dr(t,r){var s="",a="";if(typeof r=="string")return t.style.getPropertyValue(ys(r))||Wm(t).getPropertyValue(ys(r));Object.keys(r).forEach(function(n){var i=r[n];!i&&i!==0?t.style.removeProperty(ys(n)):Gm(n)?a+=n+"("+i+") ":s+=ys(n)+": "+i+";"}),a&&(s+="transform: "+a+";"),t.style.cssText+=";"+s}function es(t,r){if(t.contains)return t.contains(r);if(t.compareDocumentPosition)return t===r||!!(t.compareDocumentPosition(r)&16)}function qm(t){return"nodeType"in t&&t.nodeType===document.DOCUMENT_NODE}function un(t){return"window"in t&&t.window===t?t:qm(t)&&t.defaultView||!1}function El(t){var r=t==="pageXOffset"?"scrollLeft":"scrollTop";function s(a,n){var i=un(a);if(n===void 0)return i?i[t]:a[r];i?i.scrollTo(i[t],n):a[r]=n}return s}const Tl=El("pageXOffset"),Ol=El("pageYOffset");function Kt(t){var r=cs(t),s={top:0,left:0,height:0,width:0},a=r&&r.documentElement;return!a||!es(a,t)||(t.getBoundingClientRect!==void 0&&(s=t.getBoundingClientRect()),s={top:s.top+Ol(a)-(a.clientTop||0),left:s.left+Tl(a)-(a.clientLeft||0),width:s.width,height:s.height}),s}var Ym=function(r){return!!r&&"offsetParent"in r};function Vm(t){for(var r=cs(t),s=t&&t.offsetParent;Ym(s)&&s.nodeName!=="HTML"&&dr(s,"position")==="static";)s=s.offsetParent;return s||r.documentElement}var Km=function(r){return r.nodeName&&r.nodeName.toLowerCase()};function Ml(t,r){var s={top:0,left:0},a;if(dr(t,"position")==="fixed")a=t.getBoundingClientRect();else{var n=r||Vm(t);a=Kt(t),Km(n)!=="html"&&(s=Kt(n));var i=String(dr(n,"borderTopWidth")||0);s.top+=parseInt(i,10)-Ol(n)||0;var o=String(dr(n,"borderLeftWidth")||0);s.left+=parseInt(o,10)-Tl(n)||0}var l=String(dr(t,"marginTop")||0),c=String(dr(t,"marginLeft")||0);return Pe({},a,{top:a.top-s.top-(parseInt(l,10)||0),left:a.left-s.left-(parseInt(c,10)||0)})}const mn=!!(typeof window<"u"&&window.document&&window.document.createElement);var gi=new Date().getTime();function Xm(t){var r=new Date().getTime(),s=Math.max(0,16-(r-gi)),a=setTimeout(t,s);return gi=r,a}var Jm=["","webkit","moz","o","ms"],Ra="clearTimeout",Ia=Xm,pi=function(r,s){return r+(r?s[0].toUpperCase()+s.substr(1):s)+"AnimationFrame"};mn&&Jm.some(function(t){var r=pi(t,"request");return r in window&&(Ra=pi(t,"cancel"),Ia=function(a){return window[r](a)}),!!Ia});var vi=function(r){typeof window[Ra]=="function"&&window[Ra](r)},_l=Ia,ya;function Qm(t,r){if(!ya){var s=document.body,a=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;ya=function(i,o){return a.call(i,o)}}return ya(t,r)}var Zm=Function.prototype.bind.call(Function.prototype.call,[].slice);function eh(t,r){return Zm(t.querySelectorAll(r))}var La=!1,Fa=!1;try{var ja={get passive(){return La=!0},get once(){return Fa=La=!0}};mn&&(window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,!0))}catch{}function th(t,r,s,a){if(a&&typeof a!="boolean"&&!Fa){var n=a.once,i=a.capture,o=s;!Fa&&n&&(o=s.__once||function l(c){this.removeEventListener(r,l,i),s.call(this,c)},s.__once=o),t.addEventListener(r,o,La?a:i)}t.addEventListener(r,s,a)}function rh(t){const r=$.useRef(t);return $.useEffect(()=>{r.current=t},[t]),r}function bi(t){const r=rh(t);return $.useCallback(function(...s){return r.current&&r.current(...s)},[r])}function yi(){return $.useState(null)}function sh(){const t=$.useRef(!0),r=$.useRef(()=>t.current);return $.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),r.current}function ah(t){const r=sh();return[t[0],$.useCallback(s=>{if(r())return t[1](s)},[r,t[1]])]}var rt="top",xt="bottom",gt="right",st="left",hn="auto",ds=[rt,xt,gt,st],vr="start",ts="end",nh="clippingParents",Pl="viewport",Ar="popper",ih="reference",ji=ds.reduce(function(t,r){return t.concat([r+"-"+vr,r+"-"+ts])},[]),fn=[].concat(ds,[hn]).reduce(function(t,r){return t.concat([r,r+"-"+vr,r+"-"+ts])},[]),oh="beforeRead",lh="read",ch="afterRead",dh="beforeMain",uh="main",mh="afterMain",hh="beforeWrite",fh="write",xh="afterWrite",gh=[oh,lh,ch,dh,uh,mh,hh,fh,xh];function kt(t){return t.split("-")[0]}function ot(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var r=t.ownerDocument;return r&&r.defaultView||window}return t}function ar(t){var r=ot(t).Element;return t instanceof r||t instanceof Element}function Ct(t){var r=ot(t).HTMLElement;return t instanceof r||t instanceof HTMLElement}function xn(t){if(typeof ShadowRoot>"u")return!1;var r=ot(t).ShadowRoot;return t instanceof r||t instanceof ShadowRoot}var Xt=Math.max,Is=Math.min,br=Math.round;function Wa(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function Al(){return!/^((?!chrome|android).)*safari/i.test(Wa())}function yr(t,r,s){r===void 0&&(r=!1),s===void 0&&(s=!1);var a=t.getBoundingClientRect(),n=1,i=1;r&&Ct(t)&&(n=t.offsetWidth>0&&br(a.width)/t.offsetWidth||1,i=t.offsetHeight>0&&br(a.height)/t.offsetHeight||1);var o=ar(t)?ot(t):window,l=o.visualViewport,c=!Al()&&s,d=(a.left+(c&&l?l.offsetLeft:0))/n,m=(a.top+(c&&l?l.offsetTop:0))/i,h=a.width/n,x=a.height/i;return{width:h,height:x,top:m,right:d+h,bottom:m+x,left:d,x:d,y:m}}function gn(t){var r=yr(t),s=t.offsetWidth,a=t.offsetHeight;return Math.abs(r.width-s)<=1&&(s=r.width),Math.abs(r.height-a)<=1&&(a=r.height),{x:t.offsetLeft,y:t.offsetTop,width:s,height:a}}function Rl(t,r){var s=r.getRootNode&&r.getRootNode();if(t.contains(r))return!0;if(s&&xn(s)){var a=r;do{if(a&&t.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Ut(t){return t?(t.nodeName||"").toLowerCase():null}function Pt(t){return ot(t).getComputedStyle(t)}function ph(t){return["table","td","th"].indexOf(Ut(t))>=0}function Gt(t){return((ar(t)?t.ownerDocument:t.document)||window.document).documentElement}function Qs(t){return Ut(t)==="html"?t:t.assignedSlot||t.parentNode||(xn(t)?t.host:null)||Gt(t)}function wi(t){return!Ct(t)||Pt(t).position==="fixed"?null:t.offsetParent}function vh(t){var r=/firefox/i.test(Wa()),s=/Trident/i.test(Wa());if(s&&Ct(t)){var a=Pt(t);if(a.position==="fixed")return null}var n=Qs(t);for(xn(n)&&(n=n.host);Ct(n)&&["html","body"].indexOf(Ut(n))<0;){var i=Pt(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function us(t){for(var r=ot(t),s=wi(t);s&&ph(s)&&Pt(s).position==="static";)s=wi(s);return s&&(Ut(s)==="html"||Ut(s)==="body"&&Pt(s).position==="static")?r:s||vh(t)||r}function pn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ur(t,r,s){return Xt(t,Is(r,s))}function bh(t,r,s){var a=Ur(t,r,s);return a>s?s:a}function Il(){return{top:0,right:0,bottom:0,left:0}}function Ll(t){return Object.assign({},Il(),t)}function Fl(t,r){return r.reduce(function(s,a){return s[a]=t,s},{})}var yh=function(r,s){return r=typeof r=="function"?r(Object.assign({},s.rects,{placement:s.placement})):r,Ll(typeof r!="number"?r:Fl(r,ds))};function jh(t){var r,s=t.state,a=t.name,n=t.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,l=kt(s.placement),c=pn(l),d=[st,gt].indexOf(l)>=0,m=d?"height":"width";if(!(!i||!o)){var h=yh(n.padding,s),x=gn(i),b=c==="y"?rt:st,y=c==="y"?xt:gt,u=s.rects.reference[m]+s.rects.reference[c]-o[c]-s.rects.popper[m],j=o[c]-s.rects.reference[c],v=us(i),f=v?c==="y"?v.clientHeight||0:v.clientWidth||0:0,C=u/2-j/2,g=h[b],D=f-x[m]-h[y],R=f/2-x[m]/2+C,I=Ur(g,R,D),B=c;s.modifiersData[a]=(r={},r[B]=I,r.centerOffset=I-R,r)}}function wh(t){var r=t.state,s=t.options,a=s.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=r.elements.popper.querySelector(n),!n)||Rl(r.elements.popper,n)&&(r.elements.arrow=n))}const Nh={name:"arrow",enabled:!0,phase:"main",fn:jh,effect:wh,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jr(t){return t.split("-")[1]}var Sh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kh(t,r){var s=t.x,a=t.y,n=r.devicePixelRatio||1;return{x:br(s*n)/n||0,y:br(a*n)/n||0}}function Ni(t){var r,s=t.popper,a=t.popperRect,n=t.placement,i=t.variation,o=t.offsets,l=t.position,c=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,h=t.isFixed,x=o.x,b=x===void 0?0:x,y=o.y,u=y===void 0?0:y,j=typeof m=="function"?m({x:b,y:u}):{x:b,y:u};b=j.x,u=j.y;var v=o.hasOwnProperty("x"),f=o.hasOwnProperty("y"),C=st,g=rt,D=window;if(d){var R=us(s),I="clientHeight",B="clientWidth";if(R===ot(s)&&(R=Gt(s),Pt(R).position!=="static"&&l==="absolute"&&(I="scrollHeight",B="scrollWidth")),R=R,n===rt||(n===st||n===gt)&&i===ts){g=xt;var _=h&&R===D&&D.visualViewport?D.visualViewport.height:R[I];u-=_-a.height,u*=c?1:-1}if(n===st||(n===rt||n===xt)&&i===ts){C=gt;var q=h&&R===D&&D.visualViewport?D.visualViewport.width:R[B];b-=q-a.width,b*=c?1:-1}}var P=Object.assign({position:l},d&&Sh),V=m===!0?kh({x:b,y:u},ot(s)):{x:b,y:u};if(b=V.x,u=V.y,c){var z;return Object.assign({},P,(z={},z[g]=f?"0":"",z[C]=v?"0":"",z.transform=(D.devicePixelRatio||1)<=1?"translate("+b+"px, "+u+"px)":"translate3d("+b+"px, "+u+"px, 0)",z))}return Object.assign({},P,(r={},r[g]=f?u+"px":"",r[C]=v?b+"px":"",r.transform="",r))}function Ch(t){var r=t.state,s=t.options,a=s.gpuAcceleration,n=a===void 0?!0:a,i=s.adaptive,o=i===void 0?!0:i,l=s.roundOffsets,c=l===void 0?!0:l,d={placement:kt(r.placement),variation:jr(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:n,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,Ni(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:o,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,Ni(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}const $h={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ch,data:{}};var js={passive:!0};function Dh(t){var r=t.state,s=t.instance,a=t.options,n=a.scroll,i=n===void 0?!0:n,o=a.resize,l=o===void 0?!0:o,c=ot(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&d.forEach(function(m){m.addEventListener("scroll",s.update,js)}),l&&c.addEventListener("resize",s.update,js),function(){i&&d.forEach(function(m){m.removeEventListener("scroll",s.update,js)}),l&&c.removeEventListener("resize",s.update,js)}}const Eh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Dh,data:{}};var Th={left:"right",right:"left",bottom:"top",top:"bottom"};function Es(t){return t.replace(/left|right|bottom|top/g,function(r){return Th[r]})}var Oh={start:"end",end:"start"};function Si(t){return t.replace(/start|end/g,function(r){return Oh[r]})}function vn(t){var r=ot(t),s=r.pageXOffset,a=r.pageYOffset;return{scrollLeft:s,scrollTop:a}}function bn(t){return yr(Gt(t)).left+vn(t).scrollLeft}function Mh(t,r){var s=ot(t),a=Gt(t),n=s.visualViewport,i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;var d=Al();(d||!d&&r==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:i,height:o,x:l+bn(t),y:c}}function _h(t){var r,s=Gt(t),a=vn(t),n=(r=t.ownerDocument)==null?void 0:r.body,i=Xt(s.scrollWidth,s.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Xt(s.scrollHeight,s.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+bn(t),c=-a.scrollTop;return Pt(n||s).direction==="rtl"&&(l+=Xt(s.clientWidth,n?n.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function yn(t){var r=Pt(t),s=r.overflow,a=r.overflowX,n=r.overflowY;return/auto|scroll|overlay|hidden/.test(s+n+a)}function Wl(t){return["html","body","#document"].indexOf(Ut(t))>=0?t.ownerDocument.body:Ct(t)&&yn(t)?t:Wl(Qs(t))}function Br(t,r){var s;r===void 0&&(r=[]);var a=Wl(t),n=a===((s=t.ownerDocument)==null?void 0:s.body),i=ot(a),o=n?[i].concat(i.visualViewport||[],yn(a)?a:[]):a,l=r.concat(o);return n?l:l.concat(Br(Qs(o)))}function Ua(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ph(t,r){var s=yr(t,!1,r==="fixed");return s.top=s.top+t.clientTop,s.left=s.left+t.clientLeft,s.bottom=s.top+t.clientHeight,s.right=s.left+t.clientWidth,s.width=t.clientWidth,s.height=t.clientHeight,s.x=s.left,s.y=s.top,s}function ki(t,r,s){return r===Pl?Ua(Mh(t,s)):ar(r)?Ph(r,s):Ua(_h(Gt(t)))}function Ah(t){var r=Br(Qs(t)),s=["absolute","fixed"].indexOf(Pt(t).position)>=0,a=s&&Ct(t)?us(t):t;return ar(a)?r.filter(function(n){return ar(n)&&Rl(n,a)&&Ut(n)!=="body"}):[]}function Rh(t,r,s,a){var n=r==="clippingParents"?Ah(t):[].concat(r),i=[].concat(n,[s]),o=i[0],l=i.reduce(function(c,d){var m=ki(t,d,a);return c.top=Xt(m.top,c.top),c.right=Is(m.right,c.right),c.bottom=Is(m.bottom,c.bottom),c.left=Xt(m.left,c.left),c},ki(t,o,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Ul(t){var r=t.reference,s=t.element,a=t.placement,n=a?kt(a):null,i=a?jr(a):null,o=r.x+r.width/2-s.width/2,l=r.y+r.height/2-s.height/2,c;switch(n){case rt:c={x:o,y:r.y-s.height};break;case xt:c={x:o,y:r.y+r.height};break;case gt:c={x:r.x+r.width,y:l};break;case st:c={x:r.x-s.width,y:l};break;default:c={x:r.x,y:r.y}}var d=n?pn(n):null;if(d!=null){var m=d==="y"?"height":"width";switch(i){case vr:c[d]=c[d]-(r[m]/2-s[m]/2);break;case ts:c[d]=c[d]+(r[m]/2-s[m]/2);break}}return c}function rs(t,r){r===void 0&&(r={});var s=r,a=s.placement,n=a===void 0?t.placement:a,i=s.strategy,o=i===void 0?t.strategy:i,l=s.boundary,c=l===void 0?nh:l,d=s.rootBoundary,m=d===void 0?Pl:d,h=s.elementContext,x=h===void 0?Ar:h,b=s.altBoundary,y=b===void 0?!1:b,u=s.padding,j=u===void 0?0:u,v=Ll(typeof j!="number"?j:Fl(j,ds)),f=x===Ar?ih:Ar,C=t.rects.popper,g=t.elements[y?f:x],D=Rh(ar(g)?g:g.contextElement||Gt(t.elements.popper),c,m,o),R=yr(t.elements.reference),I=Ul({reference:R,element:C,placement:n}),B=Ua(Object.assign({},C,I)),_=x===Ar?B:R,q={top:D.top-_.top+v.top,bottom:_.bottom-D.bottom+v.bottom,left:D.left-_.left+v.left,right:_.right-D.right+v.right},P=t.modifiersData.offset;if(x===Ar&&P){var V=P[n];Object.keys(q).forEach(function(z){var te=[gt,xt].indexOf(z)>=0?1:-1,ae=[rt,xt].indexOf(z)>=0?"y":"x";q[z]+=V[ae]*te})}return q}function Ih(t,r){r===void 0&&(r={});var s=r,a=s.placement,n=s.boundary,i=s.rootBoundary,o=s.padding,l=s.flipVariations,c=s.allowedAutoPlacements,d=c===void 0?fn:c,m=jr(a),h=m?l?ji:ji.filter(function(y){return jr(y)===m}):ds,x=h.filter(function(y){return d.indexOf(y)>=0});x.length===0&&(x=h);var b=x.reduce(function(y,u){return y[u]=rs(t,{placement:u,boundary:n,rootBoundary:i,padding:o})[kt(u)],y},{});return Object.keys(b).sort(function(y,u){return b[y]-b[u]})}function Lh(t){if(kt(t)===hn)return[];var r=Es(t);return[Si(t),r,Si(r)]}function Fh(t){var r=t.state,s=t.options,a=t.name;if(!r.modifiersData[a]._skip){for(var n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!0:o,c=s.fallbackPlacements,d=s.padding,m=s.boundary,h=s.rootBoundary,x=s.altBoundary,b=s.flipVariations,y=b===void 0?!0:b,u=s.allowedAutoPlacements,j=r.options.placement,v=kt(j),f=v===j,C=c||(f||!y?[Es(j)]:Lh(j)),g=[j].concat(C).reduce(function(fe,ye){return fe.concat(kt(ye)===hn?Ih(r,{placement:ye,boundary:m,rootBoundary:h,padding:d,flipVariations:y,allowedAutoPlacements:u}):ye)},[]),D=r.rects.reference,R=r.rects.popper,I=new Map,B=!0,_=g[0],q=0;q<g.length;q++){var P=g[q],V=kt(P),z=jr(P)===vr,te=[rt,xt].indexOf(V)>=0,ae=te?"width":"height",re=rs(r,{placement:P,boundary:m,rootBoundary:h,altBoundary:x,padding:d}),S=te?z?gt:st:z?xt:rt;D[ae]>R[ae]&&(S=Es(S));var U=Es(S),Y=[];if(i&&Y.push(re[V]<=0),l&&Y.push(re[S]<=0,re[U]<=0),Y.every(function(fe){return fe})){_=P,B=!1;break}I.set(P,Y)}if(B)for(var O=y?3:1,de=function(ye){var X=g.find(function(ge){var De=I.get(ge);if(De)return De.slice(0,ye).every(function(ee){return ee})});if(X)return _=X,"break"},he=O;he>0;he--){var xe=de(he);if(xe==="break")break}r.placement!==_&&(r.modifiersData[a]._skip=!0,r.placement=_,r.reset=!0)}}const Wh={name:"flip",enabled:!0,phase:"main",fn:Fh,requiresIfExists:["offset"],data:{_skip:!1}};function Ci(t,r,s){return s===void 0&&(s={x:0,y:0}),{top:t.top-r.height-s.y,right:t.right-r.width+s.x,bottom:t.bottom-r.height+s.y,left:t.left-r.width-s.x}}function $i(t){return[rt,gt,xt,st].some(function(r){return t[r]>=0})}function Uh(t){var r=t.state,s=t.name,a=r.rects.reference,n=r.rects.popper,i=r.modifiersData.preventOverflow,o=rs(r,{elementContext:"reference"}),l=rs(r,{altBoundary:!0}),c=Ci(o,a),d=Ci(l,n,i),m=$i(c),h=$i(d);r.modifiersData[s]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:h},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":h})}const Bh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Uh};function Hh(t,r,s){var a=kt(t),n=[st,rt].indexOf(a)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},r,{placement:t})):s,o=i[0],l=i[1];return o=o||0,l=(l||0)*n,[st,gt].indexOf(a)>=0?{x:l,y:o}:{x:o,y:l}}function zh(t){var r=t.state,s=t.options,a=t.name,n=s.offset,i=n===void 0?[0,0]:n,o=fn.reduce(function(m,h){return m[h]=Hh(h,r.rects,i),m},{}),l=o[r.placement],c=l.x,d=l.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=c,r.modifiersData.popperOffsets.y+=d),r.modifiersData[a]=o}const Gh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zh};function qh(t){var r=t.state,s=t.name;r.modifiersData[s]=Ul({reference:r.rects.reference,element:r.rects.popper,placement:r.placement})}const Yh={name:"popperOffsets",enabled:!0,phase:"read",fn:qh,data:{}};function Vh(t){return t==="x"?"y":"x"}function Kh(t){var r=t.state,s=t.options,a=t.name,n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!1:o,c=s.boundary,d=s.rootBoundary,m=s.altBoundary,h=s.padding,x=s.tether,b=x===void 0?!0:x,y=s.tetherOffset,u=y===void 0?0:y,j=rs(r,{boundary:c,rootBoundary:d,padding:h,altBoundary:m}),v=kt(r.placement),f=jr(r.placement),C=!f,g=pn(v),D=Vh(g),R=r.modifiersData.popperOffsets,I=r.rects.reference,B=r.rects.popper,_=typeof u=="function"?u(Object.assign({},r.rects,{placement:r.placement})):u,q=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),P=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,V={x:0,y:0};if(R){if(i){var z,te=g==="y"?rt:st,ae=g==="y"?xt:gt,re=g==="y"?"height":"width",S=R[g],U=S+j[te],Y=S-j[ae],O=b?-B[re]/2:0,de=f===vr?I[re]:B[re],he=f===vr?-B[re]:-I[re],xe=r.elements.arrow,fe=b&&xe?gn(xe):{width:0,height:0},ye=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:Il(),X=ye[te],ge=ye[ae],De=Ur(0,I[re],fe[re]),ee=C?I[re]/2-O-De-X-q.mainAxis:de-De-X-q.mainAxis,we=C?-I[re]/2+O+De+ge+q.mainAxis:he+De+ge+q.mainAxis,Ne=r.elements.arrow&&us(r.elements.arrow),Ee=Ne?g==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,ze=(z=P==null?void 0:P[g])!=null?z:0,Ze=S+ee-ze-Ee,G=S+we-ze,me=Ur(b?Is(U,Ze):U,S,b?Xt(Y,G):Y);R[g]=me,V[g]=me-S}if(l){var ue,_e=g==="x"?rt:st,T=g==="x"?xt:gt,H=R[D],W=D==="y"?"height":"width",A=H+j[_e],w=H-j[T],p=[rt,st].indexOf(v)!==-1,k=(ue=P==null?void 0:P[D])!=null?ue:0,E=p?A:H-I[W]-B[W]-k+q.altAxis,K=p?H+I[W]+B[W]-k-q.altAxis:w,ne=b&&p?bh(E,H,K):Ur(b?E:A,H,b?K:w);R[D]=ne,V[D]=ne-H}r.modifiersData[a]=V}}const Xh={name:"preventOverflow",enabled:!0,phase:"main",fn:Kh,requiresIfExists:["offset"]};function Jh(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Qh(t){return t===ot(t)||!Ct(t)?vn(t):Jh(t)}function Zh(t){var r=t.getBoundingClientRect(),s=br(r.width)/t.offsetWidth||1,a=br(r.height)/t.offsetHeight||1;return s!==1||a!==1}function ef(t,r,s){s===void 0&&(s=!1);var a=Ct(r),n=Ct(r)&&Zh(r),i=Gt(r),o=yr(t,n,s),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!s)&&((Ut(r)!=="body"||yn(i))&&(l=Qh(r)),Ct(r)?(c=yr(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):i&&(c.x=bn(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function tf(t){var r=new Map,s=new Set,a=[];t.forEach(function(i){r.set(i.name,i)});function n(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!s.has(l)){var c=r.get(l);c&&n(c)}}),a.push(i)}return t.forEach(function(i){s.has(i.name)||n(i)}),a}function rf(t){var r=tf(t);return gh.reduce(function(s,a){return s.concat(r.filter(function(n){return n.phase===a}))},[])}function sf(t){var r;return function(){return r||(r=new Promise(function(s){Promise.resolve().then(function(){r=void 0,s(t())})})),r}}function af(t){var r=t.reduce(function(s,a){var n=s[a.name];return s[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,s},{});return Object.keys(r).map(function(s){return r[s]})}var Di={placement:"bottom",modifiers:[],strategy:"absolute"};function Ei(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return!r.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function nf(t){t===void 0&&(t={});var r=t,s=r.defaultModifiers,a=s===void 0?[]:s,n=r.defaultOptions,i=n===void 0?Di:n;return function(l,c,d){d===void 0&&(d=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},Di,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],x=!1,b={state:m,setOptions:function(v){var f=typeof v=="function"?v(m.options):v;u(),m.options=Object.assign({},i,m.options,f),m.scrollParents={reference:ar(l)?Br(l):l.contextElement?Br(l.contextElement):[],popper:Br(c)};var C=rf(af([].concat(a,m.options.modifiers)));return m.orderedModifiers=C.filter(function(g){return g.enabled}),y(),b.update()},forceUpdate:function(){if(!x){var v=m.elements,f=v.reference,C=v.popper;if(Ei(f,C)){m.rects={reference:ef(f,us(C),m.options.strategy==="fixed"),popper:gn(C)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(q){return m.modifiersData[q.name]=Object.assign({},q.data)});for(var g=0;g<m.orderedModifiers.length;g++){if(m.reset===!0){m.reset=!1,g=-1;continue}var D=m.orderedModifiers[g],R=D.fn,I=D.options,B=I===void 0?{}:I,_=D.name;typeof R=="function"&&(m=R({state:m,options:B,name:_,instance:b})||m)}}}},update:sf(function(){return new Promise(function(j){b.forceUpdate(),j(m)})}),destroy:function(){u(),x=!0}};if(!Ei(l,c))return b;b.setOptions(d).then(function(j){!x&&d.onFirstUpdate&&d.onFirstUpdate(j)});function y(){m.orderedModifiers.forEach(function(j){var v=j.name,f=j.options,C=f===void 0?{}:f,g=j.effect;if(typeof g=="function"){var D=g({state:m,name:v,instance:b,options:C}),R=function(){};h.push(D||R)}})}function u(){h.forEach(function(j){return j()}),h=[]}return b}}var of=nf({defaultModifiers:[Bh,Yh,$h,Eh,Gh,Wh,Xh,Nh]}),Ti=function(r){return{position:r,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},lf={name:"applyStyles",enabled:!1},cf={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(r){var s=r.state;return function(){var a=s.elements,n=a.reference,i=a.popper;if("removeAttribute"in n){var o=(n.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?n.setAttribute("aria-describedby",o.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(r){var s,a=r.state,n=a.elements,i=n.popper,o=n.reference,l=(s=i.getAttribute("role"))==null?void 0:s.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},df=[];function uf(t,r,s){var a=s===void 0?{}:s,n=a.enabled,i=n===void 0?!0:n,o=a.placement,l=o===void 0?"bottom":o,c=a.strategy,d=c===void 0?"absolute":c,m=a.modifiers,h=m===void 0?df:m,x=Ks(a,["enabled","placement","strategy","modifiers"]),b=$.useRef(),y=$.useCallback(function(){var g;(g=b.current)==null||g.update()},[]),u=$.useCallback(function(){var g;(g=b.current)==null||g.forceUpdate()},[]),j=ah($.useState({placement:l,update:y,forceUpdate:u,attributes:{},styles:{popper:Ti(d),arrow:{}}})),v=j[0],f=j[1],C=$.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(D){var R=D.state,I={},B={};Object.keys(R.elements).forEach(function(_){I[_]=R.styles[_],B[_]=R.attributes[_]}),f({state:R,styles:I,attributes:B,update:y,forceUpdate:u,placement:R.placement})}}},[y,u,f]);return $.useEffect(function(){!b.current||!i||b.current.setOptions({placement:l,strategy:d,modifiers:[].concat(h,[C,lf])})},[d,l,C,i]),$.useEffect(function(){if(!(!i||t==null||r==null))return b.current=of(t,r,Pe({},x,{placement:l,strategy:d,modifiers:[].concat(h,[cf,C])})),function(){b.current!=null&&(b.current.destroy(),b.current=void 0,f(function(g){return Pe({},g,{attributes:{},styles:{popper:Ti(d)}})}))}},[i,t,r]),v}function mf(t,r,s,a){var n=a&&typeof a!="boolean"?a.capture:a;t.removeEventListener(r,s,n),s.__once&&t.removeEventListener(r,s.__once,n)}function Lr(t,r,s,a){return th(t,r,s,a),function(){mf(t,r,s,a)}}var hf=function(){},ff=hf;const xf=pt(ff);function gf(t){return t&&"setState"in t?Ho.findDOMNode(t):t??null}const pf=function(t){return cs(gf(t))};var vf=27,Oi=function(){};function bf(t){return t.button===0}function yf(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var Mi=function(r){return r&&("current"in r?r.current:r)};function jf(t,r,s){var a=s===void 0?{}:s,n=a.disabled,i=a.clickTrigger,o=i===void 0?"click":i,l=$.useRef(!1),c=r||Oi,d=$.useCallback(function(x){var b,y=Mi(t);xf(!!y,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!y||yf(x)||!bf(x)||!!es(y,(b=x.composedPath==null?void 0:x.composedPath()[0])!=null?b:x.target)},[t]),m=bi(function(x){l.current||c(x)}),h=bi(function(x){x.keyCode===vf&&c(x)});$.useEffect(function(){if(!(n||t==null)){var x=window.event,b=pf(Mi(t)),y=Lr(b,o,d,!0),u=Lr(b,o,function(f){if(f===x){x=void 0;return}m(f)}),j=Lr(b,"keyup",function(f){if(f===x){x=void 0;return}h(f)}),v=[];return"ontouchstart"in b.documentElement&&(v=[].slice.call(b.body.children).map(function(f){return Lr(f,"mousemove",Oi)})),function(){y(),u(),j(),v.forEach(function(f){return f()})}}},[t,n,o,d,m,h])}function wf(t){var r={};return Array.isArray(t)?(t==null||t.forEach(function(s){r[s.name]=s}),r):t||r}function Nf(t){return t===void 0&&(t={}),Array.isArray(t)?t:Object.keys(t).map(function(r){return t[r].name=r,t[r]})}function Sf(t){var r,s,a,n,i=t.enabled,o=t.enableEvents,l=t.placement,c=t.flip,d=t.offset,m=t.fixed,h=t.containerPadding,x=t.arrowElement,b=t.popperConfig,y=b===void 0?{}:b,u=wf(y.modifiers);return Pe({},y,{placement:l,enabled:i,strategy:m?"fixed":y.strategy,modifiers:Nf(Pe({},u,{eventListeners:{enabled:o},preventOverflow:Pe({},u.preventOverflow,{options:h?Pe({padding:h},(r=u.preventOverflow)==null?void 0:r.options):(s=u.preventOverflow)==null?void 0:s.options}),offset:{options:Pe({offset:d},(a=u.offset)==null?void 0:a.options)},arrow:Pe({},u.arrow,{enabled:!!x,options:Pe({},(n=u.arrow)==null?void 0:n.options,{element:x})}),flip:Pe({enabled:!!c},u.flip)}))})}function kf(t,r){return t.classList?t.classList.contains(r):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+r+" ")!==-1}function Cf(t,r){t.classList?t.classList.add(r):kf(t,r)||(typeof t.className=="string"?t.className=t.className+" "+r:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+r))}function _i(t,r){return t.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function $f(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=_i(t.className,r):t.setAttribute("class",_i(t.className&&t.className.baseVal||"",r))}var ws;function jn(t){if((!ws&&ws!==0||t)&&mn){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),ws=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return ws}var wa=function(r){var s;return typeof document>"u"?null:r==null?cs().body:(typeof r=="function"&&(r=r()),r&&"current"in r&&(r=r.current),(s=r)!=null&&s.nodeType&&r||null)};function Pi(t,r){var s=$.useState(function(){return wa(t)}),a=s[0],n=s[1];if(!a){var i=wa(t);i&&n(i)}return $.useEffect(function(){},[r,a]),$.useEffect(function(){var o=wa(t);o!==a&&n(o)},[t,a]),a}const Ai=t=>!t||typeof t=="function"?t:r=>{t.current=r};function Df(t,r){const s=Ai(t),a=Ai(r);return n=>{s&&s(n),a&&a(n)}}function Ef(t,r){return $.useMemo(()=>Df(t,r),[t,r])}var wn=M.forwardRef(function(t,r){var s=t.flip,a=t.offset,n=t.placement,i=t.containerPadding,o=i===void 0?5:i,l=t.popperConfig,c=l===void 0?{}:l,d=t.transition,m=yi(),h=m[0],x=m[1],b=yi(),y=b[0],u=b[1],j=Ef(x,r),v=Pi(t.container),f=Pi(t.target),C=$.useState(!t.show),g=C[0],D=C[1],R=uf(f,h,Sf({placement:n,enableEvents:!!t.show,containerPadding:o||5,flip:s,offset:a,arrowElement:y,popperConfig:c})),I=R.styles,B=R.attributes,_=Ks(R,["styles","attributes"]);t.show?g&&D(!1):!t.transition&&!g&&D(!0);var q=function(){D(!0),t.onExited&&t.onExited.apply(t,arguments)},P=t.show||d&&!g;if(jf(h,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!P)return null;var V=t.children(Pe({},_,{show:!!t.show,props:Pe({},B.popper,{style:I.popper,ref:j}),arrowProps:Pe({},B.arrow,{style:I.arrow,ref:u})}));if(d){var z=t.onExit,te=t.onExiting,ae=t.onEnter,re=t.onEntering,S=t.onEntered;V=M.createElement(d,{in:t.show,appear:!0,onExit:z,onExiting:te,onExited:q,onEnter:ae,onEntering:re,onEntered:S},V)}return v?Ho.createPortal(V,v):null});wn.displayName="Overlay";wn.propTypes={show:Z.bool,placement:Z.oneOf(fn),target:Z.any,container:Z.any,flip:Z.bool,children:Z.func.isRequired,containerPadding:Z.number,popperConfig:Z.object,rootClose:Z.bool,rootCloseEvent:Z.oneOf(["click","mousedown"]),rootCloseDisabled:Z.bool,onHide:function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];if(r.rootClose){var i;return(i=Z.func).isRequired.apply(i,[r].concat(a))}return Z.func.apply(Z,[r].concat(a))},transition:Z.elementType,onEnter:Z.func,onEntering:Z.func,onEntered:Z.func,onExit:Z.func,onExiting:Z.func,onExited:Z.func};function Tf(){this.__data__=[],this.size=0}var Of=Tf,Mf=is;function _f(t,r){for(var s=t.length;s--;)if(Mf(t[s][0],r))return s;return-1}var Zs=_f,Pf=Zs,Af=Array.prototype,Rf=Af.splice;function If(t){var r=this.__data__,s=Pf(r,t);if(s<0)return!1;var a=r.length-1;return s==a?r.pop():Rf.call(r,s,1),--this.size,!0}var Lf=If,Ff=Zs;function Wf(t){var r=this.__data__,s=Ff(r,t);return s<0?void 0:r[s][1]}var Uf=Wf,Bf=Zs;function Hf(t){return Bf(this.__data__,t)>-1}var zf=Hf,Gf=Zs;function qf(t,r){var s=this.__data__,a=Gf(s,t);return a<0?(++this.size,s.push([t,r])):s[a][1]=r,this}var Yf=qf,Vf=Of,Kf=Lf,Xf=Uf,Jf=zf,Qf=Yf;function $r(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var a=t[r];this.set(a[0],a[1])}}$r.prototype.clear=Vf;$r.prototype.delete=Kf;$r.prototype.get=Xf;$r.prototype.has=Jf;$r.prototype.set=Qf;var ea=$r,Zf=ea;function ex(){this.__data__=new Zf,this.size=0}var tx=ex;function rx(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}var sx=rx;function ax(t){return this.__data__.get(t)}var nx=ax;function ix(t){return this.__data__.has(t)}var ox=ix,lx=Et,cx=lx["__core-js_shared__"],dx=cx,Na=dx,Ri=function(){var t=/[^.]+$/.exec(Na&&Na.keys&&Na.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ux(t){return!!Ri&&Ri in t}var mx=ux,hx=Function.prototype,fx=hx.toString;function xx(t){if(t!=null){try{return fx.call(t)}catch{}try{return t+""}catch{}}return""}var Bl=xx,gx=ln,px=mx,vx=Rt,bx=Bl,yx=/[\\^$.*+?()[\]{}|]/g,jx=/^\[object .+?Constructor\]$/,wx=Function.prototype,Nx=Object.prototype,Sx=wx.toString,kx=Nx.hasOwnProperty,Cx=RegExp("^"+Sx.call(kx).replace(yx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $x(t){if(!vx(t)||px(t))return!1;var r=gx(t)?Cx:jx;return r.test(bx(t))}var Dx=$x;function Ex(t,r){return t==null?void 0:t[r]}var Tx=Ex,Ox=Dx,Mx=Tx;function _x(t,r){var s=Mx(t,r);return Ox(s)?s:void 0}var ir=_x,Px=ir,Ax=Et,Rx=Px(Ax,"Map"),Nn=Rx,Ix=ir,Lx=Ix(Object,"create"),ta=Lx,Ii=ta;function Fx(){this.__data__=Ii?Ii(null):{},this.size=0}var Wx=Fx;function Ux(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Bx=Ux,Hx=ta,zx="__lodash_hash_undefined__",Gx=Object.prototype,qx=Gx.hasOwnProperty;function Yx(t){var r=this.__data__;if(Hx){var s=r[t];return s===zx?void 0:s}return qx.call(r,t)?r[t]:void 0}var Vx=Yx,Kx=ta,Xx=Object.prototype,Jx=Xx.hasOwnProperty;function Qx(t){var r=this.__data__;return Kx?r[t]!==void 0:Jx.call(r,t)}var Zx=Qx,eg=ta,tg="__lodash_hash_undefined__";function rg(t,r){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=eg&&r===void 0?tg:r,this}var sg=rg,ag=Wx,ng=Bx,ig=Vx,og=Zx,lg=sg;function Dr(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var a=t[r];this.set(a[0],a[1])}}Dr.prototype.clear=ag;Dr.prototype.delete=ng;Dr.prototype.get=ig;Dr.prototype.has=og;Dr.prototype.set=lg;var cg=Dr,Li=cg,dg=ea,ug=Nn;function mg(){this.size=0,this.__data__={hash:new Li,map:new(ug||dg),string:new Li}}var hg=mg;function fg(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}var xg=fg,gg=xg;function pg(t,r){var s=t.__data__;return gg(r)?s[typeof r=="string"?"string":"hash"]:s.map}var ra=pg,vg=ra;function bg(t){var r=vg(this,t).delete(t);return this.size-=r?1:0,r}var yg=bg,jg=ra;function wg(t){return jg(this,t).get(t)}var Ng=wg,Sg=ra;function kg(t){return Sg(this,t).has(t)}var Cg=kg,$g=ra;function Dg(t,r){var s=$g(this,t),a=s.size;return s.set(t,r),this.size+=s.size==a?0:1,this}var Eg=Dg,Tg=hg,Og=yg,Mg=Ng,_g=Cg,Pg=Eg;function Er(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var a=t[r];this.set(a[0],a[1])}}Er.prototype.clear=Tg;Er.prototype.delete=Og;Er.prototype.get=Mg;Er.prototype.has=_g;Er.prototype.set=Pg;var Sn=Er,Ag=ea,Rg=Nn,Ig=Sn,Lg=200;function Fg(t,r){var s=this.__data__;if(s instanceof Ag){var a=s.__data__;if(!Rg||a.length<Lg-1)return a.push([t,r]),this.size=++s.size,this;s=this.__data__=new Ig(a)}return s.set(t,r),this.size=s.size,this}var Wg=Fg,Ug=ea,Bg=tx,Hg=sx,zg=nx,Gg=ox,qg=Wg;function Tr(t){var r=this.__data__=new Ug(t);this.size=r.size}Tr.prototype.clear=Bg;Tr.prototype.delete=Hg;Tr.prototype.get=zg;Tr.prototype.has=Gg;Tr.prototype.set=qg;var kn=Tr,Yg="__lodash_hash_undefined__";function Vg(t){return this.__data__.set(t,Yg),this}var Kg=Vg;function Xg(t){return this.__data__.has(t)}var Jg=Xg,Qg=Sn,Zg=Kg,ep=Jg;function Ls(t){var r=-1,s=t==null?0:t.length;for(this.__data__=new Qg;++r<s;)this.add(t[r])}Ls.prototype.add=Ls.prototype.push=Zg;Ls.prototype.has=ep;var tp=Ls;function rp(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(r(t[s],s,t))return!0;return!1}var sp=rp;function ap(t,r){return t.has(r)}var np=ap,ip=tp,op=sp,lp=np,cp=1,dp=2;function up(t,r,s,a,n,i){var o=s&cp,l=t.length,c=r.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(t),m=i.get(r);if(d&&m)return d==r&&m==t;var h=-1,x=!0,b=s&dp?new ip:void 0;for(i.set(t,r),i.set(r,t);++h<l;){var y=t[h],u=r[h];if(a)var j=o?a(u,y,h,r,t,i):a(y,u,h,t,r,i);if(j!==void 0){if(j)continue;x=!1;break}if(b){if(!op(r,function(v,f){if(!lp(b,f)&&(y===v||n(y,v,s,a,i)))return b.push(f)})){x=!1;break}}else if(!(y===u||n(y,u,s,a,i))){x=!1;break}}return i.delete(t),i.delete(r),x}var Hl=up,mp=Et,hp=mp.Uint8Array,zl=hp;function fp(t){var r=-1,s=Array(t.size);return t.forEach(function(a,n){s[++r]=[n,a]}),s}var xp=fp;function gp(t){var r=-1,s=Array(t.size);return t.forEach(function(a){s[++r]=a}),s}var pp=gp,Fi=kr,Wi=zl,vp=is,bp=Hl,yp=xp,jp=pp,wp=1,Np=2,Sp="[object Boolean]",kp="[object Date]",Cp="[object Error]",$p="[object Map]",Dp="[object Number]",Ep="[object RegExp]",Tp="[object Set]",Op="[object String]",Mp="[object Symbol]",_p="[object ArrayBuffer]",Pp="[object DataView]",Ui=Fi?Fi.prototype:void 0,Sa=Ui?Ui.valueOf:void 0;function Ap(t,r,s,a,n,i,o){switch(s){case Pp:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case _p:return!(t.byteLength!=r.byteLength||!i(new Wi(t),new Wi(r)));case Sp:case kp:case Dp:return vp(+t,+r);case Cp:return t.name==r.name&&t.message==r.message;case Ep:case Op:return t==r+"";case $p:var l=yp;case Tp:var c=a&wp;if(l||(l=jp),t.size!=r.size&&!c)return!1;var d=o.get(t);if(d)return d==r;a|=Np,o.set(t,r);var m=bp(l(t),l(r),a,n,i,o);return o.delete(t),m;case Mp:if(Sa)return Sa.call(t)==Sa.call(r)}return!1}var Rp=Ap;function Ip(t,r){for(var s=-1,a=r.length,n=t.length;++s<a;)t[n+s]=r[s];return t}var Cn=Ip,Lp=Array.isArray,vt=Lp,Fp=Cn,Wp=vt;function Up(t,r,s){var a=r(t);return Wp(t)?a:Fp(a,s(t))}var Gl=Up;function Bp(t,r){for(var s=-1,a=t==null?0:t.length,n=0,i=[];++s<a;){var o=t[s];r(o,s,t)&&(i[n++]=o)}return i}var Hp=Bp;function zp(){return[]}var ql=zp,Gp=Hp,qp=ql,Yp=Object.prototype,Vp=Yp.propertyIsEnumerable,Bi=Object.getOwnPropertySymbols,Kp=Bi?function(t){return t==null?[]:(t=Object(t),Gp(Bi(t),function(r){return Vp.call(t,r)}))}:qp,$n=Kp;function Xp(t,r){for(var s=-1,a=Array(t);++s<t;)a[s]=r(s);return a}var Jp=Xp,Qp=Cr,Zp=zt,e0="[object Arguments]";function t0(t){return Zp(t)&&Qp(t)==e0}var r0=t0,Hi=r0,s0=zt,Yl=Object.prototype,a0=Yl.hasOwnProperty,n0=Yl.propertyIsEnumerable,i0=Hi(function(){return arguments}())?Hi:function(t){return s0(t)&&a0.call(t,"callee")&&!n0.call(t,"callee")},Dn=i0,Fs={exports:{}};function o0(){return!1}var l0=o0;Fs.exports;(function(t,r){var s=Et,a=l0,n=r&&!r.nodeType&&r,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,l=o?s.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;t.exports=d})(Fs,Fs.exports);var sa=Fs.exports,c0=Cr,d0=cn,u0=zt,m0="[object Arguments]",h0="[object Array]",f0="[object Boolean]",x0="[object Date]",g0="[object Error]",p0="[object Function]",v0="[object Map]",b0="[object Number]",y0="[object Object]",j0="[object RegExp]",w0="[object Set]",N0="[object String]",S0="[object WeakMap]",k0="[object ArrayBuffer]",C0="[object DataView]",$0="[object Float32Array]",D0="[object Float64Array]",E0="[object Int8Array]",T0="[object Int16Array]",O0="[object Int32Array]",M0="[object Uint8Array]",_0="[object Uint8ClampedArray]",P0="[object Uint16Array]",A0="[object Uint32Array]",Te={};Te[$0]=Te[D0]=Te[E0]=Te[T0]=Te[O0]=Te[M0]=Te[_0]=Te[P0]=Te[A0]=!0;Te[m0]=Te[h0]=Te[k0]=Te[f0]=Te[C0]=Te[x0]=Te[g0]=Te[p0]=Te[v0]=Te[b0]=Te[y0]=Te[j0]=Te[w0]=Te[N0]=Te[S0]=!1;function R0(t){return u0(t)&&d0(t.length)&&!!Te[c0(t)]}var I0=R0;function L0(t){return function(r){return t(r)}}var aa=L0,Ws={exports:{}};Ws.exports;(function(t,r){var s=kl,a=r&&!r.nodeType&&r,n=a&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===a,o=i&&s.process,l=function(){try{var c=n&&n.require&&n.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(Ws,Ws.exports);var En=Ws.exports,F0=I0,W0=aa,zi=En,Gi=zi&&zi.isTypedArray,U0=Gi?W0(Gi):F0,Tn=U0,B0=Jp,H0=Dn,z0=vt,G0=sa,q0=dn,Y0=Tn,V0=Object.prototype,K0=V0.hasOwnProperty;function X0(t,r){var s=z0(t),a=!s&&H0(t),n=!s&&!a&&G0(t),i=!s&&!a&&!n&&Y0(t),o=s||a||n||i,l=o?B0(t.length,String):[],c=l.length;for(var d in t)(r||K0.call(t,d))&&!(o&&(d=="length"||n&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||q0(d,c)))&&l.push(d);return l}var Vl=X0,J0=Object.prototype;function Q0(t){var r=t&&t.constructor,s=typeof r=="function"&&r.prototype||J0;return t===s}var On=Q0;function Z0(t,r){return function(s){return t(r(s))}}var Kl=Z0,ev=Kl,tv=ev(Object.keys,Object),rv=tv,sv=On,av=rv,nv=Object.prototype,iv=nv.hasOwnProperty;function ov(t){if(!sv(t))return av(t);var r=[];for(var s in Object(t))iv.call(t,s)&&s!="constructor"&&r.push(s);return r}var lv=ov,cv=Vl,dv=lv,uv=os;function mv(t){return uv(t)?cv(t):dv(t)}var ms=mv,hv=Gl,fv=$n,xv=ms;function gv(t){return hv(t,xv,fv)}var Xl=gv,qi=Xl,pv=1,vv=Object.prototype,bv=vv.hasOwnProperty;function yv(t,r,s,a,n,i){var o=s&pv,l=qi(t),c=l.length,d=qi(r),m=d.length;if(c!=m&&!o)return!1;for(var h=c;h--;){var x=l[h];if(!(o?x in r:bv.call(r,x)))return!1}var b=i.get(t),y=i.get(r);if(b&&y)return b==r&&y==t;var u=!0;i.set(t,r),i.set(r,t);for(var j=o;++h<c;){x=l[h];var v=t[x],f=r[x];if(a)var C=o?a(f,v,x,r,t,i):a(v,f,x,t,r,i);if(!(C===void 0?v===f||n(v,f,s,a,i):C)){u=!1;break}j||(j=x=="constructor")}if(u&&!j){var g=t.constructor,D=r.constructor;g!=D&&"constructor"in t&&"constructor"in r&&!(typeof g=="function"&&g instanceof g&&typeof D=="function"&&D instanceof D)&&(u=!1)}return i.delete(t),i.delete(r),u}var jv=yv,wv=ir,Nv=Et,Sv=wv(Nv,"DataView"),kv=Sv,Cv=ir,$v=Et,Dv=Cv($v,"Promise"),Ev=Dv,Tv=ir,Ov=Et,Mv=Tv(Ov,"Set"),_v=Mv,Pv=ir,Av=Et,Rv=Pv(Av,"WeakMap"),Iv=Rv,Ba=kv,Ha=Nn,za=Ev,Ga=_v,qa=Iv,Jl=Cr,Or=Bl,Yi="[object Map]",Lv="[object Object]",Vi="[object Promise]",Ki="[object Set]",Xi="[object WeakMap]",Ji="[object DataView]",Fv=Or(Ba),Wv=Or(Ha),Uv=Or(za),Bv=Or(Ga),Hv=Or(qa),qt=Jl;(Ba&&qt(new Ba(new ArrayBuffer(1)))!=Ji||Ha&&qt(new Ha)!=Yi||za&&qt(za.resolve())!=Vi||Ga&&qt(new Ga)!=Ki||qa&&qt(new qa)!=Xi)&&(qt=function(t){var r=Jl(t),s=r==Lv?t.constructor:void 0,a=s?Or(s):"";if(a)switch(a){case Fv:return Ji;case Wv:return Yi;case Uv:return Vi;case Bv:return Ki;case Hv:return Xi}return r});var na=qt,ka=kn,zv=Hl,Gv=Rp,qv=jv,Qi=na,Zi=vt,eo=sa,Yv=Tn,Vv=1,to="[object Arguments]",ro="[object Array]",Ns="[object Object]",Kv=Object.prototype,so=Kv.hasOwnProperty;function Xv(t,r,s,a,n,i){var o=Zi(t),l=Zi(r),c=o?ro:Qi(t),d=l?ro:Qi(r);c=c==to?Ns:c,d=d==to?Ns:d;var m=c==Ns,h=d==Ns,x=c==d;if(x&&eo(t)){if(!eo(r))return!1;o=!0,m=!1}if(x&&!m)return i||(i=new ka),o||Yv(t)?zv(t,r,s,a,n,i):Gv(t,r,c,s,a,n,i);if(!(s&Vv)){var b=m&&so.call(t,"__wrapped__"),y=h&&so.call(r,"__wrapped__");if(b||y){var u=b?t.value():t,j=y?r.value():r;return i||(i=new ka),n(u,j,s,a,i)}}return x?(i||(i=new ka),qv(t,r,s,a,n,i)):!1}var Jv=Xv,Qv=Jv,ao=zt;function Ql(t,r,s,a,n){return t===r?!0:t==null||r==null||!ao(t)&&!ao(r)?t!==t&&r!==r:Qv(t,r,s,a,Ql,n)}var Mn=Ql,Zv=Mn;function eb(t,r){return Zv(t,r)}var tb=eb;const rb=pt(tb);function Ca(t,r){var s=un(t);return s?s.innerHeight:Kt(t).height}function Zl(t,r,s){t.closest&&!s&&t.closest(r);var a=t;do{if(Qm(a,r))return a;a=a.parentElement}while(a&&a!==s&&a.nodeType===document.ELEMENT_NODE);return null}function sb(t,r,s,a){for(var n=t.length,i=s+(a?1:-1);a?i--:++i<n;)if(r(t[i],i,t))return i;return-1}var ab=sb,nb=kn,ib=Mn,ob=1,lb=2;function cb(t,r,s,a){var n=s.length,i=n,o=!a;if(t==null)return!i;for(t=Object(t);n--;){var l=s[n];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++n<i;){l=s[n];var c=l[0],d=t[c],m=l[1];if(o&&l[2]){if(d===void 0&&!(c in t))return!1}else{var h=new nb;if(a)var x=a(d,m,c,t,r,h);if(!(x===void 0?ib(m,d,ob|lb,a,h):x))return!1}}return!0}var db=cb,ub=Rt;function mb(t){return t===t&&!ub(t)}var ec=mb,hb=ec,fb=ms;function xb(t){for(var r=fb(t),s=r.length;s--;){var a=r[s],n=t[a];r[s]=[a,n,hb(n)]}return r}var gb=xb;function pb(t,r){return function(s){return s==null?!1:s[t]===r&&(r!==void 0||t in Object(s))}}var tc=pb,vb=db,bb=gb,yb=tc;function jb(t){var r=bb(t);return r.length==1&&r[0][2]?yb(r[0][0],r[0][1]):function(s){return s===t||vb(s,t,r)}}var wb=jb,Nb=vt,Sb=ls,kb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cb=/^\w*$/;function $b(t,r){if(Nb(t))return!1;var s=typeof t;return s=="number"||s=="symbol"||s=="boolean"||t==null||Sb(t)?!0:Cb.test(t)||!kb.test(t)||r!=null&&t in Object(r)}var _n=$b,rc=Sn,Db="Expected a function";function Pn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(Db);var s=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=s.cache;if(i.has(n))return i.get(n);var o=t.apply(this,a);return s.cache=i.set(n,o)||i,o};return s.cache=new(Pn.Cache||rc),s}Pn.Cache=rc;var Eb=Pn,Tb=Eb,Ob=500;function Mb(t){var r=Tb(t,function(a){return s.size===Ob&&s.clear(),a}),s=r.cache;return r}var _b=Mb,Pb=_b,Ab=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rb=/\\(\\)?/g,Ib=Pb(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Ab,function(s,a,n,i){r.push(n?i.replace(Rb,"$1"):a||s)}),r}),Lb=Ib;function Fb(t,r){for(var s=-1,a=t==null?0:t.length,n=Array(a);++s<a;)n[s]=r(t[s],s,t);return n}var An=Fb,no=kr,Wb=An,Ub=vt,Bb=ls,io=no?no.prototype:void 0,oo=io?io.toString:void 0;function sc(t){if(typeof t=="string")return t;if(Ub(t))return Wb(t,sc)+"";if(Bb(t))return oo?oo.call(t):"";var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var Hb=sc,zb=Hb;function Gb(t){return t==null?"":zb(t)}var qb=Gb,Yb=vt,Vb=_n,Kb=Lb,Xb=qb;function Jb(t,r){return Yb(t)?t:Vb(t,r)?[t]:Kb(Xb(t))}var ia=Jb,Qb=ls;function Zb(t){if(typeof t=="string"||Qb(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var hs=Zb,ey=ia,ty=hs;function ry(t,r){r=ey(r,t);for(var s=0,a=r.length;t!=null&&s<a;)t=t[ty(r[s++])];return s&&s==a?t:void 0}var oa=ry,sy=oa;function ay(t,r,s){var a=t==null?void 0:sy(t,r);return a===void 0?s:a}var ny=ay;function iy(t,r){return t!=null&&r in Object(t)}var oy=iy,ly=ia,cy=Dn,dy=vt,uy=dn,my=cn,hy=hs;function fy(t,r,s){r=ly(r,t);for(var a=-1,n=r.length,i=!1;++a<n;){var o=hy(r[a]);if(!(i=t!=null&&s(t,o)))break;t=t[o]}return i||++a!=n?i:(n=t==null?0:t.length,!!n&&my(n)&&uy(o,n)&&(dy(t)||cy(t)))}var xy=fy,gy=oy,py=xy;function vy(t,r){return t!=null&&py(t,r,gy)}var by=vy,yy=Mn,jy=ny,wy=by,Ny=_n,Sy=ec,ky=tc,Cy=hs,$y=1,Dy=2;function Ey(t,r){return Ny(t)&&Sy(r)?ky(Cy(t),r):function(s){var a=jy(s,t);return a===void 0&&a===r?wy(s,t):yy(r,a,$y|Dy)}}var Ty=Ey;function Oy(t){return t}var la=Oy;function My(t){return function(r){return r==null?void 0:r[t]}}var _y=My,Py=oa;function Ay(t){return function(r){return Py(r,t)}}var Ry=Ay,Iy=_y,Ly=Ry,Fy=_n,Wy=hs;function Uy(t){return Fy(t)?Iy(Wy(t)):Ly(t)}var By=Uy,Hy=wb,zy=Ty,Gy=la,qy=vt,Yy=By;function Vy(t){return typeof t=="function"?t:t==null?Gy:typeof t=="object"?qy(t)?zy(t[0],t[1]):Hy(t):Yy(t)}var ca=Vy,Ky=ab,Xy=ca,Jy=Dl,Qy=Math.max;function Zy(t,r,s){var a=t==null?0:t.length;if(!a)return-1;var n=s==null?0:Jy(s);return n<0&&(n=Qy(a+n,0)),Ky(t,Xy(r),n)}var ej=Zy;const tj=pt(ej);var rj=Math.ceil,sj=Math.max;function aj(t,r,s,a){for(var n=-1,i=sj(rj((r-t)/(s||1)),0),o=Array(i);i--;)o[a?i:++n]=t,t+=s;return o}var nj=aj,ij=nj,oj=Js,$a=$l;function lj(t){return function(r,s,a){return a&&typeof a!="number"&&oj(r,s,a)&&(s=a=void 0),r=$a(r),s===void 0?(s=r,r=0):s=$a(s),a=a===void 0?r<s?1:-1:$a(a),ij(r,s,a,t)}}var cj=lj,dj=cj,uj=dj(),mj=uj;const hj=pt(mj);var lo=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function fj(t,r){return!!(t===r||lo(t)&&lo(r))}function xj(t,r){if(t.length!==r.length)return!1;for(var s=0;s<t.length;s++)if(!fj(t[s],r[s]))return!1;return!0}function ac(t,r){r===void 0&&(r=xj);var s=null;function a(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(s&&s.lastThis===this&&r(n,s.lastArgs))return s.lastResult;var o=t.apply(this,n);return s={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){s=null},a}function Ya(t,r){var s=un(t);return s?s.innerWidth:Kt(t).width}var co=kr,gj=Dn,pj=vt,uo=co?co.isConcatSpreadable:void 0;function vj(t){return pj(t)||gj(t)||!!(uo&&t&&t[uo])}var bj=vj,yj=Cn,jj=bj;function nc(t,r,s,a,n){var i=-1,o=t.length;for(s||(s=jj),n||(n=[]);++i<o;){var l=t[i];r>0&&s(l)?r>1?nc(l,r-1,s,a,n):yj(n,l):a||(n[n.length]=l)}return n}var ic=nc;function wj(t){return function(r,s,a){for(var n=-1,i=Object(r),o=a(r),l=o.length;l--;){var c=o[t?l:++n];if(s(i[c],c,i)===!1)break}return r}}var Nj=wj,Sj=Nj,kj=Sj(),Cj=kj,$j=Cj,Dj=ms;function Ej(t,r){return t&&$j(t,r,Dj)}var Rn=Ej,Tj=os;function Oj(t,r){return function(s,a){if(s==null)return s;if(!Tj(s))return t(s,a);for(var n=s.length,i=r?n:-1,o=Object(s);(r?i--:++i<n)&&a(o[i],i,o)!==!1;);return s}}var Mj=Oj,_j=Rn,Pj=Mj,Aj=Pj(_j),Rj=Aj,Ij=Rj,Lj=os;function Fj(t,r){var s=-1,a=Lj(t)?Array(t.length):[];return Ij(t,function(n,i,o){a[++s]=r(n,i,o)}),a}var Wj=Fj;function Uj(t,r){var s=t.length;for(t.sort(r);s--;)t[s]=t[s].value;return t}var Bj=Uj,mo=ls;function Hj(t,r){if(t!==r){var s=t!==void 0,a=t===null,n=t===t,i=mo(t),o=r!==void 0,l=r===null,c=r===r,d=mo(r);if(!l&&!d&&!i&&t>r||i&&o&&c&&!l&&!d||a&&o&&c||!s&&c||!n)return 1;if(!a&&!i&&!d&&t<r||d&&s&&n&&!a&&!i||l&&s&&n||!o&&n||!c)return-1}return 0}var zj=Hj,Gj=zj;function qj(t,r,s){for(var a=-1,n=t.criteria,i=r.criteria,o=n.length,l=s.length;++a<o;){var c=Gj(n[a],i[a]);if(c){if(a>=l)return c;var d=s[a];return c*(d=="desc"?-1:1)}}return t.index-r.index}var Yj=qj,Da=An,Vj=oa,Kj=ca,Xj=Wj,Jj=Bj,Qj=aa,Zj=Yj,ew=la,tw=vt;function rw(t,r,s){r.length?r=Da(r,function(i){return tw(i)?function(o){return Vj(o,i.length===1?i[0]:i)}:i}):r=[ew];var a=-1;r=Da(r,Qj(Kj));var n=Xj(t,function(i,o,l){var c=Da(r,function(d){return d(i)});return{criteria:c,index:++a,value:i}});return Jj(n,function(i,o){return Zj(i,o,s)})}var sw=rw;function aw(t,r,s){switch(s.length){case 0:return t.call(r);case 1:return t.call(r,s[0]);case 2:return t.call(r,s[0],s[1]);case 3:return t.call(r,s[0],s[1],s[2])}return t.apply(r,s)}var nw=aw,iw=nw,ho=Math.max;function ow(t,r,s){return r=ho(r===void 0?t.length-1:r,0),function(){for(var a=arguments,n=-1,i=ho(a.length-r,0),o=Array(i);++n<i;)o[n]=a[r+n];n=-1;for(var l=Array(r+1);++n<r;)l[n]=a[n];return l[r]=s(o),iw(t,this,l)}}var oc=ow;function lw(t){return function(){return t}}var cw=lw,dw=ir,uw=function(){try{var t=dw(Object,"defineProperty");return t({},"",{}),t}catch{}}(),lc=uw,mw=cw,fo=lc,hw=la,fw=fo?function(t,r){return fo(t,"toString",{configurable:!0,enumerable:!1,value:mw(r),writable:!0})}:hw,xw=fw,gw=800,pw=16,vw=Date.now;function bw(t){var r=0,s=0;return function(){var a=vw(),n=pw-(a-s);if(s=a,n>0){if(++r>=gw)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var yw=bw,jw=xw,ww=yw,Nw=ww(jw),cc=Nw,Sw=la,kw=oc,Cw=cc;function $w(t,r){return Cw(kw(t,r,Sw),t+"")}var dc=$w,Dw=ic,Ew=sw,Tw=dc,xo=Js,Ow=Tw(function(t,r){if(t==null)return[];var s=r.length;return s>1&&xo(t,r[0],r[1])?r=[]:s>2&&xo(r[0],r[1],r[2])&&(r=[r[0]]),Ew(t,Dw(r,1),[])}),Mw=Ow;const _w=pt(Mw);function uc(t){return il(t)||Nl(t)||an(t)||ol()}function Pw(t){var r=[];if(t!=null)for(var s in Object(t))r.push(s);return r}var Aw=Pw,Rw=Rt,Iw=On,Lw=Aw,Fw=Object.prototype,Ww=Fw.hasOwnProperty;function Uw(t){if(!Rw(t))return Lw(t);var r=Iw(t),s=[];for(var a in t)a=="constructor"&&(r||!Ww.call(t,a))||s.push(a);return s}var Bw=Uw,Hw=Vl,zw=Bw,Gw=os;function qw(t){return Gw(t)?Hw(t,!0):zw(t)}var da=qw,Yw=dc,Vw=is,Kw=Js,Xw=da,mc=Object.prototype,Jw=mc.hasOwnProperty,Qw=Yw(function(t,r){t=Object(t);var s=-1,a=r.length,n=a>2?r[2]:void 0;for(n&&Kw(r[0],r[1],n)&&(a=1);++s<a;)for(var i=r[s],o=Xw(i),l=-1,c=o.length;++l<c;){var d=o[l],m=t[d];(m===void 0||Vw(m,mc[d])&&!Jw.call(t,d))&&(t[d]=i[d])}return t}),Zw=Qw;const eN=pt(Zw);var go=lc;function tN(t,r,s){r=="__proto__"&&go?go(t,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[r]=s}var In=tN,rN=In,sN=Rn,aN=ca;function nN(t,r){var s={};return r=aN(r),sN(t,function(a,n,i){rN(s,n,r(a,n,i))}),s}var iN=nN;const oN=pt(iN);function lN(t,r){for(var s=-1,a=t==null?0:t.length;++s<a&&r(t[s],s,t)!==!1;);return t}var hc=lN,cN=In,dN=is,uN=Object.prototype,mN=uN.hasOwnProperty;function hN(t,r,s){var a=t[r];(!(mN.call(t,r)&&dN(a,s))||s===void 0&&!(r in t))&&cN(t,r,s)}var fc=hN,fN=fc,xN=In;function gN(t,r,s,a){var n=!s;s||(s={});for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a?a(s[l],t[l],l,s,t):void 0;c===void 0&&(c=t[l]),n?xN(s,l,c):fN(s,l,c)}return s}var fs=gN,pN=fs,vN=ms;function bN(t,r){return t&&pN(r,vN(r),t)}var yN=bN,jN=fs,wN=da;function NN(t,r){return t&&jN(r,wN(r),t)}var SN=NN,Us={exports:{}};Us.exports;(function(t,r){var s=Et,a=r&&!r.nodeType&&r,n=a&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===a,o=i?s.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,m){if(m)return d.slice();var h=d.length,x=l?l(h):new d.constructor(h);return d.copy(x),x}t.exports=c})(Us,Us.exports);var kN=Us.exports;function CN(t,r){var s=-1,a=t.length;for(r||(r=Array(a));++s<a;)r[s]=t[s];return r}var $N=CN,DN=fs,EN=$n;function TN(t,r){return DN(t,EN(t),r)}var ON=TN,MN=Kl,_N=MN(Object.getPrototypeOf,Object),ua=_N,PN=Cn,AN=ua,RN=$n,IN=ql,LN=Object.getOwnPropertySymbols,FN=LN?function(t){for(var r=[];t;)PN(r,RN(t)),t=AN(t);return r}:IN,xc=FN,WN=fs,UN=xc;function BN(t,r){return WN(t,UN(t),r)}var HN=BN,zN=Gl,GN=xc,qN=da;function YN(t){return zN(t,qN,GN)}var gc=YN,VN=Object.prototype,KN=VN.hasOwnProperty;function XN(t){var r=t.length,s=new t.constructor(r);return r&&typeof t[0]=="string"&&KN.call(t,"index")&&(s.index=t.index,s.input=t.input),s}var JN=XN,po=zl;function QN(t){var r=new t.constructor(t.byteLength);return new po(r).set(new po(t)),r}var Ln=QN,ZN=Ln;function e1(t,r){var s=r?ZN(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)}var t1=e1,r1=/\w*$/;function s1(t){var r=new t.constructor(t.source,r1.exec(t));return r.lastIndex=t.lastIndex,r}var a1=s1,vo=kr,bo=vo?vo.prototype:void 0,yo=bo?bo.valueOf:void 0;function n1(t){return yo?Object(yo.call(t)):{}}var i1=n1,o1=Ln;function l1(t,r){var s=r?o1(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)}var c1=l1,d1=Ln,u1=t1,m1=a1,h1=i1,f1=c1,x1="[object Boolean]",g1="[object Date]",p1="[object Map]",v1="[object Number]",b1="[object RegExp]",y1="[object Set]",j1="[object String]",w1="[object Symbol]",N1="[object ArrayBuffer]",S1="[object DataView]",k1="[object Float32Array]",C1="[object Float64Array]",$1="[object Int8Array]",D1="[object Int16Array]",E1="[object Int32Array]",T1="[object Uint8Array]",O1="[object Uint8ClampedArray]",M1="[object Uint16Array]",_1="[object Uint32Array]";function P1(t,r,s){var a=t.constructor;switch(r){case N1:return d1(t);case x1:case g1:return new a(+t);case S1:return u1(t,s);case k1:case C1:case $1:case D1:case E1:case T1:case O1:case M1:case _1:return f1(t,s);case p1:return new a;case v1:case j1:return new a(t);case b1:return m1(t);case y1:return new a;case w1:return h1(t)}}var A1=P1,R1=Rt,jo=Object.create,I1=function(){function t(){}return function(r){if(!R1(r))return{};if(jo)return jo(r);t.prototype=r;var s=new t;return t.prototype=void 0,s}}(),pc=I1,L1=pc,F1=ua,W1=On;function U1(t){return typeof t.constructor=="function"&&!W1(t)?L1(F1(t)):{}}var B1=U1,H1=na,z1=zt,G1="[object Map]";function q1(t){return z1(t)&&H1(t)==G1}var Y1=q1,V1=Y1,K1=aa,wo=En,No=wo&&wo.isMap,X1=No?K1(No):V1,J1=X1,Q1=na,Z1=zt,e2="[object Set]";function t2(t){return Z1(t)&&Q1(t)==e2}var r2=t2,s2=r2,a2=aa,So=En,ko=So&&So.isSet,n2=ko?a2(ko):s2,i2=n2,o2=kn,l2=hc,c2=fc,d2=yN,u2=SN,m2=kN,h2=$N,f2=ON,x2=HN,g2=Xl,p2=gc,v2=na,b2=JN,y2=A1,j2=B1,w2=vt,N2=sa,S2=J1,k2=Rt,C2=i2,$2=ms,D2=da,E2=1,T2=2,O2=4,vc="[object Arguments]",M2="[object Array]",_2="[object Boolean]",P2="[object Date]",A2="[object Error]",bc="[object Function]",R2="[object GeneratorFunction]",I2="[object Map]",L2="[object Number]",yc="[object Object]",F2="[object RegExp]",W2="[object Set]",U2="[object String]",B2="[object Symbol]",H2="[object WeakMap]",z2="[object ArrayBuffer]",G2="[object DataView]",q2="[object Float32Array]",Y2="[object Float64Array]",V2="[object Int8Array]",K2="[object Int16Array]",X2="[object Int32Array]",J2="[object Uint8Array]",Q2="[object Uint8ClampedArray]",Z2="[object Uint16Array]",eS="[object Uint32Array]",$e={};$e[vc]=$e[M2]=$e[z2]=$e[G2]=$e[_2]=$e[P2]=$e[q2]=$e[Y2]=$e[V2]=$e[K2]=$e[X2]=$e[I2]=$e[L2]=$e[yc]=$e[F2]=$e[W2]=$e[U2]=$e[B2]=$e[J2]=$e[Q2]=$e[Z2]=$e[eS]=!0;$e[A2]=$e[bc]=$e[H2]=!1;function Ts(t,r,s,a,n,i){var o,l=r&E2,c=r&T2,d=r&O2;if(s&&(o=n?s(t,a,n,i):s(t)),o!==void 0)return o;if(!k2(t))return t;var m=w2(t);if(m){if(o=b2(t),!l)return h2(t,o)}else{var h=v2(t),x=h==bc||h==R2;if(N2(t))return m2(t,l);if(h==yc||h==vc||x&&!n){if(o=c||x?{}:j2(t),!l)return c?x2(t,u2(o,t)):f2(t,d2(o,t))}else{if(!$e[h])return n?t:{};o=y2(t,h,l)}}i||(i=new o2);var b=i.get(t);if(b)return b;i.set(t,o),C2(t)?t.forEach(function(j){o.add(Ts(j,r,s,j,t,i))}):S2(t)&&t.forEach(function(j,v){o.set(v,Ts(j,r,s,v,t,i))});var y=d?c?p2:g2:c?D2:$2,u=m?void 0:y(t);return l2(u||t,function(j,v){u&&(v=j,j=t[v]),c2(o,v,Ts(j,r,s,v,t,i))}),o}var tS=Ts;function rS(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var sS=rS,aS=oa,nS=Sl;function iS(t,r){return r.length<2?t:aS(t,nS(r,0,-1))}var oS=iS,lS=ia,cS=sS,dS=oS,uS=hs;function mS(t,r){return r=lS(r,t),t=dS(t,r),t==null||delete t[uS(cS(r))]}var hS=mS,fS=Cr,xS=ua,gS=zt,pS="[object Object]",vS=Function.prototype,bS=Object.prototype,jc=vS.toString,yS=bS.hasOwnProperty,jS=jc.call(Object);function wS(t){if(!gS(t)||fS(t)!=pS)return!1;var r=xS(t);if(r===null)return!0;var s=yS.call(r,"constructor")&&r.constructor;return typeof s=="function"&&s instanceof s&&jc.call(s)==jS}var NS=wS,SS=NS;function kS(t){return SS(t)?void 0:t}var CS=kS,$S=ic;function DS(t){var r=t==null?0:t.length;return r?$S(t,1):[]}var ES=DS,TS=ES,OS=oc,MS=cc;function _S(t){return MS(OS(t,void 0,TS),t+"")}var PS=_S,AS=An,RS=tS,IS=hS,LS=ia,FS=fs,WS=CS,US=PS,BS=gc,HS=1,zS=2,GS=4,qS=US(function(t,r){var s={};if(t==null)return s;var a=!1;r=AS(r,function(i){return i=LS(i,t),a||(a=i.length>1),i}),FS(t,BS(t),s),a&&(s=RS(s,HS|zS|GS,WS));for(var n=r.length;n--;)IS(s,r[n]);return s}),YS=qS;const VS=pt(YS);var KS=hc,XS=pc,JS=Rn,QS=ca,ZS=ua,ek=vt,tk=sa,rk=ln,sk=Rt,ak=Tn;function nk(t,r,s){var a=ek(t),n=a||tk(t)||ak(t);if(r=QS(r),s==null){var i=t&&t.constructor;n?s=a?new i:[]:sk(t)?s=rk(i)?XS(ZS(t)):{}:s={}}return(n?KS:JS)(t,function(o,l,c){return r(s,o,l,c)}),s}var ik=nk;const ok=pt(ik);var lk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a,n){a.prototype.isBetween=function(i,o,l,c){var d=n(i),m=n(o),h=(c=c||"()")[0]==="(",x=c[1]===")";return(h?this.isAfter(d,l):!this.isBefore(d,l))&&(x?this.isBefore(m,l):!this.isAfter(m,l))||(h?this.isBefore(d,l):!this.isAfter(d,l))&&(x?this.isAfter(m,l):!this.isBefore(m,l))}}})})(lk);var ck={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a){a.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}}})})(ck);var dk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a){a.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(dk);var uk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a,n){var i=a.prototype,o=function(h){return h&&(h.indexOf?h:h.s)},l=function(h,x,b,y,u){var j=h.name?h:h.$locale(),v=o(j[x]),f=o(j[b]),C=v||f.map(function(D){return D.slice(0,y)});if(!u)return C;var g=j.weekStart;return C.map(function(D,R){return C[(R+(g||0))%7]})},c=function(){return n.Ls[n.locale()]},d=function(h,x){return h.formats[x]||function(b){return b.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,u,j){return u||j.slice(1)})}(h.formats[x.toUpperCase()])},m=function(){var h=this;return{months:function(x){return x?x.format("MMMM"):l(h,"months")},monthsShort:function(x){return x?x.format("MMM"):l(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(x){return x?x.format("dddd"):l(h,"weekdays")},weekdaysMin:function(x){return x?x.format("dd"):l(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(x){return x?x.format("ddd"):l(h,"weekdaysShort","weekdays",3)},longDateFormat:function(x){return d(h.$locale(),x)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return m.bind(this)()},n.localeData=function(){var h=c();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(x){return d(h,x)},meridiem:h.meridiem,ordinal:h.ordinal}},n.months=function(){return l(c(),"months")},n.monthsShort=function(){return l(c(),"monthsShort","months",3)},n.weekdays=function(h){return l(c(),"weekdays",null,null,h)},n.weekdaysShort=function(h){return l(c(),"weekdaysShort","weekdays",3,h)},n.weekdaysMin=function(h){return l(c(),"weekdaysMin","weekdays",2,h)}}})})(uk);var mk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,n,i){var o=n.prototype,l=o.format;i.en.formats=s,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,m=function(h,x){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(b,y,u){var j=u&&u.toUpperCase();return y||x[u]||s[u]||x[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,f,C){return f||C.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,m)}}})})(mk);var hk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a,n){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(m){return m}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};n.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},n.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(hk);var fk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){var s="minute",a=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(u){var j={date:u,utc:!0,args:arguments};return new o(j)},c.utc=function(u){var j=l(this.toDate(),{locale:this.$L,utc:!0});return u?j.add(this.utcOffset(),s):j},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(u){u.utc&&(this.$u=!0),this.$utils().u(u.$offset)||(this.$offset=u.$offset),d.call(this,u)};var m=c.init;c.init=function(){if(this.$u){var u=this.$d;this.$y=u.getUTCFullYear(),this.$M=u.getUTCMonth(),this.$D=u.getUTCDate(),this.$W=u.getUTCDay(),this.$H=u.getUTCHours(),this.$m=u.getUTCMinutes(),this.$s=u.getUTCSeconds(),this.$ms=u.getUTCMilliseconds()}else m.call(this)};var h=c.utcOffset;c.utcOffset=function(u,j){var v=this.$utils().u;if(v(u))return this.$u?0:v(this.$offset)?h.call(this):this.$offset;if(typeof u=="string"&&(u=function(D){D===void 0&&(D="");var R=D.match(a);if(!R)return null;var I=(""+R[0]).match(n)||["-",0,0],B=I[0],_=60*+I[1]+ +I[2];return _===0?0:B==="+"?_:-_}(u),u===null))return this;var f=Math.abs(u)<=16?60*u:u,C=this;if(j)return C.$offset=f,C.$u=u===0,C;if(u!==0){var g=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(f+g,s)).$offset=f,C.$x.$localOffset=g}else C=this.utc();return C};var x=c.format;c.format=function(u){var j=u||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return x.call(this,j)},c.valueOf=function(){var u=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*u},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var b=c.toDate;c.toDate=function(u){return u==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var y=c.diff;c.diff=function(u,j,v){if(u&&this.$u===u.$u)return y.call(this,u,j,v);var f=this.local(),C=l(u).local();return y.call(f,C,j,v)}}})})(fk);var xk={exports:{}};(function(t,r){(function(s,a){t.exports=a()})(ht,function(){return function(s,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(xk);function yt(t){return t.children}var at={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Je={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Co=Object.keys(Je).map(function(t){return Je[t]});Z.oneOfType([Z.string,Z.func]);Z.any;Z.func;Z.oneOfType([Z.arrayOf(Z.oneOf(Co)),Z.objectOf(function(t,r){var s=Co.indexOf(r)!==-1&&typeof t[r]=="boolean";if(s)return null;for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];return Z.elementType.apply(Z,[t,r].concat(n))})]);Z.oneOfType([Z.oneOf(["overlap","no-overlap"]),Z.func]);var $o={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function wc(t,r){var s=He(t,"month");return He(s,"week",r.startOfWeek())}function Nc(t,r){var s=As(t,"month");return As(s,"week",r.startOfWeek())}function gk(t,r){for(var s=wc(t,r),a=Nc(t,r),n=[];Nr(s,a,"day");)n.push(s),s=bt(s,1,"day");return n}function pk(t,r){var s=He(t,r);return wr(s,t)?s:bt(s,1,r)}function vk(t,r){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=t,n=[];Nr(a,r,s);)n.push(a),a=bt(a,1,s);return n}function bk(t,r){return r==null&&t==null?null:(r==null&&(r=new Date),t==null&&(t=new Date),t=He(t,"day"),t=Zr(t,Zr(r)),t=pr(t,pr(r)),t=Qr(t,Qr(r)),Jr(t,Jr(r)))}function Do(t){return Zr(t)===0&&pr(t)===0&&Qr(t)===0&&Jr(t)===0}function yk(t,r,s,a){return s==="day"&&(s="date"),Math.abs(ci[s](t,void 0,a)-ci[s](r,void 0,a))}function Fn(t,r,s){return!s||s==="milliseconds"?Math.abs(+t-+r):Math.round(Math.abs(+He(t,s)/$o[s]-+He(r,s)/$o[s]))}var jk=Z.oneOfType([Z.string,Z.func]);function wk(t,r,s,a,n){var i=typeof a=="function"?a(s,n,t):r.call(t,s,a,n);return Gr(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function Nk(t,r,s){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,r+s,0,0)}function Wn(t,r){return t.getTimezoneOffset()-r.getTimezoneOffset()}function Sk(t,r){return Fn(t,r,"minutes")+Wn(t,r)}function kk(t){var r=He(t,"day");return Fn(r,t,"minutes")+Wn(r,t)}function Ck(t,r){return on(t,r,"day")}function $k(t,r,s){var a=wr(t,r,"minutes");return a?ns(r,s,"minutes"):Xs(r,s,"minutes")}function Va(t,r){return yk(t,r,"day")}function Dk(t){var r=t.evtA,s=r.start,a=r.end,n=r.allDay,i=t.evtB,o=i.start,l=i.end,c=i.allDay,d=+He(s,"day")-+He(o,"day"),m=Va(s,a),h=Va(o,l);return d||h-m||!!c-!!n||+s-+o||+a-+l}function Ek(t){var r=t.event,s=r.start,a=r.end,n=t.range,i=n.start,o=n.end,l=He(s,"day"),c=Nr(l,o,"day"),d=nn(l,a,"minutes"),m=d?Xs(a,i,"minutes"):ns(a,i,"minutes");return c&&m}function Tk(t,r){return wr(t,r,"day")}function Ok(t,r){return Do(t)&&Do(r)}var Mk=Le(function t(r){var s=this;Ie(this,t),Gr(typeof r.format=="function","date localizer `format(..)` must be a function"),Gr(typeof r.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=r.propType||jk,this.formats=r.formats,this.format=function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return wk.apply(void 0,[s,r.format].concat(n))},this.startOfWeek=r.firstOfWeek,this.merge=r.merge||bk,this.inRange=r.inRange||bl,this.lt=r.lt||on,this.lte=r.lte||Nr,this.gt=r.gt||Xs,this.gte=r.gte||ns,this.eq=r.eq||wr,this.neq=r.neq||nn,this.startOf=r.startOf||He,this.endOf=r.endOf||As,this.add=r.add||bt,this.range=r.range||vk,this.diff=r.diff||Fn,this.ceil=r.ceil||pk,this.min=r.min||pl,this.max=r.max||vl,this.minutes=r.minutes||pr,this.daySpan=r.daySpan||Va,this.firstVisibleDay=r.firstVisibleDay||wc,this.lastVisibleDay=r.lastVisibleDay||Nc,this.visibleDays=r.visibleDays||gk,this.getSlotDate=r.getSlotDate||Nk,this.getTimezoneOffset=r.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=r.getDstOffset||Wn,this.getTotalMin=r.getTotalMin||Sk,this.getMinutesFromMidnight=r.getMinutesFromMidnight||kk,this.continuesPrior=r.continuesPrior||Ck,this.continuesAfter=r.continuesAfter||$k,this.sortEvents=r.sortEvents||Dk,this.inEventRange=r.inEventRange||Ek,this.isSameDate=r.isSameDate||Tk,this.startAndEndAreDateOnly=r.startAndEndAreDateOnly||Ok,this.segmentOffset=r.browserTZOffset?r.browserTZOffset():0});function _k(t,r,s,a){var n=ke(ke({},t.formats),s);return ke(ke({},t),{},{messages:a,startOfWeek:function(){return t.startOfWeek(r)},format:function(o,l){return t.format(o,n[l]||l,r)}})}var Pk=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.navigate=function(o){s.props.onNavigate(o)},s.view=function(o){s.props.onView(o)},s}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.localizer.messages,i=a.label;return M.createElement("div",{className:"rbc-toolbar"},M.createElement("span",{className:"rbc-btn-group"},M.createElement("button",{type:"button",onClick:this.navigate.bind(null,at.TODAY)},n.today),M.createElement("button",{type:"button",onClick:this.navigate.bind(null,at.PREVIOUS)},n.previous),M.createElement("button",{type:"button",onClick:this.navigate.bind(null,at.NEXT)},n.next)),M.createElement("span",{className:"rbc-toolbar-label"},i),M.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(n)))}},{key:"viewNamesGroup",value:function(a){var n=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return M.createElement("button",{type:"button",key:l,className:Ae({"rbc-active":o===l}),onClick:n.view.bind(null,l)},a[l])})}}])}(M.Component);function Oe(t,r){t&&t.apply(null,[].concat(r))}var Ak={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(r){return"+".concat(r," more")}};function Rk(t){return ke(ke({},Ak),t)}function Ik(t){var r=t.ref,s=t.callback;$.useEffect(function(){var a=function(i){r.current&&!r.current.contains(i.target)&&s()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[r,s])}var Lk=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Sc=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.style,i=a.className,o=a.event,l=a.selected,c=a.isAllDay,d=a.onSelect,m=a.onDoubleClick,h=a.onKeyPress,x=a.localizer,b=a.continuesPrior,y=a.continuesAfter,u=a.accessors,j=a.getters,v=a.children,f=a.components,C=f.event,g=f.eventWrapper,D=a.slotStart,R=a.slotEnd,I=$t(a,Lk);delete I.resizable;var B=u.title(o),_=u.tooltip(o),q=u.end(o),P=u.start(o),V=u.allDay(o),z=c||V||x.diff(P,x.ceil(q,"day"),"day")>1,te=j.eventProp(o,P,q,l),ae=M.createElement("div",{className:"rbc-event-content",title:_||void 0},C?M.createElement(C,{event:o,continuesPrior:b,continuesAfter:y,title:B,isAllDay:V,localizer:x,slotStart:D,slotEnd:R}):B);return M.createElement(g,Object.assign({},this.props,{type:"date"}),M.createElement("div",Object.assign({},I,{style:ke(ke({},te.style),n),className:Ae("rbc-event",i,te.className,{"rbc-selected":l,"rbc-event-allday":z,"rbc-event-continues-prior":b,"rbc-event-continues-after":y}),onClick:function(S){return d&&d(o,S)},onDoubleClick:function(S){return m&&m(o,S)},onKeyDown:function(S){return h&&h(o,S)}}),typeof v=="function"?v(ae):ae))}}])}(M.Component);function ma(t,r){return!t||r==null?!1:rb(t,r)}function kc(t,r){var s=t.right-t.left,a=s/r;return a}function Cc(t,r,s,a){var n=kc(t,a);return s?a-1-Math.floor((r-t.left)/n):Math.floor((r-t.left)/n)}function Fk(t,r){var s=r.x,a=r.y;return a>=t.top&&a<=t.bottom&&s>=t.left&&s<=t.right}function Wk(t,r,s,a,n){var i=-1,o=-1,l=a-1,c=kc(r,a),d=Cc(r,s.x,n,a),m=r.top<s.y&&r.bottom>s.y,h=r.top<t.y&&r.bottom>t.y,x=t.y>r.bottom,b=r.top>t.y,y=s.top<r.top&&s.bottom>r.bottom;return y&&(i=0,o=l),m&&(b?(i=0,o=d):x&&(i=d,o=l)),h&&(i=o=n?l-Math.floor((t.x-r.left)/c):Math.floor((t.x-r.left)/c),m?d<i?i=d:o=d:t.y<s.y?o=l:i=0),{startIdx:i,endIdx:o}}function Uk(t){var r=t.target,s=t.offset,a=t.container,n=t.box,i=Kt(r),o=i.top,l=i.left,c=i.width,d=i.height,m=Kt(a),h=m.top,x=m.left,b=m.width,y=m.height,u=Kt(n),j=u.width,v=u.height,f=h+y,C=x+b,g=o+v,D=l+j,R=s.x,I=s.y,B=g>f?o-v-I:o+I+d,_=D>C?l+R-j+c:l+R;return{topOffset:B,leftOffset:_}}function Bk(t){var r=t.containerRef,s=t.accessors,a=t.getters,n=t.selected,i=t.components,o=t.localizer,l=t.position,c=t.show,d=t.events,m=t.slotStart,h=t.slotEnd,x=t.onSelect,b=t.onDoubleClick,y=t.onKeyPress,u=t.handleDragStart,j=t.popperRef,v=t.target,f=t.offset;Ik({ref:j,callback:c}),$.useLayoutEffect(function(){var D=Uk({target:v,offset:f,container:r.current,box:j.current}),R=D.topOffset,I=D.leftOffset;j.current.style.top="".concat(R,"px"),j.current.style.left="".concat(I,"px")},[f.x,f.y,v]);var C=l.width,g={minWidth:C+C/2};return M.createElement("div",{style:g,className:"rbc-overlay",ref:j},M.createElement("div",{className:"rbc-overlay-header"},o.format(m,"dayHeaderFormat")),d.map(function(D,R){return M.createElement(Sc,{key:R,type:"popup",localizer:o,event:D,getters:a,onSelect:x,accessors:s,components:i,onDoubleClick:b,onKeyPress:y,continuesPrior:o.lt(s.end(D),m,"day"),continuesAfter:o.gte(s.start(D),h,"day"),slotStart:m,slotEnd:h,selected:ma(D,n),draggable:!0,onDragStart:function(){return u(D)},onDragEnd:function(){return c()}})}))}var $c=M.forwardRef(function(t,r){return M.createElement(Bk,Object.assign({},t,{popperRef:r}))});$c.propTypes={accessors:Z.object.isRequired,getters:Z.object.isRequired,selected:Z.object,components:Z.object.isRequired,localizer:Z.object.isRequired,position:Z.object.isRequired,show:Z.func.isRequired,events:Z.array.isRequired,slotStart:Z.instanceOf(Date).isRequired,slotEnd:Z.instanceOf(Date),onSelect:Z.func,onDoubleClick:Z.func,onKeyPress:Z.func,handleDragStart:Z.func,style:Z.object,offset:Z.shape({x:Z.number,y:Z.number})};function Hk(t){var r=t.containerRef,s=t.popupOffset,a=s===void 0?5:s,n=t.overlay,i=t.accessors,o=t.localizer,l=t.components,c=t.getters,d=t.selected,m=t.handleSelectEvent,h=t.handleDoubleClickEvent,x=t.handleKeyPressEvent,b=t.handleDragStart,y=t.onHide,u=t.overlayDisplay,j=$.useRef(null);if(!n.position)return null;var v=a;isNaN(a)||(v={x:a,y:a});var f=n.position,C=n.events,g=n.date,D=n.end;return M.createElement(wn,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:y,target:n.target},function(R){var I=R.props;return M.createElement($c,Object.assign({},I,{containerRef:r,ref:j,target:n.target,offset:v,accessors:i,getters:c,selected:d,components:l,localizer:o,position:f,show:u,events:C,slotStart:g,slotEnd:D,onSelect:m,onDoubleClick:h,onKeyPress:x,handleDragStart:b}))})}var Un=M.forwardRef(function(t,r){return M.createElement(Hk,Object.assign({},t,{containerRef:r}))});Un.propTypes={popupOffset:Z.oneOfType([Z.number,Z.shape({x:Z.number,y:Z.number})]),overlay:Z.shape({position:Z.object,events:Z.array,date:Z.instanceOf(Date),end:Z.instanceOf(Date)}),accessors:Z.object.isRequired,localizer:Z.object.isRequired,components:Z.object.isRequired,getters:Z.object.isRequired,selected:Z.object,handleSelectEvent:Z.func,handleDoubleClickEvent:Z.func,handleKeyPressEvent:Z.func,handleDragStart:Z.func,onHide:Z.func,overlayDisplay:Z.func};function Ge(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Lr(s,t,r,{passive:!1})}function zk(t,r,s){return!t||es(t,document.elementFromPoint(r,s))}function Gk(t,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return Zl(n,".rbc-event",t)}function qk(t,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return Zl(n,".rbc-show-more",t)}function Bs(t,r){return!!Gk(t,r)}function Yk(t,r){return!!qk(t,r)}function Rr(t){var r=t;return t.touches&&t.touches.length&&(r=t.touches[0]),{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY}}var Eo=5,Vk=250,Dc=function(){function t(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.global,n=a===void 0?!1:a,i=s.longPressThreshold,o=i===void 0?250:i,l=s.validContainers,c=l===void 0?[]:l;Ie(this,t),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=r,this.globalMouse=!r||n,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ge("touchmove",function(){},window),this._removeKeyDownListener=Ge("keydown",this._keyListener),this._removeKeyUpListener=Ge("keyup",this._keyListener),this._removeDropFromOutsideListener=Ge("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ge("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Le(t,[{key:"on",value:function(s,a){var n=this._listeners[s]||(this._listeners[s]=[]);return n.push(a),{remove:function(){var o=n.indexOf(a);o!==-1&&n.splice(o,1)}}}},{key:"emit",value:function(s){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];var o,l=this._listeners[s]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,n))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(s){var a=this._selectRect;return!a||!this.selecting?!1:To(a,nr(s))}},{key:"filter",value:function(s){var a=this._selectRect;return!a||!this.selecting?[]:s.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(s,a){var n=this,i=null,o=null,l=null,c=function(x){i=setTimeout(function(){m(),s(x)},n.longPressThreshold),o=Ge("touchmove",function(){return m()}),l=Ge("touchend",function(){return m()})},d=Ge("touchstart",c),m=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return a&&c(a),function(){m(),d()}}},{key:"_addInitialEventListener",value:function(){var s=this,a=Ge("mousedown",function(i){s._removeInitialEventListener(),s._handleInitialEvent(i),s._removeInitialEventListener=Ge("mousedown",s._handleInitialEvent)}),n=Ge("touchstart",function(i){s._removeInitialEventListener(),s._removeInitialEventListener=s._addLongPressListener(s._handleInitialEvent,i)});this._removeInitialEventListener=function(){a(),n()}}},{key:"_dropFromOutsideListener",value:function(s){var a=Rr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dropFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(s){var a=Rr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dragOverFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_handleInitialEvent",value:function(s){if(this._initialEvent=s,!this.isDetached){var a=Rr(s),n=a.clientX,i=a.clientY,o=a.pageX,l=a.pageY,c=this.container(),d,m;if(!(s.which===3||s.button===2||!zk(c,n,i))){if(!this.globalMouse&&c&&!es(c,s.target)){var h=Kk(0),x=h.top,b=h.left,y=h.bottom,u=h.right;if(m=nr(c),d=To({top:m.top-x,left:m.left-b,bottom:m.bottom+y,right:m.right+u},{top:l,left:o}),!d)return}var j=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(s.type),x:o,y:l,clientX:n,clientY:i});if(j!==!1)switch(s.type){case"mousedown":this._removeEndListener=Ge("mouseup",this._handleTerminatingEvent),this._onEscListener=Ge("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ge("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(s),this._removeEndListener=Ge("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ge("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(s){var a=s.target,n=this.validContainers;return!n||!n.length||!a?!0:n.some(function(i){return!!a.closest(i)})}},{key:"_handleTerminatingEvent",value:function(s){var a=this.selecting,n=this._selectRect;if(!a&&s.type.includes("key")&&(s=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!s){var i=!this.container||es(this.container(),s.target),o=this._isWithinValidContainer(s);return s.key==="Escape"||!o?this.emit("reset"):!a&&i?this._handleClickEvent(s):a?this.emit("select",n):this.emit("reset")}}},{key:"_handleClickEvent",value:function(s){var a=Rr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Vk?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:n,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(s){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,n=a.x,i=a.y,o=Rr(s),l=o.pageX,c=o.pageY,d=Math.abs(n-l),m=Math.abs(i-c),h=Math.min(l,n),x=Math.min(c,i),b=this.selecting,y=this.isClick(l,c);y&&!b&&!(d||m)||(!b&&!y&&this.emit("selectStart",this._initialEventData),y||(this.selecting=!0,this._selectRect={top:x,left:h,x:l,y:c,right:h+d,bottom:x+m},this.emit("selecting",this._selectRect)),s.preventDefault())}}},{key:"_keyListener",value:function(s){this.ctrl=s.metaKey||s.ctrlKey}},{key:"isClick",value:function(s,a){var n=this._initialEventData,i=n.x,o=n.y,l=n.isTouch;return!l&&Math.abs(s-i)<=Eo&&Math.abs(a-o)<=Eo}}])}();function Kk(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return _t(t)!=="object"&&(t={top:t,left:t,right:t,bottom:t}),t}function To(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=nr(t),n=a.top,i=a.left,o=a.right,l=o===void 0?i:o,c=a.bottom,d=c===void 0?n:c,m=nr(r),h=m.top,x=m.left,b=m.right,y=b===void 0?x:b,u=m.bottom,j=u===void 0?h:u;return!(d-s<h||n+s>j||l-s<x||i+s>y)}function nr(t){if(!t.getBoundingClientRect)return t;var r=t.getBoundingClientRect(),s=r.left+Oo("left"),a=r.top+Oo("top");return{top:a,left:s,right:(t.offsetWidth||0)+s,bottom:(t.offsetHeight||0)+a}}function Oo(t){if(t==="left")return window.pageXOffset||document.body.scrollLeft||0;if(t==="top")return window.pageYOffset||document.body.scrollTop||0}var Xk=function(t){function r(s,a){var n;return Ie(this,r),n=Ve(this,r,[s,a]),n.state={selecting:!1},n.containerRef=$.createRef(),n}return Ke(r,t),Le(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,n=a.range,i=a.getNow,o=a.getters,l=a.date,c=a.components.dateCellWrapper,d=a.localizer,m=this.state,h=m.selecting,x=m.startIdx,b=m.endIdx,y=i();return M.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},n.map(function(u,j){var v=h&&j>=x&&j<=b,f=o.dayProp(u),C=f.className,g=f.style;return M.createElement(c,{key:j,value:u,range:n},M.createElement("div",{style:g,className:Ae("rbc-day-bg",C,v&&"rbc-selected-cell",d.isSameDate(u,y)&&"rbc-today",l&&d.neq(l,u,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,n=this.containerRef.current,i=this._selector=new Dc(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Bs(n,c)&&!Yk(n,c)){var m=nr(n),h=a.props,x=h.range,b=h.rtl;if(Fk(m,c)){var y=Cc(m,c.x,b,x.length);a._selectSlot({startIdx:y,endIdx:y,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};i.on("selecting",function(l){var c=a.props,d=c.range,m=c.rtl,h=-1,x=-1;if(a.state.selecting||(Oe(a.props.onSelectStart,[l]),a._initial={x:l.x,y:l.y}),i.isSelected(n)){var b=nr(n),y=Wk(a._initial,b,l,d.length,m);h=y.startIdx,x=y.endIdx}a.setState({selecting:!0,startIdx:h,endIdx:x})}),i.on("beforeSelect",function(l){if(a.props.selectable==="ignoreEvents")return!Bs(a.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){a._selectSlot(ke(ke({},a.state),{},{action:"select",bounds:l})),a._initial={},a.setState({selecting:!1}),Oe(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var n=a.endIdx,i=a.startIdx,o=a.action,l=a.bounds,c=a.box;n!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:n,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(M.Component),ut={propTypes:{slotMetrics:Z.object.isRequired,selected:Z.object,isAllDay:Z.bool,accessors:Z.object.isRequired,localizer:Z.object.isRequired,components:Z.object.isRequired,getters:Z.object.isRequired,onSelect:Z.func,onDoubleClick:Z.func,onKeyPress:Z.func},defaultProps:{segments:[],selected:{}},renderEvent:function(r,s){var a=r.selected;r.isAllDay;var n=r.accessors,i=r.getters,o=r.onSelect,l=r.onDoubleClick,c=r.onKeyPress,d=r.localizer,m=r.slotMetrics,h=r.components,x=r.resizable,b=m.continuesPrior(s),y=m.continuesAfter(s);return M.createElement(Sc,{event:s,getters:i,localizer:d,accessors:n,components:h,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:b,continuesAfter:y,slotStart:m.first,slotEnd:m.last,selected:ma(s,a),resizable:x})},renderSpan:function(r,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(s)/r*100+"%";return M.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},n)}},Ec=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this,n=this.props,i=n.segments,o=n.slotMetrics.slots,l=n.className,c=1;return M.createElement("div",{className:Ae(l,"rbc-row")},i.reduce(function(d,m,h){var x=m.event,b=m.left,y=m.right,u=m.span,j="_lvl_"+h,v=b-c,f=ut.renderEvent(a.props,x);return v&&d.push(ut.renderSpan(o,v,"".concat(j,"_gap"))),d.push(ut.renderSpan(o,u,j,f)),c=y+1,d},[]))}}])}(M.Component);Ec.defaultProps=ke({},ut.defaultProps);function Tc(t){var r=t.dateRange,s=t.unit,a=s===void 0?"day":s,n=t.localizer;return{first:r[0],last:n.add(r[r.length-1],1,a)}}function Jk(t,r,s,a){var n=Tc({dateRange:r,localizer:a}),i=n.first,o=n.last,l=a.diff(i,o,"day"),c=a.max(a.startOf(s.start(t),"day"),i),d=a.min(a.ceil(s.end(t),"day"),o),m=tj(r,function(x){return a.isSameDate(x,c)}),h=a.diff(c,d,"day");return h=Math.min(h,l),h=Math.max(h-a.segmentOffset,1),{event:t,span:h,left:m+1,right:Math.max(m+h,1)}}function Ka(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,s,a,n,i=[],o=[];for(s=0;s<t.length;s++){for(n=t[s],a=0;a<i.length&&Qk(n,i[a]);a++);a>=r?o.push(n):(i[a]||(i[a]=[])).push(n)}for(s=0;s<i.length;s++)i[s].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function ss(t,r,s,a,n){var i={start:a.start(t),end:a.end(t)},o={start:r,end:s};return n.inEventRange({event:i,range:o})}function Qk(t,r){return r.some(function(s){return s.left<=t.right&&s.right>=t.left})}function Zk(t,r,s){var a=Ds(t),n=[],i=[];a.forEach(function(c){var d=r.start(c),m=r.end(c);s.daySpan(d,m)>1?n.push(c):i.push(c)});var o=n.sort(function(c,d){return Xa(c,d,r,s)}),l=i.sort(function(c,d){return Xa(c,d,r,s)});return[].concat(Ds(o),Ds(l))}function Xa(t,r,s,a){var n={start:s.start(t),end:s.end(t),allDay:s.allDay(t)},i={start:s.start(r),end:s.end(r),allDay:s.allDay(r)};return a.sortEvents({evtA:n,evtB:i})}var Ja=function(r,s){return r.left<=s&&r.right>=s},Ea=function(r,s){return r.filter(function(a){return Ja(a,s)}).map(function(a){return a.event})},Oc=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){for(var a=this.props,n=a.segments,i=a.slotMetrics.slots,o=Ka(n).levels[0],l=1,c=1,d=[];l<=i;){var m="_lvl_"+l,h=o.filter(function(g){return Ja(g,l)})[0]||{},x=h.event,b=h.left,y=h.right,u=h.span;if(!x){var j=this.getHiddenEventsForSlot(n,l);if(j.length>0){var v=l-c;v&&d.push(ut.renderSpan(i,v,m+"_gap")),d.push(ut.renderSpan(i,1,m,this.renderShowMore(n,l))),c=l=l+1;continue}l++;continue}var f=Math.max(0,b-c);if(this.canRenderSlotEvent(b,u)){var C=ut.renderEvent(this.props,x);f&&d.push(ut.renderSpan(i,f,m+"_gap")),d.push(ut.renderSpan(i,u,m,C)),c=l=y+1}else f&&d.push(ut.renderSpan(i,f,m+"_gap")),d.push(ut.renderSpan(i,1,m,this.renderShowMore(n,l))),c=l=l+1}return M.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,n){var i=Ea(a,n),o=Ka(a).levels[0],l=o.filter(function(c){return Ja(c,n)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,n){var i=this.props.segments;return hj(a,a+n).every(function(o){var l=Ea(i,o).length;return l===1})}},{key:"renderShowMore",value:function(a,n){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,m=c.getEventsForSlot(n),h=Ea(a,n),x=h.length;if(d!=null&&d.showMore){var b=d.showMore,y=c.getDateForSlot(n-1);return x?M.createElement(b,{localizer:l,slotDate:y,slot:n,count:x,events:m,remainingEvents:h}):!1}return x?M.createElement("button",{type:"button",key:"sm_"+n,className:Ae("rbc-button-link","rbc-show-more"),onClick:function(j){return i.showMore(n,j)}},l.messages.showMore(x,h,m)):!1}},{key:"showMore",value:function(a,n){n.preventDefault(),n.stopPropagation(),this.props.onShowMore(a,n.target)}}])}(M.Component);Oc.defaultProps=ke({},ut.defaultProps);var e5=function(r){var s=r.children;return M.createElement("div",{className:"rbc-row-content-scroll-container"},s)},t5=function(r,s){return r.left<=s&&r.right>=s},r5=function(r,s){return r[0].range===s[0].range&&r[0].events===s[0].events};function Mc(){return ac(function(t){for(var r=t.range,s=t.events,a=t.maxRows,n=t.minRows,i=t.accessors,o=t.localizer,l=Tc({dateRange:r,localizer:o}),c=l.first,d=l.last,m=s.map(function(u){return Jk(u,r,i,o)}),h=Ka(m,Math.max(a-1,1)),x=h.levels,b=h.extra,y=b.length>0?n-1:n;x.length<y;)x.push([]);return{first:c,last:d,levels:x,extra:b,range:r,slots:r.length,clone:function(j){var v=Mc();return v(ke(ke({},t),j))},getDateForSlot:function(j){return r[j]},getSlotForDate:function(j){return r.find(function(v){return o.isSameDate(v,j)})},getEventsForSlot:function(j){return m.filter(function(v){return t5(v,j)}).map(function(v){return v.event})},continuesPrior:function(j){return o.continuesPrior(i.start(j),c)},continuesAfter:function(j){var v=i.start(j),f=i.end(j);return o.continuesAfter(v,f,d)}}},r5)}var as=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleSelectSlot=function(o){var l=s.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},s.handleShowMore=function(o,l){var c=s.props,d=c.range,m=c.onShowMore,h=s.slotMetrics(s.props),x=eh(s.containerRef.current,".rbc-row-bg")[0],b;x&&(b=x.children[o-1]);var y=h.getEventsForSlot(o);m(y,d[o-1],b,o,l)},s.getContainer=function(){var o=s.props.container;return o?o():s.containerRef.current},s.renderHeadingCell=function(o,l){var c=s.props,d=c.renderHeader,m=c.getNow,h=c.localizer;return d({date:o,key:"header_".concat(l),className:Ae("rbc-date-cell",h.isSameDate(o,m())&&"rbc-now")})},s.renderDummy=function(){var o=s.props,l=o.className,c=o.range,d=o.renderHeader,m=o.showAllEvents;return M.createElement("div",{className:l,ref:s.containerRef},M.createElement("div",{className:Ae("rbc-row-content",m&&"rbc-row-content-scrollable")},d&&M.createElement("div",{className:"rbc-row",ref:s.headingRowRef},c.map(s.renderHeadingCell)),M.createElement("div",{className:"rbc-row",ref:s.eventRowRef},M.createElement("div",{className:"rbc-row-segment"},M.createElement("div",{className:"rbc-event"},M.createElement("div",{className:"rbc-event-content"}," "))))))},s.containerRef=$.createRef(),s.headingRowRef=$.createRef(),s.eventRowRef=$.createRef(),s.slotMetrics=Mc(),s}return Ke(r,t),Le(r,[{key:"getRowLimit",value:function(){var a,n=Ca(this.eventRowRef.current),i=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?Ca(this.headingRowRef.current):0,o=Ca(this.containerRef.current)-i;return Math.max(Math.floor(o/n),1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.rtl,o=a.range,l=a.className,c=a.selected,d=a.selectable,m=a.renderForMeasure,h=a.accessors,x=a.getters,b=a.components,y=a.getNow,u=a.renderHeader,j=a.onSelect,v=a.localizer,f=a.onSelectStart,C=a.onSelectEnd,g=a.onDoubleClick,D=a.onKeyPress,R=a.resourceId,I=a.longPressThreshold,B=a.isAllDay,_=a.resizable,q=a.showAllEvents;if(m)return this.renderDummy();var P=this.slotMetrics(this.props),V=P.levels,z=P.extra,te=q?e5:yt,ae=b.weekWrapper,re={selected:c,accessors:h,getters:x,localizer:v,components:b,onSelect:j,onDoubleClick:g,onKeyPress:D,resourceId:R,slotMetrics:P,resizable:_};return M.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},M.createElement(Xk,{localizer:v,date:n,getNow:y,rtl:i,range:o,selectable:d,container:this.getContainer,getters:x,onSelectStart:f,onSelectEnd:C,onSelectSlot:this.handleSelectSlot,components:b,longPressThreshold:I,resourceId:R}),M.createElement("div",{className:Ae("rbc-row-content",q&&"rbc-row-content-scrollable"),role:"row"},u&&M.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),M.createElement(te,null,M.createElement(ae,Object.assign({isAllDay:B},re,{rtl:this.props.rtl}),V.map(function(S,U){return M.createElement(Ec,Object.assign({key:U,segments:S},re))}),!!z.length&&M.createElement(Oc,Object.assign({segments:z,onShowMore:this.handleShowMore},re))))))}}])}(M.Component);as.defaultProps={minRows:0,maxRows:1/0};var Bn=function(r){var s=r.label;return M.createElement("span",{role:"columnheader","aria-sort":"none"},s)},s5=function(r){var s=r.label,a=r.drilldownView,n=r.onDrillDown;return a?M.createElement("button",{type:"button",className:"rbc-button-link",onClick:n},s):M.createElement("span",null,s)},a5=["date","className"],n5=function(r,s,a,n,i){return r.filter(function(o){return ss(o,s,a,n,i)})},ha=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.getContainer=function(){return s.containerRef.current},s.renderWeek=function(o,l){var c=s.props,d=c.events,m=c.components,h=c.selectable,x=c.getNow,b=c.selected,y=c.date,u=c.localizer,j=c.longPressThreshold,v=c.accessors,f=c.getters,C=c.showAllEvents,g=s.state,D=g.needLimitMeasure,R=g.rowLimit,I=n5(Ds(d),o[0],o[o.length-1],v,u),B=Zk(I,v,u);return M.createElement(as,{key:l,ref:l===0?s.slotRowRef:void 0,container:s.getContainer,className:"rbc-month-row",getNow:x,date:y,range:o,events:B,maxRows:C?1/0:R,selected:b,selectable:h,components:m,accessors:v,getters:f,localizer:u,renderHeader:s.readerDateHeading,renderForMeasure:D,onShowMore:s.handleShowMore,onSelect:s.handleSelectEvent,onDoubleClick:s.handleDoubleClickEvent,onKeyPress:s.handleKeyPressEvent,onSelectSlot:s.handleSelectSlot,longPressThreshold:j,rtl:s.props.rtl,resizable:s.props.resizable,showAllEvents:C})},s.readerDateHeading=function(o){var l=o.date,c=o.className,d=$t(o,a5),m=s.props,h=m.date,x=m.getDrilldownView,b=m.localizer,y=b.neq(h,l,"month"),u=b.isSameDate(l,h),j=x(l),v=b.format(l,"dateFormat"),f=s.props.components.dateHeader||s5;return M.createElement("div",Object.assign({},d,{className:Ae(c,y&&"rbc-off-range",u&&"rbc-current"),role:"cell"}),M.createElement(f,{label:v,date:l,drilldownView:j,isOffRange:y,onDrillDown:function(g){return s.handleHeadingClick(l,j,g)}}))},s.handleSelectSlot=function(o,l){s._pendingSelection=s._pendingSelection.concat(o),clearTimeout(s._selectTimer),s._selectTimer=setTimeout(function(){return s.selectDates(l)})},s.handleHeadingClick=function(o,l,c){c.preventDefault(),s.clearSelection(),Oe(s.props.onDrillDown,[o,l])},s.handleSelectEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onKeyPressEvent,l)},s.handleShowMore=function(o,l,c,d,m){var h=s.props,x=h.popup,b=h.onDrillDown,y=h.onShowMore,u=h.getDrilldownView,j=h.doShowMoreDrillDown;if(s.clearSelection(),x){var v=Ml(c,s.containerRef.current);s.setState({overlay:{date:l,events:o,position:v,target:m}})}else j&&Oe(b,[l,u(l)||Je.DAY]);Oe(y,[o,l,d])},s.overlayDisplay=function(){s.setState({overlay:null})},s.state={rowLimit:5,needLimitMeasure:!0,date:null},s.containerRef=$.createRef(),s.slotRowRef=$.createRef(),s._bgRows=[],s._pendingSelection=[],s}return Ke(r,t),Le(r,[{key:"componentDidMount",value:function(){var a=this,n;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){n||_l(function(){n=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.className,l=i.visibleDays(n,i),c=Lm(l,7);return this._weekCount=c.length,M.createElement("div",{className:Ae("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},M.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var n=this.props,i=n.localizer,o=n.components,l=a[0],c=a[a.length-1],d=o.header||Bn;return i.range(l,c,"day").map(function(m,h){return M.createElement("div",{key:"header_"+h,className:"rbc-header"},M.createElement(d,{date:m,localizer:i,label:i.format(m,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,m=l.components,h=l.getters,x=l.selected,b=l.popupOffset,y=l.handleDragStart,u=function(){return i.setState({overlay:null})};return M.createElement(Un,{overlay:o,accessors:c,localizer:d,components:m,getters:h,selected:x,popupOffset:b,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:u})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var n=this._pendingSelection.slice();this._pendingSelection=[],n.sort(function(l,c){return+l-+c});var i=new Date(n[0]),o=new Date(n[n.length-1]);o.setDate(n[n.length-1].getDate()+1),Oe(this.props.onSelectSlot,{slots:n,start:i,end:o,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,n){var i=a.date,o=a.localizer;return{date:i,needLimitMeasure:o.neq(i,n.date,"month")}}}])}(M.Component);ha.range=function(t,r){var s=r.localizer,a=s.firstVisibleDay(t,s),n=s.lastVisibleDay(t,s);return{start:a,end:n}};ha.navigate=function(t,r,s){var a=s.localizer;switch(r){case at.PREVIOUS:return a.add(t,-1,"month");case at.NEXT:return a.add(t,1,"month");default:return t}};ha.title=function(t,r){var s=r.localizer;return s.format(t,"monthHeaderFormat")};var Mo=function(r){var s=r.min,a=r.max,n=r.step,i=r.slots,o=r.localizer;return"".concat(+o.startOf(s,"minutes"))+"".concat(+o.startOf(a,"minutes"))+"".concat(n,"-").concat(i)};function Hn(t){for(var r=t.min,s=t.max,a=t.step,n=t.timeslots,i=t.localizer,o=Mo({step:a,localizer:i}),l=1+i.getTotalMin(r,s),c=i.getMinutesFromMidnight(r),d=Math.ceil((l-1)/(a*n)),m=d*n,h=new Array(d),x=new Array(m),b=0;b<d;b++){h[b]=new Array(n);for(var y=0;y<n;y++){var u=b*n+y,j=u*a;x[u]=h[b][y]=i.getSlotDate(r,c,j)}}var v=x.length*a;x.push(i.getSlotDate(r,c,v));function f(C){var g=i.diff(r,C,"minutes")+i.getDstOffset(r,C);return Math.min(g,l)}return{groups:h,update:function(g){return Mo(g)!==o?Hn(g):this},dateIsInGroup:function(g,D){var R=h[D+1];return i.inRange(g,h[D][0],R?R[0]:s,"minutes")},nextSlot:function(g){var D=x[Math.min(x.findIndex(function(R){return R===g||i.eq(R,g)})+1,x.length-1)];return i.eq(D,g)&&(D=i.add(g,a,"minutes")),D},closestSlotToPosition:function(g){var D=Math.min(x.length-1,Math.max(0,Math.floor(g*m)));return x[D]},closestSlotFromPoint:function(g,D){var R=Math.abs(D.top-D.bottom);return this.closestSlotToPosition((g.y-D.top)/R)},closestSlotFromDate:function(g){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(g,r,"minutes"))return x[0];if(i.gt(g,s,"minutes"))return x[x.length-1];var R=i.diff(r,g,"minutes");return x[(R-R%a)/a+D]},startsBeforeDay:function(g){return i.lt(g,r,"day")},startsAfterDay:function(g){return i.gt(g,s,"day")},startsBefore:function(g){return i.lt(i.merge(r,g),r,"minutes")},startsAfter:function(g){return i.gt(i.merge(s,g),s,"minutes")},getRange:function(g,D,R,I){R||(g=i.min(s,i.max(r,g))),I||(D=i.min(s,i.max(r,D)));var B=f(g),_=f(D),q=_>a*m&&!i.eq(s,D)?(B-a)/(a*m)*100:B/(a*m)*100;return{top:q,height:_/(a*m)*100-q,start:f(g),startDate:g,end:f(D),endDate:D}},getCurrentTimePosition:function(g){var D=f(g),R=D/(a*m)*100;return R}}}var i5=function(){function t(r,s){var a=s.accessors,n=s.slotMetrics;Ie(this,t);var i=n.getRange(a.start(r),a.end(r)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,m=i.top,h=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=m,this.height=h,this.data=r}return Le(t,[{key:"_width",get:function(){if(this.rows){var s=this.rows.reduce(function(n,i){return Math.max(n,i.leaves.length+1)},0)+1;return 100/s}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var s=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:s;var n=this.row.leaves,i=n.indexOf(this);return i===n.length-1?s:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var s=this.row,a=s.leaves,n=s.xOffset,i=s._width,o=a.indexOf(this)+1;return n+o*i}}])}();function o5(t,r,s){return Math.abs(r.start-t.start)<s||r.start>t.start&&r.start<t.end}function l5(t){for(var r=_w(t,["startMs",function(l){return-l.endMs}]),s=[];r.length>0;){var a=r.shift();s.push(a);for(var n=0;n<r.length;n++){var i=r[n];if(!(a.endMs>i.startMs)){if(n>0){var o=r.splice(n,1)[0];s.push(o)}break}}}return s}function _c(t){for(var r=t.events,s=t.minimumStartDifference,a=t.slotMetrics,n=t.accessors,i=r.map(function(m){return new i5(m,{slotMetrics:a,accessors:n})}),o=l5(i),l=[],c=function(){var h=o[d],x=l.find(function(u){return u.end>h.start||Math.abs(h.start-u.start)<s});if(!x)return h.rows=[],l.push(h),1;h.container=x;for(var b=null,y=x.rows.length-1;!b&&y>=0;y--)o5(x.rows[y],h,s)&&(b=x.rows[y]);b?(b.leaves.push(h),h.row=b):(h.leaves=[],x.rows.push(h))},d=0;d<o.length;d++)c();return o.map(function(m){return{event:m.data,style:{top:m.top,height:m.height,width:m.width,xOffset:Math.max(0,m.xOffset)}}})}function Pc(t,r,s){for(var a=0;a<t.friends.length;++a)if(!(s.indexOf(t.friends[a])>-1)){r=r>t.friends[a].idx?r:t.friends[a].idx,s.push(t.friends[a]);var n=Pc(t.friends[a],r,s);r=r>n?r:n}return r}function c5(t){var r=t.events,s=t.minimumStartDifference,a=t.slotMetrics,n=t.accessors,i=_c({events:r,minimumStartDifference:s,slotMetrics:a,accessors:n});i.sort(function(ae,re){return ae=ae.style,re=re.style,ae.top!==re.top?ae.top>re.top?1:-1:ae.height!==re.height?ae.top+ae.height<re.top+re.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,m=c.style.top+c.style.height,h=l+1;h<i.length;++h){var x=i[h],b=x.style.top,y=x.style.top+x.style.height;(b>=d&&y<=m||y>d&&y<=m||b>=d&&b<m)&&(c.friends.push(x),x.friends.push(c))}for(var u=0;u<i.length;++u){for(var j=i[u],v=[],f=0;f<100;++f)v.push(1);for(var C=0;C<j.friends.length;++C)j.friends[C].idx!==void 0&&(v[j.friends[C].idx]=0);j.idx=v.indexOf(1)}for(var g=0;g<i.length;++g){var D=0;if(!i[g].size){var R=[],I=Pc(i[g],0,R);D=100/(I+1),i[g].size=D;for(var B=0;B<R.length;++B)R[B].size=D}}for(var _=0;_<i.length;++_){var q=i[_];q.style.left=q.idx*q.size;for(var P=0,V=0;V<q.friends.length;++V){var z=q.friends[V].idx;P=P>z?P:z}P<=q.idx&&(q.size=100-q.idx*q.size);var te=q.idx===0?0:3;q.style.width="calc(".concat(q.size,"% - ").concat(te,"px)"),q.style.height="calc(".concat(q.style.height,"% - 2px)"),q.style.xOffset="calc(".concat(q.style.left,"% + ").concat(te,"px)")}return i}var _o={overlap:_c,"no-overlap":c5};function d5(t){return!!(t&&t.constructor&&t.call&&t.apply)}function u5(t){t.events,t.minimumStartDifference,t.slotMetrics,t.accessors;var r=t.dayLayoutAlgorithm,s=r;return r in _o&&(s=_o[r]),d5(s)?s.apply(this,arguments):[]}var Ac=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.renderSlot,i=a.resource,o=a.group,l=a.getters,c=a.components,d=c===void 0?{}:c,m=d.timeSlotWrapper,h=m===void 0?yt:m,x=l?l.slotGroupProp(o):{};return M.createElement("div",Object.assign({className:"rbc-timeslot-group"},x),o.map(function(b,y){var u=l?l.slotProp(b,i):{};return M.createElement(h,{key:y,value:b,resource:i},M.createElement("div",Object.assign({},u,{className:Ae("rbc-time-slot",u.className)}),n&&n(b,y)))}))}}])}($.Component);function Ss(t){return typeof t=="string"?t:t+"%"}function m5(t){var r=t.style,s=t.className,a=t.event,n=t.accessors,i=t.rtl,o=t.selected,l=t.label,c=t.continuesPrior,d=t.continuesAfter,m=t.getters,h=t.onClick,x=t.onDoubleClick,b=t.isBackgroundEvent,y=t.onKeyPress,u=t.components,j=u.event,v=u.eventWrapper,f=n.title(a),C=n.tooltip(a),g=n.end(a),D=n.start(a),R=m.eventProp(a,D,g,o),I=[M.createElement("div",{key:"1",className:"rbc-event-label"},l),M.createElement("div",{key:"2",className:"rbc-event-content"},j?M.createElement(j,{event:a,title:f}):f)],B=r.height,_=r.top,q=r.width,P=r.xOffset,V=ke(ke({},R.style),{},Vt({top:Ss(_),height:Ss(B),width:Ss(q)},i?"right":"left",Ss(P)));return M.createElement(v,Object.assign({type:"time"},t),M.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:x,style:V,onKeyDown:y,title:C?(typeof l=="string"?l+": ":"")+C:void 0,className:Ae(b?"rbc-background-event":"rbc-event",s,R.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},I))}var h5=function(r){var s=r.children,a=r.className,n=r.style,i=r.innerRef;return M.createElement("div",{className:a,style:n,ref:i},s)},f5=M.forwardRef(function(t,r){return M.createElement(h5,Object.assign({},t,{innerRef:r}))}),x5=["dayProp"],g5=["eventContainerWrapper","timeIndicatorWrapper"],Rc=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.state={selecting:!1,timeIndicatorPosition:null},s.intervalTriggered=!1,s.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=s.props,m=d.rtl,h=d.selected,x=d.accessors,b=d.localizer,y=d.getters,u=d.components,j=d.step,v=d.timeslots,f=d.dayLayoutAlgorithm,C=d.resizable,g=s,D=g.slotMetrics,R=b.messages,I=u5({events:l,accessors:x,slotMetrics:D,minimumStartDifference:Math.ceil(j*v/2),dayLayoutAlgorithm:f});return I.map(function(B,_){var q,P=B.event,V=B.style,z=x.end(P),te=x.start(P),ae=(q=x.eventId(P))!==null&&q!==void 0?q:"evt_"+_,re="eventTimeRangeFormat",S,U=D.startsBeforeDay(te),Y=D.startsAfterDay(z);U?re="eventTimeRangeEndFormat":Y&&(re="eventTimeRangeStartFormat"),U&&Y?S=R.allDay:S=b.format({start:te,end:z},re);var O=U||D.startsBefore(te),de=Y||D.startsAfter(z);return M.createElement(m5,{style:V,event:P,label:S,key:ae,getters:y,rtl:m,components:u,continuesPrior:O,continuesAfter:de,accessors:x,resource:s.props.resource,selected:ma(P,h),onClick:function(xe){return s._select(ke(ke(ke({},P),s.props.resource&&{sourceResource:s.props.resource}),c&&{isBackgroundEvent:!0}),xe)},onDoubleClick:function(xe){return s._doubleClick(P,xe)},isBackgroundEvent:c,onKeyPress:function(xe){return s._keyPress(P,xe)},resizable:C})})},s._selectable=function(){var o=s.containerRef.current,l=s.props,c=l.longPressThreshold,d=l.localizer,m=s._selector=new Dc(function(){return o},{longPressThreshold:c}),h=function(u){var j=s.props.onSelecting,v=s.state||{},f=x(u),C=f.startDate,g=f.endDate;j&&(d.eq(v.startDate,C,"minutes")&&d.eq(v.endDate,g,"minutes")||j({start:C,end:g,resourceId:s.props.resource})===!1)||(s.state.start!==f.start||s.state.end!==f.end||s.state.selecting!==f.selecting)&&s.setState(f)},x=function(u){var j=s.slotMetrics.closestSlotFromPoint(u,nr(o));s.state.selecting||(s._initialSlot=j);var v=s._initialSlot;d.lte(v,j)?j=s.slotMetrics.nextSlot(j):d.gt(v,j)&&(v=s.slotMetrics.nextSlot(v));var f=s.slotMetrics.getRange(d.min(v,j),d.max(v,j));return ke(ke({},f),{},{selecting:!0,top:"".concat(f.top,"%"),height:"".concat(f.height,"%")})},b=function(u,j){if(!Bs(s.containerRef.current,u)){var v=x(u),f=v.startDate,C=v.endDate;s._selectSlot({startDate:f,endDate:C,action:j,box:u})}s.setState({selecting:!1})};m.on("selecting",h),m.on("selectStart",h),m.on("beforeSelect",function(y){if(s.props.selectable==="ignoreEvents")return!Bs(s.containerRef.current,y)}),m.on("click",function(y){return b(y,"click")}),m.on("doubleClick",function(y){return b(y,"doubleClick")}),m.on("select",function(y){s.state.selecting&&(s._selectSlot(ke(ke({},s.state),{},{action:"select",bounds:y})),s.setState({selecting:!1}))}),m.on("reset",function(){s.state.selecting&&s.setState({selecting:!1})})},s._teardownSelectable=function(){s._selector&&(s._selector.teardown(),s._selector=null)},s._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,m=o.bounds,h=o.box,x=l,b=[];s.props.localizer.lte(x,c);)b.push(x),x=new Date(+x+s.props.step*60*1e3);Oe(s.props.onSelectSlot,{slots:b,start:l,end:c,resourceId:s.props.resource,action:d,bounds:m,box:h})},s._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onSelectEvent,l)},s._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onDoubleClickEvent,l)},s._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onKeyPressEvent,l)},s.slotMetrics=Hn(s.props),s.containerRef=$.createRef(),s}return Ke(r,t),Le(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,n){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,m=i.min,h=i.max,x=c.neq(a.getNow(),o(),"minutes");if(a.isNow!==l||x){if(this.clearTimeIndicatorInterval(),l){var b=!x&&c.eq(a.date,d,"minutes")&&n.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(b)}}else l&&(c.neq(a.min,m,"minutes")||c.neq(a.max,h,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!n&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,n=a.min,i=a.max,o=a.getNow,l=o();if(l>=n&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.max,o=a.rtl,l=a.isNow,c=a.resource,d=a.accessors,m=a.localizer,h=a.getters,x=h.dayProp,b=$t(h,x5),y=a.components,u=y.eventContainerWrapper,j=y.timeIndicatorWrapper,v=$t(y,g5);this.slotMetrics=this.slotMetrics.update(this.props);var f=this.slotMetrics,C=this.state,g=C.selecting,D=C.top,R=C.height,I=C.startDate,B=C.endDate,_={start:I,end:B},q=x(i,c),P=q.className,V=q.style,z={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},te=v.dayColumnWrapper||f5;return M.createElement(te,{ref:this.containerRef,date:n,style:V,className:Ae(P,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",g&&"rbc-slot-selecting"),slotMetrics:f,resource:c},f.groups.map(function(ae,re){return M.createElement(Ac,{key:re,group:ae,resource:c,getters:b,components:v})}),M.createElement(u,{localizer:m,resource:c,accessors:d,getters:b,components:v,slotMetrics:f},M.createElement("div",{className:Ae("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),g&&M.createElement("div",{className:"rbc-slot-selection",style:{top:D,height:R}},M.createElement("span",null,m.format(_,"selectRangeFormat"))),l&&this.intervalTriggered&&M.createElement(j,z,M.createElement("div",z)))}}])}(M.Component);Rc.defaultProps={dragThroughEvents:!0,timeslots:2};var Ic=function(r){var s=r.label;return M.createElement(M.Fragment,null,s)},p5=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Oe(s.props.onDrillDown,[o,l])},s.renderRow=function(o){var l=s.props,c=l.events,d=l.rtl,m=l.selectable,h=l.getNow,x=l.range,b=l.getters,y=l.localizer,u=l.accessors,j=l.components,v=l.resizable,f=u.resourceId(o),C=o?c.filter(function(g){return u.resource(g)===f}):c;return M.createElement(as,{isAllDay:!0,rtl:d,getNow:h,minRows:2,maxRows:s.props.allDayMaxRows+1,range:x,events:C,resourceId:f,className:"rbc-allday-cell",selectable:m,selected:s.props.selected,components:j,accessors:u,getters:b,localizer:y,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyPress:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:v})},s}return Ke(r,t),Le(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,m=i.components.header,h=m===void 0?Bn:m,x=c();return a.map(function(b,y){var u=l(b),j=o.format(b,"dayFormat"),v=d(b),f=v.className,C=v.style,g=M.createElement(h,{date:b,label:j,localizer:o});return M.createElement("div",{key:y,style:C,className:Ae("rbc-header",f,o.isSameDate(b,x)&&"rbc-today")},u?M.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(R){return n.handleHeaderClick(b,u,R)}},g):M.createElement("span",null,g))})}},{key:"render",value:function(){var a=this,n=this.props,i=n.width,o=n.rtl,l=n.resources,c=n.range,d=n.events,m=n.getNow,h=n.accessors,x=n.selectable,b=n.components,y=n.getters,u=n.scrollRef,j=n.localizer,v=n.isOverflowing,f=n.components,C=f.timeGutterHeader,g=f.resourceHeader,D=g===void 0?Ic:g,R=n.resizable,I={};v&&(I[o?"marginLeft":"marginRight"]="".concat(jn()-1,"px"));var B=l.groupEvents(d);return M.createElement("div",{style:I,ref:u,className:Ae("rbc-time-header",v&&"rbc-overflowing")},M.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},C&&M.createElement(C,null)),l.map(function(_,q){var P=Qt(_,2),V=P[0],z=P[1];return M.createElement("div",{className:"rbc-time-header-content",key:V||q},z&&M.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(q)},M.createElement("div",{className:"rbc-header"},M.createElement(D,{index:q,label:h.resourceTitle(z),resource:z}))),M.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),M.createElement(as,{isAllDay:!0,rtl:o,getNow:m,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:B.get(V)||[],resourceId:z&&V,className:"rbc-allday-cell",selectable:x,selected:a.props.selected,components:b,accessors:h,getters:y,localizer:j,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:R}))}))}}])}(M.Component),v5=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Oe(s.props.onDrillDown,[o,l])},s}return Ke(r,t),Le(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,m=i.components,h=m.header,x=h===void 0?Bn:h,b=m.resourceHeader,y=b===void 0?Ic:b,u=i.resources,j=i.accessors,v=i.events,f=i.rtl,C=i.selectable,g=i.components,D=i.getters,R=i.resizable,I=c(),B=u.groupEvents(v);return a.map(function(_,q){var P=l(_),V=o.format(_,"dayFormat"),z=d(_),te=z.className,ae=z.style,re=M.createElement(x,{date:_,label:V,localizer:o});return M.createElement("div",{key:q,className:"rbc-time-header-content rbc-resource-grouping"},M.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},M.createElement("div",{style:ae,className:Ae("rbc-header",te,o.isSameDate(_,I)&&"rbc-today")},P?M.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(U){return n.handleHeaderClick(_,P,U)}},re):M.createElement("span",null,re))),M.createElement("div",{className:"rbc-row"},u.map(function(S,U){var Y=Qt(S,2),O=Y[0],de=Y[1];return M.createElement("div",{key:"resource_".concat(O,"_").concat(U),className:Ae("rbc-header",te,o.isSameDate(_,I)&&"rbc-today")},M.createElement(y,{index:U,label:j.resourceTitle(de),resource:de}))})),M.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},u.map(function(S,U){var Y=Qt(S,2),O=Y[0],de=Y[1],he=(B.get(O)||[]).filter(function(xe){return o.isSameDate(xe.start,_)||o.isSameDate(xe.end,_)});return M.createElement(as,{key:"resource_".concat(O,"_").concat(U),isAllDay:!0,rtl:f,getNow:c,minRows:2,maxRows:n.props.allDayMaxRows+1,range:[_],events:he,resourceId:de&&O,className:"rbc-allday-cell",selectable:C,selected:n.props.selected,components:g,accessors:j,getters:D,localizer:o,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:R})})))})}},{key:"render",value:function(){var a=this.props,n=a.width,i=a.rtl,o=a.range,l=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,m={};return c&&(m[i?"marginLeft":"marginRight"]="".concat(jn()-1,"px")),M.createElement("div",{style:m,ref:l,className:Ae("rbc-time-header",c&&"rbc-overflowing")},M.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},d&&M.createElement(d,null)),this.renderHeaderCells(o))}}])}(M.Component);function b5(t){var r=t.min,s=t.max,a=t.localizer;return a.getTimezoneOffset(r)!==a.getTimezoneOffset(s)?{start:a.add(r,-1,"day"),end:a.add(s,-1,"day")}:{start:r,end:s}}var y5=function(r){var s=r.min,a=r.max,n=r.timeslots,i=r.step,o=r.localizer,l=r.getNow,c=r.resource,d=r.components,m=r.getters,h=r.gutterRef,x=d.timeGutterWrapper,b=$.useMemo(function(){return b5({min:s,max:a,localizer:o})},[s==null?void 0:s.toISOString(),a==null?void 0:a.toISOString(),o]),y=b.start,u=b.end,j=$.useState(Hn({min:y,max:u,timeslots:n,step:i,localizer:o})),v=Qt(j,2),f=v[0],C=v[1];$.useEffect(function(){f&&C(f.update({min:y,max:u,timeslots:n,step:i,localizer:o}))},[y==null?void 0:y.toISOString(),u==null?void 0:u.toISOString(),n,i]);var g=$.useCallback(function(D,R){if(R)return null;var I=f.dateIsInGroup(l(),R);return M.createElement("span",{className:Ae("rbc-label",I&&"rbc-now")},o.format(D,"timeGutterFormat"))},[f,o,l]);return M.createElement(x,{slotMetrics:f},M.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:h},f.groups.map(function(D,R){return M.createElement(Ac,{key:R,group:D,resource:c,components:d,renderSlot:g,getters:m})})))},j5=M.forwardRef(function(t,r){return M.createElement(y5,Object.assign({gutterRef:r},t))}),Ta={};function w5(t,r){return{map:function(a){return t?t.map(function(n,i){return a([r.resourceId(n),n],i)}):[a([Ta,null],0)]},groupEvents:function(a){var n=new Map;return t?(a.forEach(function(i){var o=r.resource(i)||Ta;if(Array.isArray(o))o.forEach(function(c){var d=n.get(c)||[];d.push(i),n.set(c,d)});else{var l=n.get(o)||[];l.push(i),n.set(o,l)}}),n):(n.set(Ta,a),n)}}}var Mr=function(t){function r(s){var a;return Ie(this,r),a=Ve(this,r,[s]),a.handleScroll=function(n){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=n.target.scrollLeft)},a.handleResize=function(){vi(a.rafHandle),a.rafHandle=_l(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Oe(a.props.onKeyPressEvent,i)},a.handleSelectEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Oe(a.props.onSelectEvent,i)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Oe(a.props.onDoubleClickEvent,i)},a.handleShowMore=function(n,i,o,l,c){var d=a.props,m=d.popup,h=d.onDrillDown,x=d.onShowMore,b=d.getDrilldownView,y=d.doShowMoreDrillDown;if(a.clearSelection(),m){var u=Ml(o,a.containerRef.current);a.setState({overlay:{date:i,events:n,position:ke(ke({},u),{},{width:"200px"}),target:c}})}else y&&Oe(h,[i,b(i)||Je.DAY]);Oe(x,[n,i,l])},a.handleSelectAllDaySlot=function(n,i){var o=a.props.onSelectSlot,l=new Date(n[0]),c=new Date(n[n.length-1]);c.setDate(n[n.length-1].getDate()+1),Oe(o,{slots:n,start:l,end:c,action:i.action,resourceId:i.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var n=a.contentRef.current;if(n!=null&&n.scrollHeight){var i=n.scrollHeight>n.clientHeight;a.state.isOverflowing!==i&&(a._updatingOverflow=!0,a.setState({isOverflowing:i},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=ac(function(n,i){return w5(n,i)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=M.createRef(),a.contentRef=M.createRef(),a.containerRef=M.createRef(),a._scrollRatio=null,a.gutterRef=$.createRef(),a}return Ke(r,t),Le(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),vi(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,n,i,o,l,c,d,m,h,x){var b=this.props,y=b.min,u=b.max,j=(o.get(n)||[]).filter(function(f){return c.inRange(a,d.start(f),d.end(f),"day")}),v=(l.get(n)||[]).filter(function(f){return c.inRange(a,d.start(f),d.end(f),"day")});return M.createElement(Rc,Object.assign({},this.props,{localizer:c,min:c.merge(a,y),max:c.merge(a,u),resource:i&&n,components:m,isNow:c.isSameDate(a,x),key:"".concat(n,"-").concat(a),date:a,events:j,backgroundEvents:v,dayLayoutAlgorithm:h}))}},{key:"renderResourcesFirst",value:function(a,n,i,o,l,c,d,m,h){var x=this;return n.map(function(b){var y=Qt(b,2),u=y[0],j=y[1];return a.map(function(v){return x.renderDayColumn(v,u,j,i,o,l,c,m,h,d)})})}},{key:"renderRangeFirst",value:function(a,n,i,o,l,c,d,m,h){var x=this;return a.map(function(b){return M.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:b},n.map(function(y){var u=Qt(y,2),j=u[0],v=u[1];return M.createElement("div",{style:{flex:1},key:c.resourceId(v)},x.renderDayColumn(b,j,v,i,o,l,c,m,h,d))}))})}},{key:"renderEvents",value:function(a,n,i,o){var l=this.props,c=l.accessors,d=l.localizer,m=l.resourceGroupingLayout,h=l.components,x=l.dayLayoutAlgorithm,b=this.memoizedResources(this.props.resources,c),y=b.groupEvents(n),u=b.groupEvents(i);return m?this.renderRangeFirst(a,b,y,u,d,c,o,h,x):this.renderResourcesFirst(a,b,y,u,d,c,o,h,x)}},{key:"render",value:function(){var a,n=this.props,i=n.events,o=n.backgroundEvents,l=n.range,c=n.width,d=n.rtl,m=n.selected,h=n.getNow,x=n.resources,b=n.components,y=n.accessors,u=n.getters,j=n.localizer,v=n.min,f=n.max,C=n.showMultiDayTimes,g=n.longPressThreshold,D=n.resizable,R=n.resourceGroupingLayout;c=c||this.state.gutterWidth;var I=l[0],B=l[l.length-1];this.slots=l.length;var _=[],q=[],P=[];i.forEach(function(z){if(ss(z,I,B,y,j)){var te=y.start(z),ae=y.end(z);y.allDay(z)||j.startAndEndAreDateOnly(te,ae)||!C&&!j.isSameDate(te,ae)?_.push(z):q.push(z)}}),o.forEach(function(z){ss(z,I,B,y,j)&&P.push(z)}),_.sort(function(z,te){return Xa(z,te,y,j)});var V={range:l,events:_,width:c,rtl:d,getNow:h,localizer:j,selected:m,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(x,y),selectable:this.props.selectable,accessors:y,getters:u,components:b,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:g,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:D};return M.createElement("div",{className:Ae("rbc-time-view",x&&"rbc-time-view-resources"),ref:this.containerRef},x&&x.length>1&&R?M.createElement(v5,V):M.createElement(p5,V),this.props.popup&&this.renderOverlay(),M.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},M.createElement(j5,{date:I,ref:this.gutterRef,localizer:j,min:j.merge(I,v),max:j.merge(I,f),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:b,className:"rbc-time-gutter",getters:u}),this.renderEvents(l,q,P,h())))}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,m=l.components,h=l.getters,x=l.selected,b=l.popupOffset,y=l.handleDragStart,u=function(){return i.setState({overlay:null})};return M.createElement(Un,{overlay:o,accessors:c,localizer:d,components:m,getters:h,selected:x,popupOffset:b,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:u})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var n,i=(n=a.gutterRef)!==null&&n!==void 0&&n.current?Ya(a.gutterRef.current):void 0;i&&a.state.gutterWidth!==i&&a.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=a.min,i=a.max,o=a.scrollToTime,l=a.localizer,c=l.diff(l.merge(o,n),o,"milliseconds"),d=l.diff(n,i,"milliseconds");this._scrollRatio=c/d}}])}($.Component);Mr.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var N5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],fa=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,h=m===void 0?i.startOf(new Date,"day"):m,x=a.enableAutoScroll,b=x===void 0?!0:x,y=$t(a,N5),u=r.range(n,{localizer:i});return M.createElement(Mr,Object.assign({},y,{range:u,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:b}))}}])}(M.Component);fa.range=function(t,r){var s=r.localizer;return[s.startOf(t,"day")]};fa.navigate=function(t,r,s){var a=s.localizer;switch(r){case at.PREVIOUS:return a.add(t,-1,"day");case at.NEXT:return a.add(t,1,"day");default:return t}};fa.title=function(t,r){var s=r.localizer;return s.format(t,"dayHeaderFormat")};var S5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Bt=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,h=m===void 0?i.startOf(new Date,"day"):m,x=a.enableAutoScroll,b=x===void 0?!0:x,y=$t(a,S5),u=r.range(n,this.props);return M.createElement(Mr,Object.assign({},y,{range:u,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:b}))}}])}(M.Component);Bt.defaultProps=Mr.defaultProps;Bt.navigate=function(t,r,s){var a=s.localizer;switch(r){case at.PREVIOUS:return a.add(t,-1,"week");case at.NEXT:return a.add(t,1,"week");default:return t}};Bt.range=function(t,r){var s=r.localizer,a=s.startOfWeek(),n=s.startOf(t,"week",a),i=s.endOf(t,"week",a);return s.range(n,i)};Bt.title=function(t,r){var s=r.localizer,a=Bt.range(t,{localizer:s}),n=uc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var k5=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function zn(t,r){return Bt.range(t,r).filter(function(s){return[6,0].indexOf(s.getDay())===-1})}var xs=function(t){function r(){return Ie(this,r),Ve(this,r,arguments)}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,h=m===void 0?i.startOf(new Date,"day"):m,x=a.enableAutoScroll,b=x===void 0?!0:x,y=$t(a,k5),u=zn(n,this.props);return M.createElement(Mr,Object.assign({},y,{range:u,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:b}))}}])}(M.Component);xs.defaultProps=Mr.defaultProps;xs.range=zn;xs.navigate=Bt.navigate;xs.title=function(t,r){var s=r.localizer,a=zn(t,{localizer:s}),n=uc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var xa=30;function ga(t){var r=t.accessors,s=t.components,a=t.date,n=t.events,i=t.getters,o=t.length,l=o===void 0?xa:o,c=t.localizer,d=t.onDoubleClickEvent,m=t.onSelectEvent,h=t.selected,x=$.useRef(null),b=$.useRef(null),y=$.useRef(null),u=$.useRef(null),j=$.useRef(null);$.useEffect(function(){C()});var v=function(B,_,q){var P=s.event,V=s.date;return _=_.filter(function(z){return ss(z,c.startOf(B,"day"),c.endOf(B,"day"),r,c)}),_.map(function(z,te){var ae=r.title(z),re=r.end(z),S=r.start(z),U=i.eventProp(z,S,re,ma(z,h)),Y=te===0&&c.format(B,"agendaDateFormat"),O=te===0?M.createElement("td",{rowSpan:_.length,className:"rbc-agenda-date-cell"},V?M.createElement(V,{day:B,label:Y}):Y):!1;return M.createElement("tr",{key:q+"_"+te,className:U.className,style:U.style},O,M.createElement("td",{className:"rbc-agenda-time-cell"},f(B,z)),M.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(he){return m&&m(z,he)},onDoubleClick:function(he){return d&&d(z,he)}},P?M.createElement(P,{event:z,title:ae}):ae))},[])},f=function(B,_){var q="",P=s.time,V=c.messages.allDay,z=r.end(_),te=r.start(_);return r.allDay(_)||(c.eq(te,z)?V=c.format(te,"agendaTimeFormat"):c.isSameDate(te,z)?V=c.format({start:te,end:z},"agendaTimeRangeFormat"):c.isSameDate(B,te)?V=c.format(te,"agendaTimeFormat"):c.isSameDate(B,z)&&(V=c.format(z,"agendaTimeFormat"))),c.gt(B,te,"day")&&(q="rbc-continues-prior"),c.lt(B,z,"day")&&(q+=" rbc-continues-after"),M.createElement("span",{className:q.trim()},P?M.createElement(P,{event:_,day:B,label:V}):V)},C=function(){if(j.current){var B=x.current,_=j.current.firstChild;if(_){var q=u.current.scrollHeight>u.current.clientHeight,P=[],V=P;P=[Ya(_.children[0]),Ya(_.children[1])],(V[0]!==P[0]||V[1]!==P[1])&&(b.current.style.width=P[0]+"px",y.current.style.width=P[1]+"px"),q?(Cf(B,"rbc-header-overflowing"),B.style.marginRight=jn()+"px"):$f(B,"rbc-header-overflowing")}}},g=c.messages,D=c.add(a,l,"day"),R=c.range(a,D,"day");return n=n.filter(function(I){return ss(I,c.startOf(a,"day"),c.endOf(D,"day"),r,c)}),n.sort(function(I,B){return+r.start(I)-+r.start(B)}),M.createElement("div",{className:"rbc-agenda-view"},n.length!==0?M.createElement(M.Fragment,null,M.createElement("table",{ref:x,className:"rbc-agenda-table"},M.createElement("thead",null,M.createElement("tr",null,M.createElement("th",{className:"rbc-header",ref:b},g.date),M.createElement("th",{className:"rbc-header",ref:y},g.time),M.createElement("th",{className:"rbc-header"},g.event)))),M.createElement("div",{className:"rbc-agenda-content",ref:u},M.createElement("table",{className:"rbc-agenda-table"},M.createElement("tbody",{ref:j},R.map(function(I,B){return v(I,n,B)}))))):M.createElement("span",{className:"rbc-agenda-empty"},g.noEventsInRange))}ga.range=function(t,r){var s=r.length,a=s===void 0?xa:s,n=r.localizer,i=n.add(t,a,"day");return{start:t,end:i}};ga.navigate=function(t,r,s){var a=s.length,n=a===void 0?xa:a,i=s.localizer;switch(r){case at.PREVIOUS:return i.add(t,-n,"day");case at.NEXT:return i.add(t,n,"day");default:return t}};ga.title=function(t,r){var s=r.length,a=s===void 0?xa:s,n=r.localizer,i=n.add(t,a,"day");return n.format({start:t,end:i},"agendaHeaderFormat")};var Os=Vt(Vt(Vt(Vt(Vt({},Je.MONTH,ha),Je.WEEK,Bt),Je.WORK_WEEK,xs),Je.DAY,fa),Je.AGENDA,ga),C5=["action","date","today"];function $5(t,r){var s=r.action,a=r.date,n=r.today,i=$t(r,C5);switch(t=typeof t=="string"?Os[t]:t,s){case at.TODAY:a=n||new Date;break;case at.DATE:break;default:Gr(t&&typeof t.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=t.navigate(a,s,i)}return a}function D5(t,r){var s=null;return typeof r=="function"?s=r(t):typeof r=="string"&&_t(t)==="object"&&t!=null&&r in t&&(s=t[r]),s}var Tt=function(r){return function(s){return D5(s,r)}},E5=["view","date","getNow","onNavigate"],T5=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Lc(t){if(Array.isArray(t))return t;for(var r=[],s=0,a=Object.entries(t);s<a.length;s++){var n=Qt(a[s],2),i=n[0],o=n[1];o&&r.push(i)}return r}function O5(t,r){var s=r.views,a=Lc(s);return a.indexOf(t)!==-1}var Fc=function(t){function r(){var s;Ie(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ve(this,r,[].concat(n)),s.getViews=function(){var o=s.props.views;return Array.isArray(o)?ok(o,function(l,c){return l[c]=Os[c]},{}):_t(o)==="object"?oN(o,function(l,c){return l===!0?Os[c]:l}):Os},s.getView=function(){var o=s.getViews();return o[s.props.view]},s.getDrilldownView=function(o){var l=s.props,c=l.view,d=l.drilldownView,m=l.getDrilldownView;return m?m(o,c,Object.keys(s.getViews())):d},s.handleRangeChange=function(o,l,c){var d=s.props,m=d.onRangeChange,h=d.localizer;m&&l.range&&m(l.range(o,{localizer:h}),c)},s.handleNavigate=function(o,l){var c=s.props,d=c.view,m=c.date,h=c.getNow,x=c.onNavigate,b=$t(c,E5),y=s.getView(),u=h();m=$5(y,ke(ke({},b),{},{action:o,date:l||m||u,today:u})),x(m,d,o),s.handleRangeChange(m,y)},s.handleViewChange=function(o){o!==s.props.view&&O5(o,s.props)&&s.props.onView(o);var l=s.getViews();s.handleRangeChange(s.props.date||s.props.getNow(),l[o],o)},s.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Oe(s.props.onKeyPressEvent,l)},s.handleSelectSlot=function(o){Oe(s.props.onSelectSlot,o)},s.handleDrillDown=function(o,l){var c=s.props.onDrillDown;if(c){c(o,l,s.drilldownView);return}l&&s.handleViewChange(l),s.handleNavigate(at.DATE,o)},s.state={context:r.getContext(s.props)},s}return Ke(r,t),Le(r,[{key:"render",value:function(){var a=this.props,n=a.view,i=a.toolbar,o=a.events,l=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,m=a.className,h=a.elementProps,x=a.date,b=a.getNow,y=a.length,u=a.showMultiDayTimes,j=a.onShowMore,v=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var f=$t(a,T5);x=x||b();var C=this.getView(),g=this.state.context,D=g.accessors,R=g.components,I=g.getters,B=g.localizer,_=g.viewNames,q=R.toolbar||Pk,P=C.title(x,{localizer:B,length:y});return M.createElement("div",Object.assign({},h,{className:Ae(m,"rbc-calendar",f.rtl&&"rbc-rtl"),style:d}),i&&M.createElement(q,{date:x,view:n,views:_,label:P,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:B}),M.createElement(C,Object.assign({},f,{events:o,backgroundEvents:l,date:x,getNow:b,length:y,localizer:B,getters:I,components:R,accessors:D,showMultiDayTimes:u,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:j,doShowMoreDrillDown:v,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:r.getContext(a)}}},{key:"getContext",value:function(a){var n=a.startAccessor,i=a.endAccessor,o=a.allDayAccessor,l=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,m=a.resourceIdAccessor,h=a.resourceTitleAccessor,x=a.eventIdAccessor,b=a.eventPropGetter,y=a.backgroundEventPropGetter,u=a.slotPropGetter,j=a.slotGroupPropGetter,v=a.dayPropGetter,f=a.view,C=a.views,g=a.localizer,D=a.culture,R=a.messages,I=R===void 0?{}:R,B=a.components,_=B===void 0?{}:B,q=a.formats,P=q===void 0?{}:q,V=Lc(C),z=Rk(I);return{viewNames:V,localizer:_k(g,D,P,z),getters:{eventProp:function(){return b&&b.apply(void 0,arguments)||{}},backgroundEventProp:function(){return y&&y.apply(void 0,arguments)||{}},slotProp:function(){return u&&u.apply(void 0,arguments)||{}},slotGroupProp:function(){return j&&j.apply(void 0,arguments)||{}},dayProp:function(){return v&&v.apply(void 0,arguments)||{}}},components:eN(_[f]||{},VS(_,V),{eventWrapper:yt,backgroundEventWrapper:yt,eventContainerWrapper:yt,dateCellWrapper:yt,weekWrapper:yt,timeSlotWrapper:yt,timeGutterWrapper:yt,timeIndicatorWrapper:yt}),accessors:{start:Tt(n),end:Tt(i),allDay:Tt(o),tooltip:Tt(l),title:Tt(c),resource:Tt(d),resourceId:Tt(m),resourceTitle:Tt(h),eventId:Tt(x)}}}}])}(M.Component);Fc.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Je.MONTH,views:[Je.MONTH,Je.WEEK,Je.DAY,Je.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Je.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Gn=ml(Fc,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),M5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"P",s)," – ").concat(a.format(i,"P",s))},Oa=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"p",s)," – ").concat(a.format(i,"p",s))},_5=function(r,s,a){var n=r.start;return"".concat(a.format(n,"h:mma",s)," – ")},P5=function(r,s,a){var n=r.end;return" – ".concat(a.format(n,"h:mma",s))},A5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"MMMM dd",s)," – ").concat(a.format(i,wr(n,i,"month")?"dd":"MMMM dd",s))},R5={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Oa,eventTimeRangeFormat:Oa,eventTimeRangeStartFormat:_5,eventTimeRangeEndFormat:P5,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:A5,agendaHeaderFormat:M5,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Oa},qn=function(r){var s=r.startOfWeek,a=r.getDay,n=r.format,i=r.locales;return new Mk({formats:R5,firstOfWeek:function(l){return a(s(new Date,{locale:i[l]}))},format:function(l,c,d){return n(new Date(l),c,{locale:i[d]})}})};function lt(t){const r=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&r==="[object Date]"?new t.constructor(+t):typeof t=="number"||r==="[object Number]"||typeof t=="string"||r==="[object String]"?new Date(t):new Date(NaN)}function At(t,r){return t instanceof Date?new t.constructor(r):new Date(r)}function I5(t,r){const s=lt(t);return isNaN(r)?At(t,NaN):(s.setDate(s.getDate()+r),s)}const Wc=6048e5,L5=864e5;let F5={};function pa(){return F5}function Dt(t,r){var l,c,d,m;const s=pa(),a=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((m=(d=s.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,n=lt(t),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Hs(t){return Dt(t,{weekStartsOn:1})}function Uc(t){const r=lt(t),s=r.getFullYear(),a=At(t,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const n=Hs(a),i=At(t,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=Hs(i);return r.getTime()>=n.getTime()?s+1:r.getTime()>=o.getTime()?s:s-1}function zs(t){const r=lt(t);return r.setHours(0,0,0,0),r}function Po(t){const r=lt(t),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+t-+s}function W5(t,r){const s=zs(t),a=zs(r),n=+s-Po(s),i=+a-Po(a);return Math.round((n-i)/L5)}function U5(t){const r=Uc(t),s=At(t,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Hs(s)}function Yn(t){return At(t,Date.now())}function Bc(t,r){const s=zs(t),a=zs(r);return+s==+a}function B5(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function H5(t){if(!B5(t)&&typeof t!="number")return!1;const r=lt(t);return!isNaN(Number(r))}function z5(t){const r=lt(t),s=At(t,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}const G5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q5=(t,r,s)=>{let a;const n=G5[t];return typeof n=="string"?a=n:r===1?a=n.one:a=n.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function mr(t){return(r={})=>{const s=r.width?String(r.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const Y5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},V5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},K5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X5={date:mr({formats:Y5,defaultWidth:"full"}),time:mr({formats:V5,defaultWidth:"full"}),dateTime:mr({formats:K5,defaultWidth:"full"})},J5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Q5=(t,r,s,a)=>J5[t];function jt(t){return(r,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=s!=null&&s.width?String(s.width):o;n=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=s!=null&&s.width?String(s.width):t.defaultWidth;n=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(r):r;return n[i]}}const Z5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},eC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nC=(t,r)=>{const s=Number(t),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},iC={ordinalNumber:nC,era:jt({values:Z5,defaultWidth:"wide"}),quarter:jt({values:eC,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jt({values:tC,defaultWidth:"wide"}),day:jt({values:rC,defaultWidth:"wide"}),dayPeriod:jt({values:sC,defaultWidth:"wide",formattingValues:aC,defaultFormattingWidth:"wide"})};function wt(t){return(r,s={})=>{const a=s.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=r.match(n);if(!i)return null;const o=i[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?lC(l,h=>h.test(o)):oC(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const m=r.slice(o.length);return{value:d,rest:m}}}function oC(t,r){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&r(t[s]))return s}function lC(t,r){for(let s=0;s<t.length;s++)if(r(t[s]))return s}function Hc(t){return(r,s={})=>{const a=r.match(t.matchPattern);if(!a)return null;const n=a[0],i=r.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=r.slice(n.length);return{value:o,rest:l}}}const cC=/^(\d+)(th|st|nd|rd)?/i,dC=/\d+/i,uC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mC={any:[/^b/i,/^(a|c)/i]},hC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fC={any:[/1/i,/2/i,/3/i,/4/i]},xC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jC={ordinalNumber:Hc({matchPattern:cC,parsePattern:dC,valueCallback:t=>parseInt(t,10)}),era:wt({matchPatterns:uC,defaultMatchWidth:"wide",parsePatterns:mC,defaultParseWidth:"any"}),quarter:wt({matchPatterns:hC,defaultMatchWidth:"wide",parsePatterns:fC,defaultParseWidth:"any",valueCallback:t=>t+1}),month:wt({matchPatterns:xC,defaultMatchWidth:"wide",parsePatterns:gC,defaultParseWidth:"any"}),day:wt({matchPatterns:pC,defaultMatchWidth:"wide",parsePatterns:vC,defaultParseWidth:"any"}),dayPeriod:wt({matchPatterns:bC,defaultMatchWidth:"any",parsePatterns:yC,defaultParseWidth:"any"})},wC={code:"en-US",formatDistance:q5,formatLong:X5,formatRelative:Q5,localize:iC,match:jC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NC(t){const r=lt(t);return W5(r,z5(r))+1}function SC(t){const r=lt(t),s=+Hs(r)-+U5(r);return Math.round(s/Wc)+1}function zc(t,r){var m,h,x,b;const s=lt(t),a=s.getFullYear(),n=pa(),i=(r==null?void 0:r.firstWeekContainsDate)??((h=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(x=n.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,o=At(t,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Dt(o,r),c=At(t,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Dt(c,r);return s.getTime()>=l.getTime()?a+1:s.getTime()>=d.getTime()?a:a-1}function kC(t,r){var l,c,d,m;const s=pa(),a=(r==null?void 0:r.firstWeekContainsDate)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(d=s.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,n=zc(t,r),i=At(t,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Dt(i,r)}function CC(t,r){const s=lt(t),a=+Dt(s,r)-+kC(s,r);return Math.round(a/Wc)+1}function je(t,r){const s=t<0?"-":"",a=Math.abs(t).toString().padStart(r,"0");return s+a}const It={y(t,r){const s=t.getFullYear(),a=s>0?s:1-s;return je(r==="yy"?a%100:a,r.length)},M(t,r){const s=t.getMonth();return r==="M"?String(s+1):je(s+1,2)},d(t,r){return je(t.getDate(),r.length)},a(t,r){const s=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,r){return je(t.getHours()%12||12,r.length)},H(t,r){return je(t.getHours(),r.length)},m(t,r){return je(t.getMinutes(),r.length)},s(t,r){return je(t.getSeconds(),r.length)},S(t,r){const s=r.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,s-3));return je(n,r.length)}},cr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ao={G:function(t,r,s){const a=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(t,r,s){if(r==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return It.y(t,r)},Y:function(t,r,s,a){const n=zc(t,a),i=n>0?n:1-n;if(r==="YY"){const o=i%100;return je(o,2)}return r==="Yo"?s.ordinalNumber(i,{unit:"year"}):je(i,r.length)},R:function(t,r){const s=Uc(t);return je(s,r.length)},u:function(t,r){const s=t.getFullYear();return je(s,r.length)},Q:function(t,r,s){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return je(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,s){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return je(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,s){const a=t.getMonth();switch(r){case"M":case"MM":return It.M(t,r);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,s){const a=t.getMonth();switch(r){case"L":return String(a+1);case"LL":return je(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,s,a){const n=CC(t,a);return r==="wo"?s.ordinalNumber(n,{unit:"week"}):je(n,r.length)},I:function(t,r,s){const a=SC(t);return r==="Io"?s.ordinalNumber(a,{unit:"week"}):je(a,r.length)},d:function(t,r,s){return r==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):It.d(t,r)},D:function(t,r,s){const a=NC(t);return r==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):je(a,r.length)},E:function(t,r,s){const a=t.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,s,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return je(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(t,r,s,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return je(i,r.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(t,r,s){const a=t.getDay(),n=a===0?7:a;switch(r){case"i":return String(n);case"ii":return je(n,r.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,s){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,r,s){const a=t.getHours();let n;switch(a===12?n=cr.noon:a===0?n=cr.midnight:n=a/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,r,s){const a=t.getHours();let n;switch(a>=17?n=cr.evening:a>=12?n=cr.afternoon:a>=4?n=cr.morning:n=cr.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,r,s){if(r==="ho"){let a=t.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return It.h(t,r)},H:function(t,r,s){return r==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):It.H(t,r)},K:function(t,r,s){const a=t.getHours()%12;return r==="Ko"?s.ordinalNumber(a,{unit:"hour"}):je(a,r.length)},k:function(t,r,s){let a=t.getHours();return a===0&&(a=24),r==="ko"?s.ordinalNumber(a,{unit:"hour"}):je(a,r.length)},m:function(t,r,s){return r==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):It.m(t,r)},s:function(t,r,s){return r==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):It.s(t,r)},S:function(t,r){return It.S(t,r)},X:function(t,r,s){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Io(a);case"XXXX":case"XX":return Yt(a);case"XXXXX":case"XXX":default:return Yt(a,":")}},x:function(t,r,s){const a=t.getTimezoneOffset();switch(r){case"x":return Io(a);case"xxxx":case"xx":return Yt(a);case"xxxxx":case"xxx":default:return Yt(a,":")}},O:function(t,r,s){const a=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Ro(a,":");case"OOOO":default:return"GMT"+Yt(a,":")}},z:function(t,r,s){const a=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Ro(a,":");case"zzzz":default:return"GMT"+Yt(a,":")}},t:function(t,r,s){const a=Math.trunc(t.getTime()/1e3);return je(a,r.length)},T:function(t,r,s){const a=t.getTime();return je(a,r.length)}};function Ro(t,r=""){const s=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),i=a%60;return i===0?s+String(n):s+String(n)+r+je(i,2)}function Io(t,r){return t%60===0?(t>0?"-":"+")+je(Math.abs(t)/60,2):Yt(t,r)}function Yt(t,r=""){const s=t>0?"-":"+",a=Math.abs(t),n=je(Math.trunc(a/60),2),i=je(a%60,2);return s+n+r+i}const Lo=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Gc=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},$C=(t,r)=>{const s=t.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return Lo(t,r);let i;switch(a){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",Lo(a,r)).replace("{{time}}",Gc(n,r))},DC={p:Gc,P:$C},EC=/^D+$/,TC=/^Y+$/,OC=["D","DD","YY","YYYY"];function MC(t){return EC.test(t)}function _C(t){return TC.test(t)}function PC(t,r,s){const a=AC(t,r,s);if(console.warn(a),OC.includes(t))throw new RangeError(a)}function AC(t,r,s){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LC=/^'([^]*?)'?$/,FC=/''/g,WC=/[a-zA-Z]/;function We(t,r,s){var m,h,x,b,y,u,j,v;const a=pa(),n=(s==null?void 0:s.locale)??a.locale??wC,i=(s==null?void 0:s.firstWeekContainsDate)??((h=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,o=(s==null?void 0:s.weekStartsOn)??((u=(y=s==null?void 0:s.locale)==null?void 0:y.options)==null?void 0:u.weekStartsOn)??a.weekStartsOn??((v=(j=a.locale)==null?void 0:j.options)==null?void 0:v.weekStartsOn)??0,l=lt(t);if(!H5(l))throw new RangeError("Invalid time value");let c=r.match(IC).map(f=>{const C=f[0];if(C==="p"||C==="P"){const g=DC[C];return g(f,n.formatLong)}return f}).join("").match(RC).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const C=f[0];if(C==="'")return{isToken:!1,value:UC(f)};if(Ao[C])return{isToken:!0,value:f};if(C.match(WC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:f}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(f=>{if(!f.isToken)return f.value;const C=f.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&_C(C)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&MC(C))&&PC(C,r,String(t));const g=Ao[C[0]];return g(l,C,n.localize,d)}).join("")}function UC(t){const r=t.match(LC);return r?r[1].replace(FC,"'"):t}function Vn(t){return lt(t).getDay()}function Qa(t,r,s){const a=Dt(t,s),n=Dt(r,s);return+a==+n}function BC(t,r){return Qa(t,Yn(t),r)}function Fo(t){return Bc(t,Yn(t))}function HC(t,r){return I5(t,-1)}function Wo(t){return Bc(t,HC(Yn(t)))}function Ir(t,r){if(t.one!==void 0&&r===1)return t.one;const s=r%10,a=r%100;return s===1&&a!==11?t.singularNominative.replace("{{count}}",String(r)):s>=2&&s<=4&&(a<10||a>20)?t.singularGenitive.replace("{{count}}",String(r)):t.pluralGenitive.replace("{{count}}",String(r))}function Xe(t){return(r,s)=>s!=null&&s.addSuffix?s.comparison&&s.comparison>0?t.future?Ir(t.future,r):"через "+Ir(t.regular,r):t.past?Ir(t.past,r):Ir(t.regular,r)+" назад":Ir(t.regular,r)}const zC={lessThanXSeconds:Xe({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Xe({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(t,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:Xe({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Xe({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Xe({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Xe({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Xe({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Xe({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Xe({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Xe({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Xe({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Xe({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Xe({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Xe({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Xe({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},GC=(t,r,s)=>zC[t](r,s),qC={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},YC={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},VC={any:"{{date}}, {{time}}"},KC={date:mr({formats:qC,defaultWidth:"full"}),time:mr({formats:YC,defaultWidth:"full"}),dateTime:mr({formats:VC,defaultWidth:"any"})},Kn=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function XC(t){const r=Kn[t];switch(t){case 0:return"'в прошлое "+r+" в' p";case 1:case 2:case 4:return"'в прошлый "+r+" в' p";case 3:case 5:case 6:return"'в прошлую "+r+" в' p"}}function Uo(t){const r=Kn[t];return t===2?"'во "+r+" в' p":"'в "+r+" в' p"}function JC(t){const r=Kn[t];switch(t){case 0:return"'в следующее "+r+" в' p";case 1:case 2:case 4:return"'в следующий "+r+" в' p";case 3:case 5:case 6:return"'в следующую "+r+" в' p"}}const QC={lastWeek:(t,r,s)=>{const a=t.getDay();return Qa(t,r,s)?Uo(a):XC(a)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(t,r,s)=>{const a=t.getDay();return Qa(t,r,s)?Uo(a):JC(a)},other:"P"},ZC=(t,r,s,a)=>{const n=QC[t];return typeof n=="function"?n(r,s,a):n},e3={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},t3={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},r3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},s3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},a3={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},n3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},i3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},o3=(t,r)=>{const s=Number(t),a=r==null?void 0:r.unit;let n;return a==="date"?n="-е":a==="week"||a==="minute"||a==="second"?n="-я":n="-й",s+n},l3={ordinalNumber:o3,era:jt({values:e3,defaultWidth:"wide"}),quarter:jt({values:t3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jt({values:r3,defaultWidth:"wide",formattingValues:s3,defaultFormattingWidth:"wide"}),day:jt({values:a3,defaultWidth:"wide"}),dayPeriod:jt({values:n3,defaultWidth:"any",formattingValues:i3,defaultFormattingWidth:"wide"})},c3=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,d3=/\d+/i,u3={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},m3={any:[/^д/i,/^н/i]},h3={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},f3={any:[/1/i,/2/i,/3/i,/4/i]},x3={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},g3={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},p3={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},v3={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},b3={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},y3={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},j3={ordinalNumber:Hc({matchPattern:c3,parsePattern:d3,valueCallback:t=>parseInt(t,10)}),era:wt({matchPatterns:u3,defaultMatchWidth:"wide",parsePatterns:m3,defaultParseWidth:"any"}),quarter:wt({matchPatterns:h3,defaultMatchWidth:"wide",parsePatterns:f3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:wt({matchPatterns:x3,defaultMatchWidth:"wide",parsePatterns:g3,defaultParseWidth:"any"}),day:wt({matchPatterns:p3,defaultMatchWidth:"wide",parsePatterns:v3,defaultParseWidth:"any"}),dayPeriod:wt({matchPatterns:b3,defaultMatchWidth:"wide",parsePatterns:y3,defaultParseWidth:"any"})},mt={code:"ru",formatDistance:GC,formatLong:KC,formatRelative:ZC,localize:l3,match:j3,options:{weekStartsOn:1,firstWeekContainsDate:1}},Xn=({isOpen:t,onClose:r,onConfirm:s,slot:a,teacher:n,student:i})=>{var y;const[o,l]=$.useState(""),[c,d]=$.useState(!1),m=async()=>{d(!0);try{await s(o),r()}catch{}finally{d(!1)}},h=u=>{switch(u){case"online":return e.jsx(Ue,{className:"h-4 w-4"});case"offline":return e.jsx(Nt,{className:"h-4 w-4"});case"mini-group":return e.jsx(Vs,{className:"h-4 w-4"});default:return e.jsx(Ue,{className:"h-4 w-4"})}},x=u=>{switch(u){case"online":return"Онлайн";case"offline":return"Очно";case"mini-group":return"Мини-группа";default:return u}},b=u=>{switch(u){case"regular":return"Обычный урок";case"consultation":return"Консультация";case"exam_prep":return"Подготовка к экзамену";case"homework_help":return"Помощь с домашним заданием";default:return u}};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Подтверждение бронирования"}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Преподаватель"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[n!=null&&n.avatar?e.jsx("img",{src:n.avatar,alt:n.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:(n==null?void 0:n.name)||"Преподаватель"}),e.jsx("p",{className:"text-sm text-gray-600",children:a==null?void 0:a.subject}),((y=n==null?void 0:n.profile)==null?void 0:y.rating)&&e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:"text-yellow-500",children:"★"}),e.jsx("span",{className:"text-sm text-gray-600 ml-1",children:n.profile.rating})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Детали урока"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(qe,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Дата: ",new Date(a==null?void 0:a.date).toLocaleDateString("ru-RU")]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(Wt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Время: ",a==null?void 0:a.startTime," - ",a==null?void 0:a.endTime]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(Ue,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Предмет: ",a==null?void 0:a.subject]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[h(a==null?void 0:a.format),e.jsxs("span",{className:"text-sm",children:["Формат: ",x(a==null?void 0:a.format)]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(Dd,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Тип: ",b(a==null?void 0:a.lessonType)]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx(Xo,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Стоимость: ",a==null?void 0:a.price," ₽"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Студент"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[i!=null&&i.avatar?e.jsx("img",{src:i.avatar,alt:i.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:i==null?void 0:i.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Студент"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Примечание к уроку"}),e.jsx("textarea",{value:o,onChange:u=>l(u.target.value),placeholder:"Опишите ваши цели, задачи или особые пожелания к уроку...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4}),e.jsx("p",{className:"text-sm text-gray-500",children:"Это поможет преподавателю лучше подготовиться к уроку"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Отмена"}),e.jsx("button",{onClick:m,disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Бронирование..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Забронировать урок"})]})})]})]})}):null},qc=({teacher:t,onClose:r,onBookLesson:s,onMessage:a})=>{var De;const{user:n}=Ye(),{timeSlots:i,bookLesson:o,posts:l,createPost:c,addReaction:d,addComment:m,sharePost:h,bookmarkPost:x,editPost:b,deletePost:y}=nt(),[u,j]=$.useState(!1),[v,f]=$.useState(!1),[C,g]=$.useState(!1),[D,R]=$.useState(!1),[I,B]=$.useState(!1),[_,q]=$.useState(null),[P,V]=$.useState("about"),[z,te]=$.useState(null),[ae,re]=$.useState({}),S=i.filter(ee=>ee.teacherId===t.id),U=S.filter(ee=>!ee.isBooked),Y=S.filter(ee=>ee.isBooked),O=t.profile,de=l.filter(ee=>ee.userId===t.id),he=ee=>{switch(ee){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ee}},xe=ee=>{switch(ee){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},fe=ee=>{switch(ee){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ee}},ye=ee=>{q(ee),B(!0)},X=async ee=>{n&&_&&(o(_.id,n.id,n.name,ee),B(!1),q(null))},ge=(ee,we)=>new Date(`${ee}T${we}`).toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(en,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(!v),className:`p-2 rounded-full transition-colors ${v?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:e.jsx(qs,{className:`w-5 h-5 ${v?"fill-current":""}`})}),e.jsx("button",{onClick:()=>j(!u),className:`p-2 rounded-full transition-colors ${u?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:e.jsx(ft,{className:`w-5 h-5 ${u?"fill-current":""}`})}),e.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),e.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"text-white flex-1 mr-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(O==null?void 0:O.name)||t.name||"Репетитор"}),e.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[(O==null?void 0:O.experience)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(Lt,{className:"h-4 w-4 text-yellow-300"}),e.jsx("span",{className:"font-semibold text-xs",children:he(O.experience)})]}),(O==null?void 0:O.rating)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(St,{className:"h-4 w-4 text-yellow-300 fill-current"}),e.jsx("span",{className:"font-semibold text-xs",children:O.rating})]}),(O==null?void 0:O.city)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-xs",children:O.city})]})]})]}),e.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[e.jsx("div",{className:"text-2xl font-bold mb-1",children:(O==null?void 0:O.lessonsCount)||0}),e.jsx("div",{className:"text-sm opacity-80",children:"уроков"})]})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[e.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[e.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),O!=null&&O.avatar&&O.avatar.trim()!==""&&O.avatar!=="undefined"&&O.avatar!=="null"?e.jsx("img",{src:O.avatar,alt:(O==null?void 0:O.name)||t.name||"Репетитор",className:"w-36 h-36 object-cover rounded-full",onError:ee=>{const we=ee.target;we.style.display="none";const Ne=we.nextElementSibling;Ne&&Ne.classList.remove("hidden")},onLoad:ee=>{const Ne=ee.target.nextElementSibling;Ne&&Ne.classList.add("hidden")}}):null,e.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${O!=null&&O.avatar&&O.avatar.trim()!==""&&O.avatar!=="undefined"&&O.avatar!=="null"?"hidden":""}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"h-16 w-16 text-white mb-2"}),e.jsx("div",{className:"text-white text-sm font-semibold",children:((O==null?void 0:O.name)||t.name||"Репетитор").charAt(0).toUpperCase()})]})})]}),e.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>j(!u),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${u?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(ft,{className:`w-5 h-5 ${u?"fill-current":""}`})}),e.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[e.jsxs("button",{onClick:()=>s(t.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(Ue,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),a&&e.jsxs("button",{onClick:()=>a(t.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(Re,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),e.jsxs("button",{onClick:()=>R(!D),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[e.jsx(qe,{className:"h-6 w-6"}),e.jsxs("span",{className:"text-lg",children:["Слоты (",U.length,")"]})]}),e.jsxs("button",{onClick:()=>g(!C),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[e.jsx(hr,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]})]})]}),C&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.phone&&e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx(fr,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-gray-700 font-medium",children:t.phone})]}),t.email&&e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx(rn,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-gray-700 font-medium",children:t.email})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:(O==null?void 0:O.lessonsCount)||0}),e.jsx("div",{className:"text-blue-100 text-xs",children:"Проведено уроков"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:((De=O==null?void 0:O.students)==null?void 0:De.length)||0}),e.jsx("div",{className:"text-blue-100 text-xs",children:"Учеников"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:(O==null?void 0:O.rating)||0}),e.jsx("div",{className:"text-blue-100 text-xs",children:"Рейтинг"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:U.length}),e.jsx("div",{className:"text-blue-100 text-xs",children:"Свободных слотов"})]})]}),de.length>0&&e.jsxs("div",{className:"mb-8 mt-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Jt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Записи ",(O==null?void 0:O.name)||t.name,e.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 py-0.5 px-2 rounded-full text-sm",children:de.length})]})}),e.jsxs("div",{className:"space-y-4",children:[de.slice(0,3).map(ee=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:((O==null?void 0:O.name)||t.name).charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.name)||t.name}),e.jsx("span",{className:"text-gray-500 text-sm",children:new Date(ee.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),e.jsx("div",{className:"text-gray-700 mb-3 whitespace-pre-line",children:ee.text.length>200?`${ee.text.substring(0,200)}...`:ee.text}),ee.tags&&ee.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[ee.tags.slice(0,3).map((we,Ne)=>e.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs font-medium",children:["#",we]},Ne)),ee.tags.length>3&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["+",ee.tags.length-3," еще"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{children:ee.likes||ee.reactions.length})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:ee.comments.length})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(hr,{className:"w-4 h-4"}),e.jsx("span",{children:ee.views||0})]})]})]})]})},ee.id)),de.length>3&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:["Показать все записи (",de.length,")"]})})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"about",label:"О преподавателе",count:null},{id:"slots",label:"Расписание",count:U.length},{id:"reviews",label:"Отзывы",count:0}].map(ee=>e.jsxs("button",{onClick:()=>V(ee.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${P===ee.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[ee.label,ee.count!==null&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:ee.count})]},ee.id))})}),e.jsxs("div",{className:"min-h-[400px]",children:[P==="about"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Основная информация"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Имя"}),e.jsx("div",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.name)||t.name||"Репетитор"})]})]}),(O==null?void 0:O.experience)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Опыт"}),e.jsx("div",{className:"font-semibold text-gray-900",children:he(O.experience)})]})]}),(O==null?void 0:O.experienceYears)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(sl,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Лет преподавания"}),e.jsx("div",{className:"font-semibold text-gray-900",children:O.experienceYears})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ks,{className:"w-5 h-5 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Тип преподавателя"}),e.jsx("div",{className:"font-semibold text-gray-900",children:xe((O==null?void 0:O.teacherType)||"private")})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[(O==null?void 0:O.rating)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(St,{className:"w-5 h-5 text-yellow-500 fill-current"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Рейтинг"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[O.rating,"/5"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Проведено уроков"}),e.jsx("div",{className:"font-semibold text-gray-900",children:(O==null?void 0:O.lessonsCount)||0})]})]}),(O==null?void 0:O.hourlyRate)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 text-green-600 font-bold text-lg",children:"₽"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Стоимость урока"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[O.hourlyRate," ₽/час"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(O==null?void 0:O.subjects)&&O.subjects.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Предметы"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.subjects.map((ee,we)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-green-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-green-200/50 shadow-sm",children:ee},we))})]}),(O==null?void 0:O.grades)&&O.grades.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Классы"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.grades.map((ee,we)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-purple-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-purple-200/50 shadow-sm",children:ee},we))})]})]}),(O==null?void 0:O.education)&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-orange-500 to-red-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Образование"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.education.university&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"🎓"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Университет"}),e.jsx("div",{className:"font-semibold text-gray-900",children:O.education.university})]})]}),O.education.degree&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📜"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Степень"}),e.jsx("div",{className:"font-semibold text-gray-900",children:O.education.degree})]})]}),O.education.graduationYear&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📅"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Год выпуска"}),e.jsx("div",{className:"font-semibold text-gray-900",children:O.education.graduationYear})]})]})]})]}),(O==null?void 0:O.bio)&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"О преподавателе"]}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-indigo-200/50",children:e.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line",children:O.bio})})]}),(O==null?void 0:O.formats)&&O.formats.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-teal-900 mb-4 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-teal-500 to-cyan-600 rounded flex items-center justify-center mr-3",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Форматы обучения"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:O.formats.map((ee,we)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-teal-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-teal-200/50 shadow-sm",children:fe(ee)},we))})]})]}),P==="slots"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Доступные слоты"}),U.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(ee=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ee.subject}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{children:ge(ee.date,ee.startTime)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{children:fe(ee.format)})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-3",children:[ee.price," ₽"]})]})}),e.jsxs("button",{onClick:()=>ye(ee),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Забронировать"})]})]},ee.id))}):e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8 text-center",children:[e.jsx(qe,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"Нет доступных слотов"}),e.jsx("p",{className:"text-gray-500",children:"Попробуйте позже или свяжитесь с преподавателем"})]})]}),Y.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Забронированные уроки"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Y.map(ee=>e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ee.subject}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"h-4 w-4"}),e.jsx("span",{children:ge(ee.date,ee.startTime)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{children:fe(ee.format)})]})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-3",children:[ee.price," ₽"]})]})}),e.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-xl text-sm font-medium text-center",children:"Забронировано"})]},ee.id))})]})]}),P==="reviews"&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(St,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),e.jsx("p",{className:"text-gray-500",children:"Будьте первым, кто оставит отзыв о преподавателе"})]})]})]})]}),I&&_&&e.jsx(Xn,{isOpen:I,slot:_,onClose:()=>B(!1),onConfirm:X,teacher:t,student:n})]})},Bo="https://tutoring-platform-1756666331-zjfl.onrender.com",w3=({teacher:t,onClose:r,onBookLesson:s,onMessage:a})=>{var z,te,ae,re;const{user:n}=Ye(),{timeSlots:i,posts:o,lessons:l,refreshUsers:c}=nt(),[d,m]=$.useState(!1),[h,x]=$.useState(!1),[b,y]=$.useState("about"),[u,j]=$.useState(!1),v=async()=>{var S,U;j(!0);try{const Y=await fetch(`${Bo}/api/users/${t.id}`);if(Y.ok){const O=await Y.json();console.log("Fresh teacher data from refresh button:",O);const he=JSON.parse(localStorage.getItem("allUsers")||"[]").map(fe=>fe.id===O.id?O:fe);localStorage.setItem("allUsers",JSON.stringify(he)),c();const xe={...t,name:O.name||t.name,email:O.email||t.email,avatar:((S=O.profile)==null?void 0:S.avatar)||O.avatar||t.avatar,profile:{...t.profile,...O.profile,avatar:((U=O.profile)==null?void 0:U.avatar)||O.avatar||t.avatar,name:O.name||t.name,email:O.email||t.email}};console.log("Updated teacher data in modal:",xe)}else console.warn("Failed to refresh teacher data:",Y.status)}catch(Y){console.error("Error refreshing teacher data:",Y)}finally{j(!1)}},f=t.profile;console.log("Teacher in modal:",t),console.log("Profile in modal:",f),$.useEffect(()=>{(async()=>{var U,Y;try{const O=await fetch(`${Bo}/api/users/${t.id}`);if(O.ok){const de=await O.json();console.log("Fresh teacher data in modal:",de);const xe=JSON.parse(localStorage.getItem("allUsers")||"[]").map(ye=>ye.id===de.id?de:ye);localStorage.setItem("allUsers",JSON.stringify(xe)),c();const fe={...t,name:de.name||t.name,email:de.email||t.email,avatar:((U=de.profile)==null?void 0:U.avatar)||de.avatar||t.avatar,profile:{...t.profile,...de.profile,avatar:((Y=de.profile)==null?void 0:Y.avatar)||de.avatar||t.avatar,name:de.name||t.name,email:de.email||t.email}};console.log("Updated teacher data in modal useEffect:",fe)}else console.warn("Failed to refresh teacher data in modal:",O.status)}catch(O){console.error("Error refreshing teacher data in modal:",O)}})()},[t.id]);const C=i.filter(S=>S.teacherId===t.id),g=C.filter(S=>!S.isBooked),D=o.filter(S=>S.userId===t.id),I=l.filter(S=>S.teacherId===t.id).filter(S=>S.status==="completed");console.log("Teacher ID:",t.id),console.log("All timeSlots:",i),console.log("Teacher slots:",C),console.log("Available slots:",g);const B=S=>{switch(S){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return S}},_=S=>{switch(S){case"private":return"Частный преподаватель";case"school":return"Преподаватель школы";case"both":return"Частный + Школа";default:return"Частный преподаватель"}},q=S=>{switch(S){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return S}},P=S=>{const U=new Date(S),O=Math.floor((new Date().getTime()-U.getTime())/(1e3*60*60));return O<1?"только что":O<24?`${O}ч назад`:O<48?"вчера":U.toLocaleDateString("ru-RU")},V=S=>new Date(S).toLocaleDateString("ru-RU",{weekday:"short",month:"short",day:"numeric"});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(!h),className:`p-2 rounded-full transition-colors ${h?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:e.jsx(qs,{className:`w-5 h-5 ${h?"fill-current":""}`})}),e.jsx("button",{onClick:()=>m(!d),className:`p-2 rounded-full transition-colors ${d?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:e.jsx(ft,{className:`w-5 h-5 ${d?"fill-current":""}`})}),e.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full shadow-sm"}),(()=>{const S=(f==null?void 0:f.avatar)||t.avatar;return S&&S.trim()!==""&&S!=="undefined"&&S!=="null"?e.jsx("img",{src:S,alt:t.name,className:"w-24 h-24 object-cover rounded-full",onError:Y=>{const O=Y.target;O.style.display="none";const de=O.nextElementSibling;de&&de.classList.remove("hidden")},onLoad:Y=>{const de=Y.target.nextElementSibling;de&&de.classList.add("hidden")}}):null})(),e.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const S=(f==null?void 0:f.avatar)||t.avatar;return S&&S.trim()!==""&&S!=="undefined"&&S!=="null"?"hidden":""})()}`,children:e.jsx(be,{className:"h-12 w-12 text-white"})})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-gray-500",children:["@",t.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:v,disabled:u,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Обновить данные",children:e.jsx(Cs,{className:`w-5 h-5 ${u?"animate-spin":""}`})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(f==null?void 0:f.rating)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(St,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{children:f.rating})]}),(f==null?void 0:f.lessonsCount)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsxs("span",{children:[f.lessonsCount," уроков"]})]}),(f==null?void 0:f.experienceYears)&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Lt,{className:"w-4 h-4"}),e.jsxs("span",{children:[f.experienceYears," лет опыта"]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"Статистика"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:I.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Проведено уроков"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 mb-1",children:g.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Свободных слотов"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 mb-1",children:D.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Записей"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:(f==null?void 0:f.reviewsCount)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:"Отзывов"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>s(t.id),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"Записаться на урок"})]}),e.jsxs("button",{onClick:()=>a(t.id),className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"Написать сообщение"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"О преподавателе"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(Ue,{className:"w-3 h-3 mr-1"}),"Предметы:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((z=f==null?void 0:f.subjects)==null?void 0:z.length)>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:f.subjects.map((S,U)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:S},U))}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(ks,{className:"w-3 h-3 mr-1"}),"Классы:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((te=f==null?void 0:f.grades)==null?void 0:te.length)>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:f.grades.map((S,U)=>e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:S},U))}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(tl,{className:"w-3 h-3 mr-1"}),"Цели обучения:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((ae=f==null?void 0:f.goals)==null?void 0:ae.length)>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:f.goals.map((S,U)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full text-xs font-medium",children:S},U))}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Опыт:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.experience?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full text-xs font-medium",children:B(f.experience)}),f.experienceYears&&e.jsxs("span",{className:"text-gray-600 text-xs",children:["(",f.experienceYears," лет)"]})]}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(ks,{className:"w-3 h-3 mr-1"}),"Тип преподавателя:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:e.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full text-xs font-medium",children:_((f==null?void 0:f.teacherType)||"private")})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(Nt,{className:"w-3 h-3 mr-1"}),"Город:"]}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.city?e.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:f.city}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[e.jsx(Nd,{className:"w-3 h-3 mr-1"}),"Форматы обучения:"]}),e.jsx("div",{className:"text-base text-gray-900 mt-2",children:((re=f==null?void 0:f.formats)==null?void 0:re.length)>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:f.formats.map((S,U)=>e.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:q(S)},U))}):e.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]})]})]}),(f==null?void 0:f.education)&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),"Образование"]}),e.jsxs("div",{className:"space-y-2",children:[f.education.university&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Университет:"}),e.jsx("div",{className:"text-sm text-gray-900",children:f.education.university})]}),f.education.degree&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Специальность:"}),e.jsx("div",{className:"text-sm text-gray-900",children:f.education.degree})]}),f.education.graduationYear&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Год выпуска:"}),e.jsx("div",{className:"text-sm text-gray-900",children:f.education.graduationYear})]}),f.education.courses&&f.education.courses.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Курсы:"}),e.jsx("div",{className:"space-y-1 mt-1",children:f.education.courses.map((S,U)=>e.jsxs("div",{className:"text-xs text-gray-700",children:["• ",S.name," (",S.institution,", ",S.year,")"]},U))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(Xo,{className:"w-4 h-4 mr-2"}),"Стоимость и услуги"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Базовая стоимость:"}),e.jsx("div",{className:"text-xl font-bold text-blue-600 mt-1",children:f!=null&&f.hourlyRate?`${f.hourlyRate} ₽/час`:"Не указана"})]}),(f==null?void 0:f.durations)&&f.durations.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Длительности занятий:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:f.durations.map((S,U)=>e.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:[S," мин"]},U))})]}),(f==null?void 0:f.lessonTypes)&&f.lessonTypes.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Типы уроков:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:f.lessonTypes.map((S,U)=>e.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:S},U))})]})]}),e.jsxs("div",{className:"space-y-3",children:[(f==null?void 0:f.rating)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Рейтинг:"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(S=>e.jsx(St,{className:`w-4 h-4 ${S<=(f.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},S))}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[f.rating,"/5"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Автоподбор:"}),e.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.overbookingEnabled?e.jsx("span",{className:"text-green-600 font-medium",children:"✓ Доступен"}):e.jsx("span",{className:"text-gray-500",children:"Недоступен"})})]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-700",children:"💡 Стоимость может варьироваться в зависимости от формата, длительности занятия и сложности материала"})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Доступные слоты (",g.length,")"]}),g.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Сводка по ценам:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Минимальная цена:"}),e.jsxs("div",{className:"font-semibold text-green-600",children:[Math.min(...g.map(S=>S.price))," ₽"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Максимальная цена:"}),e.jsxs("div",{className:"font-semibold text-green-600",children:[Math.max(...g.map(S=>S.price))," ₽"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Средняя цена:"}),e.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(g.reduce((S,U)=>S+U.price,0)/g.length)," ₽"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Всего слотов:"}),e.jsx("div",{className:"font-semibold text-blue-600",children:g.length})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.slice(0,6).map(S=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:S.subject})]}),e.jsxs("span",{className:"text-base font-bold text-green-600",children:[S.price," ₽"]})]}),e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsx(Wt,{className:"w-3 h-3"}),e.jsxs("span",{children:[V(S.date)," • ",S.startTime,"-",S.endTime]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsx(Nt,{className:"w-3 h-3"}),e.jsxs("span",{children:[q(S.format)," • ",S.duration," мин"]})]}),S.experience&&e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[e.jsx(Lt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Опыт: ",B(S.experience)]})]})]}),e.jsxs("button",{onClick:()=>s(t.id),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 text-sm font-semibold",children:["Записаться за ",S.price," ₽"]})]},S.id))}),g.length>6&&e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["И еще ",g.length-6," доступных слотов"]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"Нет доступных слотов"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Следите за обновлениями расписания"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Записи преподавателя (",D.length,")"]})}),D.length>0?e.jsxs("div",{className:"space-y-3",children:[D.slice(0,3).map(S=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center flex-shrink-0",children:e.jsx(be,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:S.userName}),e.jsx("span",{className:"text-xs text-gray-500",children:P(S.date)})]}),e.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed text-sm",children:S.text}),S.tags&&S.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:S.tags.map((U,Y)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:U},Y))}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[e.jsx(rl,{className:"w-3 h-3"}),e.jsx("span",{children:S.reactions.length})]}),e.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{children:S.comments.length})]}),e.jsx("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:e.jsx(Ft,{className:"w-3 h-3"})})]})]})]})},S.id)),D.length>3&&e.jsx("div",{className:"text-center pt-3",children:e.jsxs("p",{className:"text-gray-600 text-xs",children:["И еще ",D.length-3," записей"]})})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Jt,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:"У преподавателя пока нет записей"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Записи появятся здесь, когда преподаватель начнет публиковать контент"})]})]})]})]})})},N3={ru:mt},S3=qn({format:We,startOfWeek:Dt,getDay:Vn,locales:N3}),Yc=({onClose:t})=>{const{timeSlots:r,bookLesson:s}=nt(),{user:a}=Ye(),[n,i]=$.useState(null),[o,l]=$.useState(!1),[c,d]=$.useState(!1),[m,h]=$.useState(null),b=r.filter(g=>!g.isBooked).map(g=>({id:g.id,title:`${g.teacherName} - ${g.subject}`,start:new Date(`${g.date}T${g.startTime}`),end:new Date(`${g.date}T${g.endTime}`),slot:g,teacherName:g.teacherName,subject:g.subject,price:g.price,format:g.format,experience:g.experience,rating:g.rating,city:g.city,teacherAvatar:g.teacherAvatar})),y=$.useCallback(g=>{let D={backgroundColor:"#3B82F6",borderRadius:"6px",opacity:.95,color:"white",border:"0px",display:"block",padding:"3px 6px",fontSize:"11px",fontWeight:"500",margin:"1px 0",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s ease"};return g.format==="offline"?D.backgroundColor="#10B981":g.format==="mini-group"&&(D.backgroundColor="#8B5CF6"),{style:D}},[]),u=$.useCallback(g=>{i(g),l(!0)},[]),j=g=>{if(!a){alert("Пожалуйста, войдите в систему для бронирования");return}h(g),d(!0),l(!1)},v=async g=>{if(a&&m)try{await s(m.id,a.id,a.name,g),d(!1),h(null),window.location.reload()}catch{alert("Произошла ошибка при бронировании. Попробуйте еще раз.")}},f=g=>{switch(g){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return g}},C=g=>{switch(g){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return g}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden relative",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Календарь свободных слотов"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Выберите удобное время для занятия с преподавателем"})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-600"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx(Gn,{localizer:S3,events:b,startAccessor:"start",endAccessor:"end",style:{height:600},eventPropGetter:y,onSelectEvent:u,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет свободных слотов в выбранном диапазоне",showMore:g=>`+${g} еще`}})})}),o&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",onClick:g=>{g.target===g.currentTarget&&l(!1)},children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Детали слота"}),e.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Qe,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden",children:n.teacherAvatar?e.jsx("img",{src:n.teacherAvatar,alt:n.teacherName,className:"w-12 h-12 object-cover rounded-full"}):e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.teacherName}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(St,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{children:n.rating})]}),n.experience&&e.jsx("span",{className:"text-blue-600",children:f(n.experience)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:n.subject})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wt,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{className:"text-gray-700",children:[We(n.start,"dd MMMM yyyy, HH:mm",{locale:mt})," - ",We(n.end,"HH:mm",{locale:mt})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:C(n.format)})]}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[n.price," ₽"]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{onClick:()=>j(n.slot),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Забронировать"})]}),e.jsx("button",{onClick:()=>l(!1),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})]})}),c&&m&&e.jsx(Xn,{slot:m,onClose:()=>d(!1),onConfirm:v})]})})},k3=({title:t,description:r,actionPrimary:s,actionSecondary:a,icon:n})=>e.jsx("div",{className:"col-span-full text-center py-14 card-gradient",children:e.jsxs("div",{className:"flex flex-col items-center",children:[n&&e.jsx("div",{className:"mb-3 text-blue-500",children:n}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),r&&e.jsx("p",{className:"text-gray-500 max-w-xl mx-auto mb-5",children:r}),e.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[s&&e.jsx("button",{type:"button",onClick:s.onClick,className:`btn-primary px-5 py-2 rounded-lg ${s.variant==="secondary"?"btn-secondary":""}`,"aria-label":s.label,children:s.label}),a&&e.jsx("button",{type:"button",onClick:a.onClick,className:`btn-secondary px-5 py-2 rounded-lg ${a.variant==="primary"?"btn-primary":""}`,"aria-label":a.label,children:a.label})]})]})}),Ma=({setActiveTab:t})=>{var Q;const{bookLesson:r,timeSlots:s,isConnected:a,allUsers:n,refreshUsers:i,refreshAllData:o,forceSyncData:l,sendMessageToUser:c,teacherProfiles:d}=nt(),{user:m}=Ye(),[h,x]=$.useState({}),[b,y]=$.useState(!1),[u,j]=$.useState(!1),[v,f]=$.useState(!1),[C,g]=$.useState({grade:"",subject:"",goals:[],experience:"",duration:60,format:"online",city:"",date:"",startTime:"",comment:""}),[D,R]=$.useState(!1),[I,B]=$.useState(null),[_,q]=$.useState(!1),[P,V]=$.useState(!1),[z,te]=$.useState(null),[ae,re]=$.useState(()=>{const N=new Date,F=N.getDay(),J=N.getDate()-F+(F===0?-6:1);return new Date(N.setDate(J))}),[S,U]=$.useState(null),[Y,O]=$.useState(null),[de,he]=$.useState(""),xe=["Математика","Русский язык","Английский язык"],fe=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],ye=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],X=["beginner","experienced","professional"],ge=["online","offline","mini-group"],De=[45,60],we=qn({format:We,startOfWeek:Dt,getDay:Vn,locales:{ru:mt}}),[Ne,Ee]=$.useState([]),ze=async()=>{try{console.log("🔄 Загружаем всех преподавателей..."),await l();const N=await fetch(`${tt}/api/users`);if(N.ok){const J=N.headers.get("content-type");if(J&&J.includes("application/json")){const ce=await N.json();console.log("✅ Все пользователи загружены с сервера:",ce.length);const pe=ce.filter(le=>le.role==="teacher");console.log("✅ Преподаватели найдены:",pe.length,pe),Ee(pe),i(),o()}else console.warn("⚠️ Сервер вернул не-JSON ответ для пользователей"),Ee([])}else console.warn("⚠️ Не удалось загрузить пользователей с сервера:",N.status),Ee([]);const F=await fetch(`${tt}/api/teachers`);if(F.ok){const J=F.headers.get("content-type");if(J&&J.includes("application/json")){const ce=await F.json();console.log("✅ Преподаватели загружены через /api/teachers:",ce.length),Ee(pe=>{const Ce=[...pe,...ce].filter((ie,ve,Fe)=>ve===Fe.findIndex(ct=>ct.id===ie.id));return console.log("✅ Объединенные преподаватели:",Ce.length),Ce})}else console.warn("⚠️ Сервер вернул не-JSON ответ для преподавателей")}else console.warn("⚠️ Не удалось загрузить преподавателей через /api/teachers:",F.status)}catch(N){console.error("❌ Ошибка загрузки преподавателей с сервера:",N),Ee([])}};$.useEffect(()=>{console.log("🚀 Компонент StudentHome смонтирован, загружаем преподавателей..."),ze()},[l,i]),$.useEffect(()=>{console.log("📱 teacherProfiles изменились:",Object.keys(d).length),Object.keys(d).length>0&&console.log("✅ Найдены локальные профили преподавателей:",Object.keys(d))},[d]);const Ze=async()=>{j(!0);try{await l(),await ze(),console.log("Force sync completed successfully")}catch(N){console.error("Error during force sync:",N)}finally{j(!1)}},G=M.useRef(null);M.useEffect(()=>{G.current||(G.current=zo(dd),G.current.on("slotCreated",()=>{setTimeout(()=>{me()},100)}),G.current.on("userRegistered",()=>{setTimeout(()=>{o(),me()},100)}),G.current.on("profileUpdated",N=>{console.log("Profile updated via WebSocket:",N),setTimeout(()=>{o(),me()},100)}))},[]);const me=()=>s.filter(F=>{if(F.isBooked)return!1;const J=new Date(F.date),ce=new Date;return ce.setHours(0,0,0,0),!(J<ce)}),ue=()=>{j(!0);try{let N=s.filter(F=>{if(F.isBooked)return!1;const J=new Date(F.date),ce=new Date;return ce.setHours(0,0,0,0),!(J<ce)});if(h.grade&&h.grade!==""&&(N=N.filter(F=>F.grades&&F.grades.includes(h.grade))),h.subject&&h.subject!==""&&(N=N.filter(F=>F.subject===h.subject)),h.experience&&h.experience!==""&&(N=N.filter(F=>F.experience===h.experience)),h.format&&h.format!==""&&(N=N.filter(F=>F.format===h.format)),h.duration&&h.duration>0&&(N=N.filter(F=>F.duration===h.duration)),h.minRating&&h.minRating>0&&(N=N.filter(F=>(F.rating||0)>=h.minRating)),h.goals&&h.goals.length>0&&(N=N.filter(F=>F.goals&&h.goals.some(J=>F.goals.includes(J)))),S){const F=We(S,"yyyy-MM-dd");N=N.filter(J=>J.date===F)}Y&&(N=N.filter(F=>{const J=parseInt(F.startTime.split(":")[0]),ce=parseInt(Y.start.split(":")[0]),pe=parseInt(Y.end.split(":")[0]);return J>=ce&&J<pe})),y(!1)}catch(N){console.error("Error applying filters:",N)}finally{j(!1)}},_e=()=>{x({}),U(null),O(null),he(""),me(),y(!1)},T=()=>{j(!0),o(),setTimeout(()=>{Object.keys(h).length===0&&!S&&!Y?me():ue(),j(!1)},1e3)},H=async N=>{m&&I&&(r(I.id,m.id,m.name,N),setTimeout(()=>{Object.keys(h).length===0&&!S&&!Y?me():ue()},100))},W=()=>{if(f(!1),G.current){const N={studentId:m==null?void 0:m.id,studentName:m==null?void 0:m.name,...C};G.current.emit("overbookingRequest",N)}alert("Заявка на овербукинг отправлена! Мы подберем лучшего преподавателя за 5 часов до занятия.")},A=N=>{switch(N){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return N}},w=M.useMemo(()=>{console.log("🔄 Собираем всех преподавателей...");const N=Ne.map(ie=>{var ve,Fe,ct;return{id:ie.id,name:ie.name||((ve=ie.profile)==null?void 0:ve.name)||"Репетитор",avatar:ie.avatar||((Fe=ie.profile)==null?void 0:Fe.avatar)||"",rating:(ct=ie.profile)==null?void 0:ct.rating,profile:ie.profile}});console.log("📡 Преподаватели с сервера:",N.length);const F=(n==null?void 0:n.filter(ie=>ie.role==="teacher").map(ie=>{var ve,Fe,ct;return{id:ie.id,name:ie.name||((ve=ie.profile)==null?void 0:ve.name)||"Репетитор",avatar:ie.avatar||((Fe=ie.profile)==null?void 0:Fe.avatar)||"",rating:(ct=ie.profile)==null?void 0:ct.rating,profile:ie.profile}}))||[];console.log("👥 Преподаватели из контекста:",F.length);const J=Object.entries(d).map(([ie,ve])=>({id:ie,name:ve.name||"Репетитор",avatar:ve.avatar||"",rating:ve.rating,profile:ve}));console.log("📱 Преподаватели из локальных профилей:",J.length);const ce=s.filter(ie=>ie.teacherId&&ie.teacherName).map(ie=>({id:ie.teacherId,name:ie.teacherName,avatar:ie.teacherAvatar||"",rating:ie.rating,profile:{subjects:ie.subject?[ie.subject]:[],experience:ie.experience||"beginner",grades:ie.grades||[],goals:ie.goals||[],city:"",bio:"",rating:ie.rating||0,hourlyRate:ie.price||0}}));console.log("📅 Преподаватели из слотов:",ce.length);const pe=[...N,...F,...J,...ce];console.log("🔄 Всего источников:",pe.length);const le=new Map;pe.forEach(ie=>{const ve=le.get(ie.id);if(!ve)le.set(ie.id,ie);else{const Fe=ie.avatar&&ie.avatar.trim()!==""&&ie.avatar!=="undefined"&&ie.avatar!=="null",ct=ve.avatar&&ve.avatar.trim()!==""&&ve.avatar!=="undefined"&&ve.avatar!=="null",ps=ie.profile&&ie.profile.subjects&&ie.profile.subjects.length>0,lr=ve.profile&&ve.profile.subjects&&ve.profile.subjects.length>0;(Fe&&!ct||ps&&!lr)&&le.set(ie.id,ie)}});const Ce=Array.from(le.values());return console.log("✅ Итоговые преподаватели:",Ce.length),console.log("📊 Детали преподавателей:",Ce.map(ie=>{var ve;return{id:ie.id,name:ie.name,hasAvatar:!!(ie.avatar&&ie.avatar.trim()!==""&&ie.avatar!=="undefined"&&ie.avatar!=="null"),hasProfile:!!(ie.profile&&ie.profile.subjects&&ie.profile.subjects.length>0),subjects:((ve=ie.profile)==null?void 0:ve.subjects)||[]}})),Ce},[Ne,n,s,d]),p=M.useMemo(()=>{let N=w;if((Object.keys(h).length>0||S||Y)&&(console.log("Применяем фильтры:",h),console.log("Всего преподавателей до фильтрации:",w.length),N=w.filter(F=>{const J=F.profile;let ce=!0;return h.subject&&h.subject!==""&&(!(J!=null&&J.subjects)||!J.subjects.includes(h.subject))&&(console.log(`Преподаватель ${F.name} отфильтрован: не преподает ${h.subject}`),ce=!1),h.experience&&h.experience!==""&&ce&&(J==null?void 0:J.experience)!==h.experience&&(console.log(`Преподаватель ${F.name} отфильтрован: опыт не совпадает`),ce=!1),h.format&&h.format!==""&&ce&&(!(J!=null&&J.formats)||!J.formats.includes(h.format))&&(console.log(`Преподаватель ${F.name} отфильтрован: формат не совпадает`),ce=!1),h.city&&h.city!==""&&ce&&(!(J!=null&&J.city)||!J.city.toLowerCase().includes(h.city.toLowerCase()))&&(console.log(`Преподаватель ${F.name} отфильтрован: город не совпадает`),ce=!1),h.minRating&&h.minRating>0&&ce&&((J==null?void 0:J.rating)||0)<h.minRating&&(console.log(`Преподаватель ${F.name} отфильтрован: рейтинг ниже ${h.minRating}`),ce=!1),h.duration&&h.duration>0&&ce&&(!(J!=null&&J.durations)||!J.durations.includes(h.duration))&&(console.log(`Преподаватель ${F.name} отфильтрован: длительность не совпадает`),ce=!1),h.grade&&h.grade!==""&&ce&&(!(J!=null&&J.grades)||!J.grades.includes(h.grade))&&(console.log(`Преподаватель ${F.name} отфильтрован: класс не совпадает`),ce=!1),h.goals&&h.goals.length>0&&ce&&(!(J!=null&&J.goals)||!h.goals.some(pe=>J.goals.includes(pe)))&&(console.log(`Преподаватель ${F.name} отфильтрован: цели не совпадают`),ce=!1),ce&&console.log(`Преподаватель ${F.name} прошел все фильтры`),ce}),console.log("Преподавателей после фильтрации:",N.length)),de.trim()){const F=de.toLowerCase().trim();N=N.filter(J=>{const ce=J.profile;return!!(J.name.toLowerCase().includes(F)||ce!=null&&ce.subjects&&ce.subjects.some(pe=>pe.toLowerCase().includes(F))||ce!=null&&ce.city&&ce.city.toLowerCase().includes(F))})}return N},[w,h,S,Y,de]);function k(N){try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]").find(J=>J.id===N&&J.role==="teacher")||null}catch{return null}}const[E,K]=$.useState(null),[ne,Se]=$.useState(!1),[Me,it]=$.useState(!1);M.useEffect(()=>{Object.keys(h).length>0||S||Y?ue():me()},[h,S,Y,s]),M.useEffect(()=>{me()},[n]),M.useEffect(()=>{const N=J=>{J.key==="tutoring_users"&&(i(),Ee([]),fetch(`${tt}/api/teachers`).then(ce=>ce.json()).then(ce=>Ee(Array.isArray(ce)?ce:[])).catch(()=>Ee([])),me())},F=J=>{var ce;((ce=J.detail)==null?void 0:ce.key)==="tutoring_users"&&(i(),Ee([]),fetch(`${tt}/api/teachers`).then(pe=>pe.json()).then(pe=>Ee(Array.isArray(pe)?pe:[])).catch(()=>Ee([])),me())};return window.addEventListener("storage",N),window.addEventListener("customStorage",F),()=>{window.removeEventListener("storage",N),window.removeEventListener("customStorage",F)}},[]),M.useEffect(()=>{me()},[s]);const gs=async N=>{var J,ce,pe,le,Ce,ie,ve,Fe,ct,ps;console.log("Teacher clicked:",N);try{const lr=await fetch(`${tt}/api/users/${N.id}`);if(lr.ok){const et=await lr.json();if(console.log("Fresh teacher data from server:",et),et){const Kc=JSON.parse(localStorage.getItem("allUsers")||"[]").map(Zn=>Zn.id===et.id?et:Zn);localStorage.setItem("allUsers",JSON.stringify(Kc));const Qn={id:et.id,name:et.name,email:et.email,avatar:((J=et.profile)==null?void 0:J.avatar)||et.avatar,role:"teacher",profile:{...et.profile,avatar:((ce=et.profile)==null?void 0:ce.avatar)||et.avatar,name:et.name,email:et.email}};console.log("Updated teacher data for modal:",Qn),K(Qn),Se(!0);return}}}catch(lr){console.error("Error fetching fresh teacher data:",lr)}let F=k(N.id);F?F={...F,name:N.name||F.name,email:((ve=N.profile)==null?void 0:ve.email)||N.email||F.email,avatar:((Fe=N.profile)==null?void 0:Fe.avatar)||N.avatar||F.avatar,profile:{...F.profile,...N.profile,avatar:((ct=N.profile)==null?void 0:ct.avatar)||N.avatar||F.avatar,name:N.name||F.name,email:((ps=N.profile)==null?void 0:ps.email)||N.email||F.email}}:F={id:N.id,name:N.name,email:((pe=N.profile)==null?void 0:pe.email)||N.email||"",avatar:((le=N.profile)==null?void 0:le.avatar)||N.avatar,role:"teacher",profile:{...N.profile,avatar:((Ce=N.profile)==null?void 0:Ce.avatar)||N.avatar,name:N.name,email:((ie=N.profile)==null?void 0:ie.email)||N.email}},console.log("Fallback teacher data for modal:",F),K(F),Se(!0)},or=N=>{const F=n.find(J=>J.id===N);F&&(te(F),V(!0)),it(!1)},L=N=>{console.log("🔍 StudentHome handleMessage DEBUG:"),console.log("- Student user:",{id:m==null?void 0:m.id,name:m==null?void 0:m.name,role:m==null?void 0:m.role}),console.log("- Target teacher ID:",N);const F=n.find(J=>J.id===N);if(console.log("- Found teacher:",F),F&&m){console.log("- Sending message to teacher:",{studentId:m.id,teacherId:N,studentName:m.name,teacherName:F.name});const J=c(m.id,m.name,N,F.name,`Привет! Меня зовут ${m.name}. Можете ли вы помочь мне с обучением?`);console.log("- Message sent, chat ID:",J),t("chats")}else console.log("❌ Teacher not found or user not available");console.log("🔍 END StudentHome DEBUG"),it(!1)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3",children:"Найди своего идеального репетитора"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Изучай профили преподавателей, связывайся с ними и записывайся на уроки"})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:a?e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-full px-4 py-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx(ni,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Подключено в реальном времени"})]}):e.jsxs("div",{className:"flex items-center space-x-2 bg-amber-50 border border-amber-200 rounded-full px-4 py-2",children:[e.jsx(Wd,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Офлайн режим (кэшированные данные)"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"ml-2 text-xs bg-amber-100 text-amber-700 px-3 py-1 rounded-full hover:bg-amber-200 transition-colors",children:"Переподключиться"})]})})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:()=>f(!0),className:"group bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Овербукинг"}),e.jsx("div",{className:"text-xs opacity-90",children:"Автоподбор"})]})]}),e.jsxs("button",{onClick:()=>q(!0),className:"group bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-purple-600 hover:via-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(qe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Календарь"}),e.jsx("div",{className:"text-xs opacity-90",children:"Слоты"})]})]}),e.jsxs("button",{onClick:T,disabled:u,className:"group bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(Cs,{className:`h-5 w-5 ${u?"animate-spin":""}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Обновить"}),e.jsx("div",{className:"text-xs opacity-90",children:"Данные"})]})]}),e.jsxs("button",{onClick:Ze,disabled:u,className:"group bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(ni,{className:`h-5 w-5 ${u?"animate-pulse":""}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Синхронизация"}),e.jsx("div",{className:"text-xs opacity-90",children:"Сервер"})]})]}),e.jsxs("button",{onClick:ze,disabled:u,className:"group bg-gradient-to-r from-purple-500 to-pink-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(Vs,{className:`h-5 w-5 ${u?"animate-pulse":""}`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Загрузить"}),e.jsx("div",{className:"text-xs opacity-90",children:"Репетиторов"})]})]}),e.jsxs("button",{onClick:()=>{console.log("🔄 Принудительное обновление компонента..."),window.location.reload()},className:"group bg-gradient-to-r from-orange-500 to-red-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-orange-600 hover:to-red-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:e.jsx(Cs,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Обновить"}),e.jsx("div",{className:"text-xs opacity-90",children:"Страницу"})]})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",value:de,onChange:N=>he(N.target.value),placeholder:"🔍 Поиск по предмету, преподавателю или городу...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base placeholder-gray-400"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>y(!b),className:`flex items-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm ${b?"bg-blue-600 text-white shadow-md":"bg-white border-2 border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:[e.jsx(tn,{className:"h-4 w-4"}),e.jsx("span",{children:"Фильтры"}),(Object.keys(h).length>0||S||Y||de.trim())&&e.jsx("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs font-bold",children:Object.keys(h).length+(S?1:0)+(Y?1:0)+(de.trim()?1:0)})]}),e.jsx("button",{onClick:ue,disabled:u,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2.5 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center space-x-2 text-sm",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Применение..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{children:"Применить"})})}),(Object.keys(h).length>0||S||Y||de.trim())&&e.jsx("button",{onClick:_e,className:"bg-white border-2 border-gray-300 text-gray-700 px-4 py-2.5 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 text-sm",children:"Сбросить"})]})]}),b&&e.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-100 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Класс"}),e.jsxs("select",{value:h.grade||"",onChange:N=>x({...h,grade:N.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любой класс"}),fe.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Предмет"}),e.jsxs("select",{value:h.subject||"",onChange:N=>x({...h,subject:N.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любой предмет"}),xe.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Опыт"}),e.jsxs("select",{value:h.experience||"",onChange:N=>x({...h,experience:N.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любой опыт"}),X.map(N=>e.jsx("option",{value:N,children:A(N)},N))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Формат"}),e.jsxs("select",{value:h.format||"",onChange:N=>x({...h,format:N.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любой формат"}),ge.map(N=>e.jsx("option",{value:N,children:N==="online"?"Онлайн":N==="offline"?"Оффлайн":"Мини-группа"},N))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Длительность"}),e.jsxs("select",{value:h.duration||"",onChange:N=>x({...h,duration:N.target.value?parseInt(N.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любая длительность"}),De.map(N=>e.jsxs("option",{value:N,children:[N," мин"]},N))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Мин. рейтинг"}),e.jsxs("select",{value:h.minRating||"",onChange:N=>x({...h,minRating:N.target.value?parseFloat(N.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любой рейтинг"}),e.jsx("option",{value:"4",children:"4+ звезды"}),e.jsx("option",{value:"4.5",children:"4.5+ звезды"}),e.jsx("option",{value:"5",children:"5 звезд"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Город"}),e.jsx("input",{type:"text",value:h.city||"",onChange:N=>x({...h,city:N.target.value}),placeholder:"Введите город",className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Цели обучения"}),e.jsxs("select",{value:((Q=h.goals)==null?void 0:Q[0])||"",onChange:N=>x({...h,goals:N.target.value?[N.target.value]:void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[e.jsx("option",{value:"",children:"Любые цели"}),ye.map(N=>e.jsx("option",{value:N,children:N},N))]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"Выберите дату и время"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Дата"}),e.jsx("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden shadow-lg",children:e.jsx(Gn,{localizer:we,events:[],startAccessor:"start",endAccessor:"end",style:{height:280},views:["month"],view:"month",selectable:!0,onSelectSlot:N=>{U(N.start)},onSelectEvent:()=>{}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Время"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Начало"}),e.jsx("input",{type:"time",value:(Y==null?void 0:Y.start)||"",onChange:N=>O(F=>({start:N.target.value,end:(F==null?void 0:F.end)||"23:00"})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Конец"}),e.jsx("input",{type:"time",value:(Y==null?void 0:Y.end)||"",onChange:N=>O(F=>({start:(F==null?void 0:F.start)||"00:00",end:N.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]})]}),S&&e.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(qe,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Выбрана дата:"})]}),e.jsx("p",{className:"text-base font-medium text-blue-900",children:We(S,"dd MMMM yyyy",{locale:mt})})]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.length>0?`Найдено ${p.length} преподавателей`:"Преподаватели"}),e.jsx("p",{className:"text-gray-500 text-sm",children:p.length>0?"Выберите подходящего преподавателя для связи или бронирования урока":"Попробуйте изменить фильтры или воспользоваться овербукингом"}),e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Всего загружено: ",w.length," репетиторов | Серверных: ",Ne.length," | Из контекста: ",(n==null?void 0:n.filter(N=>N.role==="teacher").length)||0," | Локальных профилей: ",Object.keys(d).length]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:p.length===0?e.jsx(k3,{title:Object.keys(h).length>0||S||Y?"Нет преподавателей подходящих под фильтры":"Нет зарегистрированных преподавателей",description:Object.keys(h).length>0||S||Y?"Попробуйте изменить фильтры или воспользоваться овербукингом":"Попробуйте воспользоваться овербукингом или обратитесь к администратору",actionPrimary:{label:"Овербукинг",onClick:()=>f(!0)},actionSecondary:{label:"Сбросить фильтры",onClick:_e,variant:"secondary"}}):e.jsx(e.Fragment,{children:p.map(N=>{const F=N.profile,pe=s.filter(le=>le.teacherId===N.id).filter(le=>!le.isBooked).length>0;return e.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden transform hover:-translate-y-2",onClick:()=>gs(N),children:[e.jsxs("div",{className:"h-32 relative overflow-hidden",style:{background:F!=null&&F.cardBackground?F.cardBackground.startsWith("http")||F.cardBackground.startsWith("data:")?`url(${F.cardBackground}) center/cover`:F.cardBackground:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),e.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2",children:[e.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:le=>{le.stopPropagation()},children:e.jsx(ft,{className:"h-3 w-3"})}),e.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:le=>{le.stopPropagation()},children:e.jsx(Ft,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"relative -mt-12 flex justify-center",children:e.jsxs("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-2 border-white rounded-full shadow-lg",title:"Доступен для контакта"}),(()=>{const le=(F==null?void 0:F.avatar)||N.avatar;return le&&le.trim()!==""&&le!=="undefined"&&le!=="null"?e.jsx("img",{src:le,alt:N.name,className:"w-32 h-32 object-cover rounded-full",onError:ie=>{const ve=ie.target;ve.style.display="none";const Fe=ve.nextElementSibling;Fe&&Fe.classList.remove("hidden")},onLoad:ie=>{const Fe=ie.target.nextElementSibling;Fe&&Fe.classList.add("hidden")}}):null})(),e.jsx("div",{className:`w-32 h-32 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const le=(F==null?void 0:F.avatar)||N.avatar;return le&&le.trim()!==""&&le!=="undefined"&&le!=="null"?"hidden":""})()}`,children:e.jsx(be,{className:"h-16 w-16 text-white"})})]})}),e.jsxs("div",{className:"px-6 pb-6 pt-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:(F==null?void 0:F.name)||N.name||"Репетитор"}),e.jsx("p",{className:"text-sm text-gray-600",children:(F==null?void 0:F.teacherType)==="private"?"Частный преподаватель":(F==null?void 0:F.teacherType)==="school"?"Преподаватель школы":(F==null?void 0:F.teacherType)==="both"?"Частный + Школа":"Частный преподаватель"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600 mb-4",children:[(F==null?void 0:F.age)&&e.jsxs("span",{children:["возраст ",F.age," лет"]}),(F==null?void 0:F.experienceYears)&&e.jsxs("span",{children:["стаж ",F.experienceYears," лет"]})]}),e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-3 py-1.5 rounded-full",children:[e.jsx(Re,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:F!=null&&F.reviewsCount&&F.reviewsCount>0?`${F.reviewsCount} отзывов`:"отзывов нет"})]})}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-600",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{children:(F==null?void 0:F.city)||"Город не указан"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:le=>{le.stopPropagation(),pe?(te(N),V(!0)):gs(N)},className:`w-full py-3 rounded-xl font-semibold transition-all duration-200 text-base ${pe?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}`,children:pe?"Забронировать урок":"Связаться с репетитором"}),e.jsx("button",{onClick:le=>{le.stopPropagation(),gs(N)},className:"w-full py-2 text-gray-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"Подробнее →"})]})]})]},N.id)})})})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Овербукинг - Автоподбор преподавателя"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Заполните форму, и мы автоматически подберем лучшего доступного преподавателя за 5 часов до занятия"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Класс"}),e.jsxs("select",{value:C.grade,onChange:N=>g({...C,grade:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Выберите класс"}),fe.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предмет"}),e.jsxs("select",{value:C.subject,onChange:N=>g({...C,subject:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Выберите предмет"}),xe.map(N=>e.jsx("option",{value:N,children:N},N))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата занятия"}),e.jsx("input",{type:"date",value:C.date,onChange:N=>g({...C,date:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Время начала"}),e.jsx("input",{type:"time",value:C.startTime,onChange:N=>g({...C,startTime:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цель занятий"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ye.map(N=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:C.goals.includes(N),onChange:F=>{F.target.checked?g({...C,goals:[...C.goals,N]}):g({...C,goals:C.goals.filter(J=>J!==N)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:N})]},N))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавателя"}),e.jsxs("select",{value:C.experience,onChange:N=>g({...C,experience:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Любой"}),X.map(N=>e.jsx("option",{value:N,children:A(N)},N))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность"}),e.jsx("select",{value:C.duration,onChange:N=>g({...C,duration:Number(N.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:De.map(N=>e.jsxs("option",{value:N,children:[N," мин"]},N))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Формат"}),e.jsx("select",{value:C.format,onChange:N=>g({...C,format:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:ge.map(N=>e.jsx("option",{value:N,children:N==="online"?"Онлайн":N==="offline"?"Оффлайн":"Мини-группа"},N))})]})]}),C.format==="offline"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),e.jsx("input",{type:"text",value:C.city,onChange:N=>g({...C,city:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Примечание"}),e.jsx("textarea",{value:C.comment,onChange:N=>g({...C,comment:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Например: хочу разобрать домашнее задание или подготовиться к контрольной..."})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-6",children:[e.jsx("button",{onClick:W,disabled:!C.grade||!C.subject||!C.date||!C.startTime,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200 disabled:opacity-50",children:"Отправить заявку"}),e.jsx("button",{onClick:()=>f(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})})}),ne&&E&&e.jsx(w3,{teacher:E,onClose:()=>Se(!1),onBookLesson:N=>{Se(!1),or(N)},onMessage:N=>{Se(!1),L(N)}}),D&&I&&m&&e.jsx(Xn,{isOpen:D,onClose:()=>{R(!1),B(null)},onConfirm:H,slot:I,teacher:k(I.teacherId),student:m}),Me&&E&&e.jsx(qc,{teacher:E,onClose:()=>it(!1),onBookLesson:or,onMessage:L}),_&&e.jsx(Yc,{onClose:()=>q(!1)}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Календарь ",(z==null?void 0:z.name)||"Преподавателя"]}),e.jsx("p",{className:"text-gray-600",children:"Выберите удобное время для занятия"})]})]}),e.jsx("button",{onClick:()=>{V(!1),te(null)},className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(Qe,{className:"w-5 h-5 text-gray-600"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{const N=new Date(ae);N.setDate(N.getDate()-7),re(N)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[ae.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})," — ",new Date(ae.getTime()+6*24*60*60*1e3).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})]}),e.jsx("button",{onClick:()=>{const N=new Date(ae);N.setDate(N.getDate()+7),re(N)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("button",{onClick:()=>{const N=new Date,F=N.getDay(),J=N.getDate()-F+(F===0?-6:1);re(new Date(N.setDate(J)))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Сегодня"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"w-20 p-3 border-r border-gray-200"}),Array.from({length:7},(N,F)=>{const J=new Date(ae);return J.setDate(J.getDate()+F),e.jsxs("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:J.toLocaleDateString("ru-RU",{weekday:"short"})}),e.jsx("div",{className:"text-xs text-gray-600",children:J.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})})]},F)})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:Array.from({length:24},(N,F)=>F).map(N=>e.jsxs("div",{className:"flex border-b border-gray-200 last:border-b-0",children:[e.jsxs("div",{className:"w-20 bg-gray-50 p-3 border-r border-gray-200 flex items-center justify-center text-sm font-medium text-gray-600 sticky left-0",children:[N.toString().padStart(2,"0"),":00"]}),Array.from({length:7},(F,J)=>{const ce=new Date(ae);ce.setDate(ce.getDate()+J);const pe=ce.toISOString().split("T")[0],le=s.filter(Ce=>Ce.teacherId===(z==null?void 0:z.id)&&!Ce.isBooked&&Ce.date===pe&&parseInt(Ce.startTime.split(":")[0])===N);return e.jsx("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 min-h-[60px]",children:le.map(Ce=>e.jsxs("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-2 mb-2 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>{m&&(B(Ce),R(!0),V(!1),te(null))},children:[e.jsxs("div",{className:"text-xs font-medium text-blue-900",children:[Ce.startTime," - ",Ce.endTime]}),e.jsx("div",{className:"text-xs text-blue-700",children:Ce.subject}),e.jsxs("div",{className:"text-xs text-blue-600",children:[Ce.price," ₽"]})]},Ce.id))},J)})]},N))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Доступные слоты: ",s.filter(N=>N.teacherId===(z==null?void 0:z.id)&&!N.isBooked).length]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите на любой слот в календаре для бронирования"})]})]})]})})]})},_a=()=>{const{timeSlots:t,lessons:r,createSlot:s,cancelLesson:a,getOrCreateChat:n,completeLesson:i,deleteSlot:o,isConnected:l,socketRef:c}=nt(),{user:d}=Ye(),[m,h]=$.useState(!1),[x,b]=$.useState({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3}),[y,u]=M.useState(null),[j,v]=M.useState(!1),[f,C]=M.useState(null),[g,D]=$.useState(!1),[R,I]=$.useState([]),[B,_]=$.useState(null),[q,P]=$.useState(!1);M.useEffect(()=>{c.current&&(d!=null&&d.id)&&l&&c.current.emit("subscribeOverbooking",d.id)},[c.current,d==null?void 0:d.id,l]),M.useEffect(()=>{if(!c.current)return;const G=()=>{d!=null&&d.id&&(d!=null&&d.profile)&&l&&c.current.emit("subscribeOverbooking",d.id)};return c.current.off("connect",G),c.current.on("connect",G),d!=null&&d.id&&(d!=null&&d.profile)&&(c.current.emit("subscribeOverbooking",d.id),c.current.on("overbookingRequests",me=>{I(me),setTimeout(()=>{},100)}),c.current.on("newOverbookingRequest",me=>{I(ue=>[...ue,me])}),c.current.on("overbookingRequestAccepted",me=>{I(ue=>ue.filter(_e=>_e.id!==me.id))})),()=>{c.current&&(c.current.off("overbookingRequests"),c.current.off("newOverbookingRequest"),c.current.off("overbookingRequestAccepted"),c.current.off("connect",G))}},[d==null?void 0:d.id,d==null?void 0:d.profile,l]),M.useEffect(()=>{d&&d.profile&&Array.isArray(d.profile.subjects)&&d.profile.subjects.length>=1&&b(G=>({...G,subject:d.profile.subjects[0]}))},[d]);const z=t.filter(G=>G.teacherId===(d==null?void 0:d.id)).filter(G=>!G.isBooked),te=r.filter(G=>G.teacherId===(d==null?void 0:d.id)),ae=te.filter(G=>G.status==="scheduled"),re=te.filter(G=>G.status==="completed"),S=(G,me)=>{const ue=new Date(`${G.date}T${G.startTime}`),_e=new Date(`${me.date}T${me.startTime}`);return ue.getTime()-_e.getTime()},U=[...z].sort(S),Y=[...ae].sort(S),O=[...re].sort(S),de=()=>{if(!d||!x.date||!x.startTime||!x.subject){alert("Пожалуйста, заполните все обязательные поля");return}const G=new Date(`2000-01-01T${x.startTime}`),me=new Date(G.getTime()+x.duration*6e4);let ue;d.profile&&d.role==="teacher"&&(ue=d.profile);const _e={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar,date:x.date,startTime:x.startTime,endTime:me.toTimeString().slice(0,5),duration:x.duration,subject:x.subject,lessonType:x.lessonType,format:x.format,price:x.price,experience:(ue==null?void 0:ue.experience)||"beginner",goals:(ue==null?void 0:ue.goals)||[],grades:(ue==null?void 0:ue.grades)||[],rating:ue==null?void 0:ue.rating,bio:(ue==null?void 0:ue.bio)||"",...x.format==="offline"&&(ue!=null&&ue.city)?{city:ue.city}:{}};s(_e),h(!1),b({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3})},he=G=>{d&&(u(G),C(null),v(!0))},xe=G=>{d&&(C(G),u(null),v(!0))},fe=()=>{v(!1),u(null),C(null)},ye=async G=>{var ue,_e,T,H,W,A;if(!d)return;c.current&&c.current.emit("acceptOverbookingRequest",{requestId:G.id,teacherId:d.id});const me={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar||"",date:G.date||new Date().toISOString().slice(0,10),startTime:G.startTime||"15:00",endTime:G.endTime||"16:00",duration:G.duration||60,subject:G.subject,lessonType:"regular",format:G.format,price:1e3,experience:((ue=d.profile)==null?void 0:ue.experience)||"beginner",goals:((_e=d.profile)==null?void 0:_e.goals)||[],grades:((T=d.profile)==null?void 0:T.grades)||[],rating:(H=d.profile)==null?void 0:H.rating,bio:((W=d.profile)==null?void 0:W.bio)||"",city:((A=d.profile)==null?void 0:A.city)||""};await s(me,G.studentId,G.studentName),D(!1),alert("Вы приняли заявку. Слот создан и забронирован!")},X=G=>{switch(G){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return G}},ge=G=>{switch(G){case"trial":return"Пробный";case"regular":return"Обычный";default:return G}},De=({slot:G,isBooked:me,onClick:ue})=>e.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${me?"border-green-500":"border-blue-500"} cursor-pointer`,onClick:ue,children:e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:G.subject}),e.jsxs("div",{className:"text-xs text-gray-500",children:[G.date," • ",G.startTime,"–",G.endTime]})]})}),ee=({lesson:G,status:me,onClick:ue})=>e.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${me==="completed"?"border-gray-400":"border-green-500"} cursor-pointer`,onClick:ue,children:e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:G.subject}),e.jsxs("div",{className:"text-xs text-gray-500",children:[G.date," • ",G.startTime,"–",G.endTime]})]})}),we=(d==null?void 0:d.profile)&&"overbookingEnabled"in d.profile&&d.profile.overbookingEnabled,Ne=d!=null&&d.profile&&"subjects"in d.profile?d.profile.subjects:[],Ee=[45,60,90],ze=["regular","trial"],Ze=["online","offline","mini-group"];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 relative",children:[we&&e.jsxs("button",{className:"absolute top-0 right-0 p-2 rounded-full hover:bg-gray-100 transition z-10",title:"Уведомления",onClick:()=>D(!0),children:[e.jsx(Fr,{className:"w-7 h-7 text-blue-500"}),R.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5",children:R.length})]}),e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Управление слотами"}),e.jsx("p",{className:"text-gray-600",children:"Создавайте временные слоты для уроков и управляйте своим расписанием"})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>D(!1),title:"Закрыть",children:e.jsx(Qe,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Заявки на овербукинг"}),R.length===0?e.jsx("div",{className:"text-gray-500 text-center",children:"Нет новых заявок"}):e.jsx("div",{className:"space-y-2",children:R.map(G=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2 bg-purple-50 cursor-pointer hover:bg-purple-100 transition",onClick:()=>{_(G),P(!0)},children:[e.jsx("span",{className:"font-semibold text-purple-800",children:G.studentName}),e.jsx("span",{className:"text-xs text-gray-500",children:G.subject}),e.jsx("span",{className:"text-xs text-gray-500",children:G.startTime||"—"})]},G.id))})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>h(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(xr,{className:"h-5 w-5"}),e.jsx("span",{children:"Создать новый слот"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Свободные слоты"}),U.length>0?e.jsx("div",{className:"space-y-4",children:U.map(G=>e.jsx(De,{slot:G,isBooked:!1,onClick:()=>he(G)},G.id))}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет свободных слотов"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-green-700 mb-4",children:"Забронированные уроки"}),Y.length>0?e.jsx("div",{className:"space-y-4",children:Y.map(G=>e.jsx(ee,{lesson:G,status:"scheduled",onClick:()=>xe(G)},G.id))}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет забронированных уроков"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Завершённые уроки"}),O.length>0?e.jsx("div",{className:"space-y-4",children:O.map(G=>e.jsx(ee,{lesson:G,status:"completed",onClick:()=>xe(G)},G.id))}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет завершённых уроков"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-purple-700 mb-4",children:"Овербукинг"}),e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет новых заявок"})]})]}),m&&e.jsx("div",{className:"fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Создать новый слот"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Предмет *"}),e.jsxs("select",{value:x.subject,onChange:G=>b({...x,subject:G.target.value}),className:"input-modern w-full",children:[e.jsx("option",{value:"",children:"Выберите предмет"}),Ne.map(G=>e.jsx("option",{value:G,children:G},G))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Дата *"}),e.jsx("input",{type:"date",value:x.date,onChange:G=>b({...x,date:G.target.value}),className:"input-modern w-full",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Время начала *"}),e.jsx("input",{type:"time",value:x.startTime,onChange:G=>b({...x,startTime:G.target.value}),className:"input-modern w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Длительность"}),e.jsx("select",{value:x.duration,onChange:G=>b({...x,duration:parseInt(G.target.value)}),className:"input-modern w-full",children:Ee.map(G=>e.jsxs("option",{value:G,children:[G," минут"]},G))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Цена (₽)"}),e.jsx("input",{type:"number",value:x.price,onChange:G=>b({...x,price:parseInt(G.target.value)}),className:"input-modern w-full",min:"100",step:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Тип урока"}),e.jsx("select",{value:x.lessonType,onChange:G=>b({...x,lessonType:G.target.value}),className:"input-modern w-full",children:ze.map(G=>e.jsx("option",{value:G,children:ge(G)},G))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Формат"}),e.jsx("select",{value:x.format,onChange:G=>b({...x,format:G.target.value}),className:"input-modern w-full",children:Ze.map(G=>e.jsx("option",{value:G,children:X(G)},G))})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{onClick:de,className:"btn-primary flex-1",children:"Создать слот"}),e.jsx("button",{onClick:()=>h(!1),className:"btn-secondary flex-1",children:"Отмена"})]})]})]})})}),j&&(y||f)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:fe,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-xl font-bold mb-4",children:y?"Детали слота":"Детали урока"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Предмет:"})," ",(y||f).subject]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Дата:"})," ",(y||f).date," ",(y||f).startTime," - ",(y||f).endTime]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Формат:"})," ",(y||f).format]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Цена:"})," ",(y||f).price,"₽"]}),y&&y.studentName&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ученик:"})," ",y.studentName]}),f&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ученик:"})," ",f.studentName]}),((f==null?void 0:f.comment)||(y==null?void 0:y.comment))&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Комментарий ученика:"})," ",(f==null?void 0:f.comment)||(y==null?void 0:y.comment)]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[y&&y.isBooked&&y.studentId&&d&&e.jsxs("button",{onClick:()=>{n(d.id,y.studentId,d.name,y.studentName),fe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[e.jsx(Re,{className:"w-5 h-5"})," Чат с учеником"]}),y&&y.isBooked&&y.format==="online"&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Видеозвонок"})]})}),y&&y.isBooked&&e.jsxs("button",{onClick:()=>{i(y.lessonId),fe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[e.jsx(Wr,{className:"w-5 h-5"})," Завершить урок"]}),y&&e.jsx("button",{onClick:()=>{o(y.id),fe()},className:"absolute top-4 left-4 text-red-500 hover:text-red-700",children:e.jsx(zr,{className:"w-6 h-6"})}),f&&f.status==="scheduled"&&d&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{n(d.id,f.studentId,d.name,f.studentName),fe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[e.jsx(Re,{className:"w-5 h-5"})," Чат с учеником"]}),f.format==="online"&&e.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Видеозвонок"})]}),e.jsxs("button",{onClick:()=>{i(f.id),fe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[e.jsx(Wr,{className:"w-5 h-5"})," Завершить урок"]})]}),f&&f.status==="completed"&&e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-center text-gray-800",children:"Урок завершён"})]})]})}),q&&B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:()=>{P(!1),_(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Заявка на овербукинг"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ученик:"})," ",B.studentName]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Предмет:"})," ",B.subject]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Класс:"})," ",B.grade]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Формат:"})," ",B.format]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Длительность:"})," ",B.duration," мин"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Время:"})," ",B.startTime||"—"," - ",B.endTime||"—"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Цели:"})," ",Array.isArray(B.goals)?B.goals.join(", "):B.goals]}),B.comment&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[e.jsx("span",{className:"font-medium",children:"Комментарий:"})," ",B.comment]})]}),e.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",onClick:()=>{ye(B),P(!1),_(null)},children:"Забронировать слот"})]})})]})},C3={ru:mt},$3=qn({format:We,startOfWeek:Dt,getDay:Vn,locales:C3}),Vc=({mode:t,student:r,onAssign:s})=>{const{timeSlots:a,lessons:n,bookLesson:i,createSlot:o}=nt(),{user:l}=Ye(),[c,d]=$.useState(null),[m,h]=$.useState(!1),[x,b]=$.useState(""),[y,u]=$.useState(!1),[j,v]=$.useState(!1),[f,C]=$.useState({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),[g,D]=$.useState(!1),[R,I]=$.useState(null),[B,_]=$.useState(!1),[q,P]=$.useState(""),V=a.filter(X=>{if(X.teacherId!==(l==null?void 0:l.id)||X.status==="completed")return!1;if(t==="assign"&&r){if(X.isBooked&&X.bookedStudentId!==r.id)return!1}else if(X.isBooked)return!1;return!0}),z=n.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"),te=t==="assign"?a.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"):V,ae=t==="assign"?n.filter(X=>X.teacherId===(l==null?void 0:l.id)&&X.status!=="completed"):z,re=te.map(X=>({id:X.id,title:`${X.subject} - ${X.isBooked?"Забронирован":"Свободен"}`,start:new Date(`${X.date}T${X.startTime}`),end:new Date(`${X.date}T${X.endTime}`),resource:X,type:"slot",isBooked:X.isBooked,subject:X.subject,price:X.price,format:X.format,lessonType:X.lessonType})),S=ae.map(X=>({id:X.id,title:`${X.subject} - ${X.studentName}`,start:new Date(`${X.date}T${X.startTime}`),end:new Date(`${X.date}T${X.endTime}`),resource:X,type:"lesson",studentName:X.studentName,subject:X.subject,price:X.price,format:X.format,status:X.status})),U=[...re,...S],Y=$.useCallback(X=>{let ge={borderRadius:"8px",border:"none",padding:"4px 8px",fontSize:"12px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"};return X.type==="slot"?X.isBooked?(ge.backgroundColor="#10b981",ge.color="white"):(ge.backgroundColor="#3b82f6",ge.color="white"):X.type==="lesson"&&(ge.backgroundColor="#f59e0b",ge.color="white"),{style:ge}},[]),O=$.useCallback(X=>{d(X),h(!0),b("")},[]),de=()=>{h(!1),d(null),b("")},he=async X=>{t==="assign"&&r&&(await i(X.id,r.id,r.name),s&&s())},xe=$.useCallback(X=>{const{start:ge,end:De}=X,ee=We(ge,"yyyy-MM-dd"),we=We(ge,"HH:mm"),Ne=We(De,"HH:mm");C({date:ee,startTime:we,endTime:Ne,subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),v(!0)},[]),fe=async()=>{if(!l||!f.subject.trim()){alert("Пожалуйста, заполните все обязательные поля");return}if(!f.startTime||!f.endTime||f.startTime>=f.endTime){alert("Проверьте корректность времени начала и окончания");return}D(!0);try{if(t==="assign"&&r){await o({...f,teacherId:l.id,teacherName:l.name,duration:60,lessonType:f.lessonType,format:f.format,experience:f.experience,goals:f.goals||[],grades:f.grades||[]},r.id,r.name,{mode:"assign"}),v(!1),C({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]});return}await o({...f,teacherId:l.id,teacherName:l.name,duration:60,lessonType:f.lessonType,format:f.format,experience:f.experience,goals:f.goals||[],grades:f.grades||[]}),v(!1),C({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),alert("Слот успешно создан!")}catch{alert("Ошибка при создании слота")}finally{D(!1)}},ye=async X=>{if(r){_(!0);try{await i(X.id,r.id,r.name),P(`Урок назначен для ${r.name}`),setTimeout(()=>{P(""),I(null),s&&s()},1200)}catch{alert("Ошибка при бронировании слота")}finally{_(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-2",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Календарь занятий"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Управляйте своим расписанием и отслеживайте забронированные уроки"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-3",children:e.jsx(Gn,{localizer:$3,events:U,startAccessor:"start",endAccessor:"end",style:{height:400},eventPropGetter:Y,onSelectEvent:O,onSelectSlot:xe,selectable:!0,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет событий в выбранном диапазоне",showMore:X=>`+${X} еще`},className:"custom-calendar"})})}),e.jsxs("div",{className:"mt-3 bg-white rounded-lg shadow-sm border border-gray-100 p-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Легенда"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Свободные слоты"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Забронированные слоты"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Запланированные уроки"})]})]})]})]}),m&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-xs w-full p-3 transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:c.type==="slot"?"Детали слота":"Детали урока"}),e.jsx("button",{onClick:de,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Предмет:"}),e.jsx("p",{className:"text-xs text-gray-900",children:c.subject})]}),c.type==="slot"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),e.jsx("p",{className:`text-xs font-medium ${c.isBooked?"text-green-600":"text-blue-600"}`,children:c.isBooked?"Забронирован":"Свободен"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Тип урока:"}),e.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.lessonType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),e.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),e.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]}),!c.isBooked&&e.jsxs("div",{className:"mt-3",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Имя студента для бронирования:"}),e.jsx("input",{type:"text",value:x,onChange:X=>b(X.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Введите имя студента"}),e.jsx("button",{onClick:()=>he(c.resource),disabled:y,className:"mt-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:y?"Бронирую...":"Забронировать слот"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Ученик:"}),e.jsx("p",{className:"text-xs text-gray-900",children:c.studentName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),e.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),e.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),e.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Время:"}),e.jsxs("p",{className:"text-gray-900 text-xs",children:[We(c.start,"HH:mm")," - ",We(c.end,"HH:mm")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Дата:"}),e.jsx("p",{className:"text-gray-900 text-xs",children:We(c.start,"dd MMMM yyyy",{locale:mt})})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:de,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Закрыть"})})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 transform transition-all duration-300 scale-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Создать новый слот"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Предмет *"}),e.jsx("input",{type:"text",value:f.subject,onChange:X=>C({...f,subject:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Например: Математика",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время начала"}),e.jsx("input",{type:"time",value:f.startTime,onChange:X=>C({...f,startTime:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время окончания"}),e.jsx("input",{type:"time",value:f.endTime,onChange:X=>C({...f,endTime:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Тип урока"}),e.jsxs("select",{value:f.lessonType,onChange:X=>C({...f,lessonType:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[e.jsx("option",{value:"regular",children:"Обычный"}),e.jsx("option",{value:"trial",children:"Пробный"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Формат"}),e.jsxs("select",{value:f.format,onChange:X=>C({...f,format:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[e.jsx("option",{value:"online",children:"Онлайн"}),e.jsx("option",{value:"offline",children:"Офлайн"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Цена (₽)"}),e.jsx("input",{type:"number",value:f.price,onChange:X=>C({...f,price:parseInt(X.target.value)||0}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"1000",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Опыт"}),e.jsxs("select",{value:f.experience,onChange:X=>C({...f,experience:X.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[e.jsx("option",{value:"beginner",children:"Начинающий"}),e.jsx("option",{value:"experienced",children:"Опытный"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Отмена"}),e.jsx("button",{onClick:fe,disabled:g||!f.subject.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:g?"Создаю...":"Создать слот"})]})]})}),t==="assign"&&r&&R&&!R.isBooked&&e.jsx("button",{onClick:()=>ye(R),disabled:B,style:{marginTop:12,padding:"6px 16px",fontSize:14},children:B?"Назначение...":`Забронировать для ${r.name}`}),q&&e.jsx("div",{style:{color:"green",marginTop:8,fontSize:14},children:q})]})},D3={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},E3={background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.15)",padding:24,minWidth:320,maxHeight:"90vh",overflowY:"auto",position:"relative"},T3={position:"absolute",top:12,right:16,fontSize:24,background:"none",border:"none",cursor:"pointer",color:"#888"},ur=({open:t,onClose:r,children:s,style:a})=>t?e.jsx("div",{style:D3,onClick:r,children:e.jsxs("div",{style:{...E3,...a},onClick:n=>n.stopPropagation(),children:[e.jsx("button",{style:T3,onClick:r,"aria-label":"Закрыть",children:"×"}),s]})}):null,Jn=({onSubmit:t,onCancel:r,initialText:s="",isEditing:a=!1,userName:n="U",userAvatar:i})=>{const[o,l]=$.useState(s),[c,d]=$.useState([]),[m,h]=$.useState([]),x=$.useRef(null),b=v=>{const f=Array.from(v.target.files||[]);if(f.length===0)return;const C=[...c,...f];d(C);const g=f.map(D=>URL.createObjectURL(D));h([...m,...g]),x.current&&(x.current.value="")},y=v=>{const f=c.filter((g,D)=>D!==v),C=m.filter((g,D)=>D!==v);d(f),h(C)},u=()=>{if(!o.trim()&&c.length===0)return;const v=c.length>0?c.some(C=>C.type.startsWith("video/"))?"video":"image":"text",f={text:o.trim(),media:c,type:v};t(f),m.forEach(C=>URL.revokeObjectURL(C))},j=!o.trim()&&c.length===0;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center overflow-hidden",children:i?e.jsx("img",{src:i,alt:n,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-white text-sm font-medium",children:n.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:o,onChange:v=>l(v.target.value),placeholder:a?"Редактировать запись...":"Что нового?",className:"w-full border-none resize-none focus:ring-0 text-gray-900 placeholder-gray-500",rows:3}),m.length>0&&e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:m.map((v,f)=>{var C;return e.jsxs("div",{className:"relative group",children:[(C=c[f])!=null&&C.type.startsWith("video/")?e.jsx("video",{src:v,className:"w-full h-24 object-cover rounded-lg",controls:!0}):e.jsx("img",{src:v,alt:"Preview",className:"w-full h-24 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>y(f),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Qe,{className:"w-3 h-3"})})]},f)})}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{var v;return(v=x.current)==null?void 0:v.click()},className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",title:"Добавить фото или видео",children:e.jsx(Pa,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:e.jsx(sn,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Отмена"}),e.jsx("button",{onClick:u,disabled:j,className:`px-4 py-2 rounded-lg font-medium transition-colors ${j?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a?"Сохранить":"Опубликовать"})]})]})]})]}),e.jsx("input",{ref:x,type:"file",multiple:!0,accept:"image/*,video/*",onChange:b,className:"hidden"})]})},Za=({post:t,onReaction:r,onComment:s,onShare:a,onBookmark:n,onEdit:i,onDelete:o})=>{const[l,c]=$.useState(!1),[d,m]=$.useState(""),[h,x]=$.useState(!1),[b,y]=$.useState(!1),u=g=>{r(t.id,g),y(!1)},j=()=>{d.trim()&&(s(t.id,d.trim()),m(""))},v=g=>{i&&(i(t.id,g),x(!1))},f=()=>{o&&o(t.id)},C=g=>{const D=new Date(g),I=Math.floor((new Date().getTime()-D.getTime())/(1e3*60*60));return I<1?"только что":I<24?`${I}ч назад`:I<48?"вчера":D.toLocaleDateString("ru-RU")};return t.reactions.reduce((g,D)=>g+D.count,0),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-4",children:[e.jsx("div",{className:"p-4 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:t.userAvatar?e.jsx("img",{src:t.userAvatar,alt:t.userName,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-sm font-medium",children:t.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.userName}),e.jsx("div",{className:"text-sm text-gray-500",children:C(t.date)})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qo,{className:"w-5 h-5"})}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10",children:[i&&e.jsx("button",{onClick:()=>x(!0),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Редактировать"}),o&&e.jsx("button",{onClick:f,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Удалить"})]})]})]})}),h&&i&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx(Jn,{onSubmit:({text:g})=>v(g),onCancel:()=>x(!1),initialText:t.text,isEditing:!0})}),!h&&e.jsxs(e.Fragment,{children:[t.text&&e.jsxs("div",{className:"px-4 pb-3",children:[e.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:t.text}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:t.tags.map(g=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 font-medium",children:["#",g]},g))})]}),t.media&&t.media.length>0&&e.jsx("div",{className:"px-4 pb-3",children:t.type==="video"?e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:t.media[0],className:"w-full rounded-lg",controls:!0}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(_d,{className:"w-12 h-12 text-white opacity-80"})})]}):e.jsx("div",{className:`grid gap-2 ${t.media.length===1?"grid-cols-1":t.media.length===2?"grid-cols-2":"grid-cols-3"}`,children:t.media.map((g,D)=>e.jsx("div",{className:"relative aspect-square",children:e.jsx("img",{src:g,alt:"Post media",className:"w-full h-full object-cover rounded-lg"})},D))})}),(t.likes&&t.likes>0||t.comments.length>0||t.views&&t.views>0)&&e.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[t.likes&&t.likes>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ft,{className:"w-4 h-4 text-red-500 fill-current"}),e.jsx("span",{children:t.likes})]}),t.comments.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:t.comments.length})]}),t.views&&t.views>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(hr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:t.views})]})]}),t.editedAt&&e.jsx("span",{className:"text-xs text-gray-400",children:"ред."})]})}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>y(!b),className:`flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ${t.reactions.some(g=>g.userReacted)?"text-red-500 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(ft,{className:`w-5 h-5 ${t.reactions.some(g=>g.userReacted)?"fill-current":""}`}),e.jsx("span",{className:"text-sm",children:"Нравится"})]}),b&&e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>u("like"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Нравится",children:e.jsx(rl,{className:"w-6 h-6 text-blue-500"})}),e.jsx("button",{onClick:()=>u("love"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Любовь",children:e.jsx(ft,{className:"w-6 h-6 text-red-500"})}),e.jsx("button",{onClick:()=>u("smile"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Улыбка",children:e.jsx(sn,{className:"w-6 h-6 text-yellow-500"})})]})]}),e.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Комментировать"})]}),e.jsxs("button",{onClick:()=>a(t.id),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[e.jsx(Ad,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),e.jsx("button",{onClick:()=>n(t.id),className:`p-2 rounded-full transition-colors ${t.isBookmarked?"text-blue-500 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:e.jsx(qs,{className:`w-5 h-5 ${t.isBookmarked?"fill-current":""}`})})]})}),l&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:[e.jsx("div",{className:"space-y-3 mb-3",children:t.comments.map(g=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:g.userAvatar?e.jsx("img",{src:g.userAvatar,alt:g.userName,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-white text-xs font-medium",children:g.userName.charAt(0).toUpperCase()})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:g.userName}),e.jsx("span",{className:"text-xs text-gray-500",children:C(g.date)})]}),e.jsx("p",{className:"text-sm text-gray-800",children:g.text})]})})]},g.id))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:"U"})}),e.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-white rounded-full px-3 py-2",children:[e.jsx("input",{type:"text",value:d,onChange:g=>m(g.target.value),placeholder:"Написать комментарий...",className:"flex-1 border-none outline-none text-sm",onKeyPress:g=>g.key==="Enter"&&j()}),e.jsx("button",{onClick:j,disabled:!d.trim(),className:`p-1 rounded-full transition-colors ${d.trim()?"text-blue-500 hover:bg-blue-50":"text-gray-400"}`,children:e.jsx(Zo,{className:"w-4 h-4"})})]})]})]})]})]})},O3=({onSearchResults:t,onClose:r,className:s=""})=>{var re;const{posts:a,searchPosts:n}=nt(),[i,o]=$.useState(""),[l,c]=$.useState([]),[d,m]=$.useState("all"),[h,x]=$.useState(""),[b,y]=$.useState(""),[u,j]=$.useState(""),[v,f]=$.useState("date"),[C,g]=$.useState(!1),[D,R]=$.useState([]),[I,B]=$.useState(!1),_=$.useRef(),q=Array.from(new Set(a.flatMap(S=>S.tags||[]))).sort(),P=Array.from(new Set(a.map(S=>({id:S.userId,name:S.userName})))).filter((S,U,Y)=>U===Y.findIndex(O=>O.id===S.id)),V=()=>{B(!0);const S={query:i.trim()||void 0,tags:l.length>0?l:void 0,userId:h||void 0,dateFrom:b||void 0,dateTo:u||void 0,type:d==="all"?void 0:d,limit:50};let U=[...a];if(S.query){const Y=S.query.toLowerCase();U=U.filter(O=>O.text.toLowerCase().includes(Y)||O.userName.toLowerCase().includes(Y))}S.tags&&S.tags.length>0&&(U=U.filter(Y=>Y.tags&&S.tags.some(O=>Y.tags.includes(O)))),S.userId&&(U=U.filter(Y=>Y.userId===S.userId)),S.type&&(U=U.filter(Y=>Y.type===S.type)),S.dateFrom&&(U=U.filter(Y=>Y.date>=S.dateFrom)),S.dateTo&&(U=U.filter(Y=>Y.date<=S.dateTo)),U.sort((Y,O)=>{switch(v){case"likes":return(O.likes||0)-(Y.likes||0);case"comments":return O.comments.length-Y.comments.length;case"views":return(O.views||0)-(Y.views||0);case"date":default:return new Date(O.date).getTime()-new Date(Y.date).getTime()}}),R(U),B(!1),t&&t(U),n(S)};$.useEffect(()=>(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{i.trim()||l.length>0||h||d!=="all"||b||u?V():(R([]),t&&t([]))},300),()=>{_.current&&clearTimeout(_.current)}),[i,l,h,d,b,u,v]);const z=()=>{o(""),c([]),x(""),m("all"),y(""),j(""),f("date"),R([]),t&&t([])},te=S=>{c(U=>U.includes(S)?U.filter(Y=>Y!==S):[...U,S])},ae=S=>{const U=new Date(S),O=Math.floor((new Date().getTime()-U.getTime())/(1e3*60*60));return O<1?"только что":O<24?`${O}ч назад`:O<48?"вчера":U.toLocaleDateString("ru-RU")};return e.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200 ${s}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Поиск записей"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>g(!C),className:`p-2 rounded-full transition-colors ${C?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,title:"Фильтры",children:e.jsx(tn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:z,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Очистить поиск",children:e.jsx(Qe,{className:"w-5 h-5"})}),r&&e.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Закрыть",children:e.jsx(Qe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mt-4 relative",children:[e.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),placeholder:"Поиск по записям...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),I&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),(l.length>0||h||d!=="all"||b||u)&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[l.map(S=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700",children:[e.jsx(Sd,{className:"w-3 h-3 mr-1"}),S,e.jsx("button",{onClick:()=>te(S),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(Qe,{className:"w-3 h-3"})})]},S)),h&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-700",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),((re=P.find(S=>S.id===h))==null?void 0:re.name)||h,e.jsx("button",{onClick:()=>x(""),className:"ml-2 hover:bg-green-200 rounded-full p-0.5",children:e.jsx(Qe,{className:"w-3 h-3"})})]}),d!=="all"&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-700",children:[d==="text"&&e.jsx(Jt,{className:"w-3 h-3 mr-1"}),d==="image"&&e.jsx(Pa,{className:"w-3 h-3 mr-1"}),d==="video"&&e.jsx(Mt,{className:"w-3 h-3 mr-1"}),d==="text"?"Текст":d==="image"?"Изображения":"Видео",e.jsx("button",{onClick:()=>m("all"),className:"ml-2 hover:bg-purple-200 rounded-full p-0.5",children:e.jsx(Qe,{className:"w-3 h-3"})})]})]})]}),C&&e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип контента"}),e.jsxs("select",{value:d,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Все типы"}),e.jsx("option",{value:"text",children:"Только текст"}),e.jsx("option",{value:"image",children:"С изображениями"}),e.jsx("option",{value:"video",children:"С видео"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Автор"}),e.jsxs("select",{value:h,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Все авторы"}),P.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортировка"}),e.jsxs("select",{value:v,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"date",children:"По дате"}),e.jsx("option",{value:"likes",children:"По лайкам"}),e.jsx("option",{value:"comments",children:"По комментариям"}),e.jsx("option",{value:"views",children:"По просмотрам"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата от"}),e.jsx("input",{type:"date",value:b,onChange:S=>y(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата до"}),e.jsx("input",{type:"date",value:u,onChange:S=>j(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),q.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Популярные теги"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:q.slice(0,10).map(S=>e.jsxs("button",{onClick:()=>te(S),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${l.includes(S)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",S]},S))})]})]}),D.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Найдено ",D.length," записей"]})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:D.map(S=>e.jsx("div",{className:"p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center flex-shrink-0",children:S.userAvatar?e.jsx("img",{src:S.userAvatar,alt:S.userName,className:"w-10 h-10 rounded-full object-cover"}):e.jsx("span",{className:"text-white text-sm font-medium",children:S.userName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:S.userName}),e.jsx("span",{className:"text-xs text-gray-500",children:ae(S.date)}),S.type!=="text"&&e.jsx("span",{className:"text-xs text-gray-500",children:S.type==="image"?e.jsx(Pa,{className:"w-3 h-3 inline"}):e.jsx(Mt,{className:"w-3 h-3 inline"})})]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:S.text}),S.tags&&S.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[S.tags.slice(0,3).map(U=>e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["#",U]},U)),S.tags.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",S.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(ft,{className:"w-3 h-3"}),e.jsx("span",{children:S.likes||0})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{children:S.comments.length})]}),S.views&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(hr,{className:"w-3 h-3"}),e.jsx("span",{children:S.views})]})]})]})]})},S.id))})]}),i.trim()&&D.length===0&&!I&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Hr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"По вашему запросу ничего не найдено"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Попробуйте изменить параметры поиска"})]})]})},M3=({className:t=""})=>{const{notifications:r,markNotificationAsRead:s,markAllNotificationsAsRead:a,deleteNotification:n}=nt(),{user:i}=Ye(),[o,l]=$.useState(!1),[c,d]=$.useState(!1),[m,h]=$.useState("all"),x=$.useRef(null),b=r.filter(g=>!g.isRead).length;$.useEffect(()=>{const g=D=>{x.current&&!x.current.contains(D.target)&&l(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const y=r.filter(g=>m==="unread"?!g.isRead:m==="read"?g.isRead:!0),u=c?y:y.slice(0,5),j=g=>{switch(g){case"new_post":return e.jsx(Jt,{className:"w-5 h-5 text-blue-500"});case"reaction":return e.jsx(ft,{className:"w-5 h-5 text-red-500"});case"comment":return e.jsx(Re,{className:"w-5 h-5 text-green-500"});case"new_message":return e.jsx(Re,{className:"w-5 h-5 text-blue-500"});case"follow":return e.jsx(Vs,{className:"w-5 h-5 text-purple-500"});case"lesson_reminder":return e.jsx(qe,{className:"w-5 h-5 text-orange-500"});case"system":return e.jsx(Ys,{className:"w-5 h-5 text-gray-500"});default:return e.jsx(Fr,{className:"w-5 h-5 text-gray-500"})}},v=g=>{const D=new Date(g),I=Math.floor((new Date().getTime()-D.getTime())/(1e3*60));return I<1?"только что":I<60?`${I}м назад`:I<1440?`${Math.floor(I/60)}ч назад`:D.toLocaleDateString("ru-RU")},f=()=>{i&&a(i.id)},C=g=>{var D,R;g.isRead||s(g.id),g.type==="new_message"&&((D=g.data)!=null&&D.chatId)?(window.location.href=`#chat-${g.data.chatId}`,l(!1)):(R=g.data)!=null&&R.postId};return e.jsxs("div",{className:`relative ${t}`,ref:x,children:[e.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[e.jsx(Fr,{className:"w-6 h-6 text-gray-600"}),b>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:b>99?"99+":b})]}),o&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Уведомления"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[b>0&&e.jsx("button",{onClick:f,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Отметить все как прочитанные"}),e.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Qe,{className:"w-4 h-4 text-gray-500"})})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mt-3",children:[{key:"all",label:"Все",count:r.length},{key:"unread",label:"Непрочитанные",count:b},{key:"read",label:"Прочитанные",count:r.length-b}].map(({key:g,label:D,count:R})=>e.jsxs("button",{onClick:()=>h(g),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${m===g?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[D," (",R,")"]},g))})]}),e.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:u.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Fr,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsxs("p",{className:"text-gray-500",children:[m==="all"&&"Нет уведомлений",m==="unread"&&"Нет непрочитанных уведомлений",m==="read"&&"Нет прочитанных уведомлений"]})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:u.map(g=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${g.isRead?"":"bg-blue-50"}`,onClick:()=>C(g),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:j(g.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:v(g.createdAt)})]}),!g.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[!g.isRead&&e.jsx("button",{onClick:D=>{D.stopPropagation(),s(g.id)},className:"p-1 rounded-full hover:bg-green-100 transition-colors",title:"Отметить как прочитанное",children:e.jsx(bd,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:D=>{D.stopPropagation(),n(g.id)},className:"p-1 rounded-full hover:bg-red-100 transition-colors",title:"Удалить",children:e.jsx(zr,{className:"w-4 h-4 text-red-600"})})]})]})},g.id))})}),y.length>5&&e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsx("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:c?e.jsxs(e.Fragment,{children:[e.jsx(jd,{className:"w-4 h-4"}),e.jsx("span",{children:"Показать меньше"})]}):e.jsxs(e.Fragment,{children:[e.jsx(yd,{className:"w-4 h-4"}),e.jsxs("span",{children:["Показать все (",y.length,")"]})]})})})]})]})},_3=({posts:t,currentUserId:r,currentUserName:s,currentUserAvatar:a,onCreatePost:n,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m,showCreateButton:h=!0,title:x="Записи",showSearch:b=!0,showNotifications:y=!0,showTrending:u=!0,showBookmarks:j=!0})=>{const[v,f]=$.useState(!1),[C,g]=$.useState(!1),[D,R]=$.useState("all"),[I,B]=$.useState(t),[_,q]=$.useState([]);$.useEffect(()=>{let V=t;D==="my"?V=t.filter(z=>z.userId===r):D==="others"?V=t.filter(z=>z.userId!==r):D==="trending"?V=[...t].sort((z,te)=>{const ae=(z.likes||0)+z.comments.length;return(te.likes||0)+te.comments.length-ae}).slice(0,20):D==="bookmarks"&&(V=t.filter(z=>{var te;return(te=z.bookmarks)==null?void 0:te.includes(r)})),B(V)},[t,D,r]);const P=V=>{n(V),f(!1)};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:x}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y&&e.jsx(M3,{className:"mr-2"}),b&&e.jsx("button",{onClick:()=>g(!C),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Поиск",children:e.jsx(Hr,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:D,onChange:V=>R(V.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Все записи"}),e.jsx("option",{value:"my",children:"Мои записи"}),e.jsx("option",{value:"others",children:"Записи других"}),u&&e.jsx("option",{value:"trending",children:"Популярные"}),j&&e.jsx("option",{value:"bookmarks",children:"Закладки"})]}),e.jsx(tn,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),h&&e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xr,{className:"w-4 h-4"}),e.jsx("span",{children:"Создать запись"})]})]})]}),C&&e.jsx("div",{className:"mb-6",children:e.jsx(O3,{onSearchResults:q,onClose:()=>g(!1)})}),v&&e.jsx("div",{className:"mb-6",children:e.jsx(Jn,{onSubmit:P,onCancel:()=>f(!1),userName:s,userAvatar:a})}),e.jsxs("div",{className:"space-y-4",children:[_.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Результаты поиска (",_.length,")"]}),e.jsx("div",{className:"space-y-4",children:_.map(V=>e.jsx(Za,{post:V,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m},V.id))})]}),I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-gray-400 text-lg mb-2",children:[D==="all"&&"Пока нет записей",D==="my"&&"У вас пока нет записей",D==="others"&&"Пока нет записей от других",D==="trending"&&"Пока нет популярных записей",D==="bookmarks"&&"У вас пока нет закладок"]}),e.jsxs("p",{className:"text-gray-500",children:[D==="my"&&h&&"Создайте первую запись!",D==="others"&&"Записи от других пользователей появятся здесь",D==="trending"&&"Популярные записи появятся здесь",D==="bookmarks"&&"Добавляйте записи в закладки!"]})]}):I.map(V=>e.jsx(Za,{post:V,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m},V.id))]})]})},P3=({userId:t,onClose:r,onMessage:s,onBookLesson:a,isModal:n=!1})=>{const{user:i}=Ye(),{posts:o,createPost:l,addReaction:c,addComment:d,sharePost:m,bookmarkPost:h,editPost:x,deletePost:b,allUsers:y}=nt(),[u,j]=$.useState(!1),[v,f]=$.useState(!1),[C,g]=$.useState(!1),[D,R]=$.useState("posts"),I=y.find(ae=>ae.id===t),B=(i==null?void 0:i.id)===t,_=(I==null?void 0:I.role)==="teacher",q=o.filter(ae=>ae.userId===t),P=I==null?void 0:I.profile,V=ae=>{switch(ae){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ae}},z=ae=>{switch(ae){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ae}};if(!I)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пользователь не найден"}),e.jsx("p",{className:"text-gray-500",children:"Пользователь с таким ID не существует"})]})});const te=()=>{var ae;return e.jsx("div",{className:`${n?"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4":""}`,children:e.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative ${n?"":"border border-gray-200"}`,children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[r&&e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(en,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!B&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(!v),className:`p-2 rounded-full transition-colors ${v?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:e.jsx(qs,{className:`w-5 h-5 ${v?"fill-current":""}`})}),e.jsx("button",{onClick:()=>j(!u),className:`p-2 rounded-full transition-colors ${u?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:e.jsx(ft,{className:`w-5 h-5 ${u?"fill-current":""}`})})]}),e.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ft,{className:"w-5 h-5"})}),B&&e.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ys,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),e.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"text-white flex-1 mr-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(P==null?void 0:P.name)||I.name||"Пользователь"}),e.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[_&&(P==null?void 0:P.experience)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(Lt,{className:"h-4 w-4 text-yellow-300"}),e.jsx("span",{className:"font-semibold text-xs",children:V(P.experience)})]}),(P==null?void 0:P.rating)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(St,{className:"h-4 w-4 text-yellow-300 fill-current"}),e.jsx("span",{className:"font-semibold text-xs",children:P.rating})]}),(P==null?void 0:P.city)&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-xs",children:P.city})]})]})]}),e.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[e.jsx("div",{className:"text-2xl font-bold mb-1",children:q.length}),e.jsx("div",{className:"text-sm opacity-80",children:"записей"})]})]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[e.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[e.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),P!=null&&P.avatar&&P.avatar.trim()!==""?e.jsx("img",{src:P.avatar,alt:I.name,className:"w-36 h-36 object-cover rounded-full",onError:re=>{var U;const S=re.target;S.style.display="none",(U=S.nextElementSibling)==null||U.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${P!=null&&P.avatar&&P.avatar.trim()!==""?"hidden":""}`,children:e.jsx(be,{className:"h-20 w-20 text-white"})})]}),!B&&e.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>j(!u),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${u?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:e.jsx(ft,{className:`w-5 h-5 ${u?"fill-current":""}`})}),e.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[!B&&e.jsxs(e.Fragment,{children:[_&&a&&e.jsxs("button",{onClick:()=>a(I.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(Ue,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),s&&e.jsxs("button",{onClick:()=>s(I.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(Re,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),e.jsxs("button",{onClick:()=>g(!C),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[e.jsx(hr,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]}),B&&e.jsxs("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx(el,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg",children:"Редактировать профиль"})]})]})]})]}),C&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.phone&&e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx(fr,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-gray-700 font-medium",children:I.phone})]}),I.email&&e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx(rn,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-gray-700 font-medium",children:I.email})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:q.length}),e.jsx("div",{className:"text-blue-100 text-xs",children:"Записей"})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:(P==null?void 0:P.lessonsCount)||0}),e.jsx("div",{className:"text-green-100 text-xs",children:"Проведено уроков"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:((ae=P==null?void 0:P.students)==null?void 0:ae.length)||0}),e.jsx("div",{className:"text-purple-100 text-xs",children:"Учеников"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:(P==null?void 0:P.rating)||0}),e.jsx("div",{className:"text-orange-100 text-xs",children:"Рейтинг"})]})]}),!_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),e.jsx("div",{className:"text-green-100 text-xs",children:"Посещено уроков"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),e.jsx("div",{className:"text-purple-100 text-xs",children:"Преподавателей"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[e.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),e.jsx("div",{className:"text-orange-100 text-xs",children:"Дней в системе"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"posts",label:"Записи",count:q.length},{id:"about",label:"О пользователе",count:null},{id:"lessons",label:_?"Расписание":"Мои уроки",count:0},{id:"reviews",label:"Отзывы",count:0}].map(re=>e.jsxs("button",{onClick:()=>R(re.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${D===re.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[re.label,re.count!==null&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:re.count})]},re.id))})}),e.jsxs("div",{className:"min-h-[400px]",children:[D==="posts"&&e.jsx("div",{className:"space-y-6",children:e.jsx(_3,{posts:q,currentUserId:(i==null?void 0:i.id)||"",currentUserName:(i==null?void 0:i.name)||"",currentUserAvatar:i==null?void 0:i.avatar,onCreatePost:l,onReaction:c,onComment:d,onShare:m,onBookmark:h,onEdit:x,onDelete:b,showCreateButton:B,title:`Записи ${(P==null?void 0:P.name)||I.name}`,showSearch:!0,showNotifications:!1,showTrending:!1,showBookmarks:!0})}),D==="about"&&e.jsxs("div",{className:"space-y-3",children:[(P==null?void 0:P.bio)&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-indigo-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"О пользователе"]}),e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-md p-2 border border-indigo-200/50",children:e.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line text-xs",children:P.bio})})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[(P==null?void 0:P.subjects)&&P.subjects.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Предметы"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:P.subjects.map((re,S)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:re},S))})]}),(P==null?void 0:P.grades)&&P.grades.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Классы"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:P.grades.map((re,S)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-0.5 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:re},S))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2.5",children:[(P==null?void 0:P.hourlyRate)&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-2.5 text-center shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-purple-900 mb-1.5 flex items-center justify-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-purple-500 to-violet-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Стоимость"]}),e.jsxs("div",{className:"text-base font-bold text-purple-700 bg-white/60 backdrop-blur-sm rounded-md py-1 px-1.5 border border-purple-200/50",children:[P.hourlyRate," ₽/час"]})]}),(P==null?void 0:P.formats)&&P.formats.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-orange-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-orange-500 to-amber-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Форматы"]}),e.jsx("div",{className:"space-y-1",children:P.formats.map((re,S)=>e.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-orange-200/50",children:[e.jsx(Wt,{className:"h-3 w-3 text-orange-600"}),e.jsx("span",{className:"text-orange-800 text-xs font-medium",children:z(re)})]},S))})]}),(P==null?void 0:P.durations)&&P.durations.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-cyan-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Длительность"]}),e.jsx("div",{className:"space-y-1",children:P.durations.map((re,S)=>e.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-cyan-200/50",children:[e.jsx(Wt,{className:"h-3 w-3 text-cyan-600"}),e.jsxs("span",{className:"text-cyan-800 text-xs font-medium",children:[re," минут"]})]},S))})]})]})]}),!_&&P&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[P.subjects&&P.subjects.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Интересуется предметами"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:P.subjects.map((re,S)=>e.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:re},S))})]}),P.grade&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Класс"]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-1 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:P.grade})]})]})]}),D==="lessons"&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qe,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:_?"Расписание пока не настроено":"Уроки пока не запланированы"}),e.jsx("p",{className:"text-gray-500",children:_?"Настройте расписание для проведения уроков":"Запишитесь на уроки к преподавателям"})]}),D==="reviews"&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(St,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),e.jsx("p",{className:"text-gray-500",children:"Отзывы о пользователе появятся здесь"})]})]})]})]})})};return n?e.jsx(te,{}):e.jsx(te,{})},A3=()=>{const{lessons:t,studentProfiles:r,createSlot:s,bookLesson:a}=nt(),{user:n}=Ye(),[i,o]=$.useState(),[l,c]=$.useState(!1),[d,m]=$.useState(!1),[h,x]=$.useState(null),[b,y]=$.useState({subject:"",date:"",startTime:"",endTime:"",duration:60,lessonType:"regular",format:"online",price:1e3,experience:"beginner",grades:[],goals:[]}),[u,j]=$.useState(!1),[v,f]=$.useState(""),[C,g]=$.useState(!1),[D,R]=$.useState(null),[I,B]=$.useState(null),_=t.filter(U=>U.teacherId===(n==null?void 0:n.id)),q={};_.forEach(U=>{q[U.studentId]||(q[U.studentId]={studentName:U.studentName,studentId:U.studentId,lessons:[]}),q[U.studentId].lessons.push(U)});const P=Object.values(q),V=(U,Y)=>{alert(`Чат с ${Y} открыт! Перейдите в раздел 'Чаты' для общения.`)},z=U=>{o(U),c(!0)},te=()=>{c(!1),o(null)},ae=U=>{R(U),g(!0)},re=async()=>{if(!(!n||!h)){j(!0),f("");try{await s({...b,teacherId:n.id,teacherName:n.name},h.id,h.name,{mode:"assign"}),m(!1)}catch{f("Ошибка при создании или бронировании слота")}finally{j(!1)}}},S=i?r[i.studentId]:void 0;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ученики"}),e.jsx("p",{className:"text-gray-600",children:"Здесь отображаются все ученики, которые бронировали у вас уроки, и история ваших занятий с ними"})]}),P.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(be,{className:"h-6 w-6 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет учеников"}),e.jsx("p",{className:"text-gray-600",children:"Ученики появятся здесь после бронирования уроков"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(U=>e.jsx("div",{className:"card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden cursor-pointer",onClick:()=>z(U),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:U.studentName})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-1",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Просмотреть записи",onClick:Y=>{Y.stopPropagation(),B(U.studentId)},children:e.jsx(Jt,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Подробнее о профиле",onClick:Y=>{Y.stopPropagation(),z(U)},children:e.jsx(Cd,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-md font-bold text-gray-800 mb-2 flex items-center",children:[e.jsx(qe,{className:"h-4 w-4 mr-1 text-blue-500"}),"Забронированные уроки"]}),U.lessons.length===0?e.jsx("div",{className:"text-gray-500 text-sm",children:"Нет уроков"}):e.jsx("ul",{className:"space-y-2",children:U.lessons.map(Y=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:Y.subject}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:[Y.date," ",Y.startTime,"-",Y.endTime]}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",Y.status==="completed"?"Завершен":"Запланирован",")"]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:O=>{O.stopPropagation(),V(U.studentId,U.studentName)},className:"p-1 text-blue-600 hover:bg-blue-50 rounded-full",title:"Чат с учеником",children:e.jsx(Re,{className:"h-4 w-4"})})})]},Y.id))})]})]})},U.studentId))}),l&&i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:te,title:"Закрыть",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[S!=null&&S.avatar&&S.avatar.trim()!==""?e.jsx("img",{src:S.avatar,alt:"avatar",className:"w-20 h-20 rounded-full object-cover mb-2",onError:U=>{var O;const Y=U.target;Y.style.display="none",(O=Y.nextElementSibling)==null||O.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center mb-2 ${S!=null&&S.avatar&&S.avatar.trim()!==""?"hidden":""}`,children:e.jsx(be,{className:"h-10 w-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.studentName})]}),e.jsxs("div",{className:"space-y-2",children:[(S==null?void 0:S.grade)&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"font-semibold mr-2",children:"Класс:"})," ",S.grade]}),(S==null?void 0:S.subjects)&&S.subjects.length>0&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"font-semibold mr-2",children:"Предметы:"})," ",S.subjects.join(", ")]}),(S==null?void 0:S.bio)&&e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold mr-2",children:"О себе:"})," ",S.bio]}),!S&&e.jsx("div",{className:"text-gray-400 text-sm",children:"Профиль не заполнен"}),e.jsx("button",{onClick:()=>ae({id:i.studentId,name:i.studentName}),className:"btn btn-primary mt-4",children:"Назначить урок"})]})]})}),d&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[e.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>m(!1),title:"Закрыть",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("h3",{children:["Назначить урок для ",h.name]}),e.jsxs("form",{className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",placeholder:"Предмет",value:b.subject,onChange:U=>y({...b,subject:U.target.value}),required:!0}),e.jsx("input",{type:"date",value:b.date,onChange:U=>y({...b,date:U.target.value}),required:!0}),e.jsx("input",{type:"time",value:b.startTime,onChange:U=>y({...b,startTime:U.target.value}),required:!0}),e.jsx("input",{type:"time",value:b.endTime,onChange:U=>y({...b,endTime:U.target.value}),required:!0}),e.jsx("input",{type:"number",placeholder:"Цена",value:b.price,onChange:U=>y({...b,price:Number(U.target.value)})}),e.jsxs("select",{value:b.lessonType,onChange:U=>y({...b,lessonType:U.target.value}),children:[e.jsx("option",{value:"regular",children:"Обычный"}),e.jsx("option",{value:"trial",children:"Пробный"})]}),e.jsxs("select",{value:b.format,onChange:U=>y({...b,format:U.target.value}),children:[e.jsx("option",{value:"online",children:"Онлайн"}),e.jsx("option",{value:"offline",children:"Оффлайн"})]}),e.jsxs("select",{value:b.experience,onChange:U=>y({...b,experience:U.target.value}),children:[e.jsx("option",{value:"beginner",children:"Начинающий"}),e.jsx("option",{value:"experienced",children:"Опытный"})]}),v&&e.jsx("div",{className:"text-red-500",children:v}),e.jsx("button",{type:"button",className:"btn btn-success mt-2",onClick:re,disabled:u,children:u?"Назначение...":"Назначить"})]})]})}),C&&D&&e.jsx(ur,{open:C,onClose:()=>g(!1),children:e.jsxs("div",{style:{minWidth:1100,minHeight:600,maxWidth:"98vw"},children:[e.jsxs("h2",{style:{marginBottom:16},children:["Назначить урок для ",D.name]}),e.jsx(Vc,{mode:"assign",student:D,onAssign:()=>g(!1)})]})}),I&&e.jsx(P3,{userId:I,onClose:()=>B(null),onMessage:U=>{B(null)},onBookLesson:U=>{B(null)},isModal:!0})]})},R3=({setActiveTab:t})=>{const{lessons:r,cancelLesson:s,rescheduleLesson:a,getOrCreateChat:n}=nt(),{user:i}=Ye(),[o,l]=$.useState(!1),[c,d]=$.useState(null),[m,h]=$.useState(""),[x,b]=$.useState(""),y=r.filter(_=>_.studentId===(i==null?void 0:i.id)),u=y.filter(_=>_.status==="scheduled"),j=y.filter(_=>_.status==="completed"),v=(_,q)=>{i&&n(i.id,_,i.name,q)},f=_=>{window.confirm("Вы уверены, что хотите отменить урок?")&&s(_)},C=()=>{c&&m&&x&&(a(c.id,m,x),l(!1),d(null),h(""),b(""))},g=_=>{d(_),h(_.date),b(_.startTime),l(!0)},D=_=>{switch(_){case"online":return e.jsx(Mt,{className:"h-4 w-4"});case"offline":return e.jsx(Nt,{className:"h-4 w-4"});case"mini-group":return e.jsx(Vs,{className:"h-4 w-4"});default:return e.jsx(Mt,{className:"h-4 w-4"})}},R=_=>{switch(_){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return _}},I=_=>_==="scheduled"?e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:[e.jsx(Rd,{className:"h-4 w-4 mr-2"}),"Запланирован"]}):e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-green-500 to-green-600 text-white shadow-sm",children:[e.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Завершен"]}),B=({lesson:_,isScheduled:q})=>e.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-4 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white opacity-10 rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white opacity-10 rounded-full translate-y-8 -translate-x-8"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:_.subject}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"h-4 w-4 text-blue-200"}),e.jsx("span",{className:"text-blue-100 text-sm font-medium",children:_.teacherName})]})]}),I(_.status)]}),e.jsxs("div",{className:"flex items-center space-x-3 text-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[D(_.format),e.jsx("span",{className:"text-xs font-medium",children:R(_.format)})]}),_.lessonType==="trial"&&e.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-400 bg-opacity-20 px-2 py-1 rounded-full",children:[e.jsx(St,{className:"h-3 w-3 text-yellow-300"}),e.jsx("span",{className:"text-yellow-200 text-xs font-medium",children:"Пробный"})]})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-md",children:e.jsx(qe,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Дата"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:_.date})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-md",children:e.jsx(Wt,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Время"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[_.startTime," - ",_.endTime]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-md",children:e.jsx(Id,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Длительность"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[_.duration," мин"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Стоимость"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[_.price,"₽"]})]})]}),q&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>v(_.teacherId,_.teacherName),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg text-sm font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Чат"})]}),_.format==="online"&&e.jsxs("button",{className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md transform hover:-translate-y-0.5",children:[e.jsx(Mt,{className:"h-4 w-4"}),e.jsx("span",{children:"Видеозвонок"})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>g(_),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg text-sm font-medium transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[e.jsx(el,{className:"h-3 w-3"}),e.jsx("span",{children:"Перенести"})]}),e.jsxs("button",{onClick:()=>f(_.id),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-all duration-200 border border-red-200 hover:border-red-300",children:[e.jsx(zr,{className:"h-3 w-3"}),e.jsx("span",{children:"Отменить"})]})]})]}),!q&&e.jsxs("div",{className:"flex items-center justify-center space-x-2 py-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx(Wr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-green-700 text-sm font-medium",children:"Урок успешно завершен"})]})]}),e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Мои уроки"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Управляйте вашими запланированными и завершенными уроками. Отслеживайте прогресс и достигайте новых высот в обучении."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:u.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Запланировано"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Wr,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:j.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Завершено"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sl,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-gray-900",children:y.length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Всего уроков"})]})]})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Запланированные уроки"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ваши предстоящие занятия"})]})]}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(_=>e.jsx(B,{lesson:_,isScheduled:!0},_.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(qe,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет запланированных уроков"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"Забронируйте свой первый урок на главной странице и начните свой путь к знаниям"}),e.jsxs("button",{onClick:()=>{console.log("🎯 Переход к главной странице для бронирования урока"),t("home")},className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[e.jsx(Ud,{className:"h-4 w-4"}),e.jsx("span",{children:"Забронировать урок"})]})]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Lt,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Завершенные уроки"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ваши достижения и пройденный материал"})]})]}),j.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(_=>e.jsx(B,{lesson:_,isScheduled:!1},_.id))}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-md border border-gray-100",children:[e.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Lt,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Нет завершенных уроков"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"После завершения уроков здесь будут отображаться ваши достижения и прогресс"}),e.jsxs("div",{className:"inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium",children:[e.jsx(tl,{className:"h-4 w-4"}),e.jsx("span",{children:"Достижения появятся здесь"})]})]})]}),e.jsx("div",{className:"text-center py-12 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl text-white shadow-xl",children:e.jsxs("div",{className:"max-w-xl mx-auto px-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Готовы к следующему уроку?"}),e.jsx("p",{className:"text-lg text-blue-100 mb-6",children:"Продолжайте обучение и достигайте новых высот вместе с нашими преподавателями"}),e.jsxs("button",{onClick:()=>{console.log("🔍 Переход к главной странице для поиска преподавателя"),t("home")},className:"inline-flex items-center space-x-2 px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[e.jsx(Md,{className:"h-5 w-5"}),e.jsx("span",{children:"Найти преподавателя"})]})]})})]}),o&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Перенести урок"}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Урок:"})," ",c.subject," с ",c.teacherName]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новая дата"}),e.jsx("input",{type:"date",value:m,onChange:_=>h(_.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новое время"}),e.jsx("input",{type:"time",value:x,onChange:_=>b(_.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-8",children:[e.jsx("button",{onClick:C,disabled:!m||!x,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Перенести урок"}),e.jsx("button",{onClick:()=>l(!1),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Отмена"})]})]})})})]})},I3=()=>{const{chats:t,sendMessage:r,sendMessageToUser:s,allUsers:a,setAllUsers:n,teacherProfiles:i,studentProfiles:o,lessons:l,deleteChat:c,markChatAsRead:d,clearChatMessages:m,archiveChat:h,unarchiveChat:x,getOrCreateChat:b,loadChatsFromServer:y}=nt(),{user:u}=Ye(),[j,v]=$.useState(null),[f,C]=$.useState(""),[g,D]=$.useState(""),[R,I]=$.useState(!1),[B,_]=$.useState(null),[q,P]=$.useState([]),[V,z]=$.useState(null),[te,ae]=$.useState(null),[re,S]=$.useState(!1),[U,Y]=$.useState(!1),[O,de]=$.useState(!1),[he,xe]=$.useState(!1),[fe,ye]=$.useState(!1),[X,ge]=$.useState(""),De=$.useRef(null),ee=$.useRef(null),{socketRef:we}=nt(),Ne=()=>{var L;(L=De.current)==null||L.scrollIntoView({behavior:"smooth"})};$.useEffect(()=>{Ne()},[j,t]),$.useEffect(()=>{u&&(console.log("ChatList: Loading chats for user:",u.id),y())},[u,y]),$.useEffect(()=>{if(t.length>0&&!j){const L=t.find(Q=>Q.participants.includes((u==null?void 0:u.id)||"")&&!Q.archived);L&&v(L.id)}},[t,j,u]),$.useEffect(()=>{var L;if(j&&u){const Q=t.find(N=>N.id===j);Q&&((L=Q.messages)!=null&&L.some(F=>F.senderId!==u.id&&!F.isRead))&&d(j)}},[j,t,u,d]);const Ee=L=>{let Q=a.find(N=>N.id===L);if(!Q){const N=i?i[L]:null;N&&(Q={id:L,role:"teacher",profile:N,avatar:N.avatar||"",name:N.name||"",email:N.email||"",nickname:""});const F=o?o[L]:null;if(!Q&&F&&(Q={id:L,role:"student",profile:F,avatar:F.avatar||"",name:F.name||"",email:F.email||"",nickname:""}),Q){const J=[...a,Q];n(J),localStorage.setItem("tutoring_users",JSON.stringify(J))}}return Q||null},ze=t.filter(L=>L.participants.includes((u==null?void 0:u.id)||""));console.log("🔍 ChatList DEBUG INFO:"),console.log("- Current user:",{id:u==null?void 0:u.id,name:u==null?void 0:u.name,role:u==null?void 0:u.role}),console.log("- All chats count:",t.length),console.log("- User chats count:",ze.length),t.length>0&&(console.log("- All chats details:"),t.forEach((L,Q)=>{var N;console.log(`  Chat ${Q+1}:`,{id:L.id,participants:L.participants,participantNames:L.participantNames,includesUser:L.participants.includes((u==null?void 0:u.id)||""),messagesCount:((N=L.messages)==null?void 0:N.length)||0})}));const Ze=ze.filter(L=>{if(L.archived&&!he||!L.archived&&he)return!1;const Q=L.participantNames.find(N=>N!==(u==null?void 0:u.name));return Q==null?void 0:Q.toLowerCase().includes(g.toLowerCase())});console.log("- Filtered chats count:",Ze.length),console.log("🔍 END DEBUG INFO");const G=j?t.find(L=>L.id===j):null,me=()=>{!f.trim()||!j||!u||(r(j,u.id,u.name,f.trim()),C(""),S(!1))},ue=(L,Q)=>{if(!X.trim()||!u)return;console.log("🔍 ChatList handleSendMessageToUser DEBUG:"),console.log("- Sender:",{id:u.id,name:u.name}),console.log("- Receiver:",{id:L,name:Q}),console.log("- Message:",X.trim());const N=s(u.id,u.name,L,Q,X.trim());console.log("- Chat created/opened with ID:",N),v(N),ge(""),ye(!1),console.log("🔍 END ChatList handleSendMessageToUser DEBUG")},_e=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),me())},T=L=>L.participantNames.find(Q=>Q!==(u==null?void 0:u.name))||"Неизвестный пользователь",H=L=>L.participants.find(Q=>Q!==(u==null?void 0:u.id))||"",W=L=>{try{const Q=new Date(L);return Fo(Q)?We(Q,"HH:mm",{locale:mt}):Wo(Q)?"Вчера":BC(Q)?We(Q,"EEEE",{locale:mt}):We(Q,"dd.MM.yyyy",{locale:mt})}catch{return""}},A=L=>{try{const Q=new Date(L);return Fo(Q)?We(Q,"HH:mm",{locale:mt}):Wo(Q)?"Вчера":We(Q,"dd.MM",{locale:mt})}catch{return""}},w=L=>{console.log("handleDeleteChat called with chatId:",L),console.log("Current chats in component:",t.length);const Q=t.find(F=>F.id===L),N=Q?T(Q):"пользователем";if(confirm(`Вы уверены, что хотите удалить чат с ${N}? Это действие нельзя отменить.`))try{console.log("User confirmed deletion. Deleting chat:",L),c(L),j===L&&(console.log("Removing selection from deleted chat"),v(null)),z(null),ae(null),setTimeout(()=>{console.log("Forcing state update after chat deletion"),z(null)},100),console.log("Chat deletion process completed")}catch(F){console.error("Error deleting chat:",F),alert("Ошибка при удалении чата. Попробуйте еще раз.")}else console.log("User cancelled chat deletion")},p=L=>{console.log("handleMarkAsRead called with chatId:",L);try{d(L),z(null),console.log("Chat marked as read successfully")}catch(Q){console.error("Error marking chat as read:",Q),alert("Ошибка при отметке чата как прочитанного.")}},k=L=>{var F;console.log("handleClearMessages called with chatId:",L);const Q=t.find(J=>J.id===L),N=((F=Q==null?void 0:Q.messages)==null?void 0:F.length)||0;if(N===0){alert("В этом чате нет сообщений для очистки."),z(null);return}if(confirm(`Вы уверены, что хотите очистить все ${N} сообщений в этом чате? Это действие нельзя отменить.`))try{console.log("Clearing messages for chat:",L),m(L),z(null),console.log("Messages cleared successfully")}catch(J){console.error("Error clearing messages:",J),alert("Ошибка при очистке сообщений.")}},E=L=>{console.log("handleArchiveChat called with chatId:",L);try{h(L),z(null),j===L&&v(null),console.log("Chat archived successfully")}catch(Q){console.error("Error archiving chat:",Q),alert("Ошибка при архивировании чата.")}},K=L=>{console.log("handleUnarchiveChat called with chatId:",L);try{x(L),z(null),console.log("Chat unarchived successfully")}catch(Q){console.error("Error unarchiving chat:",Q),alert("Ошибка при восстановлении чата.")}},ne=()=>{alert("Функция создания нового чата будет добавлена в следующем обновлении.")},Se=L=>{const Q=L.target.files;Q&&Q.length>0&&console.log("Files to upload:",Q),de(!1)},Me=L=>{console.log("handleShowProfile called with chatId:",L);try{const Q=t.find(N=>N.id===L);if(console.log("Found chat:",Q),Q){const N=H(Q);console.log("Other participant ID:",N),N?(_(N),I(!0),console.log("Profile modal opened for user:",N)):alert("Не удалось определить пользователя для показа профиля.")}else alert("Чат не найден.");z(null)}catch(Q){console.error("Error showing profile:",Q),alert("Ошибка при открытии профиля пользователя."),z(null)}},it=()=>{t.filter(Q=>{var N;return Q.participants.includes((u==null?void 0:u.id)||"")&&!Q.archived&&((N=Q.messages)==null?void 0:N.some(F=>F.senderId!==(u==null?void 0:u.id)&&!F.isRead))}).forEach(Q=>{d(Q.id)})};$.useEffect(()=>{const L=Q=>{const N=Q.target,F=N.closest('button[onClick*="setShowChatMenu"]'),J=N.closest(".chat-menu");V&&!F&&!J&&(console.log("Click outside menu detected, closing menu"),z(null))};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[V]);const or=t.filter(L=>{var Q;return L.participants.includes((u==null?void 0:u.id)||"")&&!L.archived&&((Q=L.messages)==null?void 0:Q.some(N=>N.senderId!==(u==null?void 0:u.id)&&!N.isRead))}).length;return e.jsxs("div",{className:"h-full bg-gray-50 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"МОИ ЧАТЫ"}),e.jsx("p",{className:"text-gray-600 text-xs",children:or>0?`${or} непрочитанных сообщений`:"Общайтесь с преподавателями и учениками"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[or>0&&e.jsx("button",{onClick:it,className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:"Отметить все как прочитанные"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ys,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>xe(!he),className:`px-3 py-1 text-sm rounded-lg transition-colors ${he?"bg-gray-200 text-gray-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:he?"Активные":"Архив"}),e.jsx("button",{onClick:ne,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Создать новый чат",children:e.jsx(xr,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden min-h-0",children:[e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col flex-shrink-0",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 space-y-2 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Поиск чатов...",value:g,onChange:L=>D(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("button",{onClick:()=>ye(!0),className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{children:"Новый чат"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:Ze.length>0?Ze.map(L=>{var ce,pe;const Q=H(L),N=Ee(Q),F=j===L.id,J=(ce=L.messages)==null?void 0:ce.some(le=>le.senderId!==(u==null?void 0:u.id)&&!le.isRead);return e.jsxs("div",{className:`relative p-4 hover:bg-gray-50 cursor-pointer transition-colors chat-menu ${F?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>v(L.id),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[N!=null&&N.avatar?e.jsx("img",{src:N.avatar,alt:"avatar",className:"h-12 w-12 rounded-full object-cover",onError:le=>{var ie;const Ce=le.target;Ce.style.display="none",(ie=Ce.nextElementSibling)==null||ie.classList.remove("hidden")}}):e.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:T(L).charAt(0).toUpperCase()})}),J&&e.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:((pe=L.messages)==null?void 0:pe.filter(le=>le.senderId!==(u==null?void 0:u.id)&&!le.isRead).length)||0})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:[T(L),L.archived&&e.jsx("span",{className:"ml-2 text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Архив"})]}),L.lastMessage&&e.jsx("span",{className:"text-xs text-gray-400",children:A(L.lastMessage.timestamp)})]}),L.lastMessage?e.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:L.lastMessage.content}):e.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Нет сообщений"})]}),e.jsx("button",{onClick:le=>{console.log("Menu button clicked for chat:",L.id),le.stopPropagation(),z(V===L.id?null:L.id)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qo,{className:"w-4 h-4"})})]}),V===L.id&&e.jsxs("div",{className:"absolute right-2 top-12 bg-white border border-gray-200 rounded-lg shadow-xl py-1 z-50 min-w-[180px]",children:[e.jsxs("button",{onClick:le=>{console.log("Profile button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),Me(L.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"Профиль"})]}),e.jsxs("button",{onClick:le=>{console.log("Mark as read button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),p(L.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[e.jsx(hr,{className:"w-4 h-4"}),e.jsx("span",{children:"Отметить как прочитанное"})]}),e.jsxs("button",{onClick:le=>{console.log("Archive button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),E(L.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[e.jsx(si,{className:"w-4 h-4"}),e.jsx("span",{children:"Архивировать"})]}),L.archived&&e.jsxs("button",{onClick:le=>{console.log("Unarchive button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),K(L.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[e.jsx(si,{className:"w-4 h-4"}),e.jsx("span",{children:"Восстановить"})]}),e.jsxs("button",{onClick:le=>{console.log("Clear messages button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),k(L.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{children:"Очистить сообщения"})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:le=>{console.log("Delete chat button clicked for chat:",L.id),le.preventDefault(),le.stopPropagation(),w(L.id)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2 transition-colors",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{children:"Удалить чат"})]})]})]},L.id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(Re,{className:"w-16 h-16 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Нет чатов"}),e.jsx("p",{className:"text-sm text-center",children:"Начните общение с преподавателями или учениками"})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white min-h-0",children:G?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const L=H(G),Q=Ee(L);return Q!=null&&Q.avatar?e.jsx("img",{src:Q.avatar,alt:"avatar",className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:T(G).charAt(0).toUpperCase()})})})(),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:T(G)}),e.jsx("p",{className:"text-sm text-gray-500",children:(()=>{const L=H(G),Q=Ee(L);return(Q==null?void 0:Q.role)==="teacher"?"Преподаватель":"Ученик"})()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(fr,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Mt,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{const L=H(G);_(L),I(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(be,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 min-h-0",children:[G.messages&&G.messages.length>0?G.messages.map(L=>e.jsx("div",{className:`flex ${L.senderId===(u==null?void 0:u.id)?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${L.senderId===(u==null?void 0:u.id)?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[e.jsx("p",{className:"text-sm",children:L.content}),e.jsxs("div",{className:`flex items-center justify-end mt-1 space-x-1 ${L.senderId===(u==null?void 0:u.id)?"text-blue-100":"text-gray-400"}`,children:[e.jsx("span",{className:"text-xs",children:W(L.timestamp)}),L.senderId===(u==null?void 0:u.id)&&e.jsx(vd,{className:"w-3 h-3"})]})]})},L.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(Re,{className:"w-16 h-16 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Начните общение"}),e.jsx("p",{className:"text-sm text-center",children:"Отправьте первое сообщение"})]}),e.jsx("div",{ref:De})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{value:f,onChange:L=>{C(L.target.value),S(L.target.value.length>0)},onKeyPress:_e,placeholder:"Введите сообщение...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),e.jsxs("div",{className:"absolute right-3 bottom-3 flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Y(!U),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(sn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>de(!O),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ai,{className:"w-5 h-5"})})]})]}),e.jsx("button",{onClick:me,disabled:!f.trim(),className:"p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(Zo,{className:"w-5 h-5"})})]}),O&&e.jsx("div",{className:"mt-2 p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>{var L;return(L=ee.current)==null?void 0:L.click()},className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(ai,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Файл"})]}),e.jsxs("button",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(Ed,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Голосовое"})]})]})}),e.jsx("input",{ref:ee,type:"file",multiple:!0,onChange:Se,className:"hidden"})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[e.jsx(Re,{className:"w-24 h-24 mb-6 text-gray-300"}),e.jsx("h2",{className:"text-2xl font-medium mb-2",children:"Выберите чат"}),e.jsx("p",{className:"text-center",children:"Выберите чат из списка слева, чтобы начать общение"})]})})]}),R&&B&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Профиль пользователя"}),e.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(en,{className:"w-5 h-5"})})]}),(()=>{var Q;const L=Ee(B);return L?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[L.avatar?e.jsx("img",{src:L.avatar,alt:"avatar",className:"h-16 w-16 rounded-full object-cover"}):e.jsx("div",{className:"h-16 w-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-lg",children:((Q=L.name)==null?void 0:Q.charAt(0).toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:L.name||"Неизвестный пользователь"}),e.jsx("p",{className:"text-gray-500",children:L.role==="teacher"?"Преподаватель":"Ученик"}),L.email&&e.jsx("p",{className:"text-sm text-gray-400",children:L.email})]})]}),L.profile&&e.jsxs("div",{className:"space-y-4",children:[L.profile.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"О себе"}),e.jsx("p",{className:"text-gray-600",children:L.profile.bio})]}),L.profile.subjects&&L.profile.subjects.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Предметы"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.profile.subjects.map((N,F)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:N},F))})]}),L.profile.experience&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Опыт"}),e.jsxs("p",{className:"text-gray-600",children:[L.profile.experience==="beginner"&&"Начинающий",L.profile.experience==="experienced"&&"Опытный",L.profile.experience==="professional"&&"Профессионал"]})]}),L.profile.city&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Город"}),e.jsx("p",{className:"text-gray-600",children:L.profile.city})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>{I(!1)},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Позвонить"})]}),e.jsxs("button",{onClick:()=>{I(!1)},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Видео"})]})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Профиль пользователя не найден"})})})()]})})}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Новый чат"}),e.jsx("button",{onClick:()=>ye(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qe,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сообщение"}),e.jsx("textarea",{value:X,onChange:L=>ge(L.target.value),placeholder:"Введите ваше сообщение...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Выберите получателя"}),e.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-300 rounded-lg",children:a.filter(L=>L.id!==(u==null?void 0:u.id)).map(L=>e.jsxs("button",{onClick:()=>ue(L.id,L.name),className:"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:L.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:L.name}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:L.role==="teacher"?"Преподаватель":"Ученик"})]})]},L.id))})]})]})]})})]})},L3=()=>{var ge,De,ee,we,Ne,Ee,ze,Ze,G,me,ue,_e,T,H,W,A,w;const{user:t,updateProfile:r}=Ye(),{updateStudentProfile:s,updateTeacherProfile:a,lessons:n,posts:i,createPost:o,addReaction:l,addComment:c,sharePost:d,bookmarkPost:m,editPost:h,deletePost:x}=nt(),[b,y]=$.useState(!1),[u,j]=$.useState({grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""}),[v,f]=$.useState({subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}),[C,g]=$.useState(!1),[D,R]=$.useState(!1),[I,B]=$.useState(!1),[_,q]=$.useState(!1),[P]=$.useState([{id:1,avatar:((ge=t==null?void 0:t.profile)==null?void 0:ge.avatar)||"",name:(t==null?void 0:t.name)||""}]),[V,z]=$.useState(!1),[te,ae]=$.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),re=["Математика","Русский язык","Английский язык"],S=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],U=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],Y=["beginner","experienced","professional"],O=[45,60],de=["online","offline","mini-group"];$.useEffect(()=>{if(t!=null&&t.profile)if(t.role==="student"){const p=t.profile;j({...u,...p,goals:p.goals||[],interests:p.interests||[],preferredFormats:p.preferredFormats||[],preferredDurations:p.preferredDurations||[]})}else{const p=t.profile;f({...v,...p,formats:p.formats||[],subjects:p.subjects||[],grades:p.grades||[],goals:p.goals||[],lessonTypes:p.lessonTypes||[],durations:p.durations||[],education:p.education||{university:"",degree:"",graduationYear:void 0,courses:[]}})}else if(t&&!t.profile){const p=t.role==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,teacherType:"private",education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""};r(p)}},[t]);const he=()=>{if(!t)return;const p=t.role==="student"?u:v;r(p),t.role==="student"?s(t.id,u):t.role==="teacher"&&a(t.id,{...v,name:t.name,email:t.email}),y(!1),alert("Профиль сохранен!")},xe=p=>{switch(p){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return p}};let fe=0,ye=0;if(t&&t.role==="student"&&Array.isArray(n)){const p=n.filter(k=>k.studentId===t.id);fe=p.length,ye=Array.from(new Set(p.map(k=>k.teacherId))).length}if(!t)return null;const X=p=>{var E;const k=(E=p.target.files)==null?void 0:E[0];if(k){const K=new FileReader;K.onload=ne=>{var Me;const Se=(Me=ne.target)==null?void 0:Me.result;if(t.role==="student"){const it={...u,avatar:Se};j(it),r(it),s(t.id,it)}else{const it={...v,avatar:Se};f(it),r(it),a(t.id,{...it,name:t.name,email:t.email})}},K.readAsDataURL(k)}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center overflow-hidden shadow-lg",children:(De=t.profile)!=null&&De.avatar?e.jsx("img",{src:t.profile.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):e.jsx(be,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t?t.name:""}),t&&t.nickname&&e.jsxs("span",{className:"text-gray-400 text-sm",children:["@",t.nickname]})]}),t&&t.role==="student"&&e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-500 mr-1"}),fe]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Пройдено уроков"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[e.jsx(be,{className:"w-5 h-5 text-green-500 mr-1"}),ye]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Учителей"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{className:"btn-primary text-sm px-3 py-2",onClick:()=>y(!0),children:"Редактировать"}),e.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-blue-600 rounded-full p-2 shadow transition-colors duration-150 focus:outline-none",style:{width:36,height:36},"aria-label":"Настройки",onClick:()=>R(!0),children:e.jsx(Ys,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:e.jsx("div",{className:"flex-1 space-y-1"})})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow p-5 mb-6 card-gradient",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"О себе"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed mb-4 text-sm",children:t.role==="student"?u.bio||"—":((ee=t.profile)==null?void 0:ee.bio)||"—"}),t.role==="student"&&e.jsxs("div",{className:"space-y-3",children:[u.subjects&&u.subjects.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Предметы:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.subjects.map((p,k)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:p},k))})]}),(u.age||u.school||u.city)&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:[u.age&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Возраст:"}),e.jsxs("span",{className:"text-sm text-gray-900 ml-1",children:[u.age," лет"]})]}),u.school&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Школа:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:u.school})]}),u.city&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Город:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:u.city})]})]}),u.goals&&u.goals.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Цели обучения:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.goals.map((p,k)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full",children:p},k))})]}),u.interests&&u.interests.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Интересы:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.interests.map((p,k)=>e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:p},k))})]}),(u.learningStyle||u.experience)&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[u.learningStyle&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Стиль обучения:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:u.learningStyle==="visual"?"Визуальный":u.learningStyle==="auditory"?"Аудиальный":u.learningStyle==="kinesthetic"?"Кинестетический":"Смешанный"})]}),u.experience&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Уровень:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:u.experience==="beginner"?"Начинающий":u.experience==="intermediate"?"Средний":"Продвинутый"})]})]}),(u.preferredFormats&&u.preferredFormats.length>0||u.preferredDurations&&u.preferredDurations.length>0)&&e.jsxs("div",{className:"space-y-2",children:[u.preferredFormats&&u.preferredFormats.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Форматы:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.preferredFormats.map((p,k)=>e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full",children:p==="online"?"Онлайн":p==="offline"?"Оффлайн":"Мини-группа"},k))})]}),u.preferredDurations&&u.preferredDurations.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Длительность:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:u.preferredDurations.map((p,k)=>e.jsxs("span",{className:"bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[p," мин"]},k))})]})]})]}),t.role==="teacher"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Предметы:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:((Ne=(we=t.profile)==null?void 0:we.subjects)==null?void 0:Ne.join(", "))||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Классы:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:((ze=(Ee=t.profile)==null?void 0:Ee.grades)==null?void 0:ze.join(", "))||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Страна:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:((Ze=t.profile)==null?void 0:Ze.country)||"—"})]}),((G=t.profile)==null?void 0:G.experience)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Опыт:"}),e.jsx("span",{className:"text-sm text-gray-900 ml-1",children:t.profile.experience})]})]})]}),e.jsxs(ur,{open:C,onClose:()=>g(!1),children:[e.jsx("div",{className:"text-base font-bold mb-2",children:"Контактная информация"}),e.jsxs("div",{className:"mb-2 text-sm",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",t.email]})]}),e.jsx(ur,{open:D,onClose:()=>R(!1),children:e.jsxs("div",{className:"w-[320px] max-w-full",children:[e.jsx("div",{className:"text-lg font-bold mb-4 text-center",children:"Настройки"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{R(!1),B(!0)},children:[e.jsx(Fr,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"flex-1",children:"Push-уведомления"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(Jo,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"flex-1",children:"Конфиденциальность"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{R(!1),q(!0)},children:[e.jsx(be,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"flex-1",children:"Аккаунт"})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Od,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"flex-1",children:"Тема"})]}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${te==="dark"?"bg-gray-900":"bg-gray-300"}`,onClick:()=>{const p=te==="dark"?"light":"dark";ae(p),p==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",p)},"aria-pressed":te==="dark",type:"button",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${te==="dark"?"translate-x-5":"translate-x-1"}`})})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(wd,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"flex-1",children:"Память"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(Td,{className:"w-5 h-5 text-indigo-500"}),e.jsx("span",{className:"flex-1",children:"Устройства"})]}),e.jsx("div",{className:"border-t my-2"}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"flex-1",children:"База знаний"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(Re,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"flex-1",children:"Поддержка"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(Jt,{className:"w-5 h-5 text-blue-700"}),e.jsx("span",{className:"flex-1",children:"Документация"})]}),e.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[e.jsx(St,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"flex-1",children:"Оценить приложение"})]})]})]})}),e.jsx(ur,{open:I,onClose:()=>B(!1),children:e.jsxs("div",{className:"w-[340px] max-w-full",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>B(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:e.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[e.jsx("path",{d:"M19 12H5"}),e.jsx("path",{d:"m12 19-7-7 7-7"})]})}),e.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Уведомления"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"СООБЩЕНИЯ"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[e.jsx(Ot,{label:"Личные сообщения"}),e.jsx(Ot,{label:"Инфобот"}),e.jsx(Ot,{label:"Лиды"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПУБЛИКАЦИИ ОТ ПОДПИСОК"}),e.jsx("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:e.jsx(Ot,{label:"Новые публикации"})}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПОДПИСЧИКИ И ДЕЛОВЫЕ СВЯЗИ"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[e.jsx(Ot,{label:"Новые подписчики"}),e.jsx(Ot,{label:"Установлена деловая связь"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"МАРКЕТСПЕЙС"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[e.jsx(Ot,{label:"Отклики"}),e.jsx(Ot,{label:"Рекомендации"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ГОСЗАКУПКИ"}),e.jsx("div",{className:"bg-gray-50 rounded-xl mb-2 overflow-hidden",children:e.jsx(Ot,{label:"Подборка тендеров по ИНН"})})]})}),e.jsx(ur,{open:_,onClose:()=>q(!1),children:e.jsxs("div",{className:"w-[340px] max-w-full flex flex-col min-h-[340px]",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{onClick:()=>q(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:e.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[e.jsx("path",{d:"M19 12H5"}),e.jsx("path",{d:"m12 19-7-7 7-7"})]})}),e.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Аккаунт"})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"НОМЕР ТЕЛЕФОНА"}),e.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[e.jsx("span",{className:"text-sm text-gray-900",children:"Изменить номер"}),e.jsx("span",{className:"text-gray-400 text-sm",children:t.phone||"+7 (999) 300-18-02"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})]}),e.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ЭЛЕКТРОННАЯ ПОЧТА"}),e.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[e.jsx("span",{className:"text-sm text-gray-900",children:"Изменить эл. почту"}),e.jsx("span",{className:"text-gray-400 text-sm truncate max-w-[120px]",children:t.email}),e.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 18l6-6-6-6"})})]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{className:"w-full mt-8 mb-2 py-3 rounded-xl bg-red-50 text-red-600 font-bold text-base hover:bg-red-100 transition",children:"Удалить аккаунт"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold text-base",children:"Истории"}),e.jsx("button",{className:"text-blue-500 text-xs font-medium hover:underline",onClick:()=>alert("Скоро можно будет добавлять истории!"),children:"Добавить"})]}),e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[e.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[e.jsxs("div",{className:"relative h-14 w-14 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 flex items-center justify-center overflow-hidden border-2 border-blue-400 group-hover:scale-105 transition",children:[(t.role==="student"?u.avatar:(me=t.profile)!=null&&me.avatar)?e.jsx("img",{src:t.role==="student"?u.avatar:(ue=t.profile)==null?void 0:ue.avatar,alt:"avatar",className:"h-14 w-14 object-cover rounded-full"}):e.jsx(be,{className:"h-7 w-7 text-white"}),e.jsx("span",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs border-2 border-white",children:"+"})]}),e.jsx("span",{className:"text-xs mt-1 text-gray-700",children:"Ваша история"})]}),P.map(p=>e.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[e.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-tr from-pink-400 to-yellow-400 flex items-center justify-center overflow-hidden border-2 border-pink-400 group-hover:scale-105 transition",children:p.avatar?e.jsx("img",{src:p.avatar,alt:p.name,className:"h-14 w-14 object-cover rounded-full"}):e.jsx(be,{className:"h-7 w-7 text-white"})}),e.jsx("span",{className:"text-xs mt-1 text-gray-700 truncate max-w-[60px]",children:p.name})]},p.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"font-bold text-base",children:"Мои записи"}),e.jsxs("button",{onClick:()=>z(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xr,{className:"w-4 h-4"}),e.jsx("span",{children:"Создать запись"})]})]}),V&&e.jsx("div",{className:"mb-6",children:e.jsx(Jn,{onSubmit:p=>{o(p),z(!1)},onCancel:()=>z(!1),userName:(t==null?void 0:t.name)||"Пользователь",userAvatar:t==null?void 0:t.avatar})}),e.jsx("div",{className:"space-y-4",children:i.filter(p=>p.userId===(t==null?void 0:t.id)).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"У вас пока нет записей"}),e.jsx("p",{className:"text-gray-500",children:"Создайте первую запись!"})]}):i.filter(p=>p.userId===(t==null?void 0:t.id)).map(p=>e.jsx(Za,{post:p,onReaction:l,onComment:c,onShare:d,onBookmark:m,onEdit:h,onDelete:x},p.id))})]}),e.jsx(ur,{open:b,onClose:()=>y(!1),children:e.jsx("div",{className:"w-[720px] max-w-full max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-8 p-4",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"h-20 w-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center overflow-hidden",children:(t.role==="student"?u.avatar:v.avatar)?e.jsx("img",{src:t.role==="student"?u.avatar:v.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):e.jsx(be,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"btn-primary cursor-pointer",children:[e.jsx(Ld,{className:"h-4 w-4"}),e.jsx("span",{children:"Загрузить фото"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:X})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Рекомендуемый размер: 200x200px"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),e.jsx("input",{type:"text",value:t==null?void 0:t.name,disabled:!0,className:"input-modern w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Никнейм"}),e.jsx("input",{type:"text",value:`@${t==null?void 0:t.nickname}`,disabled:!0,className:"input-modern w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t==null?void 0:t.email,disabled:!0,className:"input-modern w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),e.jsx("input",{type:"tel",value:(t==null?void 0:t.phone)||"",onChange:p=>{if(t)try{const k=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),E=k.findIndex(K=>K.id===t.id);E!==-1&&(k[E].phone=p.target.value,localStorage.setItem("tutoring_users",JSON.stringify(k)))}catch{}},className:"input-modern w-full",placeholder:"+7 (999) 123-45-67"})]})]}),t.role==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предметы, которые вы преподаете"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:re.map(p=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.subjects.includes(p),onChange:k=>{k.target.checked?f({...v,subjects:[...v.subjects,p]}):f({...v,subjects:v.subjects.filter(E=>E!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Классы, с которыми работаете"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:S.map(p=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.grades.includes(p),onChange:k=>{k.target.checked?f({...v,grades:[...v.grades,p]}):f({...v,grades:v.grades.filter(E=>E!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавания"}),e.jsx("select",{value:v.experience,onChange:p=>f({...v,experience:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Y.map(p=>e.jsx("option",{value:p,children:xe(p)},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип преподавателя"}),e.jsxs("select",{value:v.teacherType||"private",onChange:p=>f({...v,teacherType:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"private",children:"Частный преподаватель"}),e.jsx("option",{value:"school",children:"Преподаватель школы"}),e.jsx("option",{value:"both",children:"Частный + Школа"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),e.jsx("input",{type:"number",value:v.age||"",onChange:p=>f({...v,age:p.target.value?Number(p.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"18",max:"100",placeholder:"Укажите возраст"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Лет опыта"}),e.jsx("input",{type:"number",value:v.experienceYears||"",onChange:p=>f({...v,experienceYears:p.target.value?Number(p.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",max:"50",placeholder:"Количество лет"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стоимость часа (₽)"}),e.jsx("input",{type:"number",value:v.hourlyRate,onChange:p=>f({...v,hourlyRate:Number(p.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели занятий"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(p=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.goals.includes(p),onChange:k=>{k.target.checked?f({...v,goals:[...v.goals,p]}):f({...v,goals:v.goals.filter(E=>E!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность уроков"}),e.jsx("div",{className:"flex space-x-4",children:O.map(p=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.durations.includes(p),onChange:k=>{k.target.checked?f({...v,durations:[...v.durations,p]}):f({...v,durations:v.durations.filter(E=>E!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[p," мин"]})]},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Форматы проведения"}),e.jsx("div",{className:"flex space-x-4",children:de.map(p=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((k=v.formats)==null?void 0:k.includes(p))||!1,onChange:E=>{E.target.checked?f({...v,formats:[...v.formats||[],p]}):f({...v,formats:(v.formats||[]).filter(K=>K!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p==="online"?"Онлайн":p==="offline"?"Оффлайн":"Мини-группа"})]},p)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.offlineAvailable,onChange:p=>f({...v,offlineAvailable:p.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Провожу оффлайн занятия"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:v.overbookingEnabled,onChange:p=>f({...v,overbookingEnabled:p.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Участвую в овербукинге"})]})})]})]}),v.offlineAvailable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),e.jsx("input",{type:"text",value:v.city,onChange:p=>f({...v,city:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"О себе"}),e.jsx("textarea",{value:t.role==="student"?u.bio:v.bio,onChange:p=>{t.role==="student"?j({...u,bio:p.target.value}):f({...v,bio:p.target.value})},rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Расскажите о себе..."})]}),t.role==="student"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Дополнительная информация"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предметы, которые изучаете"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:re.map(p=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((k=u.subjects)==null?void 0:k.includes(p))||!1,onChange:E=>{E.target.checked?j({...u,subjects:[...u.subjects||[],p]}):j({...u,subjects:(u.subjects||[]).filter(K=>K!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),e.jsx("input",{type:"number",value:u.age||"",onChange:p=>j({...u,age:p.target.value?Number(p.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"5",max:"25",placeholder:"Укажите возраст"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Школа"}),e.jsx("input",{type:"text",value:u.school||"",onChange:p=>j({...u,school:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название школы"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),e.jsx("input",{type:"text",value:u.city||"",onChange:p=>j({...u,city:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваш город"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон"}),e.jsx("input",{type:"tel",value:u.phone||"",onChange:p=>j({...u,phone:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя родителя"}),e.jsx("input",{type:"text",value:u.parentName||"",onChange:p=>j({...u,parentName:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Имя родителя"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон родителя"}),e.jsx("input",{type:"tel",value:u.parentPhone||"",onChange:p=>j({...u,parentPhone:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели обучения"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(p=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((k=u.goals)==null?void 0:k.includes(p))||!1,onChange:E=>{E.target.checked?j({...u,goals:[...u.goals||[],p]}):j({...u,goals:(u.goals||[]).filter(K=>K!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Интересы и хобби"}),e.jsx("textarea",{value:((_e=u.interests)==null?void 0:_e.join(", "))||"",onChange:p=>j({...u,interests:p.target.value.split(",").map(k=>k.trim()).filter(k=>k)}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Напишите через запятую: спорт, музыка, рисование..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стиль обучения"}),e.jsxs("select",{value:u.learningStyle||"mixed",onChange:p=>j({...u,learningStyle:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"visual",children:"Визуальный"}),e.jsx("option",{value:"auditory",children:"Аудиальный"}),e.jsx("option",{value:"kinesthetic",children:"Кинестетический"}),e.jsx("option",{value:"mixed",children:"Смешанный"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Уровень знаний"}),e.jsxs("select",{value:u.experience||"beginner",onChange:p=>j({...u,experience:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"beginner",children:"Начинающий"}),e.jsx("option",{value:"intermediate",children:"Средний"}),e.jsx("option",{value:"advanced",children:"Продвинутый"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемые форматы занятий"}),e.jsx("div",{className:"flex space-x-4",children:de.map(p=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((k=u.preferredFormats)==null?void 0:k.includes(p))||!1,onChange:E=>{E.target.checked?j({...u,preferredFormats:[...u.preferredFormats||[],p]}):j({...u,preferredFormats:(u.preferredFormats||[]).filter(K=>K!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p==="online"?"Онлайн":p==="offline"?"Оффлайн":"Мини-группа"})]},p)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемая длительность занятий"}),e.jsx("div",{className:"flex space-x-4",children:O.map(p=>{var k;return e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((k=u.preferredDurations)==null?void 0:k.includes(p))||!1,onChange:E=>{E.target.checked?j({...u,preferredDurations:[...u.preferredDurations||[],p]}):j({...u,preferredDurations:(u.preferredDurations||[]).filter(K=>K!==p)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[p," мин"]})]},p)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Часовой пояс"}),e.jsx("input",{type:"text",value:u.timeZone||"",onChange:p=>j({...u,timeZone:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"UTC+3 (Москва)"})]})]})}),t.role==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Образование"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Университет"}),e.jsx("input",{type:"text",value:((T=v.education)==null?void 0:T.university)||"",onChange:p=>f({...v,education:{...v.education,university:p.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название университета"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Специальность/Степень"}),e.jsx("input",{type:"text",value:((H=v.education)==null?void 0:H.degree)||"",onChange:p=>f({...v,education:{...v.education,degree:p.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваша специальность"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Год окончания"}),e.jsx("input",{type:"number",value:((W=v.education)==null?void 0:W.graduationYear)||"",onChange:p=>f({...v,education:{...v.education,graduationYear:p.target.value?Number(p.target.value):void 0}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год окончания"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Курсы и сертификаты"}),e.jsxs("div",{className:"space-y-4",children:[(w=(A=v.education)==null?void 0:A.courses)==null?void 0:w.map((p,k)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название курса"}),e.jsx("input",{type:"text",value:p.name,onChange:E=>{var ne;const K=[...((ne=v.education)==null?void 0:ne.courses)||[]];K[k]={...p,name:E.target.value},f({...v,education:{...v.education,courses:K}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название курса"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Учреждение"}),e.jsx("input",{type:"text",value:p.institution,onChange:E=>{var ne;const K=[...((ne=v.education)==null?void 0:ne.courses)||[]];K[k]={...p,institution:E.target.value},f({...v,education:{...v.education,courses:K}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название учреждения"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Год прохождения"}),e.jsx("input",{type:"number",value:p.year,onChange:E=>{var ne;const K=[...((ne=v.education)==null?void 0:ne.courses)||[]];K[k]={...p,year:Number(E.target.value)},f({...v,education:{...v.education,courses:K}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ссылка на сертификат"}),e.jsx("input",{type:"url",value:p.certificate||"",onChange:E=>{var ne;const K=[...((ne=v.education)==null?void 0:ne.courses)||[]];K[k]={...p,certificate:E.target.value},f({...v,education:{...v.education,courses:K}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/certificate.pdf"})]})]}),e.jsx("button",{type:"button",onClick:()=>{var K,ne;const E=((ne=(K=v.education)==null?void 0:K.courses)==null?void 0:ne.filter((Se,Me)=>Me!==k))||[];f({...v,education:{...v.education,courses:E}})},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Удалить курс"})]},k)),e.jsxs("button",{type:"button",onClick:()=>{var k;const p={name:"",institution:"",year:new Date().getFullYear(),certificate:""};f({...v,education:{...v.education,courses:[...((k=v.education)==null?void 0:k.courses)||[],p]}})},className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx(xr,{className:"h-5 w-5"}),"Добавить курс"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsxs("button",{onClick:he,className:"btn-primary flex items-center gap-2",children:[e.jsx(Pd,{className:"h-5 w-5"}),e.jsx("span",{children:"Сохранить профиль"})]}),e.jsx("button",{onClick:()=>y(!1),className:"btn-secondary",children:"Отмена"})]})]})})})]})},Ot=({label:t})=>{const[r,s]=$.useState(!0);return e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b last:border-b-0",children:[e.jsx("span",{className:"text-sm text-gray-900",children:t}),e.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${r?"bg-green-500":"bg-gray-300"}`,onClick:()=>s(a=>!a),"aria-pressed":r,type:"button",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${r?"translate-x-5":"translate-x-1"}`})})]})},F3=()=>{const[t,r]=$.useState(null),[s,a]=$.useState(!0),[n,i]=$.useState(!1);try{const{user:o}=Ye(),[l,c]=$.useState((o==null?void 0:o.role)==="teacher"?"slots":"home");if($.useEffect(()=>{if(o&&!n){const m=o.role==="teacher"?"slots":"home";c(m),i(!0)}a(!1)},[o,n]),s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Загрузка приложения..."})]})});if(!o)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Добро пожаловать в Nauchi"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Платформа для репетиторов и учеников"}),e.jsx(Bd,{onSuccess:()=>{}})]})});const d=()=>{try{switch(l){case"home":return o.role==="student"?e.jsx(Ma,{setActiveTab:c}):e.jsx(_a,{});case"slots":return o.role==="teacher"?e.jsx(_a,{}):e.jsx(Ma,{setActiveTab:c});case"calendar":return o.role==="student"?e.jsx(Yc,{onClose:()=>c("home")}):e.jsx(Vc,{});case"lessons":return o.role==="student"?e.jsx(R3,{setActiveTab:c}):null;case"students":return o.role==="teacher"?e.jsx(A3,{}):null;case"chats":return e.jsx(I3,{});case"profile":return e.jsx(L3,{});default:return o.role==="student"?e.jsx(Ma,{setActiveTab:c}):e.jsx(_a,{})}}catch(m){return console.error("Error rendering content:",m),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки контента"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Попробуйте перезагрузить страницу"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить"})]})})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Hd,{activeTab:l,onTabChange:c}),e.jsx("main",{className:l==="chats"?"h-[calc(100vh-64px)]":"container mx-auto px-4 py-8",children:d()})]})}catch(o){return console.error("Error in AppContent:",o),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Произошла ошибка при загрузке приложения"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить страницу"})]})})}},W3=()=>e.jsx("div",{className:"App",children:e.jsx(hd,{children:e.jsx(fd,{children:e.jsxs(Jc,{children:[e.jsx(ei,{path:"/teacher/:teacherId",element:e.jsx(qc,{teacher:{},onClose:()=>{},onBookLesson:()=>{}})}),e.jsx(ei,{path:"*",element:e.jsx(F3,{})})]})})})});Yo(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(Qc,{children:e.jsx(W3,{})})}));
