import{r as N,a as sd,g as ft,R as _,c as dt,b as Ko}from"./vendor-tAaa2TlE.js";import{l as Xo}from"./socket-TjCxX7sJ.js";import{R as ad,a as ni,B as nd}from"./router-Skg1zGfq.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var Jo={exports:{}},Bs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id=N,od=Symbol.for("react.element"),ld=Symbol.for("react.fragment"),cd=Object.prototype.hasOwnProperty,dd=id.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ud={key:!0,ref:!0,__self:!0,__source:!0};function Qo(e,r,s){var a,n={},i=null,o=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(o=r.ref);for(a in r)cd.call(r,a)&&!ud.hasOwnProperty(a)&&(n[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:od,type:e,key:i,ref:o,props:n,_owner:dd.current}}Bs.Fragment=ld;Bs.jsx=Qo;Bs.jsxs=Qo;Jo.exports=Bs;var t=Jo.exports,Zo,ii=sd;Zo=ii.createRoot,ii.hydrateRoot;const We=[];for(let e=0;e<256;++e)We.push((e+256).toString(16).slice(1));function md(e,r=0){return(We[e[r+0]]+We[e[r+1]]+We[e[r+2]]+We[e[r+3]]+"-"+We[e[r+4]]+We[e[r+5]]+"-"+We[e[r+6]]+We[e[r+7]]+"-"+We[e[r+8]]+We[e[r+9]]+"-"+We[e[r+10]]+We[e[r+11]]+We[e[r+12]]+We[e[r+13]]+We[e[r+14]]+We[e[r+15]]).toLowerCase()}let ga;const hd=new Uint8Array(16);function fd(){if(!ga){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ga=crypto.getRandomValues.bind(crypto)}return ga(hd)}const xd=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),oi={randomUUID:xd};function gd(e,r,s){var n;if(oi.randomUUID&&!e)return oi.randomUUID();e=e||{};const a=e.random??((n=e.rng)==null?void 0:n.call(e))??fd();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,md(a)}const at="https://tutoring-platform-1756666331-zjfl.onrender.com",pd="https://tutoring-platform-1756666331-zjfl.onrender.com",vd={transports:["websocket","polling"],timeout:1e4,forceNew:!0,upgrade:!0,rememberUpgrade:!0},el=N.createContext(void 0),ze=()=>{const e=N.useContext(el);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Or=()=>{try{const e=localStorage.getItem("tutoring_users");return e?JSON.parse(e):[]}catch{return[]}},pa=e=>{try{localStorage.setItem("tutoring_users",JSON.stringify(e)),window.dispatchEvent(new StorageEvent("storage",{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users"),storageArea:localStorage})),window.dispatchEvent(new CustomEvent("customStorage",{detail:{key:"tutoring_users",newValue:JSON.stringify(e),oldValue:localStorage.getItem("tutoring_users")}}))}catch{}},ps=e=>{try{localStorage.setItem("tutoring_currentUser",JSON.stringify(e))}catch{}},bd=()=>{try{const e=localStorage.getItem("tutoring_currentUser");return e?JSON.parse(e):null}catch{return null}},yd=({children:e})=>{const[r,s]=N.useState(()=>{try{return bd()}catch{return null}}),[a,n]=N.useState(!1);if(N.useEffect(()=>{const x=setTimeout(()=>{try{const u=Or();n(!0)}catch{n(!0)}},100);return()=>clearTimeout(x)},[]),!a)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Инициализация авторизации..."})]})});const i=async(m,x)=>{await new Promise(g=>setTimeout(g,1e3));const b=Or().find(g=>g.email===m);return b?(s(b),ps(b),!0):(alert("Пользователь с таким email не найден. Пожалуйста, зарегистрируйтесь."),!1)},o=async(m,x,u,b,g,h)=>{try{const j=await fetch(`${at}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m,password:x,name:u,nickname:b,role:g,phone:h})});if(!j.ok){const p=await j.text();try{const k=JSON.parse(p);alert(k.error||"Ошибка регистрации на сервере")}catch{alert("Ошибка регистрации на сервере. Используется локальная регистрация.")}throw new Error("Server registration failed")}const y=await j.json(),C=[...Or(),y];return pa(C),s(y),ps(y),!0}catch{const y=Or(),f=y.some(L=>L.email===m),C=y.some(L=>L.nickname===b);if(f)return alert("Пользователь с таким email уже существует"),!1;if(C)return alert("Пользователь с таким никнеймом уже существует"),!1;const p=g==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""},k={id:gd(),email:m,name:u,nickname:b,role:g,phone:h,profile:p,avatar:p.avatar},E=[...y,k];return pa(E),s(k),ps(k),alert("Регистрация выполнена локально. Данные будут синхронизированы при подключении к серверу."),!0}},l=()=>{s(null),localStorage.removeItem("tutoring_currentUser")},c=m=>{if(r){const x={...r,profile:m,avatar:m.avatar};s(x),ps(x);const b=Or().map(g=>g.id===r.id?x:g);pa(b),typeof window<"u"&&window.location.hostname!=="localhost"&&fetch("https://tutoring-platform-1756666331-zjfl.onrender.com/api/updateProfile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r.id,profileData:m,role:r.role})}).then(g=>{if(g.ok){console.log("Profile updated successfully on server");const h=window.socket;h&&h.emit("profileUpdated",{userId:r.id,profileData:m,role:r.role})}else console.error("Failed to update profile on server:",g.status)}).catch(g=>{console.error("Failed to update profile on server:",g)})}},d=()=>{s(null),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")};return t.jsx(el.Provider,{value:{user:r,login:i,register:o,logout:l,updateProfile:c,clearAllUsers:d},children:e})},tl=N.createContext(void 0),rt=()=>{const e=N.useContext(tl);if(!e)throw new Error("useData must be used within a DataProvider");return e},ot=(e,r)=>{try{const s=localStorage.getItem(e);if(s){const a=JSON.parse(s);return Array.isArray(a)?a:r}}catch{}return r},ne=(e,r)=>{try{localStorage.setItem(e,JSON.stringify(r))}catch{}},vs=()=>{const e=new Date,r=new Date(e);r.setDate(r.getDate()+1);const s=new Date(e);s.setDate(s.getDate()+2);const a=new Date(e);return a.setDate(a.getDate()+7),{timeSlots:[],lessons:[],chats:[],studentProfiles:{},teacherProfiles:{}}},jd=({children:e})=>{const r=N.useRef(null),[s,a]=N.useState(!1),[n,i]=N.useState(()=>{const O=ot("tutoring_timeSlots",[]);if(O.length>0)return O;const z=vs();return ne("tutoring_timeSlots",z.timeSlots),z.timeSlots}),[o,l]=N.useState(()=>ot("tutoring_lessons",[])),[c,d]=N.useState(()=>ot("tutoring_chats",[])),[m,x]=N.useState(()=>{const O=ot("tutoring_studentProfiles",{});if(Object.keys(O).length>0)return O;const z=vs();return ne("tutoring_studentProfiles",z.studentProfiles),z.studentProfiles}),[u,b]=N.useState(()=>{const O=ot("tutoring_teacherProfiles",{});if(Object.keys(O).length>0)return O;const z=vs();return ne("tutoring_teacherProfiles",z.teacherProfiles),z.teacherProfiles}),[g,h]=N.useState(()=>{try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]")}catch{return[]}}),[j,y]=N.useState(()=>ot("tutoring_posts",[])),[f,C]=N.useState(()=>ot("tutoring_notifications",[])),{user:p,updateProfile:k}=ze(),E=()=>{const O=ot("tutoring_timeSlots",[]),z=ot("tutoring_lessons",[]),W=ot("tutoring_chats",[]),I=vs(),F=(O.length>0?O:I.timeSlots).filter((v,$,X)=>$===X.findIndex(te=>te.id===v.id));i(F),l(z),d(W),x(I.studentProfiles),ne("tutoring_timeSlots",F),ne("tutoring_lessons",z),ne("tutoring_chats",W),ne("tutoring_studentProfiles",I.studentProfiles),de()},L=async()=>{try{const O=await fetch(`${at}/api/users`);if(!O.ok)return[];const z=await O.json(),w=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]"),...z].filter((F,v,$)=>v===$.findIndex(X=>X.id===F.id));return h(w),localStorage.setItem("tutoring_users",JSON.stringify(w)),w}catch{return[]}},M=async()=>{try{console.log("Loading lessons from server...");const O=await fetch(`${at}/api/lessons`);if(!O.ok)return console.error("Failed to load lessons from server:",O.status),[];const z=await O.json();console.log("Loaded lessons from server:",z.length,z);const W=JSON.parse(localStorage.getItem("tutoring_lessons")||"[]");console.log("Local lessons:",W.length,W);const w=[...W,...z].filter((F,v,$)=>v===$.findIndex(X=>X.id===F.id));return console.log("Setting lessons in context:",w.length,w),l(w),ne("tutoring_lessons",w),w}catch(O){return console.error("Error loading lessons from server:",O),[]}},B=()=>{try{const O=JSON.parse(localStorage.getItem("tutoring_users")||"[]");h(O)}catch{h([])}},G=()=>{L(),M(),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers"))},A=async()=>{try{console.log("Force syncing data from server...");const O=await fetch(`${at}/api/sync`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(!O.ok){console.warn("Failed to sync data from server:",O.status,O.statusText);return}const z=O.headers.get("content-type");if(!z||!z.includes("application/json")){console.warn("Server returned non-JSON response:",z);return}const W=await O.json();W.timeSlots&&(i(W.timeSlots),ne("tutoring_timeSlots",W.timeSlots)),W.lessons&&(l(W.lessons),ne("tutoring_lessons",W.lessons)),W.chats&&(d(W.chats),ne("tutoring_chats",W.chats)),W.posts&&(y(W.posts),ne("tutoring_posts",W.posts));const I=[];W.teacherProfiles&&Object.entries(W.teacherProfiles).forEach(([w,F])=>{const v=F;I.push({id:w,email:String(v.email||""),name:String(v.name||""),nickname:String(v.nickname||""),role:"teacher",phone:String(v.phone||""),profile:v})}),W.studentProfiles&&Object.entries(W.studentProfiles).forEach(([w,F])=>{const v=F;I.push({id:w,email:String(v.email||""),name:String(v.name||""),nickname:String(v.nickname||""),role:"student",phone:String(v.phone||""),profile:v})}),h(I),ne("tutoring_users",I),console.log("Data sync completed successfully")}catch(O){console.warn("Error syncing data (continuing with local data):",O)}};N.useEffect(()=>{const O=async()=>{try{const W=await fetch(`${at}/api/health`,{method:"GET",signal:AbortSignal.timeout(5e3)});if(W.ok){const I=await W.json();return console.log("Server health check passed:",I),!0}return!1}catch(W){return console.warn("Server not available, working in offline mode:",W),!1}};(async()=>{if(!await O()){console.log("Server not available, loading local data only"),E(),M();return}console.log("Server is available, initializing Socket.IO connection...");const I=Xo(at,{...vd,reconnection:!0,reconnectionAttempts:3,reconnectionDelay:2e3,timeout:1e4});return r.current=I,I.on("connect",()=>{a(!0),console.log("✅ Connected to server via Socket.IO"),console.log(`🌐 Server URL: ${at}`),console.log(`🔌 Socket ID: ${I.id}`),L(),M();const w=ot("tutoring_timeSlots",[]);w.length>0&&w.forEach(F=>{r.current&&r.current.emit("createSlot",F)}),r.current&&(r.current.emit("requestAllPosts"),p&&(r.current.emit("requestUserNotifications",p.id),r.current.emit("subscribeNotifications",p.id)))}),I.on("disconnect",()=>{a(!1),console.log("🔌 Disconnected from server")}),I.on("reconnect",w=>{a(!0),console.log(`🔄 Reconnected to server after ${w} attempts`)}),I.on("reconnect_attempt",w=>{console.log(`🔄 Reconnection attempt ${w}`)}),I.on("connect_error",w=>{a(!1),console.warn("❌ Socket.IO connection error:",w),console.warn("🔧 Working in offline mode until reconnection..."),E(),M()}),I.on("initialData",w=>{const $=[...ot("tutoring_timeSlots",[]),...w.timeSlots].filter((X,te,P)=>te===P.findIndex(J=>J.id===X.id));i($),l(w.lessons),ne("tutoring_timeSlots",$),ne("tutoring_lessons",w.lessons),w.chats&&(d(w.chats),ne("tutoring_chats",w.chats))}),I.on("allSlots",w=>{i(w),ne("tutoring_timeSlots",w)}),I.on("allUsers",w=>{h(w),ne("tutoring_users",w)}),r.current&&s&&(r.current.emit("requestAllSlots"),r.current.emit("requestAllUsers")),I.on("slotCreated",w=>{console.log("Slot created via WebSocket:",w),i(F=>{if(F.find($=>$.id===w.id)){const $=F.map(X=>X.id===w.id?w:X);return ne("tutoring_timeSlots",$),console.log("Existing slot updated, total slots:",$.length),$}else{const $=[...F,w];return ne("tutoring_timeSlots",$),console.log("New slot added, total slots:",$.length),$}})}),I.on("slotBooked",w=>{console.log("Slot booked via WebSocket:",w),i(F=>{const v=F.map($=>$.id===w.slotId?{...$,isBooked:!0,bookedStudentId:w.bookedStudentId||w.lesson.studentId}:$);return ne("tutoring_timeSlots",v),v}),l(F=>{if(!F.find($=>$.id===w.lesson.id)){const $=[...F,w.lesson];return ne("tutoring_lessons",$),console.log("New lesson added, total lessons:",$.length),$}return F})}),I.on("slotCancelled",w=>{console.log("Slot cancelled via WebSocket:",w),i(F=>{const v=F.map($=>$.id===w.slotId?{...$,isBooked:!1,bookedStudentId:void 0}:$);return ne("tutoring_timeSlots",v),v}),l(F=>{const v=F.filter($=>$.id!==w.lessonId);return ne("tutoring_lessons",v),console.log("Lesson removed, total lessons:",v.length),v})}),I.on("chatCreated",w=>{d(F=>{if(!F.find($=>$.id===w.id)){const $=[...F,w];return ne("tutoring_chats",$),$}return F})}),I.on("receiveMessage",w=>{d(F=>F.map(v=>{if(v.id===w.chatId){const $={...v,messages:[...v.messages,w.message],lastMessage:w.message};return ne("tutoring_chats",F.map(X=>X.id===v.id?$:X)),$}return v}))}),I.on("chatDeleted",w=>{console.log("chatDeleted event received:",w),d(F=>{const v=F.filter($=>$.id!==w.chatId);return console.log(`Chat ${w.chatId} removed from state. Total chats: ${v.length}`),ne("tutoring_chats",v),v})}),I.on("chatMarkedAsRead",w=>{d(F=>{const v=F.map($=>$.id===w.chatId?{...$,messages:$.messages.map(X=>({...X,isRead:!0}))}:$);return ne("tutoring_chats",v),v})}),I.on("chatMessagesCleared",w=>{d(F=>{const v=F.map($=>$.id===w.chatId?{...$,messages:[]}:$);return ne("tutoring_chats",v),v})}),I.on("chatArchived",w=>{d(F=>{const v=F.map($=>$.id===w.chatId?{...$,archived:!0}:$);return ne("tutoring_chats",v),v})}),I.on("chatUnarchived",w=>{d(F=>{const v=F.map($=>$.id===w.chatId?{...$,archived:!1}:$);return ne("tutoring_chats",v),v})}),I.on("newNotification",w=>{C(F=>{const v=[...F,w];return ne("tutoring_notifications",v),v})}),I.on("slotDeleted",w=>{console.log("Slot deleted via WebSocket:",w),i(F=>{const v=F.filter($=>$.id!==w.slotId);return ne("tutoring_timeSlots",v),console.log("Slot removed, total slots:",v.length),v})}),I.on("allSlots",w=>{console.log("Received all slots from server:",w.length),i(w),ne("tutoring_timeSlots",w)}),I.on("allLessons",w=>{console.log("Received all lessons from server:",w.length),l(w),ne("tutoring_lessons",w)}),I.on("dataUpdated",w=>{if(console.log("Received dataUpdated event:",w.type),w.timeSlots&&(i(w.timeSlots),ne("tutoring_timeSlots",w.timeSlots),console.log("Slots updated via dataUpdated:",w.timeSlots.length)),w.lessons&&(l(w.lessons),ne("tutoring_lessons",w.lessons),console.log("Lessons updated via dataUpdated:",w.lessons.length)),w.teacherProfiles){b(w.teacherProfiles),ne("tutoring_teacherProfiles",w.teacherProfiles);const v=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map($=>$.role==="teacher"&&w.teacherProfiles[$.id]?{...$,profile:w.teacherProfiles[$.id]}:$);h(v),ne("tutoring_users",v)}if(w.studentProfiles){x(w.studentProfiles),ne("tutoring_studentProfiles",w.studentProfiles);const v=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map($=>$.role==="student"&&w.studentProfiles[$.id]?{...$,profile:w.studentProfiles[$.id]}:$);h(v),ne("tutoring_users",v)}}),I.on("userRegistered",w=>{h(F=>{if(!F.find($=>$.id===w.id)){const $=[...F,w];return ne("tutoring_users",$),$}return F})}),r.current&&r.current.on("lessonCompleted",w=>{if(l(F=>{const v=F.map($=>$.id===w.lesson.id?w.lesson:$);return ne("tutoring_lessons",v),v}),p&&p.role==="teacher"&&w.lesson.status==="completed"){const F={...p.profile};F.lessonsCount=(F.lessonsCount||0)+1,k(F)}}),I.on("studentProfiles",w=>{x(w||{});const v=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([$,X])=>{const te=v.findIndex(P=>P.id===$);te>=0?v[te]={...v[te],profile:X}:v.push({id:$,email:X.email||"",name:X.name||"",nickname:X.nickname||"",role:"student",phone:X.phone||"",profile:X})}),localStorage.setItem("tutoring_users",JSON.stringify(v)),h(v)}),I.on("teacherProfiles",w=>{b(w),ne("tutoring_teacherProfiles",w);const v=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([$,X])=>{const te=v.findIndex(P=>P.id===$);te>=0?v[te]={...v[te],profile:X}:v.push({id:$,email:X.email||"",name:X.name||"",nickname:X.nickname||"",role:"teacher",phone:X.phone||"",profile:X})}),localStorage.setItem("tutoring_users",JSON.stringify(v)),h(v)}),I.on("studentProfiles",w=>{x(w),ne("tutoring_studentProfiles",w);const v=[...JSON.parse(localStorage.getItem("tutoring_users")||"[]")];Object.entries(w).forEach(([$,X])=>{const te=v.findIndex(P=>P.id===$);te>=0?v[te]={...v[te],profile:X}:v.push({id:$,email:X.email||"",name:X.name||"",nickname:X.nickname||"",role:"student",phone:X.phone||"",profile:X})}),localStorage.setItem("tutoring_users",JSON.stringify(v)),h(v)}),I.on("studentProfileUpdated",w=>{x(F=>({...F,[w.studentId]:w.profile}))}),I.on("teacherProfileUpdated",w=>{try{const v=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map($=>$.id===w.teacherId?{...$,profile:w.profile,avatar:w.profile.avatar}:$);localStorage.setItem("tutoring_users",JSON.stringify(v)),h(v)}catch{}}),I.on("profileUpdated",w=>{try{const F=JSON.parse(localStorage.getItem("tutoring_users")||"[]");let v=!1;const $="userId"in w?w.userId:w.id,X="type"in w?w.type:w.role,te=w.profile,P=F.map(J=>J.id===$?(v=!0,{...J,profile:te,avatar:te.avatar,name:te.name||J.name,email:te.email||J.email}):J);v||P.push({id:$,role:X,profile:te,avatar:te.avatar,name:te.name||"",email:te.email||""}),localStorage.setItem("tutoring_users",JSON.stringify(P)),h(P),X==="teacher"?b(J=>({...J,[$]:te})):X==="student"&&x(J=>({...J,[$]:te})),console.log("Profile updated via WebSocket:",{userId:$,role:X,profile:te})}catch(F){console.error("Error processing profileUpdated event:",F)}}),I.on("userRegistered",w=>{try{const F=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),v=F.findIndex($=>$.id===w.id);v>=0?F[v]=w:F.push(w),localStorage.setItem("tutoring_users",JSON.stringify(F)),h(F)}catch{}}),I.on("allPosts",w=>{y(w),ne("tutoring_posts",w)}),I.on("postCreated",w=>{y(F=>{const v=[w,...F];return ne("tutoring_posts",v),v})}),I.on("postReactionUpdated",w=>{y(F=>{const v=F.map($=>$.id===w.postId?{...$,reactions:w.reactions,likes:w.likes}:$);return ne("tutoring_posts",v),v})}),I.on("postCommentAdded",w=>{y(F=>{const v=F.map($=>$.id===w.postId?{...$,comments:[...$.comments,w.comment]}:$);return ne("tutoring_posts",v),v})}),I.on("postEdited",w=>{y(F=>{const v=F.map($=>$.id===w.postId?{...$,text:w.text,tags:w.tags,editedAt:w.editedAt}:$);return ne("tutoring_posts",v),v})}),I.on("postDeleted",w=>{y(F=>{const v=F.filter($=>$.id!==w.postId);return ne("tutoring_posts",v),v})}),I.on("postBookmarkUpdated",w=>{y(F=>{const v=F.map($=>$.id===w.postId?{...$,bookmarks:w.bookmarks}:$);return ne("tutoring_posts",v),v})}),I.on("searchResults",w=>{}),I.on("userNotifications",w=>{C(w),ne("tutoring_notifications",w)}),I.on("newNotification",w=>{C(F=>{const v=[w,...F];return ne("tutoring_notifications",v),v})}),I.on("notificationMarkedAsRead",w=>{C(F=>{const v=F.map($=>$.id===w.notificationId?{...$,isRead:!0,readAt:new Date().toISOString()}:$);return ne("tutoring_notifications",v),v})}),I.on("allNotificationsMarkedAsRead",w=>{C(F=>{const v=F.map($=>$.userId===w.userId?{...$,isRead:!0,readAt:new Date().toISOString()}:$);return ne("tutoring_notifications",v),v})}),()=>{I.close(),r.current=null}})()},[]),N.useEffect(()=>{const O=W=>{if(W.key==="tutoring_users")try{const I=JSON.parse(W.newValue||"[]");h(I)}catch{h([])}},z=W=>{var I;if(((I=W.detail)==null?void 0:I.key)==="tutoring_users")try{const w=JSON.parse(W.detail.newValue||"[]");h(w)}catch{h([])}};return window.addEventListener("storage",O),window.addEventListener("customStorage",z),()=>{window.removeEventListener("storage",O),window.removeEventListener("customStorage",z)}},[]),N.useEffect(()=>{ne("tutoring_timeSlots",n)},[n]),N.useEffect(()=>{ne("tutoring_lessons",o)},[o]),N.useEffect(()=>{ne("tutoring_chats",c)},[c]),N.useEffect(()=>{ne("tutoring_posts",j)},[j]),N.useEffect(()=>{ne("tutoring_notifications",f)},[f]),N.useEffect(()=>{p&&r.current&&s&&(r.current.emit("subscribeNotifications",p.id),r.current.emit("requestUserNotifications",p.id))},[p,s]);const K=O=>{const z={...O,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};i(W=>{const I=[...W,z];return ne("tutoring_timeSlots",I),I}),r.current&&s&&r.current.emit("createSlot",z)},Y=async(O,z,W,I)=>new Promise((w,F)=>{if((I==null?void 0:I.mode)==="assign"&&(!z||!W)){alert("Ошибка: не выбран ученик для назначения урока!"),F(new Error("createSlot: assign mode without studentId/studentName"));return}const v=!!z,$={...O,id:`slot_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isBooked:v,...v?{bookedStudentId:z}:{}};if(i(X=>{const te=[...X,$];return ne("tutoring_timeSlots",te),te}),r.current&&s&&r.current.emit("createSlot",$),v&&z&&W){const X={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:z,teacherId:$.teacherId,studentName:W,teacherName:$.teacherName,subject:$.subject,date:$.date,startTime:$.startTime,endTime:$.endTime,duration:$.duration,format:$.format,status:"scheduled",price:$.price,lessonType:$.lessonType};if(l(te=>[...te,X]),U(z,$.teacherId,W,$.teacherName),p&&p.role==="teacher"){const te={...p.profile};te.students||(te.students=[]),te.students.includes(z)||te.students.push(z),k(te)}r.current&&s&&r.current.emit("bookSlot",{slotId:$.id,lesson:X,bookedStudentId:z})}w($)}),ae=(O,z,W,I)=>{const w=n.find(v=>v.id===O);if(!w||w.isBooked)return;if(p&&p.role==="teacher"){const v={...p.profile};v.students||(v.students=[]),v.students.includes(z)||v.students.push(z),k(v)}i(v=>v.map($=>$.id===O?{...$,isBooked:!0,bookedStudentId:z}:$));const F={id:`lesson_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,studentId:z,teacherId:w.teacherId,studentName:W,teacherName:w.teacherName,subject:w.subject,date:w.date,startTime:w.startTime,endTime:w.endTime,duration:w.duration,format:w.format,status:"scheduled",price:w.price,lessonType:w.lessonType,comment:I||""};l(v=>[...v,F]),U(z,w.teacherId,W,w.teacherName),r.current&&s&&r.current.emit("bookSlot",{slotId:O,lesson:F,bookedStudentId:z})},ie=O=>{const z=o.find(I=>I.id===O);if(!z)return;const W=n.find(I=>I.teacherId===z.teacherId&&I.date===z.date&&I.startTime===z.startTime);l(I=>I.filter(w=>w.id!==O)),W&&(i(I=>I.map(w=>w.id===W.id?{...w,isBooked:!1,bookedStudentId:void 0}:w)),r.current&&s&&r.current.emit("cancelSlot",{slotId:W.id,lessonId:O}))},R=(O,z,W)=>{const I=o.find(F=>F.id===O);if(!I)return;const w=new Date(`2000-01-01T${W}`);w.setMinutes(w.getMinutes()+I.duration),l(F=>F.map(v=>v.id===O?{...v,date:z,startTime:W,endTime:w.toTimeString().slice(0,5)}:v)),i(F=>F.map(v=>v.teacherId===I.teacherId&&v.date===I.date&&v.startTime===I.startTime?{...v,isBooked:!1,bookedStudentId:void 0}:v))},D=O=>n.filter(W=>{var F;if(W.isBooked)return!1;const I=new Date(W.date),w=new Date;if(w.setHours(0,0,0,0),I<w||O.grade&&O.grade!==""&&(!W.grades||!W.grades.includes(O.grade))||O.subject&&O.subject!==""&&W.subject!==O.subject||O.experience&&O.experience!==""&&W.experience!==O.experience||O.lessonType&&O.lessonType!==""&&W.lessonType!==O.lessonType||O.duration&&O.duration>0&&W.duration!==O.duration||O.format&&O.format!==""&&W.format!==O.format||O.minRating&&O.minRating>0&&(W.rating||0)<O.minRating||O.goals&&O.goals.length>0&&(!W.goals||!O.goals.some(v=>W.goals.includes(v))))return!1;if(O.city&&O.city!==""){const v=g.find(X=>X.id===W.teacherId),$=((F=v==null?void 0:v.profile)==null?void 0:F.city)||"";if($&&!$.toLowerCase().includes(O.city.toLowerCase()))return!1}return!0}),U=(O,z,W,I)=>{const w=c.find(v=>v.participants.includes(O)&&v.participants.includes(z));if(w)return w.id;const F={id:`chat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,participants:[O,z],participantNames:[W,I],messages:[]};if(d(v=>{const $=[...v,F];return ne("tutoring_chats",$),$}),r.current&&s){r.current.emit("createChat",F);const v={id:`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:z,type:"new_chat",title:"Новый чат",message:`${W} создал с вами чат`,isRead:!1,timestamp:new Date().toISOString(),data:{chatId:F.id,studentId:O,studentName:W}};r.current.emit("createNotification",v)}return F.id},V=(O,z,W,I)=>{const w=c.find(X=>X.id===O);if(!w){console.error("Chat not found:",O);return}const F=w.participants.find(X=>X!==z),v=w.participantNames.find((X,te)=>w.participants[te]!==z);if(!F){console.error("Receiver not found in chat participants");return}const $={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,senderId:z,senderName:W,receiverId:F,receiverName:v||"Неизвестный пользователь",content:I,timestamp:new Date().toISOString(),isRead:!1};d(X=>X.map(te=>{if(te.id===O){const P={...te,messages:[...te.messages,$],lastMessage:$};return ne("tutoring_chats",X.map(J=>J.id===te.id?P:J)),P}return te})),r.current&&s&&r.current.emit("sendMessage",{chatId:O,message:$})},T=O=>{r.current&&s&&r.current.emit("lessonCompleted",{lessonId:O})},me=(O,z)=>{r.current&&r.current.emit("updateStudentProfile",{studentId:O,profile:z}),x(W=>({...W,[O]:z}))},ce=O=>{i(z=>{const W=z.map(I=>I.id===O?{...I,isDeleted:!0}:I);return ne("tutoring_timeSlots",W),W}),r.current&&s&&r.current.emit("deleteSlot",{slotId:O})},fe=()=>{i([]),l([]),d([]),localStorage.removeItem("tutoring_timeSlots"),localStorage.removeItem("tutoring_lessons"),localStorage.removeItem("tutoring_chats"),localStorage.removeItem("tutoring_users"),localStorage.removeItem("tutoring_currentUser")},xe=(O,z)=>{r.current&&s&&r.current.emit("updateTeacherProfile",{teacherId:O,profile:z});try{const I=JSON.parse(localStorage.getItem("tutoring_users")||"[]").map(w=>w.id===O?{...w,profile:z,avatar:z.avatar}:w);localStorage.setItem("tutoring_users",JSON.stringify(I))}catch{}},De=O=>{if(!p)return;const z=w=>{if(!w)return[];const F=/#[\wа-яё]+/gi,v=w.match(F);return v?[...new Set(v.map($=>$.toLowerCase()))]:[]},W=O.media.map(w=>URL.createObjectURL(w)),I={id:`post_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,userName:p.name,userAvatar:p.avatar,text:O.text,media:W,type:O.type,date:new Date().toISOString(),reactions:[],comments:[],isBookmarked:!1,tags:z(O.text),likes:0,views:0,bookmarks:[]};y(w=>{const F=[I,...w];return ne("tutoring_posts",F),F}),r.current&&s&&r.current.emit("createPost",I)},Q=(O,z)=>{p&&(y(W=>{const I=W.map(w=>{if(w.id===O){const F=w.reactions.find(X=>X.userId===p.id);let v=[...w.reactions],$=w.likes||0;return F?F.type===z?(v=w.reactions.filter(X=>X.userId!==p.id),$=Math.max(0,$-1)):F.type=z:(v.push({id:`reaction_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,type:z,date:new Date().toISOString()}),$++),{...w,reactions:v,likes:$}}return w});return ne("tutoring_posts",I),I}),r.current&&s&&r.current.emit("addReaction",{postId:O,reactionType:z,userId:p.id}))},ge=(O,z)=>{if(!p)return;const W={id:`comment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:p.id,userName:p.name,userAvatar:p.avatar,text:z,date:new Date().toISOString()};y(I=>{const w=I.map(F=>F.id===O?{...F,comments:[...F.comments,W]}:F);return ne("tutoring_posts",w),w}),r.current&&s&&r.current.emit("addComment",{postId:O,comment:W})},ee=O=>{},pe=O=>{p&&(y(z=>{const W=z.map(I=>{if(I.id===O){const w=I.bookmarks||[],F=w.indexOf(p.id);let v=[...w];return F===-1?v.push(p.id):v.splice(F,1),{...I,bookmarks:v}}return I});return ne("tutoring_posts",W),W}),r.current&&s&&r.current.emit("bookmarkPost",{postId:O,userId:p.id}))},ve=(O,z)=>{const W=I=>{if(!I)return[];const w=/#[\wа-яё]+/gi,F=I.match(w);return F?[...new Set(F.map(v=>v.toLowerCase()))]:[]};y(I=>{const w=I.map(F=>F.id===O?{...F,text:z,tags:W(z),editedAt:new Date().toISOString()}:F);return ne("tutoring_posts",w),w}),r.current&&s&&r.current.emit("editPost",{postId:O,newText:z})},Ae=O=>{y(z=>{const W=z.filter(I=>I.id!==O);return ne("tutoring_posts",W),W}),r.current&&s&&r.current.emit("deletePost",{postId:O})},gt=O=>{console.log("deleteChat called with chatId:",O),console.log("Current chats count:",c.length),d(z=>{if(!z.find(w=>w.id===O))return console.warn("Chat not found for deletion:",O),z;const I=z.filter(w=>w.id!==O);return console.log(`Chat ${O} removed. New count: ${I.length}`),ne("tutoring_chats",I),I}),r.current&&s?(console.log("Sending deleteChat event to server"),r.current.emit("deleteChat",{chatId:O})):console.warn("Socket not connected, chat deletion not synced to server")},Le=O=>{d(z=>{const W=z.map(I=>I.id===O?{...I,messages:I.messages.map(w=>({...w,isRead:!0}))}:I);return ne("tutoring_chats",W),W}),r.current&&s&&r.current.emit("markChatAsRead",{chatId:O})},Fe=O=>{d(z=>{const W=z.map(I=>I.id===O?{...I,messages:[]}:I);return ne("tutoring_chats",W),W}),r.current&&s&&r.current.emit("clearChatMessages",{chatId:O})},q=O=>{d(z=>{const W=z.map(I=>I.id===O?{...I,archived:!0}:I);return ne("tutoring_chats",W),W}),r.current&&s&&r.current.emit("archiveChat",{chatId:O})},ye=O=>{d(z=>{const W=z.map(I=>I.id===O?{...I,archived:!1}:I);return ne("tutoring_chats",W),W}),r.current&&s&&r.current.emit("unarchiveChat",{chatId:O})},de=async()=>{try{const O=await fetch(`${at}/api/sync`);if(O.ok){const z=await O.json();z.chats&&(d(z.chats),ne("tutoring_chats",z.chats))}}catch(O){console.warn("Error loading chats from server:",O)}};return t.jsx(tl.Provider,{value:{timeSlots:n,lessons:o,chats:c,posts:j,createTimeSlot:K,bookLesson:ae,cancelLesson:ie,rescheduleLesson:R,getFilteredSlots:D,sendMessage:V,getOrCreateChat:U,clearAllData:fe,isConnected:s,completeLesson:T,studentProfiles:m,updateStudentProfile:me,deleteSlot:ce,createSlot:Y,allUsers:g,setAllUsers:O=>{h(O),localStorage.setItem("tutoring_users",JSON.stringify(O))},refreshUsers:B,refreshAllData:G,forceSyncData:A,teacherProfiles:u,updateTeacherProfile:xe,socketRef:r,loadInitialData:E,createPost:De,addReaction:Q,addComment:ge,sharePost:ee,bookmarkPost:pe,editPost:ve,deletePost:Ae,searchPosts:O=>{r.current&&s&&r.current.emit("searchPosts",O)},getPostsByUser:O=>j.filter(z=>z.userId===O),getBookmarkedPosts:O=>j.filter(z=>{var W;return(W=z.bookmarks)==null?void 0:W.includes(O)}),notifications:f,subscribeToNotifications:O=>{r.current&&s&&r.current.emit("subscribeNotifications",O)},unsubscribeFromNotifications:O=>{r.current&&s&&r.current.emit("unsubscribeNotifications",O)},markNotificationAsRead:O=>{C(z=>{const W=z.map(I=>I.id===O?{...I,isRead:!0,readAt:new Date().toISOString()}:I);return ne("tutoring_notifications",W),W}),r.current&&s&&r.current.emit("markNotificationAsRead",O)},markAllNotificationsAsRead:O=>{C(z=>{const W=z.map(I=>I.userId===O?{...I,isRead:!0,readAt:new Date().toISOString()}:I);return ne("tutoring_notifications",W),W}),r.current&&s&&r.current.emit("markAllNotificationsAsRead",O)},deleteNotification:O=>{C(z=>{const W=z.filter(I=>I.id!==O);return ne("tutoring_notifications",W),W})},deleteChat:gt,markChatAsRead:Le,clearChatMessages:Fe,archiveChat:q,unarchiveChat:ye,loadChatsFromServer:de},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(e,r)=>{const s=N.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},m)=>N.createElement("svg",{ref:m,...wd,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${Nd(e)}`,l].join(" "),...d},[...r.map(([x,u])=>N.createElement(x,u)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=oe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=oe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=oe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=oe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=oe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=oe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=oe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=oe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=oe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=oe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=oe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=oe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=oe("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=oe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=oe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=oe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=oe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=oe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=oe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Kd=({onSuccess:e})=>{const[r,s]=N.useState(!0),[a,n]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[d,m]=N.useState(""),[x,u]=N.useState(""),[b,g]=N.useState("student"),[h,j]=N.useState(!1),[y,f]=N.useState(!1),{login:C,register:p}=ze(),k=async E=>{E.preventDefault(),j(!0);try{if(r)await C(a,i),e();else{if(!y){f(!0),j(!1);return}if(!x.trim()){alert("Пожалуйста, введите никнейм"),j(!1);return}if(!d.trim()){alert("Пожалуйста, введите номер телефона"),j(!1);return}await p(a,i,l,x,b,d)&&e()}}catch{}finally{j(!1)}};return!r&&y?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-[#0D3C69] rounded-xl flex items-center justify-center mb-4",children:t.jsx(Ie,{className:"h-6 w-6 text-white"})}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Выберите роль"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Кто вы на нашей платформе?"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("button",{onClick:()=>g("student"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${b==="student"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`p-3 rounded-lg ${b==="student"?"bg-blue-100":"bg-gray-100"}`,children:t.jsx(be,{className:`h-6 w-6 ${b==="student"?"text-[#0D3C69]":"text-gray-600"}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Ученик"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ищу репетитора для обучения"})]})]})}),t.jsx("button",{onClick:()=>g("teacher"),className:`w-full p-6 rounded-xl border-2 transition-all duration-200 ${b==="teacher"?"border-[#0D3C69] bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:`p-3 rounded-lg ${b==="teacher"?"bg-blue-100":"bg-gray-100"}`,children:t.jsx(qd,{className:`h-6 w-6 ${b==="teacher"?"text-[#0D3C69]":"text-gray-600"}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:"Преподаватель"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Провожу уроки и делюсь знаниями"})]})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-700 mb-1",children:"Никнейм"}),t.jsx("input",{id:"nickname",type:"text",value:x,onChange:E=>u(E.target.value),required:!0,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"Введите никнейм"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер телефона"}),t.jsxs("div",{className:"relative",children:[t.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"phone",type:"tel",value:d,onChange:E=>m(E.target.value),required:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsx("button",{onClick:k,disabled:h||!x.trim()||!d.trim(),className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Создание аккаунта...":"Завершить регистрацию"}),t.jsx("button",{onClick:()=>f(!1),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:"Назад"})]})]})}):t.jsxs("div",{className:"min-h-screen flex",children:[t.jsx("div",{className:"flex-1 bg-white flex items-center justify-center p-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Добро пожаловать"}),t.jsx("p",{className:"text-lg text-gray-600",children:r?"Войдите в свой аккаунт":"Создайте новый аккаунт"})]}),t.jsxs("form",{onSubmit:k,className:"space-y-6",children:[!r&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),t.jsxs("div",{className:"relative",children:[t.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"name",type:"text",value:l,onChange:E=>c(E.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваше имя"})]})]}),!r&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),t.jsxs("div",{className:"relative",children:[t.jsx(hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"phone",type:"tel",value:d,onChange:E=>m(E.target.value),required:!r,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"email",type:"email",value:a,onChange:E=>n(E.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:"Введите ваш email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Пароль"}),t.jsxs("div",{className:"relative",children:[t.jsx(sl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{id:"password",type:"password",value:i,onChange:E=>o(E.target.value),required:!0,className:"w-full pl-10 pr-3 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0D3C69] focus:border-[#0D3C69] transition-colors duration-200 text-lg",placeholder:r?"Введите пароль":"Создайте пароль"})]})]}),t.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#0D3C69] hover:bg-[#0A2F56] text-white font-bold py-4 px-6 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:h?r?"Вход...":"Создание аккаунта...":r?"Войти":"Создать аккаунт"})]}),t.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["Продолжая, вы соглашаетесь с"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условиями использования"})," ","и"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политикой конфиденциальности"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-gray-600",children:r?"Нет аккаунта? ":"Уже есть аккаунт? "}),t.jsx("button",{onClick:()=>{s(!r),f(!1),n(""),o(""),c(""),m(""),u("")},className:"text-[#0D3C69] hover:text-[#0A2F56] font-medium",children:r?"Зарегистрироваться":"Войти"})]}),t.jsx("div",{className:"text-center",children:t.jsx("button",{className:"text-[#0D3C69] hover:text-[#0A2F56] text-sm",children:"Получить помощь"})}),t.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["Этот сайт защищен reCAPTCHA Enterprise и применяются"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Политика конфиденциальности"})," ","и"," ",t.jsx("a",{href:"#",className:"text-[#0D3C69] hover:underline",children:"Условия использования"})," ","Google."]})]})}),t.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[t.jsx("h2",{className:"text-5xl font-bold text-white mb-8 text-center",children:"Платформа для обучения"}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("blockquote",{className:"text-xl text-gray-300 italic leading-relaxed",children:'"Важно не количество знаний, а качество их. Можно знать очень многое не зная самого нужного."'}),t.jsx("cite",{className:"text-sm text-gray-400 mt-4 block",children:"— Л. Толстой"})]}),t.jsxs("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900 via-purple-900 to-black"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 opacity-20"})}),t.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((E,L)=>t.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},L))})]})]})]})},Xd=({activeTab:e,onTabChange:r})=>{const{user:s,logout:a}=ze(),n=[{id:"home",label:"Главная",icon:Md},{id:"lessons",label:"Мои уроки",icon:He},{id:"chats",label:"Чаты",icon:Me},{id:"profile",label:"Профиль",icon:be}],i=[{id:"slots",label:"Слоты",icon:He},{id:"calendar",label:"Календарь",icon:Sd},{id:"students",label:"Ученики",icon:be},{id:"chats",label:"Чаты",icon:Me},{id:"profile",label:"Профиль",icon:be}],o=(s==null?void 0:s.role)==="teacher"?i:n;return t.jsx("nav",{className:"bg-card-light dark:bg-card-dark shadow-lg border-b border-border-light dark:border-border-dark transition-colors",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"flex justify-between h-16",children:[t.jsxs("div",{className:"flex items-center space-x-8",children:[t.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[t.jsx("div",{className:"h-10 w-10 rounded-xl flex items-center justify-center shadow-md",style:{background:"#175b8c"},children:t.jsx("span",{className:"text-white font-bold text-lg",style:{fontFamily:"Inter, sans-serif",fontSize:28},children:"Na"})}),t.jsx("span",{className:"ml-3 text-2xl font-bold",style:{color:"#175b8c",fontFamily:"Inter, sans-serif"},children:"uchi"})]}),t.jsx("div",{className:"hidden md:flex space-x-8",children:o.map(l=>{const c=l.icon;return t.jsxs("button",{onClick:()=>r(l.id),className:`flex items-center gap-2 px-5 py-3 rounded-xl text-base font-semibold transition-all duration-200 shadow-none ${e===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[t.jsx(c,{className:"h-5 w-5"}),t.jsx("span",{children:l.label})]},l.id)})})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:s==null?void 0:s.nickname.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"hidden md:block",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700",children:s==null?void 0:s.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:["@",s==null?void 0:s.nickname]})]}),t.jsx("span",{className:"hidden md:block text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:(s==null?void 0:s.role)==="teacher"?"Преподаватель":"Ученик"})]}),t.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-all duration-200",title:"Выйти",children:t.jsx(Pd,{className:"h-4 w-4"})})]})]}),t.jsx("div",{className:"md:hidden border-t border-border-light dark:border-border-dark",children:t.jsx("div",{className:"flex space-x-1 py-2 overflow-x-auto",children:o.map(l=>{const c=l.icon;return t.jsxs("button",{onClick:()=>r(l.id),className:`flex-shrink-0 flex flex-col items-center gap-1 px-4 py-3 rounded-xl text-xs font-semibold transition-all duration-200 ${e===l.id?"bg-primary-light/10 text-primary-light dark:bg-primary-dark/20 dark:text-primary-dark shadow-md":"text-textSecondary-light dark:text-textSecondary-dark hover:bg-border-light dark:hover:bg-border-dark hover:text-primary-light dark:hover:text-primary-dark"}`,children:[t.jsx(c,{className:"h-5 w-5"}),t.jsx("span",{children:l.label})]},l.id)})})})]})})};function Ot(e){"@babel/helpers - typeof";return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ot(e)}function Jd(e,r){if(Ot(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,r);if(Ot(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function dl(e){var r=Jd(e,"string");return Ot(r)=="symbol"?r:r+""}function Vt(e,r,s){return(r=dl(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function mi(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,a)}return s}function Se(e){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?mi(Object(s),!0).forEach(function(a){Vt(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mi(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function Gs(e,r){if(e==null)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;s[a]=e[a]}return s}function kt(e,r){if(e==null)return{};var s,a,n=Gs(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function hi(e,r){for(var s=0;s<r.length;s++){var a=r[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dl(a.key),a)}}function Pe(e,r,s){return r&&hi(e.prototype,r),s&&hi(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ds(e){return Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ds(e)}function ul(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ul=function(){return!!e})()}function Qd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zd(e,r){if(r&&(Ot(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qd(e)}function Ge(e,r,s){return r=Ds(r),Zd(e,ul()?Reflect.construct(r,s||[],Ds(e).constructor):r.apply(e,s))}function Ts(e,r){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ts(e,r)}function qe(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Ts(e,r)}function ml(e){if(Array.isArray(e))return e}function eu(e,r){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,n,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(e)).next,r!==0)for(;!(c=(a=i.call(s)).done)&&(l.push(a.value),l.length!==r);c=!0);}catch(m){d=!0,n=m}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw n}}return l}}function Pa(e,r){(r==null||r>e.length)&&(r=e.length);for(var s=0,a=Array(r);s<r;s++)a[s]=e[s];return a}function an(e,r){if(e){if(typeof e=="string")return Pa(e,r);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Pa(e,r):void 0}}function hl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qt(e,r){return ml(e)||eu(e,r)||an(e,r)||hl()}function fl(e){var r,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(s=fl(e[r]))&&(a&&(a+=" "),a+=s);else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Oe(){for(var e,r,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(r=fl(e))&&(a&&(a+=" "),a+=r);return a}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Te.apply(null,arguments)}var tu=function(e,r,s,a,n,i,o,l){if(!e){var c;if(r===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,a,n,i,o,l],m=0;c=new Error(r.replace(/%s/g,function(){return d[m++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},ru=tu;const zr=ft(ru);var su=function(){};function au(e,r){var s={};return Object.keys(e).forEach(function(a){s[Ss(a)]=su}),s}function fi(e,r){return e[r]!==void 0}function Ss(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function nu(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function iu(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,Ts(e,r)}function xl(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function gl(e){function r(s){var a=this.constructor.getDerivedStateFromProps(e,s);return a??null}this.setState(r.bind(this))}function pl(e,r){try{var s=this.props,a=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,a)}finally{this.props=s,this.state=a}}xl.__suppressDeprecationWarning=!0;gl.__suppressDeprecationWarning=!0;pl.__suppressDeprecationWarning=!0;function ou(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof r.getSnapshotBeforeUpdate!="function")return e;var s=null,a=null,n=null;if(typeof r.componentWillMount=="function"?s="componentWillMount":typeof r.UNSAFE_componentWillMount=="function"&&(s="UNSAFE_componentWillMount"),typeof r.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof r.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof r.componentWillUpdate=="function"?n="componentWillUpdate":typeof r.UNSAFE_componentWillUpdate=="function"&&(n="UNSAFE_componentWillUpdate"),s!==null||a!==null||n!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(s!==null?`
  `+s:"")+(a!==null?`
  `+a:"")+(n!==null?`
  `+n:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(r.componentWillMount=xl,r.componentWillReceiveProps=gl),typeof r.getSnapshotBeforeUpdate=="function"){if(typeof r.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=pl;var l=r.componentDidUpdate;r.componentDidUpdate=function(d,m,x){var u=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;l.call(this,d,m,u)}}return e}var lu="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function vl(e,r,s){s===void 0&&(s=[]);var a=e.displayName||e.name||"Component",n=nu(e),i=Object.keys(r),o=i.map(Ss);n||!s.length||zr(!1);var l=function(d){iu(m,d);function m(){for(var u,b=arguments.length,g=new Array(b),h=0;h<b;h++)g[h]=arguments[h];u=d.call.apply(d,[this].concat(g))||this,u.handlers=Object.create(null),i.forEach(function(y){var f=r[y],C=function(k){if(u.props[f]){var E;u._notifying=!0;for(var L=arguments.length,M=new Array(L>1?L-1:0),B=1;B<L;B++)M[B-1]=arguments[B];(E=u.props)[f].apply(E,[k].concat(M)),u._notifying=!1}u.unmounted||u.setState(function(G){var A,K=G.values;return{values:Te(Object.create(null),K,(A={},A[y]=k,A))}})};u.handlers[f]=C}),s.length&&(u.attachRef=function(y){u.inner=y});var j=Object.create(null);return i.forEach(function(y){j[y]=u.props[Ss(y)]}),u.state={values:j,prevProps:{}},u}var x=m.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},m.getDerivedStateFromProps=function(b,g){var h=g.values,j=g.prevProps,y={values:Te(Object.create(null),h),prevProps:{}};return i.forEach(function(f){y.prevProps[f]=b[f],!fi(b,f)&&fi(j,f)&&(y.values[f]=b[Ss(f)])}),y},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var b=this,g=this.props,h=g.innerRef,j=Gs(g,["innerRef"]);o.forEach(function(f){delete j[f]});var y={};return i.forEach(function(f){var C=b.props[f];y[f]=C!==void 0?C:b.state.values[f]}),_.createElement(e,Te({},j,y,this.handlers,{ref:h||this.attachRef}))},m}(_.Component);ou(l),l.displayName="Uncontrolled("+a+")",l.propTypes=Te({innerRef:function(){}},au(r)),s.forEach(function(d){l.prototype[d]=function(){var x;return(x=this.inner)[d].apply(x,arguments)}});var c=l;return _.forwardRef&&(c=_.forwardRef(function(d,m){return _.createElement(l,Te({},d,{innerRef:m,__source:{fileName:lu,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,m,x){return m===void 0&&(m={}),vl(d,Te({},r,m),x)},c}var bl={exports:{}},cu="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",du=cu,uu=du;function yl(){}function jl(){}jl.resetWarningCache=yl;var mu=function(){function e(a,n,i,o,l,c){if(c!==uu){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function r(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:jl,resetWarningCache:yl};return s.PropTypes=s,s};bl.exports=mu();var hu=bl.exports;const re=ft(hu);var Os="milliseconds",Gr="seconds",qr="minutes",Yr="hours",Zt="day",fr="week",Vr="month",er="year",tr="decade",rr="century",wl={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},fu={month:1,year:12,decade:10*12,century:100*12};function xu(e){return[31,gu(e),31,30,31,30,31,31,30,31,30,31]}function gu(e){return e%4===0&&e%100!==0||e%400===0?29:28}function pt(e,r,s){switch(e=new Date(e),s){case Os:case Gr:case qr:case Yr:case Zt:case fr:return pu(e,r*wl[s]);case Vr:case er:case tr:case rr:return vu(e,r*fu[s])}throw new TypeError('Invalid units: "'+s+'"')}function pu(e,r){var s=new Date(+e+r);return bu(e,s)}function vu(e,r){var s=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=s*12+a+r,o=Math.trunc(i/12),l=i%12,c=Math.min(n,xu(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function bu(e,r){var s=e.getTimezoneOffset(),a=r.getTimezoneOffset(),n=a-s;return new Date(+r+n*wl.minutes)}function Kr(e,r,s){return pt(e,-r,s)}function Ue(e,r,s){switch(e=new Date(e),r){case rr:case tr:case er:e=_s(e,0);case Vr:e=$l(e,1);case fr:case Zt:e=Qr(e,0);case Yr:e=xr(e,0);case qr:e=Jr(e,0);case Gr:e=Xr(e,0)}return r===tr&&(e=Kr(e,sr(e)%10,"year")),r===rr&&(e=Kr(e,sr(e)%100,"year")),r===fr&&(e=El(e,0,s)),e}function Ms(e,r,s){switch(e=new Date(e),e=Ue(e,r,s),r){case rr:case tr:case er:case Vr:case fr:e=pt(e,1,r),e=Kr(e,1,Zt),e.setHours(23,59,59,999);break;case Zt:e.setHours(23,59,59,999);break;case Yr:case qr:case Gr:e=pt(e,1,r),e=Kr(e,1,Os)}return e}var yr=wr(function(e,r){return e===r}),nn=wr(function(e,r){return e!==r}),qs=wr(function(e,r){return e>r}),as=wr(function(e,r){return e>=r}),on=wr(function(e,r){return e<r}),jr=wr(function(e,r){return e<=r});function Nl(){return new Date(Math.min.apply(Math,arguments))}function Sl(){return new Date(Math.max.apply(Math,arguments))}function kl(e,r,s,a){return a=a||"day",(!r||as(e,r,a))&&(!s||jr(e,s,a))}var Xr=Ht("Milliseconds"),Jr=Ht("Seconds"),xr=Ht("Minutes"),Qr=Ht("Hours"),Cl=Ht("Day"),$l=Ht("Date"),_s=Ht("Month"),sr=Ht("FullYear");function yu(e,r){return r===void 0?sr(Ue(e,tr)):pt(e,r+10,er)}function ju(e,r){return r===void 0?sr(Ue(e,rr)):pt(e,r+100,er)}function El(e,r,s){var a=(Cl(e)+7-(s||0))%7;return r===void 0?a:pt(e,r-a,Zt)}function wu(e,r,s,a){var n,i,o;switch(s){case Os:case Gr:case qr:case Yr:case Zt:case fr:n=r.getTime()-e.getTime();break;case Vr:case er:case tr:case rr:n=(sr(r)-sr(e))*12+_s(r)-_s(e);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case Os:i=1;break;case Gr:i=1e3;break;case qr:i=1e3*60;break;case Yr:i=1e3*60*60;break;case Zt:i=1e3*60*60*24;break;case fr:i=1e3*60*60*24*7;break;case Vr:i=1;break;case er:i=12;break;case tr:i=120;break;case rr:i=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return o=n/i,a?o:Math.round(o)}function Ht(e){var r=function(s){switch(s){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(s,a){if(a===void 0)return s["get"+e]();var n=new Date(s);return n["set"+e](a),r&&n["get"+e]()!=a&&(e==="Hours"||a>=r&&n.getHours()-s.getHours()<Math.floor(a/r))&&n["set"+e](a+r),n}}function wr(e){return function(r,s,a){return e(+Ue(r,a),+Ue(s,a))}}const xi=Object.freeze(Object.defineProperty({__proto__:null,add:pt,century:ju,date:$l,day:Cl,decade:yu,diff:wu,endOf:Ms,eq:yr,gt:qs,gte:as,hours:Qr,inRange:kl,lt:on,lte:jr,max:Sl,milliseconds:Xr,min:Nl,minutes:xr,month:_s,neq:nn,seconds:Jr,startOf:Ue,subtract:Kr,weekday:El,year:sr},Symbol.toStringTag,{value:"Module"}));function Nu(e){if(Array.isArray(e))return Pa(e)}function Dl(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Su(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(e){return Nu(e)||Dl(e)||an(e)||Su()}function ku(e,r,s){var a=-1,n=e.length;r<0&&(r=-r>n?0:n+r),s=s>n?n:s,s<0&&(s+=n),n=r>s?0:s-r>>>0,r>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+r];return i}var Tl=ku;function Cu(e,r){return e===r||e!==e&&r!==r}var ns=Cu,$u=typeof dt=="object"&&dt&&dt.Object===Object&&dt,Ol=$u,Eu=Ol,Du=typeof self=="object"&&self&&self.Object===Object&&self,Tu=Eu||Du||Function("return this")(),$t=Tu,Ou=$t,Mu=Ou.Symbol,Nr=Mu,gi=Nr,Ml=Object.prototype,_u=Ml.hasOwnProperty,Pu=Ml.toString,Mr=gi?gi.toStringTag:void 0;function Au(e){var r=_u.call(e,Mr),s=e[Mr];try{e[Mr]=void 0;var a=!0}catch{}var n=Pu.call(e);return a&&(r?e[Mr]=s:delete e[Mr]),n}var Ru=Au,Iu=Object.prototype,Lu=Iu.toString;function Fu(e){return Lu.call(e)}var Wu=Fu,pi=Nr,Uu=Ru,Bu=Wu,Hu="[object Null]",zu="[object Undefined]",vi=pi?pi.toStringTag:void 0;function Gu(e){return e==null?e===void 0?zu:Hu:vi&&vi in Object(e)?Uu(e):Bu(e)}var Sr=Gu;function qu(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Pt=qu,Yu=Sr,Vu=Pt,Ku="[object AsyncFunction]",Xu="[object Function]",Ju="[object GeneratorFunction]",Qu="[object Proxy]";function Zu(e){if(!Vu(e))return!1;var r=Yu(e);return r==Xu||r==Ju||r==Ku||r==Qu}var ln=Zu,em=9007199254740991;function tm(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=em}var cn=tm,rm=ln,sm=cn;function am(e){return e!=null&&sm(e.length)&&!rm(e)}var is=am,nm=9007199254740991,im=/^(?:0|[1-9]\d*)$/;function om(e,r){var s=typeof e;return r=r??nm,!!r&&(s=="number"||s!="symbol"&&im.test(e))&&e>-1&&e%1==0&&e<r}var dn=om,lm=ns,cm=is,dm=dn,um=Pt;function mm(e,r,s){if(!um(s))return!1;var a=typeof r;return(a=="number"?cm(s)&&dm(r,s.length):a=="string"&&r in s)?lm(s[r],e):!1}var Ys=mm,hm=/\s/;function fm(e){for(var r=e.length;r--&&hm.test(e.charAt(r)););return r}var xm=fm,gm=xm,pm=/^\s+/;function vm(e){return e&&e.slice(0,gm(e)+1).replace(pm,"")}var bm=vm;function ym(e){return e!=null&&typeof e=="object"}var zt=ym,jm=Sr,wm=zt,Nm="[object Symbol]";function Sm(e){return typeof e=="symbol"||wm(e)&&jm(e)==Nm}var os=Sm,km=bm,bi=Pt,Cm=os,yi=NaN,$m=/^[-+]0x[0-9a-f]+$/i,Em=/^0b[01]+$/i,Dm=/^0o[0-7]+$/i,Tm=parseInt;function Om(e){if(typeof e=="number")return e;if(Cm(e))return yi;if(bi(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=bi(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=km(e);var s=Em.test(e);return s||Dm.test(e)?Tm(e.slice(2),s?2:8):$m.test(e)?yi:+e}var Mm=Om,_m=Mm,ji=1/0,Pm=17976931348623157e292;function Am(e){if(!e)return e===0?e:0;if(e=_m(e),e===ji||e===-ji){var r=e<0?-1:1;return r*Pm}return e===e?e:0}var _l=Am,Rm=_l;function Im(e){var r=Rm(e),s=r%1;return r===r?s?r-s:r:0}var Pl=Im,Lm=Tl,Fm=Ys,Wm=Pl,Um=Math.ceil,Bm=Math.max;function Hm(e,r,s){(s?Fm(e,r,s):r===void 0)?r=1:r=Bm(Wm(r),0);var a=e==null?0:e.length;if(!a||r<1)return[];for(var n=0,i=0,o=Array(Um(a/r));n<a;)o[i++]=Lm(e,n,n+=r);return o}var zm=Hm;const Gm=ft(zm);function ls(e){return e&&e.ownerDocument||document}function qm(e){var r=ls(e);return r&&r.defaultView||window}function Ym(e,r){return qm(e).getComputedStyle(e,r)}var Vm=/([A-Z])/g;function Km(e){return e.replace(Vm,"-$1").toLowerCase()}var Xm=/^ms-/;function bs(e){return Km(e).replace(Xm,"-ms-")}var Jm=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Qm(e){return!!(e&&Jm.test(e))}function cr(e,r){var s="",a="";if(typeof r=="string")return e.style.getPropertyValue(bs(r))||Ym(e).getPropertyValue(bs(r));Object.keys(r).forEach(function(n){var i=r[n];!i&&i!==0?e.style.removeProperty(bs(n)):Qm(n)?a+=n+"("+i+") ":s+=bs(n)+": "+i+";"}),a&&(s+="transform: "+a+";"),e.style.cssText+=";"+s}function Zr(e,r){if(e.contains)return e.contains(r);if(e.compareDocumentPosition)return e===r||!!(e.compareDocumentPosition(r)&16)}function Zm(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function un(e){return"window"in e&&e.window===e?e:Zm(e)&&e.defaultView||!1}function Al(e){var r=e==="pageXOffset"?"scrollLeft":"scrollTop";function s(a,n){var i=un(a);if(n===void 0)return i?i[e]:a[r];i?i.scrollTo(i[e],n):a[r]=n}return s}const Rl=Al("pageXOffset"),Il=Al("pageYOffset");function Kt(e){var r=ls(e),s={top:0,left:0,height:0,width:0},a=r&&r.documentElement;return!a||!Zr(a,e)||(e.getBoundingClientRect!==void 0&&(s=e.getBoundingClientRect()),s={top:s.top+Il(a)-(a.clientTop||0),left:s.left+Rl(a)-(a.clientLeft||0),width:s.width,height:s.height}),s}var eh=function(r){return!!r&&"offsetParent"in r};function th(e){for(var r=ls(e),s=e&&e.offsetParent;eh(s)&&s.nodeName!=="HTML"&&cr(s,"position")==="static";)s=s.offsetParent;return s||r.documentElement}var rh=function(r){return r.nodeName&&r.nodeName.toLowerCase()};function Ll(e,r){var s={top:0,left:0},a;if(cr(e,"position")==="fixed")a=e.getBoundingClientRect();else{var n=r||th(e);a=Kt(e),rh(n)!=="html"&&(s=Kt(n));var i=String(cr(n,"borderTopWidth")||0);s.top+=parseInt(i,10)-Il(n)||0;var o=String(cr(n,"borderLeftWidth")||0);s.left+=parseInt(o,10)-Rl(n)||0}var l=String(cr(e,"marginTop")||0),c=String(cr(e,"marginLeft")||0);return Te({},a,{top:a.top-s.top-(parseInt(l,10)||0),left:a.left-s.left-(parseInt(c,10)||0)})}const mn=!!(typeof window<"u"&&window.document&&window.document.createElement);var wi=new Date().getTime();function sh(e){var r=new Date().getTime(),s=Math.max(0,16-(r-wi)),a=setTimeout(e,s);return wi=r,a}var ah=["","webkit","moz","o","ms"],Aa="clearTimeout",Ra=sh,Ni=function(r,s){return r+(r?s[0].toUpperCase()+s.substr(1):s)+"AnimationFrame"};mn&&ah.some(function(e){var r=Ni(e,"request");return r in window&&(Aa=Ni(e,"cancel"),Ra=function(a){return window[r](a)}),!!Ra});var Si=function(r){typeof window[Aa]=="function"&&window[Aa](r)},Fl=Ra,va;function nh(e,r){if(!va){var s=document.body,a=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;va=function(i,o){return a.call(i,o)}}return va(e,r)}var ih=Function.prototype.bind.call(Function.prototype.call,[].slice);function oh(e,r){return ih(e.querySelectorAll(r))}var Ia=!1,La=!1;try{var ba={get passive(){return Ia=!0},get once(){return La=Ia=!0}};mn&&(window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,!0))}catch{}function lh(e,r,s,a){if(a&&typeof a!="boolean"&&!La){var n=a.once,i=a.capture,o=s;!La&&n&&(o=s.__once||function l(c){this.removeEventListener(r,l,i),s.call(this,c)},s.__once=o),e.addEventListener(r,o,Ia?a:i)}e.addEventListener(r,s,a)}function ch(e){const r=N.useRef(e);return N.useEffect(()=>{r.current=e},[e]),r}function ki(e){const r=ch(e);return N.useCallback(function(...s){return r.current&&r.current(...s)},[r])}function Ci(){return N.useState(null)}function dh(){const e=N.useRef(!0),r=N.useRef(()=>e.current);return N.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),r.current}function uh(e){const r=dh();return[e[0],N.useCallback(s=>{if(r())return e[1](s)},[r,e[1]])]}var Ze="top",mt="bottom",ht="right",et="left",hn="auto",cs=[Ze,mt,ht,et],gr="start",es="end",mh="clippingParents",Wl="viewport",_r="popper",hh="reference",$i=cs.reduce(function(e,r){return e.concat([r+"-"+gr,r+"-"+es])},[]),fn=[].concat(cs,[hn]).reduce(function(e,r){return e.concat([r,r+"-"+gr,r+"-"+es])},[]),fh="beforeRead",xh="read",gh="afterRead",ph="beforeMain",vh="main",bh="afterMain",yh="beforeWrite",jh="write",wh="afterWrite",Nh=[fh,xh,gh,ph,vh,bh,yh,jh,wh];function Nt(e){return e.split("-")[0]}function nt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function ar(e){var r=nt(e).Element;return e instanceof r||e instanceof Element}function St(e){var r=nt(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function xn(e){if(typeof ShadowRoot>"u")return!1;var r=nt(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var Xt=Math.max,Ps=Math.min,pr=Math.round;function Fa(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function Ul(){return!/^((?!chrome|android).)*safari/i.test(Fa())}function vr(e,r,s){r===void 0&&(r=!1),s===void 0&&(s=!1);var a=e.getBoundingClientRect(),n=1,i=1;r&&St(e)&&(n=e.offsetWidth>0&&pr(a.width)/e.offsetWidth||1,i=e.offsetHeight>0&&pr(a.height)/e.offsetHeight||1);var o=ar(e)?nt(e):window,l=o.visualViewport,c=!Ul()&&s,d=(a.left+(c&&l?l.offsetLeft:0))/n,m=(a.top+(c&&l?l.offsetTop:0))/i,x=a.width/n,u=a.height/i;return{width:x,height:u,top:m,right:d+x,bottom:m+u,left:d,x:d,y:m}}function gn(e){var r=vr(e),s=e.offsetWidth,a=e.offsetHeight;return Math.abs(r.width-s)<=1&&(s=r.width),Math.abs(r.height-a)<=1&&(a=r.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:a}}function Bl(e,r){var s=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(s&&xn(s)){var a=r;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Ut(e){return e?(e.nodeName||"").toLowerCase():null}function Mt(e){return nt(e).getComputedStyle(e)}function Sh(e){return["table","td","th"].indexOf(Ut(e))>=0}function Gt(e){return((ar(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vs(e){return Ut(e)==="html"?e:e.assignedSlot||e.parentNode||(xn(e)?e.host:null)||Gt(e)}function Ei(e){return!St(e)||Mt(e).position==="fixed"?null:e.offsetParent}function kh(e){var r=/firefox/i.test(Fa()),s=/Trident/i.test(Fa());if(s&&St(e)){var a=Mt(e);if(a.position==="fixed")return null}var n=Vs(e);for(xn(n)&&(n=n.host);St(n)&&["html","body"].indexOf(Ut(n))<0;){var i=Mt(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return n;n=n.parentNode}return null}function ds(e){for(var r=nt(e),s=Ei(e);s&&Sh(s)&&Mt(s).position==="static";)s=Ei(s);return s&&(Ut(s)==="html"||Ut(s)==="body"&&Mt(s).position==="static")?r:s||kh(e)||r}function pn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fr(e,r,s){return Xt(e,Ps(r,s))}function Ch(e,r,s){var a=Fr(e,r,s);return a>s?s:a}function Hl(){return{top:0,right:0,bottom:0,left:0}}function zl(e){return Object.assign({},Hl(),e)}function Gl(e,r){return r.reduce(function(s,a){return s[a]=e,s},{})}var $h=function(r,s){return r=typeof r=="function"?r(Object.assign({},s.rects,{placement:s.placement})):r,zl(typeof r!="number"?r:Gl(r,cs))};function Eh(e){var r,s=e.state,a=e.name,n=e.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,l=Nt(s.placement),c=pn(l),d=[et,ht].indexOf(l)>=0,m=d?"height":"width";if(!(!i||!o)){var x=$h(n.padding,s),u=gn(i),b=c==="y"?Ze:et,g=c==="y"?mt:ht,h=s.rects.reference[m]+s.rects.reference[c]-o[c]-s.rects.popper[m],j=o[c]-s.rects.reference[c],y=ds(i),f=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,C=h/2-j/2,p=x[b],k=f-u[m]-x[g],E=f/2-u[m]/2+C,L=Fr(p,E,k),M=c;s.modifiersData[a]=(r={},r[M]=L,r.centerOffset=L-E,r)}}function Dh(e){var r=e.state,s=e.options,a=s.element,n=a===void 0?"[data-popper-arrow]":a;n!=null&&(typeof n=="string"&&(n=r.elements.popper.querySelector(n),!n)||Bl(r.elements.popper,n)&&(r.elements.arrow=n))}const Th={name:"arrow",enabled:!0,phase:"main",fn:Eh,effect:Dh,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function br(e){return e.split("-")[1]}var Oh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mh(e,r){var s=e.x,a=e.y,n=r.devicePixelRatio||1;return{x:pr(s*n)/n||0,y:pr(a*n)/n||0}}function Di(e){var r,s=e.popper,a=e.popperRect,n=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,m=e.roundOffsets,x=e.isFixed,u=o.x,b=u===void 0?0:u,g=o.y,h=g===void 0?0:g,j=typeof m=="function"?m({x:b,y:h}):{x:b,y:h};b=j.x,h=j.y;var y=o.hasOwnProperty("x"),f=o.hasOwnProperty("y"),C=et,p=Ze,k=window;if(d){var E=ds(s),L="clientHeight",M="clientWidth";if(E===nt(s)&&(E=Gt(s),Mt(E).position!=="static"&&l==="absolute"&&(L="scrollHeight",M="scrollWidth")),E=E,n===Ze||(n===et||n===ht)&&i===es){p=mt;var B=x&&E===k&&k.visualViewport?k.visualViewport.height:E[L];h-=B-a.height,h*=c?1:-1}if(n===et||(n===Ze||n===mt)&&i===es){C=ht;var G=x&&E===k&&k.visualViewport?k.visualViewport.width:E[M];b-=G-a.width,b*=c?1:-1}}var A=Object.assign({position:l},d&&Oh),K=m===!0?Mh({x:b,y:h},nt(s)):{x:b,y:h};if(b=K.x,h=K.y,c){var Y;return Object.assign({},A,(Y={},Y[p]=f?"0":"",Y[C]=y?"0":"",Y.transform=(k.devicePixelRatio||1)<=1?"translate("+b+"px, "+h+"px)":"translate3d("+b+"px, "+h+"px, 0)",Y))}return Object.assign({},A,(r={},r[p]=f?h+"px":"",r[C]=y?b+"px":"",r.transform="",r))}function _h(e){var r=e.state,s=e.options,a=s.gpuAcceleration,n=a===void 0?!0:a,i=s.adaptive,o=i===void 0?!0:i,l=s.roundOffsets,c=l===void 0?!0:l,d={placement:Nt(r.placement),variation:br(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:n,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,Di(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:o,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,Di(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}const Ph={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:_h,data:{}};var ys={passive:!0};function Ah(e){var r=e.state,s=e.instance,a=e.options,n=a.scroll,i=n===void 0?!0:n,o=a.resize,l=o===void 0?!0:o,c=nt(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&d.forEach(function(m){m.addEventListener("scroll",s.update,ys)}),l&&c.addEventListener("resize",s.update,ys),function(){i&&d.forEach(function(m){m.removeEventListener("scroll",s.update,ys)}),l&&c.removeEventListener("resize",s.update,ys)}}const Rh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ah,data:{}};var Ih={left:"right",right:"left",bottom:"top",top:"bottom"};function Cs(e){return e.replace(/left|right|bottom|top/g,function(r){return Ih[r]})}var Lh={start:"end",end:"start"};function Ti(e){return e.replace(/start|end/g,function(r){return Lh[r]})}function vn(e){var r=nt(e),s=r.pageXOffset,a=r.pageYOffset;return{scrollLeft:s,scrollTop:a}}function bn(e){return vr(Gt(e)).left+vn(e).scrollLeft}function Fh(e,r){var s=nt(e),a=Gt(e),n=s.visualViewport,i=a.clientWidth,o=a.clientHeight,l=0,c=0;if(n){i=n.width,o=n.height;var d=Ul();(d||!d&&r==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:i,height:o,x:l+bn(e),y:c}}function Wh(e){var r,s=Gt(e),a=vn(e),n=(r=e.ownerDocument)==null?void 0:r.body,i=Xt(s.scrollWidth,s.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Xt(s.scrollHeight,s.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-a.scrollLeft+bn(e),c=-a.scrollTop;return Mt(n||s).direction==="rtl"&&(l+=Xt(s.clientWidth,n?n.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function yn(e){var r=Mt(e),s=r.overflow,a=r.overflowX,n=r.overflowY;return/auto|scroll|overlay|hidden/.test(s+n+a)}function ql(e){return["html","body","#document"].indexOf(Ut(e))>=0?e.ownerDocument.body:St(e)&&yn(e)?e:ql(Vs(e))}function Wr(e,r){var s;r===void 0&&(r=[]);var a=ql(e),n=a===((s=e.ownerDocument)==null?void 0:s.body),i=nt(a),o=n?[i].concat(i.visualViewport||[],yn(a)?a:[]):a,l=r.concat(o);return n?l:l.concat(Wr(Vs(o)))}function Wa(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Uh(e,r){var s=vr(e,!1,r==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function Oi(e,r,s){return r===Wl?Wa(Fh(e,s)):ar(r)?Uh(r,s):Wa(Wh(Gt(e)))}function Bh(e){var r=Wr(Vs(e)),s=["absolute","fixed"].indexOf(Mt(e).position)>=0,a=s&&St(e)?ds(e):e;return ar(a)?r.filter(function(n){return ar(n)&&Bl(n,a)&&Ut(n)!=="body"}):[]}function Hh(e,r,s,a){var n=r==="clippingParents"?Bh(e):[].concat(r),i=[].concat(n,[s]),o=i[0],l=i.reduce(function(c,d){var m=Oi(e,d,a);return c.top=Xt(m.top,c.top),c.right=Ps(m.right,c.right),c.bottom=Ps(m.bottom,c.bottom),c.left=Xt(m.left,c.left),c},Oi(e,o,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Yl(e){var r=e.reference,s=e.element,a=e.placement,n=a?Nt(a):null,i=a?br(a):null,o=r.x+r.width/2-s.width/2,l=r.y+r.height/2-s.height/2,c;switch(n){case Ze:c={x:o,y:r.y-s.height};break;case mt:c={x:o,y:r.y+r.height};break;case ht:c={x:r.x+r.width,y:l};break;case et:c={x:r.x-s.width,y:l};break;default:c={x:r.x,y:r.y}}var d=n?pn(n):null;if(d!=null){var m=d==="y"?"height":"width";switch(i){case gr:c[d]=c[d]-(r[m]/2-s[m]/2);break;case es:c[d]=c[d]+(r[m]/2-s[m]/2);break}}return c}function ts(e,r){r===void 0&&(r={});var s=r,a=s.placement,n=a===void 0?e.placement:a,i=s.strategy,o=i===void 0?e.strategy:i,l=s.boundary,c=l===void 0?mh:l,d=s.rootBoundary,m=d===void 0?Wl:d,x=s.elementContext,u=x===void 0?_r:x,b=s.altBoundary,g=b===void 0?!1:b,h=s.padding,j=h===void 0?0:h,y=zl(typeof j!="number"?j:Gl(j,cs)),f=u===_r?hh:_r,C=e.rects.popper,p=e.elements[g?f:u],k=Hh(ar(p)?p:p.contextElement||Gt(e.elements.popper),c,m,o),E=vr(e.elements.reference),L=Yl({reference:E,element:C,placement:n}),M=Wa(Object.assign({},C,L)),B=u===_r?M:E,G={top:k.top-B.top+y.top,bottom:B.bottom-k.bottom+y.bottom,left:k.left-B.left+y.left,right:B.right-k.right+y.right},A=e.modifiersData.offset;if(u===_r&&A){var K=A[n];Object.keys(G).forEach(function(Y){var ae=[ht,mt].indexOf(Y)>=0?1:-1,ie=[Ze,mt].indexOf(Y)>=0?"y":"x";G[Y]+=K[ie]*ae})}return G}function zh(e,r){r===void 0&&(r={});var s=r,a=s.placement,n=s.boundary,i=s.rootBoundary,o=s.padding,l=s.flipVariations,c=s.allowedAutoPlacements,d=c===void 0?fn:c,m=br(a),x=m?l?$i:$i.filter(function(g){return br(g)===m}):cs,u=x.filter(function(g){return d.indexOf(g)>=0});u.length===0&&(u=x);var b=u.reduce(function(g,h){return g[h]=ts(e,{placement:h,boundary:n,rootBoundary:i,padding:o})[Nt(h)],g},{});return Object.keys(b).sort(function(g,h){return b[g]-b[h]})}function Gh(e){if(Nt(e)===hn)return[];var r=Cs(e);return[Ti(e),r,Ti(r)]}function qh(e){var r=e.state,s=e.options,a=e.name;if(!r.modifiersData[a]._skip){for(var n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!0:o,c=s.fallbackPlacements,d=s.padding,m=s.boundary,x=s.rootBoundary,u=s.altBoundary,b=s.flipVariations,g=b===void 0?!0:b,h=s.allowedAutoPlacements,j=r.options.placement,y=Nt(j),f=y===j,C=c||(f||!g?[Cs(j)]:Gh(j)),p=[j].concat(C).reduce(function(xe,De){return xe.concat(Nt(De)===hn?zh(r,{placement:De,boundary:m,rootBoundary:x,padding:d,flipVariations:g,allowedAutoPlacements:h}):De)},[]),k=r.rects.reference,E=r.rects.popper,L=new Map,M=!0,B=p[0],G=0;G<p.length;G++){var A=p[G],K=Nt(A),Y=br(A)===gr,ae=[Ze,mt].indexOf(K)>=0,ie=ae?"width":"height",R=ts(r,{placement:A,boundary:m,rootBoundary:x,altBoundary:u,padding:d}),D=ae?Y?ht:et:Y?mt:Ze;k[ie]>E[ie]&&(D=Cs(D));var U=Cs(D),V=[];if(i&&V.push(R[K]<=0),l&&V.push(R[D]<=0,R[U]<=0),V.every(function(xe){return xe})){B=A,M=!1;break}L.set(A,V)}if(M)for(var T=g?3:1,me=function(De){var Q=p.find(function(ge){var ee=L.get(ge);if(ee)return ee.slice(0,De).every(function(pe){return pe})});if(Q)return B=Q,"break"},ce=T;ce>0;ce--){var fe=me(ce);if(fe==="break")break}r.placement!==B&&(r.modifiersData[a]._skip=!0,r.placement=B,r.reset=!0)}}const Yh={name:"flip",enabled:!0,phase:"main",fn:qh,requiresIfExists:["offset"],data:{_skip:!1}};function Mi(e,r,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-r.height-s.y,right:e.right-r.width+s.x,bottom:e.bottom-r.height+s.y,left:e.left-r.width-s.x}}function _i(e){return[Ze,ht,mt,et].some(function(r){return e[r]>=0})}function Vh(e){var r=e.state,s=e.name,a=r.rects.reference,n=r.rects.popper,i=r.modifiersData.preventOverflow,o=ts(r,{elementContext:"reference"}),l=ts(r,{altBoundary:!0}),c=Mi(o,a),d=Mi(l,n,i),m=_i(c),x=_i(d);r.modifiersData[s]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:x},r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":x})}const Kh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vh};function Xh(e,r,s){var a=Nt(e),n=[et,Ze].indexOf(a)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},r,{placement:e})):s,o=i[0],l=i[1];return o=o||0,l=(l||0)*n,[et,ht].indexOf(a)>=0?{x:l,y:o}:{x:o,y:l}}function Jh(e){var r=e.state,s=e.options,a=e.name,n=s.offset,i=n===void 0?[0,0]:n,o=fn.reduce(function(m,x){return m[x]=Xh(x,r.rects,i),m},{}),l=o[r.placement],c=l.x,d=l.y;r.modifiersData.popperOffsets!=null&&(r.modifiersData.popperOffsets.x+=c,r.modifiersData.popperOffsets.y+=d),r.modifiersData[a]=o}const Qh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Jh};function Zh(e){var r=e.state,s=e.name;r.modifiersData[s]=Yl({reference:r.rects.reference,element:r.rects.popper,placement:r.placement})}const ef={name:"popperOffsets",enabled:!0,phase:"read",fn:Zh,data:{}};function tf(e){return e==="x"?"y":"x"}function rf(e){var r=e.state,s=e.options,a=e.name,n=s.mainAxis,i=n===void 0?!0:n,o=s.altAxis,l=o===void 0?!1:o,c=s.boundary,d=s.rootBoundary,m=s.altBoundary,x=s.padding,u=s.tether,b=u===void 0?!0:u,g=s.tetherOffset,h=g===void 0?0:g,j=ts(r,{boundary:c,rootBoundary:d,padding:x,altBoundary:m}),y=Nt(r.placement),f=br(r.placement),C=!f,p=pn(y),k=tf(p),E=r.modifiersData.popperOffsets,L=r.rects.reference,M=r.rects.popper,B=typeof h=="function"?h(Object.assign({},r.rects,{placement:r.placement})):h,G=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),A=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,K={x:0,y:0};if(E){if(i){var Y,ae=p==="y"?Ze:et,ie=p==="y"?mt:ht,R=p==="y"?"height":"width",D=E[p],U=D+j[ae],V=D-j[ie],T=b?-M[R]/2:0,me=f===gr?L[R]:M[R],ce=f===gr?-M[R]:-L[R],fe=r.elements.arrow,xe=b&&fe?gn(fe):{width:0,height:0},De=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:Hl(),Q=De[ae],ge=De[ie],ee=Fr(0,L[R],xe[R]),pe=C?L[R]/2-T-ee-Q-G.mainAxis:me-ee-Q-G.mainAxis,ve=C?-L[R]/2+T+ee+ge+G.mainAxis:ce+ee+ge+G.mainAxis,Ae=r.elements.arrow&&ds(r.elements.arrow),gt=Ae?p==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,Le=(Y=A==null?void 0:A[p])!=null?Y:0,Fe=D+pe-Le-gt,q=D+ve-Le,ye=Fr(b?Ps(U,Fe):U,D,b?Xt(V,q):V);E[p]=ye,K[p]=ye-D}if(l){var de,O=p==="x"?Ze:et,z=p==="x"?mt:ht,W=E[k],I=k==="y"?"height":"width",w=W+j[O],F=W-j[z],v=[Ze,et].indexOf(y)!==-1,$=(de=A==null?void 0:A[k])!=null?de:0,X=v?w:W-L[I]-M[I]-$+G.altAxis,te=v?W+L[I]+M[I]-$-G.altAxis:F,P=b&&v?Ch(X,W,te):Fr(b?X:w,W,b?te:F);E[k]=P,K[k]=P-W}r.modifiersData[a]=K}}const sf={name:"preventOverflow",enabled:!0,phase:"main",fn:rf,requiresIfExists:["offset"]};function af(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function nf(e){return e===nt(e)||!St(e)?vn(e):af(e)}function of(e){var r=e.getBoundingClientRect(),s=pr(r.width)/e.offsetWidth||1,a=pr(r.height)/e.offsetHeight||1;return s!==1||a!==1}function lf(e,r,s){s===void 0&&(s=!1);var a=St(r),n=St(r)&&of(r),i=Gt(r),o=vr(e,n,s),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!s)&&((Ut(r)!=="body"||yn(i))&&(l=nf(r)),St(r)?(c=vr(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):i&&(c.x=bn(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function cf(e){var r=new Map,s=new Set,a=[];e.forEach(function(i){r.set(i.name,i)});function n(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!s.has(l)){var c=r.get(l);c&&n(c)}}),a.push(i)}return e.forEach(function(i){s.has(i.name)||n(i)}),a}function df(e){var r=cf(e);return Nh.reduce(function(s,a){return s.concat(r.filter(function(n){return n.phase===a}))},[])}function uf(e){var r;return function(){return r||(r=new Promise(function(s){Promise.resolve().then(function(){r=void 0,s(e())})})),r}}function mf(e){var r=e.reduce(function(s,a){var n=s[a.name];return s[a.name]=n?Object.assign({},n,a,{options:Object.assign({},n.options,a.options),data:Object.assign({},n.data,a.data)}):a,s},{});return Object.keys(r).map(function(s){return r[s]})}var Pi={placement:"bottom",modifiers:[],strategy:"absolute"};function Ai(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return!r.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function hf(e){e===void 0&&(e={});var r=e,s=r.defaultModifiers,a=s===void 0?[]:s,n=r.defaultOptions,i=n===void 0?Pi:n;return function(l,c,d){d===void 0&&(d=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},Pi,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},x=[],u=!1,b={state:m,setOptions:function(y){var f=typeof y=="function"?y(m.options):y;h(),m.options=Object.assign({},i,m.options,f),m.scrollParents={reference:ar(l)?Wr(l):l.contextElement?Wr(l.contextElement):[],popper:Wr(c)};var C=df(mf([].concat(a,m.options.modifiers)));return m.orderedModifiers=C.filter(function(p){return p.enabled}),g(),b.update()},forceUpdate:function(){if(!u){var y=m.elements,f=y.reference,C=y.popper;if(Ai(f,C)){m.rects={reference:lf(f,ds(C),m.options.strategy==="fixed"),popper:gn(C)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(G){return m.modifiersData[G.name]=Object.assign({},G.data)});for(var p=0;p<m.orderedModifiers.length;p++){if(m.reset===!0){m.reset=!1,p=-1;continue}var k=m.orderedModifiers[p],E=k.fn,L=k.options,M=L===void 0?{}:L,B=k.name;typeof E=="function"&&(m=E({state:m,options:M,name:B,instance:b})||m)}}}},update:uf(function(){return new Promise(function(j){b.forceUpdate(),j(m)})}),destroy:function(){h(),u=!0}};if(!Ai(l,c))return b;b.setOptions(d).then(function(j){!u&&d.onFirstUpdate&&d.onFirstUpdate(j)});function g(){m.orderedModifiers.forEach(function(j){var y=j.name,f=j.options,C=f===void 0?{}:f,p=j.effect;if(typeof p=="function"){var k=p({state:m,name:y,instance:b,options:C}),E=function(){};x.push(k||E)}})}function h(){x.forEach(function(j){return j()}),x=[]}return b}}var ff=hf({defaultModifiers:[Kh,ef,Ph,Rh,Qh,Yh,sf,Th]}),Ri=function(r){return{position:r,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},xf={name:"applyStyles",enabled:!1},gf={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(r){var s=r.state;return function(){var a=s.elements,n=a.reference,i=a.popper;if("removeAttribute"in n){var o=(n.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?n.setAttribute("aria-describedby",o.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(r){var s,a=r.state,n=a.elements,i=n.popper,o=n.reference,l=(s=i.getAttribute("role"))==null?void 0:s.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},pf=[];function vf(e,r,s){var a=s===void 0?{}:s,n=a.enabled,i=n===void 0?!0:n,o=a.placement,l=o===void 0?"bottom":o,c=a.strategy,d=c===void 0?"absolute":c,m=a.modifiers,x=m===void 0?pf:m,u=Gs(a,["enabled","placement","strategy","modifiers"]),b=N.useRef(),g=N.useCallback(function(){var p;(p=b.current)==null||p.update()},[]),h=N.useCallback(function(){var p;(p=b.current)==null||p.forceUpdate()},[]),j=uh(N.useState({placement:l,update:g,forceUpdate:h,attributes:{},styles:{popper:Ri(d),arrow:{}}})),y=j[0],f=j[1],C=N.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(k){var E=k.state,L={},M={};Object.keys(E.elements).forEach(function(B){L[B]=E.styles[B],M[B]=E.attributes[B]}),f({state:E,styles:L,attributes:M,update:g,forceUpdate:h,placement:E.placement})}}},[g,h,f]);return N.useEffect(function(){!b.current||!i||b.current.setOptions({placement:l,strategy:d,modifiers:[].concat(x,[C,xf])})},[d,l,C,i]),N.useEffect(function(){if(!(!i||e==null||r==null))return b.current=ff(e,r,Te({},u,{placement:l,strategy:d,modifiers:[].concat(x,[gf,C])})),function(){b.current!=null&&(b.current.destroy(),b.current=void 0,f(function(p){return Te({},p,{attributes:{},styles:{popper:Ri(d)}})}))}},[i,e,r]),y}function bf(e,r,s,a){var n=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(r,s,n),s.__once&&e.removeEventListener(r,s.__once,n)}function Rr(e,r,s,a){return lh(e,r,s,a),function(){bf(e,r,s,a)}}var yf=function(){},jf=yf;const wf=ft(jf);function Nf(e){return e&&"setState"in e?Ko.findDOMNode(e):e??null}const Sf=function(e){return ls(Nf(e))};var kf=27,Ii=function(){};function Cf(e){return e.button===0}function $f(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Li=function(r){return r&&("current"in r?r.current:r)};function Ef(e,r,s){var a=s===void 0?{}:s,n=a.disabled,i=a.clickTrigger,o=i===void 0?"click":i,l=N.useRef(!1),c=r||Ii,d=N.useCallback(function(u){var b,g=Li(e);wf(!!g,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!g||$f(u)||!Cf(u)||!!Zr(g,(b=u.composedPath==null?void 0:u.composedPath()[0])!=null?b:u.target)},[e]),m=ki(function(u){l.current||c(u)}),x=ki(function(u){u.keyCode===kf&&c(u)});N.useEffect(function(){if(!(n||e==null)){var u=window.event,b=Sf(Li(e)),g=Rr(b,o,d,!0),h=Rr(b,o,function(f){if(f===u){u=void 0;return}m(f)}),j=Rr(b,"keyup",function(f){if(f===u){u=void 0;return}x(f)}),y=[];return"ontouchstart"in b.documentElement&&(y=[].slice.call(b.body.children).map(function(f){return Rr(f,"mousemove",Ii)})),function(){g(),h(),j(),y.forEach(function(f){return f()})}}},[e,n,o,d,m,x])}function Df(e){var r={};return Array.isArray(e)?(e==null||e.forEach(function(s){r[s.name]=s}),r):e||r}function Tf(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(r){return e[r].name=r,e[r]})}function Of(e){var r,s,a,n,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,m=e.fixed,x=e.containerPadding,u=e.arrowElement,b=e.popperConfig,g=b===void 0?{}:b,h=Df(g.modifiers);return Te({},g,{placement:l,enabled:i,strategy:m?"fixed":g.strategy,modifiers:Tf(Te({},h,{eventListeners:{enabled:o},preventOverflow:Te({},h.preventOverflow,{options:x?Te({padding:x},(r=h.preventOverflow)==null?void 0:r.options):(s=h.preventOverflow)==null?void 0:s.options}),offset:{options:Te({offset:d},(a=h.offset)==null?void 0:a.options)},arrow:Te({},h.arrow,{enabled:!!u,options:Te({},(n=h.arrow)==null?void 0:n.options,{element:u})}),flip:Te({enabled:!!c},h.flip)}))})}function Mf(e,r){return e.classList?e.classList.contains(r):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+r+" ")!==-1}function _f(e,r){e.classList?e.classList.add(r):Mf(e,r)||(typeof e.className=="string"?e.className=e.className+" "+r:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+r))}function Fi(e,r){return e.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Pf(e,r){e.classList?e.classList.remove(r):typeof e.className=="string"?e.className=Fi(e.className,r):e.setAttribute("class",Fi(e.className&&e.className.baseVal||"",r))}var js;function jn(e){if((!js&&js!==0||e)&&mn){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),js=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return js}var ya=function(r){var s;return typeof document>"u"?null:r==null?ls().body:(typeof r=="function"&&(r=r()),r&&"current"in r&&(r=r.current),(s=r)!=null&&s.nodeType&&r||null)};function Wi(e,r){var s=N.useState(function(){return ya(e)}),a=s[0],n=s[1];if(!a){var i=ya(e);i&&n(i)}return N.useEffect(function(){},[r,a]),N.useEffect(function(){var o=ya(e);o!==a&&n(o)},[e,a]),a}const Ui=e=>!e||typeof e=="function"?e:r=>{e.current=r};function Af(e,r){const s=Ui(e),a=Ui(r);return n=>{s&&s(n),a&&a(n)}}function Rf(e,r){return N.useMemo(()=>Af(e,r),[e,r])}var wn=_.forwardRef(function(e,r){var s=e.flip,a=e.offset,n=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,m=Ci(),x=m[0],u=m[1],b=Ci(),g=b[0],h=b[1],j=Rf(u,r),y=Wi(e.container),f=Wi(e.target),C=N.useState(!e.show),p=C[0],k=C[1],E=vf(f,x,Of({placement:n,enableEvents:!!e.show,containerPadding:o||5,flip:s,offset:a,arrowElement:g,popperConfig:c})),L=E.styles,M=E.attributes,B=Gs(E,["styles","attributes"]);e.show?p&&k(!1):!e.transition&&!p&&k(!0);var G=function(){k(!0),e.onExited&&e.onExited.apply(e,arguments)},A=e.show||d&&!p;if(Ef(x,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!A)return null;var K=e.children(Te({},B,{show:!!e.show,props:Te({},M.popper,{style:L.popper,ref:j}),arrowProps:Te({},M.arrow,{style:L.arrow,ref:h})}));if(d){var Y=e.onExit,ae=e.onExiting,ie=e.onEnter,R=e.onEntering,D=e.onEntered;K=_.createElement(d,{in:e.show,appear:!0,onExit:Y,onExiting:ae,onExited:G,onEnter:ie,onEntering:R,onEntered:D},K)}return y?Ko.createPortal(K,y):null});wn.displayName="Overlay";wn.propTypes={show:re.bool,placement:re.oneOf(fn),target:re.any,container:re.any,flip:re.bool,children:re.func.isRequired,containerPadding:re.number,popperConfig:re.object,rootClose:re.bool,rootCloseEvent:re.oneOf(["click","mousedown"]),rootCloseDisabled:re.bool,onHide:function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),n=1;n<s;n++)a[n-1]=arguments[n];if(r.rootClose){var i;return(i=re.func).isRequired.apply(i,[r].concat(a))}return re.func.apply(re,[r].concat(a))},transition:re.elementType,onEnter:re.func,onEntering:re.func,onEntered:re.func,onExit:re.func,onExiting:re.func,onExited:re.func};function If(){this.__data__=[],this.size=0}var Lf=If,Ff=ns;function Wf(e,r){for(var s=e.length;s--;)if(Ff(e[s][0],r))return s;return-1}var Ks=Wf,Uf=Ks,Bf=Array.prototype,Hf=Bf.splice;function zf(e){var r=this.__data__,s=Uf(r,e);if(s<0)return!1;var a=r.length-1;return s==a?r.pop():Hf.call(r,s,1),--this.size,!0}var Gf=zf,qf=Ks;function Yf(e){var r=this.__data__,s=qf(r,e);return s<0?void 0:r[s][1]}var Vf=Yf,Kf=Ks;function Xf(e){return Kf(this.__data__,e)>-1}var Jf=Xf,Qf=Ks;function Zf(e,r){var s=this.__data__,a=Qf(s,e);return a<0?(++this.size,s.push([e,r])):s[a][1]=r,this}var ex=Zf,tx=Lf,rx=Gf,sx=Vf,ax=Jf,nx=ex;function kr(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}kr.prototype.clear=tx;kr.prototype.delete=rx;kr.prototype.get=sx;kr.prototype.has=ax;kr.prototype.set=nx;var Xs=kr,ix=Xs;function ox(){this.__data__=new ix,this.size=0}var lx=ox;function cx(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s}var dx=cx;function ux(e){return this.__data__.get(e)}var mx=ux;function hx(e){return this.__data__.has(e)}var fx=hx,xx=$t,gx=xx["__core-js_shared__"],px=gx,ja=px,Bi=function(){var e=/[^.]+$/.exec(ja&&ja.keys&&ja.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function vx(e){return!!Bi&&Bi in e}var bx=vx,yx=Function.prototype,jx=yx.toString;function wx(e){if(e!=null){try{return jx.call(e)}catch{}try{return e+""}catch{}}return""}var Vl=wx,Nx=ln,Sx=bx,kx=Pt,Cx=Vl,$x=/[\\^$.*+?()[\]{}|]/g,Ex=/^\[object .+?Constructor\]$/,Dx=Function.prototype,Tx=Object.prototype,Ox=Dx.toString,Mx=Tx.hasOwnProperty,_x=RegExp("^"+Ox.call(Mx).replace($x,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Px(e){if(!kx(e)||Sx(e))return!1;var r=Nx(e)?_x:Ex;return r.test(Cx(e))}var Ax=Px;function Rx(e,r){return e==null?void 0:e[r]}var Ix=Rx,Lx=Ax,Fx=Ix;function Wx(e,r){var s=Fx(e,r);return Lx(s)?s:void 0}var ir=Wx,Ux=ir,Bx=$t,Hx=Ux(Bx,"Map"),Nn=Hx,zx=ir,Gx=zx(Object,"create"),Js=Gx,Hi=Js;function qx(){this.__data__=Hi?Hi(null):{},this.size=0}var Yx=qx;function Vx(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Kx=Vx,Xx=Js,Jx="__lodash_hash_undefined__",Qx=Object.prototype,Zx=Qx.hasOwnProperty;function eg(e){var r=this.__data__;if(Xx){var s=r[e];return s===Jx?void 0:s}return Zx.call(r,e)?r[e]:void 0}var tg=eg,rg=Js,sg=Object.prototype,ag=sg.hasOwnProperty;function ng(e){var r=this.__data__;return rg?r[e]!==void 0:ag.call(r,e)}var ig=ng,og=Js,lg="__lodash_hash_undefined__";function cg(e,r){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=og&&r===void 0?lg:r,this}var dg=cg,ug=Yx,mg=Kx,hg=tg,fg=ig,xg=dg;function Cr(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}Cr.prototype.clear=ug;Cr.prototype.delete=mg;Cr.prototype.get=hg;Cr.prototype.has=fg;Cr.prototype.set=xg;var gg=Cr,zi=gg,pg=Xs,vg=Nn;function bg(){this.size=0,this.__data__={hash:new zi,map:new(vg||pg),string:new zi}}var yg=bg;function jg(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var wg=jg,Ng=wg;function Sg(e,r){var s=e.__data__;return Ng(r)?s[typeof r=="string"?"string":"hash"]:s.map}var Qs=Sg,kg=Qs;function Cg(e){var r=kg(this,e).delete(e);return this.size-=r?1:0,r}var $g=Cg,Eg=Qs;function Dg(e){return Eg(this,e).get(e)}var Tg=Dg,Og=Qs;function Mg(e){return Og(this,e).has(e)}var _g=Mg,Pg=Qs;function Ag(e,r){var s=Pg(this,e),a=s.size;return s.set(e,r),this.size+=s.size==a?0:1,this}var Rg=Ag,Ig=yg,Lg=$g,Fg=Tg,Wg=_g,Ug=Rg;function $r(e){var r=-1,s=e==null?0:e.length;for(this.clear();++r<s;){var a=e[r];this.set(a[0],a[1])}}$r.prototype.clear=Ig;$r.prototype.delete=Lg;$r.prototype.get=Fg;$r.prototype.has=Wg;$r.prototype.set=Ug;var Sn=$r,Bg=Xs,Hg=Nn,zg=Sn,Gg=200;function qg(e,r){var s=this.__data__;if(s instanceof Bg){var a=s.__data__;if(!Hg||a.length<Gg-1)return a.push([e,r]),this.size=++s.size,this;s=this.__data__=new zg(a)}return s.set(e,r),this.size=s.size,this}var Yg=qg,Vg=Xs,Kg=lx,Xg=dx,Jg=mx,Qg=fx,Zg=Yg;function Er(e){var r=this.__data__=new Vg(e);this.size=r.size}Er.prototype.clear=Kg;Er.prototype.delete=Xg;Er.prototype.get=Jg;Er.prototype.has=Qg;Er.prototype.set=Zg;var kn=Er,ep="__lodash_hash_undefined__";function tp(e){return this.__data__.set(e,ep),this}var rp=tp;function sp(e){return this.__data__.has(e)}var ap=sp,np=Sn,ip=rp,op=ap;function As(e){var r=-1,s=e==null?0:e.length;for(this.__data__=new np;++r<s;)this.add(e[r])}As.prototype.add=As.prototype.push=ip;As.prototype.has=op;var lp=As;function cp(e,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(e[s],s,e))return!0;return!1}var dp=cp;function up(e,r){return e.has(r)}var mp=up,hp=lp,fp=dp,xp=mp,gp=1,pp=2;function vp(e,r,s,a,n,i){var o=s&gp,l=e.length,c=r.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),m=i.get(r);if(d&&m)return d==r&&m==e;var x=-1,u=!0,b=s&pp?new hp:void 0;for(i.set(e,r),i.set(r,e);++x<l;){var g=e[x],h=r[x];if(a)var j=o?a(h,g,x,r,e,i):a(g,h,x,e,r,i);if(j!==void 0){if(j)continue;u=!1;break}if(b){if(!fp(r,function(y,f){if(!xp(b,f)&&(g===y||n(g,y,s,a,i)))return b.push(f)})){u=!1;break}}else if(!(g===h||n(g,h,s,a,i))){u=!1;break}}return i.delete(e),i.delete(r),u}var Kl=vp,bp=$t,yp=bp.Uint8Array,Xl=yp;function jp(e){var r=-1,s=Array(e.size);return e.forEach(function(a,n){s[++r]=[n,a]}),s}var wp=jp;function Np(e){var r=-1,s=Array(e.size);return e.forEach(function(a){s[++r]=a}),s}var Sp=Np,Gi=Nr,qi=Xl,kp=ns,Cp=Kl,$p=wp,Ep=Sp,Dp=1,Tp=2,Op="[object Boolean]",Mp="[object Date]",_p="[object Error]",Pp="[object Map]",Ap="[object Number]",Rp="[object RegExp]",Ip="[object Set]",Lp="[object String]",Fp="[object Symbol]",Wp="[object ArrayBuffer]",Up="[object DataView]",Yi=Gi?Gi.prototype:void 0,wa=Yi?Yi.valueOf:void 0;function Bp(e,r,s,a,n,i,o){switch(s){case Up:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Wp:return!(e.byteLength!=r.byteLength||!i(new qi(e),new qi(r)));case Op:case Mp:case Ap:return kp(+e,+r);case _p:return e.name==r.name&&e.message==r.message;case Rp:case Lp:return e==r+"";case Pp:var l=$p;case Ip:var c=a&Dp;if(l||(l=Ep),e.size!=r.size&&!c)return!1;var d=o.get(e);if(d)return d==r;a|=Tp,o.set(e,r);var m=Cp(l(e),l(r),a,n,i,o);return o.delete(e),m;case Fp:if(wa)return wa.call(e)==wa.call(r)}return!1}var Hp=Bp;function zp(e,r){for(var s=-1,a=r.length,n=e.length;++s<a;)e[n+s]=r[s];return e}var Cn=zp,Gp=Array.isArray,xt=Gp,qp=Cn,Yp=xt;function Vp(e,r,s){var a=r(e);return Yp(e)?a:qp(a,s(e))}var Jl=Vp;function Kp(e,r){for(var s=-1,a=e==null?0:e.length,n=0,i=[];++s<a;){var o=e[s];r(o,s,e)&&(i[n++]=o)}return i}var Xp=Kp;function Jp(){return[]}var Ql=Jp,Qp=Xp,Zp=Ql,ev=Object.prototype,tv=ev.propertyIsEnumerable,Vi=Object.getOwnPropertySymbols,rv=Vi?function(e){return e==null?[]:(e=Object(e),Qp(Vi(e),function(r){return tv.call(e,r)}))}:Zp,$n=rv;function sv(e,r){for(var s=-1,a=Array(e);++s<e;)a[s]=r(s);return a}var av=sv,nv=Sr,iv=zt,ov="[object Arguments]";function lv(e){return iv(e)&&nv(e)==ov}var cv=lv,Ki=cv,dv=zt,Zl=Object.prototype,uv=Zl.hasOwnProperty,mv=Zl.propertyIsEnumerable,hv=Ki(function(){return arguments}())?Ki:function(e){return dv(e)&&uv.call(e,"callee")&&!mv.call(e,"callee")},En=hv,Rs={exports:{}};function fv(){return!1}var xv=fv;Rs.exports;(function(e,r){var s=$t,a=xv,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,l=o?s.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Rs,Rs.exports);var Zs=Rs.exports,gv=Sr,pv=cn,vv=zt,bv="[object Arguments]",yv="[object Array]",jv="[object Boolean]",wv="[object Date]",Nv="[object Error]",Sv="[object Function]",kv="[object Map]",Cv="[object Number]",$v="[object Object]",Ev="[object RegExp]",Dv="[object Set]",Tv="[object String]",Ov="[object WeakMap]",Mv="[object ArrayBuffer]",_v="[object DataView]",Pv="[object Float32Array]",Av="[object Float64Array]",Rv="[object Int8Array]",Iv="[object Int16Array]",Lv="[object Int32Array]",Fv="[object Uint8Array]",Wv="[object Uint8ClampedArray]",Uv="[object Uint16Array]",Bv="[object Uint32Array]",$e={};$e[Pv]=$e[Av]=$e[Rv]=$e[Iv]=$e[Lv]=$e[Fv]=$e[Wv]=$e[Uv]=$e[Bv]=!0;$e[bv]=$e[yv]=$e[Mv]=$e[jv]=$e[_v]=$e[wv]=$e[Nv]=$e[Sv]=$e[kv]=$e[Cv]=$e[$v]=$e[Ev]=$e[Dv]=$e[Tv]=$e[Ov]=!1;function Hv(e){return vv(e)&&pv(e.length)&&!!$e[gv(e)]}var zv=Hv;function Gv(e){return function(r){return e(r)}}var ea=Gv,Is={exports:{}};Is.exports;(function(e,r){var s=Ol,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i&&s.process,l=function(){try{var c=n&&n.require&&n.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Is,Is.exports);var Dn=Is.exports,qv=zv,Yv=ea,Xi=Dn,Ji=Xi&&Xi.isTypedArray,Vv=Ji?Yv(Ji):qv,Tn=Vv,Kv=av,Xv=En,Jv=xt,Qv=Zs,Zv=dn,e0=Tn,t0=Object.prototype,r0=t0.hasOwnProperty;function s0(e,r){var s=Jv(e),a=!s&&Xv(e),n=!s&&!a&&Qv(e),i=!s&&!a&&!n&&e0(e),o=s||a||n||i,l=o?Kv(e.length,String):[],c=l.length;for(var d in e)(r||r0.call(e,d))&&!(o&&(d=="length"||n&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Zv(d,c)))&&l.push(d);return l}var ec=s0,a0=Object.prototype;function n0(e){var r=e&&e.constructor,s=typeof r=="function"&&r.prototype||a0;return e===s}var On=n0;function i0(e,r){return function(s){return e(r(s))}}var tc=i0,o0=tc,l0=o0(Object.keys,Object),c0=l0,d0=On,u0=c0,m0=Object.prototype,h0=m0.hasOwnProperty;function f0(e){if(!d0(e))return u0(e);var r=[];for(var s in Object(e))h0.call(e,s)&&s!="constructor"&&r.push(s);return r}var x0=f0,g0=ec,p0=x0,v0=is;function b0(e){return v0(e)?g0(e):p0(e)}var us=b0,y0=Jl,j0=$n,w0=us;function N0(e){return y0(e,w0,j0)}var rc=N0,Qi=rc,S0=1,k0=Object.prototype,C0=k0.hasOwnProperty;function $0(e,r,s,a,n,i){var o=s&S0,l=Qi(e),c=l.length,d=Qi(r),m=d.length;if(c!=m&&!o)return!1;for(var x=c;x--;){var u=l[x];if(!(o?u in r:C0.call(r,u)))return!1}var b=i.get(e),g=i.get(r);if(b&&g)return b==r&&g==e;var h=!0;i.set(e,r),i.set(r,e);for(var j=o;++x<c;){u=l[x];var y=e[u],f=r[u];if(a)var C=o?a(f,y,u,r,e,i):a(y,f,u,e,r,i);if(!(C===void 0?y===f||n(y,f,s,a,i):C)){h=!1;break}j||(j=u=="constructor")}if(h&&!j){var p=e.constructor,k=r.constructor;p!=k&&"constructor"in e&&"constructor"in r&&!(typeof p=="function"&&p instanceof p&&typeof k=="function"&&k instanceof k)&&(h=!1)}return i.delete(e),i.delete(r),h}var E0=$0,D0=ir,T0=$t,O0=D0(T0,"DataView"),M0=O0,_0=ir,P0=$t,A0=_0(P0,"Promise"),R0=A0,I0=ir,L0=$t,F0=I0(L0,"Set"),W0=F0,U0=ir,B0=$t,H0=U0(B0,"WeakMap"),z0=H0,Ua=M0,Ba=Nn,Ha=R0,za=W0,Ga=z0,sc=Sr,Dr=Vl,Zi="[object Map]",G0="[object Object]",eo="[object Promise]",to="[object Set]",ro="[object WeakMap]",so="[object DataView]",q0=Dr(Ua),Y0=Dr(Ba),V0=Dr(Ha),K0=Dr(za),X0=Dr(Ga),qt=sc;(Ua&&qt(new Ua(new ArrayBuffer(1)))!=so||Ba&&qt(new Ba)!=Zi||Ha&&qt(Ha.resolve())!=eo||za&&qt(new za)!=to||Ga&&qt(new Ga)!=ro)&&(qt=function(e){var r=sc(e),s=r==G0?e.constructor:void 0,a=s?Dr(s):"";if(a)switch(a){case q0:return so;case Y0:return Zi;case V0:return eo;case K0:return to;case X0:return ro}return r});var ta=qt,Na=kn,J0=Kl,Q0=Hp,Z0=E0,ao=ta,no=xt,io=Zs,eb=Tn,tb=1,oo="[object Arguments]",lo="[object Array]",ws="[object Object]",rb=Object.prototype,co=rb.hasOwnProperty;function sb(e,r,s,a,n,i){var o=no(e),l=no(r),c=o?lo:ao(e),d=l?lo:ao(r);c=c==oo?ws:c,d=d==oo?ws:d;var m=c==ws,x=d==ws,u=c==d;if(u&&io(e)){if(!io(r))return!1;o=!0,m=!1}if(u&&!m)return i||(i=new Na),o||eb(e)?J0(e,r,s,a,n,i):Q0(e,r,c,s,a,n,i);if(!(s&tb)){var b=m&&co.call(e,"__wrapped__"),g=x&&co.call(r,"__wrapped__");if(b||g){var h=b?e.value():e,j=g?r.value():r;return i||(i=new Na),n(h,j,s,a,i)}}return u?(i||(i=new Na),Z0(e,r,s,a,n,i)):!1}var ab=sb,nb=ab,uo=zt;function ac(e,r,s,a,n){return e===r?!0:e==null||r==null||!uo(e)&&!uo(r)?e!==e&&r!==r:nb(e,r,s,a,ac,n)}var Mn=ac,ib=Mn;function ob(e,r){return ib(e,r)}var lb=ob;const cb=ft(lb);function Sa(e,r){var s=un(e);return s?s.innerHeight:Kt(e).height}function nc(e,r,s){e.closest&&!s&&e.closest(r);var a=e;do{if(nh(a,r))return a;a=a.parentElement}while(a&&a!==s&&a.nodeType===document.ELEMENT_NODE);return null}function db(e,r,s,a){for(var n=e.length,i=s+(a?1:-1);a?i--:++i<n;)if(r(e[i],i,e))return i;return-1}var ub=db,mb=kn,hb=Mn,fb=1,xb=2;function gb(e,r,s,a){var n=s.length,i=n,o=!a;if(e==null)return!i;for(e=Object(e);n--;){var l=s[n];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++n<i;){l=s[n];var c=l[0],d=e[c],m=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var x=new mb;if(a)var u=a(d,m,c,e,r,x);if(!(u===void 0?hb(m,d,fb|xb,a,x):u))return!1}}return!0}var pb=gb,vb=Pt;function bb(e){return e===e&&!vb(e)}var ic=bb,yb=ic,jb=us;function wb(e){for(var r=jb(e),s=r.length;s--;){var a=r[s],n=e[a];r[s]=[a,n,yb(n)]}return r}var Nb=wb;function Sb(e,r){return function(s){return s==null?!1:s[e]===r&&(r!==void 0||e in Object(s))}}var oc=Sb,kb=pb,Cb=Nb,$b=oc;function Eb(e){var r=Cb(e);return r.length==1&&r[0][2]?$b(r[0][0],r[0][1]):function(s){return s===e||kb(s,e,r)}}var Db=Eb,Tb=xt,Ob=os,Mb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_b=/^\w*$/;function Pb(e,r){if(Tb(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||Ob(e)?!0:_b.test(e)||!Mb.test(e)||r!=null&&e in Object(r)}var _n=Pb,lc=Sn,Ab="Expected a function";function Pn(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Ab);var s=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=s.cache;if(i.has(n))return i.get(n);var o=e.apply(this,a);return s.cache=i.set(n,o)||i,o};return s.cache=new(Pn.Cache||lc),s}Pn.Cache=lc;var Rb=Pn,Ib=Rb,Lb=500;function Fb(e){var r=Ib(e,function(a){return s.size===Lb&&s.clear(),a}),s=r.cache;return r}var Wb=Fb,Ub=Wb,Bb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hb=/\\(\\)?/g,zb=Ub(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Bb,function(s,a,n,i){r.push(n?i.replace(Hb,"$1"):a||s)}),r}),Gb=zb;function qb(e,r){for(var s=-1,a=e==null?0:e.length,n=Array(a);++s<a;)n[s]=r(e[s],s,e);return n}var An=qb,mo=Nr,Yb=An,Vb=xt,Kb=os,ho=mo?mo.prototype:void 0,fo=ho?ho.toString:void 0;function cc(e){if(typeof e=="string")return e;if(Vb(e))return Yb(e,cc)+"";if(Kb(e))return fo?fo.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var Xb=cc,Jb=Xb;function Qb(e){return e==null?"":Jb(e)}var Zb=Qb,ey=xt,ty=_n,ry=Gb,sy=Zb;function ay(e,r){return ey(e)?e:ty(e,r)?[e]:ry(sy(e))}var ra=ay,ny=os;function iy(e){if(typeof e=="string"||ny(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var ms=iy,oy=ra,ly=ms;function cy(e,r){r=oy(r,e);for(var s=0,a=r.length;e!=null&&s<a;)e=e[ly(r[s++])];return s&&s==a?e:void 0}var sa=cy,dy=sa;function uy(e,r,s){var a=e==null?void 0:dy(e,r);return a===void 0?s:a}var my=uy;function hy(e,r){return e!=null&&r in Object(e)}var fy=hy,xy=ra,gy=En,py=xt,vy=dn,by=cn,yy=ms;function jy(e,r,s){r=xy(r,e);for(var a=-1,n=r.length,i=!1;++a<n;){var o=yy(r[a]);if(!(i=e!=null&&s(e,o)))break;e=e[o]}return i||++a!=n?i:(n=e==null?0:e.length,!!n&&by(n)&&vy(o,n)&&(py(e)||gy(e)))}var wy=jy,Ny=fy,Sy=wy;function ky(e,r){return e!=null&&Sy(e,r,Ny)}var Cy=ky,$y=Mn,Ey=my,Dy=Cy,Ty=_n,Oy=ic,My=oc,_y=ms,Py=1,Ay=2;function Ry(e,r){return Ty(e)&&Oy(r)?My(_y(e),r):function(s){var a=Ey(s,e);return a===void 0&&a===r?Dy(s,e):$y(r,a,Py|Ay)}}var Iy=Ry;function Ly(e){return e}var aa=Ly;function Fy(e){return function(r){return r==null?void 0:r[e]}}var Wy=Fy,Uy=sa;function By(e){return function(r){return Uy(r,e)}}var Hy=By,zy=Wy,Gy=Hy,qy=_n,Yy=ms;function Vy(e){return qy(e)?zy(Yy(e)):Gy(e)}var Ky=Vy,Xy=Db,Jy=Iy,Qy=aa,Zy=xt,ej=Ky;function tj(e){return typeof e=="function"?e:e==null?Qy:typeof e=="object"?Zy(e)?Jy(e[0],e[1]):Xy(e):ej(e)}var na=tj,rj=ub,sj=na,aj=Pl,nj=Math.max;function ij(e,r,s){var a=e==null?0:e.length;if(!a)return-1;var n=s==null?0:aj(s);return n<0&&(n=nj(a+n,0)),rj(e,sj(r),n)}var oj=ij;const lj=ft(oj);var cj=Math.ceil,dj=Math.max;function uj(e,r,s,a){for(var n=-1,i=dj(cj((r-e)/(s||1)),0),o=Array(i);i--;)o[a?i:++n]=e,e+=s;return o}var mj=uj,hj=mj,fj=Ys,ka=_l;function xj(e){return function(r,s,a){return a&&typeof a!="number"&&fj(r,s,a)&&(s=a=void 0),r=ka(r),s===void 0?(s=r,r=0):s=ka(s),a=a===void 0?r<s?1:-1:ka(a),hj(r,s,a,e)}}var gj=xj,pj=gj,vj=pj(),bj=vj;const yj=ft(bj);var xo=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function jj(e,r){return!!(e===r||xo(e)&&xo(r))}function wj(e,r){if(e.length!==r.length)return!1;for(var s=0;s<e.length;s++)if(!jj(e[s],r[s]))return!1;return!0}function dc(e,r){r===void 0&&(r=wj);var s=null;function a(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(s&&s.lastThis===this&&r(n,s.lastArgs))return s.lastResult;var o=e.apply(this,n);return s={lastResult:o,lastArgs:n,lastThis:this},o}return a.clear=function(){s=null},a}function qa(e,r){var s=un(e);return s?s.innerWidth:Kt(e).width}var go=Nr,Nj=En,Sj=xt,po=go?go.isConcatSpreadable:void 0;function kj(e){return Sj(e)||Nj(e)||!!(po&&e&&e[po])}var Cj=kj,$j=Cn,Ej=Cj;function uc(e,r,s,a,n){var i=-1,o=e.length;for(s||(s=Ej),n||(n=[]);++i<o;){var l=e[i];r>0&&s(l)?r>1?uc(l,r-1,s,a,n):$j(n,l):a||(n[n.length]=l)}return n}var mc=uc;function Dj(e){return function(r,s,a){for(var n=-1,i=Object(r),o=a(r),l=o.length;l--;){var c=o[e?l:++n];if(s(i[c],c,i)===!1)break}return r}}var Tj=Dj,Oj=Tj,Mj=Oj(),_j=Mj,Pj=_j,Aj=us;function Rj(e,r){return e&&Pj(e,r,Aj)}var Rn=Rj,Ij=is;function Lj(e,r){return function(s,a){if(s==null)return s;if(!Ij(s))return e(s,a);for(var n=s.length,i=r?n:-1,o=Object(s);(r?i--:++i<n)&&a(o[i],i,o)!==!1;);return s}}var Fj=Lj,Wj=Rn,Uj=Fj,Bj=Uj(Wj),Hj=Bj,zj=Hj,Gj=is;function qj(e,r){var s=-1,a=Gj(e)?Array(e.length):[];return zj(e,function(n,i,o){a[++s]=r(n,i,o)}),a}var Yj=qj;function Vj(e,r){var s=e.length;for(e.sort(r);s--;)e[s]=e[s].value;return e}var Kj=Vj,vo=os;function Xj(e,r){if(e!==r){var s=e!==void 0,a=e===null,n=e===e,i=vo(e),o=r!==void 0,l=r===null,c=r===r,d=vo(r);if(!l&&!d&&!i&&e>r||i&&o&&c&&!l&&!d||a&&o&&c||!s&&c||!n)return 1;if(!a&&!i&&!d&&e<r||d&&s&&n&&!a&&!i||l&&s&&n||!o&&n||!c)return-1}return 0}var Jj=Xj,Qj=Jj;function Zj(e,r,s){for(var a=-1,n=e.criteria,i=r.criteria,o=n.length,l=s.length;++a<o;){var c=Qj(n[a],i[a]);if(c){if(a>=l)return c;var d=s[a];return c*(d=="desc"?-1:1)}}return e.index-r.index}var ew=Zj,Ca=An,tw=sa,rw=na,sw=Yj,aw=Kj,nw=ea,iw=ew,ow=aa,lw=xt;function cw(e,r,s){r.length?r=Ca(r,function(i){return lw(i)?function(o){return tw(o,i.length===1?i[0]:i)}:i}):r=[ow];var a=-1;r=Ca(r,nw(rw));var n=sw(e,function(i,o,l){var c=Ca(r,function(d){return d(i)});return{criteria:c,index:++a,value:i}});return aw(n,function(i,o){return iw(i,o,s)})}var dw=cw;function uw(e,r,s){switch(s.length){case 0:return e.call(r);case 1:return e.call(r,s[0]);case 2:return e.call(r,s[0],s[1]);case 3:return e.call(r,s[0],s[1],s[2])}return e.apply(r,s)}var mw=uw,hw=mw,bo=Math.max;function fw(e,r,s){return r=bo(r===void 0?e.length-1:r,0),function(){for(var a=arguments,n=-1,i=bo(a.length-r,0),o=Array(i);++n<i;)o[n]=a[r+n];n=-1;for(var l=Array(r+1);++n<r;)l[n]=a[n];return l[r]=s(o),hw(e,this,l)}}var hc=fw;function xw(e){return function(){return e}}var gw=xw,pw=ir,vw=function(){try{var e=pw(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fc=vw,bw=gw,yo=fc,yw=aa,jw=yo?function(e,r){return yo(e,"toString",{configurable:!0,enumerable:!1,value:bw(r),writable:!0})}:yw,ww=jw,Nw=800,Sw=16,kw=Date.now;function Cw(e){var r=0,s=0;return function(){var a=kw(),n=Sw-(a-s);if(s=a,n>0){if(++r>=Nw)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var $w=Cw,Ew=ww,Dw=$w,Tw=Dw(Ew),xc=Tw,Ow=aa,Mw=hc,_w=xc;function Pw(e,r){return _w(Mw(e,r,Ow),e+"")}var gc=Pw,Aw=mc,Rw=dw,Iw=gc,jo=Ys,Lw=Iw(function(e,r){if(e==null)return[];var s=r.length;return s>1&&jo(e,r[0],r[1])?r=[]:s>2&&jo(r[0],r[1],r[2])&&(r=[r[0]]),Rw(e,Aw(r,1),[])}),Fw=Lw;const Ww=ft(Fw);function pc(e){return ml(e)||Dl(e)||an(e)||hl()}function Uw(e){var r=[];if(e!=null)for(var s in Object(e))r.push(s);return r}var Bw=Uw,Hw=Pt,zw=On,Gw=Bw,qw=Object.prototype,Yw=qw.hasOwnProperty;function Vw(e){if(!Hw(e))return Gw(e);var r=zw(e),s=[];for(var a in e)a=="constructor"&&(r||!Yw.call(e,a))||s.push(a);return s}var Kw=Vw,Xw=ec,Jw=Kw,Qw=is;function Zw(e){return Qw(e)?Xw(e,!0):Jw(e)}var ia=Zw,eN=gc,tN=ns,rN=Ys,sN=ia,vc=Object.prototype,aN=vc.hasOwnProperty,nN=eN(function(e,r){e=Object(e);var s=-1,a=r.length,n=a>2?r[2]:void 0;for(n&&rN(r[0],r[1],n)&&(a=1);++s<a;)for(var i=r[s],o=sN(i),l=-1,c=o.length;++l<c;){var d=o[l],m=e[d];(m===void 0||tN(m,vc[d])&&!aN.call(e,d))&&(e[d]=i[d])}return e}),iN=nN;const oN=ft(iN);var wo=fc;function lN(e,r,s){r=="__proto__"&&wo?wo(e,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[r]=s}var In=lN,cN=In,dN=Rn,uN=na;function mN(e,r){var s={};return r=uN(r),dN(e,function(a,n,i){cN(s,n,r(a,n,i))}),s}var hN=mN;const fN=ft(hN);function xN(e,r){for(var s=-1,a=e==null?0:e.length;++s<a&&r(e[s],s,e)!==!1;);return e}var bc=xN,gN=In,pN=ns,vN=Object.prototype,bN=vN.hasOwnProperty;function yN(e,r,s){var a=e[r];(!(bN.call(e,r)&&pN(a,s))||s===void 0&&!(r in e))&&gN(e,r,s)}var yc=yN,jN=yc,wN=In;function NN(e,r,s,a){var n=!s;s||(s={});for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a?a(s[l],e[l],l,s,e):void 0;c===void 0&&(c=e[l]),n?wN(s,l,c):jN(s,l,c)}return s}var hs=NN,SN=hs,kN=us;function CN(e,r){return e&&SN(r,kN(r),e)}var $N=CN,EN=hs,DN=ia;function TN(e,r){return e&&EN(r,DN(r),e)}var ON=TN,Ls={exports:{}};Ls.exports;(function(e,r){var s=$t,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,o=i?s.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,m){if(m)return d.slice();var x=d.length,u=l?l(x):new d.constructor(x);return d.copy(u),u}e.exports=c})(Ls,Ls.exports);var MN=Ls.exports;function _N(e,r){var s=-1,a=e.length;for(r||(r=Array(a));++s<a;)r[s]=e[s];return r}var PN=_N,AN=hs,RN=$n;function IN(e,r){return AN(e,RN(e),r)}var LN=IN,FN=tc,WN=FN(Object.getPrototypeOf,Object),oa=WN,UN=Cn,BN=oa,HN=$n,zN=Ql,GN=Object.getOwnPropertySymbols,qN=GN?function(e){for(var r=[];e;)UN(r,HN(e)),e=BN(e);return r}:zN,jc=qN,YN=hs,VN=jc;function KN(e,r){return YN(e,VN(e),r)}var XN=KN,JN=Jl,QN=jc,ZN=ia;function e1(e){return JN(e,ZN,QN)}var wc=e1,t1=Object.prototype,r1=t1.hasOwnProperty;function s1(e){var r=e.length,s=new e.constructor(r);return r&&typeof e[0]=="string"&&r1.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var a1=s1,No=Xl;function n1(e){var r=new e.constructor(e.byteLength);return new No(r).set(new No(e)),r}var Ln=n1,i1=Ln;function o1(e,r){var s=r?i1(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var l1=o1,c1=/\w*$/;function d1(e){var r=new e.constructor(e.source,c1.exec(e));return r.lastIndex=e.lastIndex,r}var u1=d1,So=Nr,ko=So?So.prototype:void 0,Co=ko?ko.valueOf:void 0;function m1(e){return Co?Object(Co.call(e)):{}}var h1=m1,f1=Ln;function x1(e,r){var s=r?f1(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var g1=x1,p1=Ln,v1=l1,b1=u1,y1=h1,j1=g1,w1="[object Boolean]",N1="[object Date]",S1="[object Map]",k1="[object Number]",C1="[object RegExp]",$1="[object Set]",E1="[object String]",D1="[object Symbol]",T1="[object ArrayBuffer]",O1="[object DataView]",M1="[object Float32Array]",_1="[object Float64Array]",P1="[object Int8Array]",A1="[object Int16Array]",R1="[object Int32Array]",I1="[object Uint8Array]",L1="[object Uint8ClampedArray]",F1="[object Uint16Array]",W1="[object Uint32Array]";function U1(e,r,s){var a=e.constructor;switch(r){case T1:return p1(e);case w1:case N1:return new a(+e);case O1:return v1(e,s);case M1:case _1:case P1:case A1:case R1:case I1:case L1:case F1:case W1:return j1(e,s);case S1:return new a;case k1:case E1:return new a(e);case C1:return b1(e);case $1:return new a;case D1:return y1(e)}}var B1=U1,H1=Pt,$o=Object.create,z1=function(){function e(){}return function(r){if(!H1(r))return{};if($o)return $o(r);e.prototype=r;var s=new e;return e.prototype=void 0,s}}(),Nc=z1,G1=Nc,q1=oa,Y1=On;function V1(e){return typeof e.constructor=="function"&&!Y1(e)?G1(q1(e)):{}}var K1=V1,X1=ta,J1=zt,Q1="[object Map]";function Z1(e){return J1(e)&&X1(e)==Q1}var e2=Z1,t2=e2,r2=ea,Eo=Dn,Do=Eo&&Eo.isMap,s2=Do?r2(Do):t2,a2=s2,n2=ta,i2=zt,o2="[object Set]";function l2(e){return i2(e)&&n2(e)==o2}var c2=l2,d2=c2,u2=ea,To=Dn,Oo=To&&To.isSet,m2=Oo?u2(Oo):d2,h2=m2,f2=kn,x2=bc,g2=yc,p2=$N,v2=ON,b2=MN,y2=PN,j2=LN,w2=XN,N2=rc,S2=wc,k2=ta,C2=a1,$2=B1,E2=K1,D2=xt,T2=Zs,O2=a2,M2=Pt,_2=h2,P2=us,A2=ia,R2=1,I2=2,L2=4,Sc="[object Arguments]",F2="[object Array]",W2="[object Boolean]",U2="[object Date]",B2="[object Error]",kc="[object Function]",H2="[object GeneratorFunction]",z2="[object Map]",G2="[object Number]",Cc="[object Object]",q2="[object RegExp]",Y2="[object Set]",V2="[object String]",K2="[object Symbol]",X2="[object WeakMap]",J2="[object ArrayBuffer]",Q2="[object DataView]",Z2="[object Float32Array]",eS="[object Float64Array]",tS="[object Int8Array]",rS="[object Int16Array]",sS="[object Int32Array]",aS="[object Uint8Array]",nS="[object Uint8ClampedArray]",iS="[object Uint16Array]",oS="[object Uint32Array]",ke={};ke[Sc]=ke[F2]=ke[J2]=ke[Q2]=ke[W2]=ke[U2]=ke[Z2]=ke[eS]=ke[tS]=ke[rS]=ke[sS]=ke[z2]=ke[G2]=ke[Cc]=ke[q2]=ke[Y2]=ke[V2]=ke[K2]=ke[aS]=ke[nS]=ke[iS]=ke[oS]=!0;ke[B2]=ke[kc]=ke[X2]=!1;function $s(e,r,s,a,n,i){var o,l=r&R2,c=r&I2,d=r&L2;if(s&&(o=n?s(e,a,n,i):s(e)),o!==void 0)return o;if(!M2(e))return e;var m=D2(e);if(m){if(o=C2(e),!l)return y2(e,o)}else{var x=k2(e),u=x==kc||x==H2;if(T2(e))return b2(e,l);if(x==Cc||x==Sc||u&&!n){if(o=c||u?{}:E2(e),!l)return c?w2(e,v2(o,e)):j2(e,p2(o,e))}else{if(!ke[x])return n?e:{};o=$2(e,x,l)}}i||(i=new f2);var b=i.get(e);if(b)return b;i.set(e,o),_2(e)?e.forEach(function(j){o.add($s(j,r,s,j,e,i))}):O2(e)&&e.forEach(function(j,y){o.set(y,$s(j,r,s,y,e,i))});var g=d?c?S2:N2:c?A2:P2,h=m?void 0:g(e);return x2(h||e,function(j,y){h&&(y=j,j=e[y]),g2(o,y,$s(j,r,s,y,e,i))}),o}var lS=$s;function cS(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var dS=cS,uS=sa,mS=Tl;function hS(e,r){return r.length<2?e:uS(e,mS(r,0,-1))}var fS=hS,xS=ra,gS=dS,pS=fS,vS=ms;function bS(e,r){return r=xS(r,e),e=pS(e,r),e==null||delete e[vS(gS(r))]}var yS=bS,jS=Sr,wS=oa,NS=zt,SS="[object Object]",kS=Function.prototype,CS=Object.prototype,$c=kS.toString,$S=CS.hasOwnProperty,ES=$c.call(Object);function DS(e){if(!NS(e)||jS(e)!=SS)return!1;var r=wS(e);if(r===null)return!0;var s=$S.call(r,"constructor")&&r.constructor;return typeof s=="function"&&s instanceof s&&$c.call(s)==ES}var TS=DS,OS=TS;function MS(e){return OS(e)?void 0:e}var _S=MS,PS=mc;function AS(e){var r=e==null?0:e.length;return r?PS(e,1):[]}var RS=AS,IS=RS,LS=hc,FS=xc;function WS(e){return FS(LS(e,void 0,IS),e+"")}var US=WS,BS=An,HS=lS,zS=yS,GS=ra,qS=hs,YS=_S,VS=US,KS=wc,XS=1,JS=2,QS=4,ZS=VS(function(e,r){var s={};if(e==null)return s;var a=!1;r=BS(r,function(i){return i=GS(i,e),a||(a=i.length>1),i}),qS(e,KS(e),s),a&&(s=HS(s,XS|JS|QS,YS));for(var n=r.length;n--;)zS(s,r[n]);return s}),ek=ZS;const tk=ft(ek);var rk=bc,sk=Nc,ak=Rn,nk=na,ik=oa,ok=xt,lk=Zs,ck=ln,dk=Pt,uk=Tn;function mk(e,r,s){var a=ok(e),n=a||lk(e)||uk(e);if(r=nk(r),s==null){var i=e&&e.constructor;n?s=a?new i:[]:dk(e)?s=ck(i)?sk(ik(e)):{}:s={}}return(n?rk:ak)(e,function(o,l,c){return r(s,o,l,c)}),s}var hk=mk;const fk=ft(hk);var xk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a,n){a.prototype.isBetween=function(i,o,l,c){var d=n(i),m=n(o),x=(c=c||"()")[0]==="(",u=c[1]===")";return(x?this.isAfter(d,l):!this.isBefore(d,l))&&(u?this.isBefore(m,l):!this.isAfter(m,l))||(x?this.isBefore(d,l):!this.isAfter(d,l))&&(u?this.isAfter(m,l):!this.isBefore(m,l))}}})})(xk);var gk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a){a.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}}})})(gk);var pk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a){a.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(pk);var vk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a,n){var i=a.prototype,o=function(x){return x&&(x.indexOf?x:x.s)},l=function(x,u,b,g,h){var j=x.name?x:x.$locale(),y=o(j[u]),f=o(j[b]),C=y||f.map(function(k){return k.slice(0,g)});if(!h)return C;var p=j.weekStart;return C.map(function(k,E){return C[(E+(p||0))%7]})},c=function(){return n.Ls[n.locale()]},d=function(x,u){return x.formats[u]||function(b){return b.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(g,h,j){return h||j.slice(1)})}(x.formats[u.toUpperCase()])},m=function(){var x=this;return{months:function(u){return u?u.format("MMMM"):l(x,"months")},monthsShort:function(u){return u?u.format("MMM"):l(x,"monthsShort","months",3)},firstDayOfWeek:function(){return x.$locale().weekStart||0},weekdays:function(u){return u?u.format("dddd"):l(x,"weekdays")},weekdaysMin:function(u){return u?u.format("dd"):l(x,"weekdaysMin","weekdays",2)},weekdaysShort:function(u){return u?u.format("ddd"):l(x,"weekdaysShort","weekdays",3)},longDateFormat:function(u){return d(x.$locale(),u)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return m.bind(this)()},n.localeData=function(){var x=c();return{firstDayOfWeek:function(){return x.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(u){return d(x,u)},meridiem:x.meridiem,ordinal:x.ordinal}},n.months=function(){return l(c(),"months")},n.monthsShort=function(){return l(c(),"monthsShort","months",3)},n.weekdays=function(x){return l(c(),"weekdays",null,null,x)},n.weekdaysShort=function(x){return l(c(),"weekdaysShort","weekdays",3,x)},n.weekdaysMin=function(x){return l(c(),"weekdaysMin","weekdays",2,x)}}})})(vk);var bk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,n,i){var o=n.prototype,l=o.format;i.en.formats=s,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,m=function(x,u){return x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(b,g,h){var j=h&&h.toUpperCase();return g||u[h]||s[h]||u[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,f,C){return f||C.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,m)}}})})(bk);var yk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a,n){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(m){return m}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};n.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},n.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(yk);var jk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){var s="minute",a=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(h){var j={date:h,utc:!0,args:arguments};return new o(j)},c.utc=function(h){var j=l(this.toDate(),{locale:this.$L,utc:!0});return h?j.add(this.utcOffset(),s):j},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(h){h.utc&&(this.$u=!0),this.$utils().u(h.$offset)||(this.$offset=h.$offset),d.call(this,h)};var m=c.init;c.init=function(){if(this.$u){var h=this.$d;this.$y=h.getUTCFullYear(),this.$M=h.getUTCMonth(),this.$D=h.getUTCDate(),this.$W=h.getUTCDay(),this.$H=h.getUTCHours(),this.$m=h.getUTCMinutes(),this.$s=h.getUTCSeconds(),this.$ms=h.getUTCMilliseconds()}else m.call(this)};var x=c.utcOffset;c.utcOffset=function(h,j){var y=this.$utils().u;if(y(h))return this.$u?0:y(this.$offset)?x.call(this):this.$offset;if(typeof h=="string"&&(h=function(k){k===void 0&&(k="");var E=k.match(a);if(!E)return null;var L=(""+E[0]).match(n)||["-",0,0],M=L[0],B=60*+L[1]+ +L[2];return B===0?0:M==="+"?B:-B}(h),h===null))return this;var f=Math.abs(h)<=16?60*h:h,C=this;if(j)return C.$offset=f,C.$u=h===0,C;if(h!==0){var p=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(f+p,s)).$offset=f,C.$x.$localOffset=p}else C=this.utc();return C};var u=c.format;c.format=function(h){var j=h||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,j)},c.valueOf=function(){var h=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*h},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var b=c.toDate;c.toDate=function(h){return h==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var g=c.diff;c.diff=function(h,j,y){if(h&&this.$u===h.$u)return g.call(this,h,j,y);var f=this.local(),C=l(h).local();return g.call(f,C,j,y)}}})})(jk);var wk={exports:{}};(function(e,r){(function(s,a){e.exports=a()})(dt,function(){return function(s,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(wk);function vt(e){return e.children}var tt={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Ve={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Mo=Object.keys(Ve).map(function(e){return Ve[e]});re.oneOfType([re.string,re.func]);re.any;re.func;re.oneOfType([re.arrayOf(re.oneOf(Mo)),re.objectOf(function(e,r){var s=Mo.indexOf(r)!==-1&&typeof e[r]=="boolean";if(s)return null;for(var a=arguments.length,n=new Array(a>2?a-2:0),i=2;i<a;i++)n[i-2]=arguments[i];return re.elementType.apply(re,[e,r].concat(n))})]);re.oneOfType([re.oneOf(["overlap","no-overlap"]),re.func]);var _o={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function Ec(e,r){var s=Ue(e,"month");return Ue(s,"week",r.startOfWeek())}function Dc(e,r){var s=Ms(e,"month");return Ms(s,"week",r.startOfWeek())}function Nk(e,r){for(var s=Ec(e,r),a=Dc(e,r),n=[];jr(s,a,"day");)n.push(s),s=pt(s,1,"day");return n}function Sk(e,r){var s=Ue(e,r);return yr(s,e)?s:pt(s,1,r)}function kk(e,r){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=e,n=[];jr(a,r,s);)n.push(a),a=pt(a,1,s);return n}function Ck(e,r){return r==null&&e==null?null:(r==null&&(r=new Date),e==null&&(e=new Date),e=Ue(e,"day"),e=Qr(e,Qr(r)),e=xr(e,xr(r)),e=Jr(e,Jr(r)),Xr(e,Xr(r)))}function Po(e){return Qr(e)===0&&xr(e)===0&&Jr(e)===0&&Xr(e)===0}function $k(e,r,s,a){return s==="day"&&(s="date"),Math.abs(xi[s](e,void 0,a)-xi[s](r,void 0,a))}function Fn(e,r,s){return!s||s==="milliseconds"?Math.abs(+e-+r):Math.round(Math.abs(+Ue(e,s)/_o[s]-+Ue(r,s)/_o[s]))}var Ek=re.oneOfType([re.string,re.func]);function Dk(e,r,s,a,n){var i=typeof a=="function"?a(s,n,e):r.call(e,s,a,n);return zr(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function Tk(e,r,s){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,r+s,0,0)}function Wn(e,r){return e.getTimezoneOffset()-r.getTimezoneOffset()}function Ok(e,r){return Fn(e,r,"minutes")+Wn(e,r)}function Mk(e){var r=Ue(e,"day");return Fn(r,e,"minutes")+Wn(r,e)}function _k(e,r){return on(e,r,"day")}function Pk(e,r,s){var a=yr(e,r,"minutes");return a?as(r,s,"minutes"):qs(r,s,"minutes")}function Ya(e,r){return $k(e,r,"day")}function Ak(e){var r=e.evtA,s=r.start,a=r.end,n=r.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+Ue(s,"day")-+Ue(o,"day"),m=Ya(s,a),x=Ya(o,l);return d||x-m||!!c-!!n||+s-+o||+a-+l}function Rk(e){var r=e.event,s=r.start,a=r.end,n=e.range,i=n.start,o=n.end,l=Ue(s,"day"),c=jr(l,o,"day"),d=nn(l,a,"minutes"),m=d?qs(a,i,"minutes"):as(a,i,"minutes");return c&&m}function Ik(e,r){return yr(e,r,"day")}function Lk(e,r){return Po(e)&&Po(r)}var Fk=Pe(function e(r){var s=this;_e(this,e),zr(typeof r.format=="function","date localizer `format(..)` must be a function"),zr(typeof r.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=r.propType||Ek,this.formats=r.formats,this.format=function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return Dk.apply(void 0,[s,r.format].concat(n))},this.startOfWeek=r.firstOfWeek,this.merge=r.merge||Ck,this.inRange=r.inRange||kl,this.lt=r.lt||on,this.lte=r.lte||jr,this.gt=r.gt||qs,this.gte=r.gte||as,this.eq=r.eq||yr,this.neq=r.neq||nn,this.startOf=r.startOf||Ue,this.endOf=r.endOf||Ms,this.add=r.add||pt,this.range=r.range||kk,this.diff=r.diff||Fn,this.ceil=r.ceil||Sk,this.min=r.min||Nl,this.max=r.max||Sl,this.minutes=r.minutes||xr,this.daySpan=r.daySpan||Ya,this.firstVisibleDay=r.firstVisibleDay||Ec,this.lastVisibleDay=r.lastVisibleDay||Dc,this.visibleDays=r.visibleDays||Nk,this.getSlotDate=r.getSlotDate||Tk,this.getTimezoneOffset=r.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=r.getDstOffset||Wn,this.getTotalMin=r.getTotalMin||Ok,this.getMinutesFromMidnight=r.getMinutesFromMidnight||Mk,this.continuesPrior=r.continuesPrior||_k,this.continuesAfter=r.continuesAfter||Pk,this.sortEvents=r.sortEvents||Ak,this.inEventRange=r.inEventRange||Rk,this.isSameDate=r.isSameDate||Ik,this.startAndEndAreDateOnly=r.startAndEndAreDateOnly||Lk,this.segmentOffset=r.browserTZOffset?r.browserTZOffset():0});function Wk(e,r,s,a){var n=Se(Se({},e.formats),s);return Se(Se({},e),{},{messages:a,startOfWeek:function(){return e.startOfWeek(r)},format:function(o,l){return e.format(o,n[l]||l,r)}})}var Uk=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.navigate=function(o){s.props.onNavigate(o)},s.view=function(o){s.props.onView(o)},s}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.localizer.messages,i=a.label;return _.createElement("div",{className:"rbc-toolbar"},_.createElement("span",{className:"rbc-btn-group"},_.createElement("button",{type:"button",onClick:this.navigate.bind(null,tt.TODAY)},n.today),_.createElement("button",{type:"button",onClick:this.navigate.bind(null,tt.PREVIOUS)},n.previous),_.createElement("button",{type:"button",onClick:this.navigate.bind(null,tt.NEXT)},n.next)),_.createElement("span",{className:"rbc-toolbar-label"},i),_.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(n)))}},{key:"viewNamesGroup",value:function(a){var n=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return _.createElement("button",{type:"button",key:l,className:Oe({"rbc-active":o===l}),onClick:n.view.bind(null,l)},a[l])})}}])}(_.Component);function Ee(e,r){e&&e.apply(null,[].concat(r))}var Bk={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(r){return"+".concat(r," more")}};function Hk(e){return Se(Se({},Bk),e)}function zk(e){var r=e.ref,s=e.callback;N.useEffect(function(){var a=function(i){r.current&&!r.current.contains(i.target)&&s()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[r,s])}var Gk=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Tc=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.style,i=a.className,o=a.event,l=a.selected,c=a.isAllDay,d=a.onSelect,m=a.onDoubleClick,x=a.onKeyPress,u=a.localizer,b=a.continuesPrior,g=a.continuesAfter,h=a.accessors,j=a.getters,y=a.children,f=a.components,C=f.event,p=f.eventWrapper,k=a.slotStart,E=a.slotEnd,L=kt(a,Gk);delete L.resizable;var M=h.title(o),B=h.tooltip(o),G=h.end(o),A=h.start(o),K=h.allDay(o),Y=c||K||u.diff(A,u.ceil(G,"day"),"day")>1,ae=j.eventProp(o,A,G,l),ie=_.createElement("div",{className:"rbc-event-content",title:B||void 0},C?_.createElement(C,{event:o,continuesPrior:b,continuesAfter:g,title:M,isAllDay:K,localizer:u,slotStart:k,slotEnd:E}):M);return _.createElement(p,Object.assign({},this.props,{type:"date"}),_.createElement("div",Object.assign({},L,{style:Se(Se({},ae.style),n),className:Oe("rbc-event",i,ae.className,{"rbc-selected":l,"rbc-event-allday":Y,"rbc-event-continues-prior":b,"rbc-event-continues-after":g}),onClick:function(D){return d&&d(o,D)},onDoubleClick:function(D){return m&&m(o,D)},onKeyDown:function(D){return x&&x(o,D)}}),typeof y=="function"?y(ie):ie))}}])}(_.Component);function la(e,r){return!e||r==null?!1:cb(e,r)}function Oc(e,r){var s=e.right-e.left,a=s/r;return a}function Mc(e,r,s,a){var n=Oc(e,a);return s?a-1-Math.floor((r-e.left)/n):Math.floor((r-e.left)/n)}function qk(e,r){var s=r.x,a=r.y;return a>=e.top&&a<=e.bottom&&s>=e.left&&s<=e.right}function Yk(e,r,s,a,n){var i=-1,o=-1,l=a-1,c=Oc(r,a),d=Mc(r,s.x,n,a),m=r.top<s.y&&r.bottom>s.y,x=r.top<e.y&&r.bottom>e.y,u=e.y>r.bottom,b=r.top>e.y,g=s.top<r.top&&s.bottom>r.bottom;return g&&(i=0,o=l),m&&(b?(i=0,o=d):u&&(i=d,o=l)),x&&(i=o=n?l-Math.floor((e.x-r.left)/c):Math.floor((e.x-r.left)/c),m?d<i?i=d:o=d:e.y<s.y?o=l:i=0),{startIdx:i,endIdx:o}}function Vk(e){var r=e.target,s=e.offset,a=e.container,n=e.box,i=Kt(r),o=i.top,l=i.left,c=i.width,d=i.height,m=Kt(a),x=m.top,u=m.left,b=m.width,g=m.height,h=Kt(n),j=h.width,y=h.height,f=x+g,C=u+b,p=o+y,k=l+j,E=s.x,L=s.y,M=p>f?o-y-L:o+L+d,B=k>C?l+E-j+c:l+E;return{topOffset:M,leftOffset:B}}function Kk(e){var r=e.containerRef,s=e.accessors,a=e.getters,n=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,m=e.slotStart,x=e.slotEnd,u=e.onSelect,b=e.onDoubleClick,g=e.onKeyPress,h=e.handleDragStart,j=e.popperRef,y=e.target,f=e.offset;zk({ref:j,callback:c}),N.useLayoutEffect(function(){var k=Vk({target:y,offset:f,container:r.current,box:j.current}),E=k.topOffset,L=k.leftOffset;j.current.style.top="".concat(E,"px"),j.current.style.left="".concat(L,"px")},[f.x,f.y,y]);var C=l.width,p={minWidth:C+C/2};return _.createElement("div",{style:p,className:"rbc-overlay",ref:j},_.createElement("div",{className:"rbc-overlay-header"},o.format(m,"dayHeaderFormat")),d.map(function(k,E){return _.createElement(Tc,{key:E,type:"popup",localizer:o,event:k,getters:a,onSelect:u,accessors:s,components:i,onDoubleClick:b,onKeyPress:g,continuesPrior:o.lt(s.end(k),m,"day"),continuesAfter:o.gte(s.start(k),x,"day"),slotStart:m,slotEnd:x,selected:la(k,n),draggable:!0,onDragStart:function(){return h(k)},onDragEnd:function(){return c()}})}))}var _c=_.forwardRef(function(e,r){return _.createElement(Kk,Object.assign({},e,{popperRef:r}))});_c.propTypes={accessors:re.object.isRequired,getters:re.object.isRequired,selected:re.object,components:re.object.isRequired,localizer:re.object.isRequired,position:re.object.isRequired,show:re.func.isRequired,events:re.array.isRequired,slotStart:re.instanceOf(Date).isRequired,slotEnd:re.instanceOf(Date),onSelect:re.func,onDoubleClick:re.func,onKeyPress:re.func,handleDragStart:re.func,style:re.object,offset:re.shape({x:re.number,y:re.number})};function Xk(e){var r=e.containerRef,s=e.popupOffset,a=s===void 0?5:s,n=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,m=e.handleSelectEvent,x=e.handleDoubleClickEvent,u=e.handleKeyPressEvent,b=e.handleDragStart,g=e.onHide,h=e.overlayDisplay,j=N.useRef(null);if(!n.position)return null;var y=a;isNaN(a)||(y={x:a,y:a});var f=n.position,C=n.events,p=n.date,k=n.end;return _.createElement(wn,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:g,target:n.target},function(E){var L=E.props;return _.createElement(_c,Object.assign({},L,{containerRef:r,ref:j,target:n.target,offset:y,accessors:i,getters:c,selected:d,components:l,localizer:o,position:f,show:h,events:C,slotStart:p,slotEnd:k,onSelect:m,onDoubleClick:x,onKeyPress:u,handleDragStart:b}))})}var Un=_.forwardRef(function(e,r){return _.createElement(Xk,Object.assign({},e,{containerRef:r}))});Un.propTypes={popupOffset:re.oneOfType([re.number,re.shape({x:re.number,y:re.number})]),overlay:re.shape({position:re.object,events:re.array,date:re.instanceOf(Date),end:re.instanceOf(Date)}),accessors:re.object.isRequired,localizer:re.object.isRequired,components:re.object.isRequired,getters:re.object.isRequired,selected:re.object,handleSelectEvent:re.func,handleDoubleClickEvent:re.func,handleKeyPressEvent:re.func,handleDragStart:re.func,onHide:re.func,overlayDisplay:re.func};function Be(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Rr(s,e,r,{passive:!1})}function Jk(e,r,s){return!e||Zr(e,document.elementFromPoint(r,s))}function Qk(e,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return nc(n,".rbc-event",e)}function Zk(e,r){var s=r.clientX,a=r.clientY,n=document.elementFromPoint(s,a);return nc(n,".rbc-show-more",e)}function Fs(e,r){return!!Qk(e,r)}function e5(e,r){return!!Zk(e,r)}function Pr(e){var r=e;return e.touches&&e.touches.length&&(r=e.touches[0]),{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY}}var Ao=5,t5=250,Pc=function(){function e(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.global,n=a===void 0?!1:a,i=s.longPressThreshold,o=i===void 0?250:i,l=s.validContainers,c=l===void 0?[]:l;_e(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=r,this.globalMouse=!r||n,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Be("touchmove",function(){},window),this._removeKeyDownListener=Be("keydown",this._keyListener),this._removeKeyUpListener=Be("keyup",this._keyListener),this._removeDropFromOutsideListener=Be("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Be("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Pe(e,[{key:"on",value:function(s,a){var n=this._listeners[s]||(this._listeners[s]=[]);return n.push(a),{remove:function(){var o=n.indexOf(a);o!==-1&&n.splice(o,1)}}}},{key:"emit",value:function(s){for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];var o,l=this._listeners[s]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,n))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(s){var a=this._selectRect;return!a||!this.selecting?!1:Ro(a,nr(s))}},{key:"filter",value:function(s){var a=this._selectRect;return!a||!this.selecting?[]:s.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(s,a){var n=this,i=null,o=null,l=null,c=function(u){i=setTimeout(function(){m(),s(u)},n.longPressThreshold),o=Be("touchmove",function(){return m()}),l=Be("touchend",function(){return m()})},d=Be("touchstart",c),m=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return a&&c(a),function(){m(),d()}}},{key:"_addInitialEventListener",value:function(){var s=this,a=Be("mousedown",function(i){s._removeInitialEventListener(),s._handleInitialEvent(i),s._removeInitialEventListener=Be("mousedown",s._handleInitialEvent)}),n=Be("touchstart",function(i){s._removeInitialEventListener(),s._removeInitialEventListener=s._addLongPressListener(s._handleInitialEvent,i)});this._removeInitialEventListener=function(){a(),n()}}},{key:"_dropFromOutsideListener",value:function(s){var a=Pr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dropFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(s){var a=Pr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY;this.emit("dragOverFromOutside",{x:n,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_handleInitialEvent",value:function(s){if(this._initialEvent=s,!this.isDetached){var a=Pr(s),n=a.clientX,i=a.clientY,o=a.pageX,l=a.pageY,c=this.container(),d,m;if(!(s.which===3||s.button===2||!Jk(c,n,i))){if(!this.globalMouse&&c&&!Zr(c,s.target)){var x=r5(0),u=x.top,b=x.left,g=x.bottom,h=x.right;if(m=nr(c),d=Ro({top:m.top-u,left:m.left-b,bottom:m.bottom+g,right:m.right+h},{top:l,left:o}),!d)return}var j=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(s.type),x:o,y:l,clientX:n,clientY:i});if(j!==!1)switch(s.type){case"mousedown":this._removeEndListener=Be("mouseup",this._handleTerminatingEvent),this._onEscListener=Be("keydown",this._handleTerminatingEvent),this._removeMoveListener=Be("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(s),this._removeEndListener=Be("touchend",this._handleTerminatingEvent),this._removeMoveListener=Be("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(s){var a=s.target,n=this.validContainers;return!n||!n.length||!a?!0:n.some(function(i){return!!a.closest(i)})}},{key:"_handleTerminatingEvent",value:function(s){var a=this.selecting,n=this._selectRect;if(!a&&s.type.includes("key")&&(s=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!s){var i=!this.container||Zr(this.container(),s.target),o=this._isWithinValidContainer(s);return s.key==="Escape"||!o?this.emit("reset"):!a&&i?this._handleClickEvent(s):a?this.emit("select",n):this.emit("reset")}}},{key:"_handleClickEvent",value:function(s){var a=Pr(s),n=a.pageX,i=a.pageY,o=a.clientX,l=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<t5?(this._lastClickData=null,this.emit("doubleClick",{x:n,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:n,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(s){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,n=a.x,i=a.y,o=Pr(s),l=o.pageX,c=o.pageY,d=Math.abs(n-l),m=Math.abs(i-c),x=Math.min(l,n),u=Math.min(c,i),b=this.selecting,g=this.isClick(l,c);g&&!b&&!(d||m)||(!b&&!g&&this.emit("selectStart",this._initialEventData),g||(this.selecting=!0,this._selectRect={top:u,left:x,x:l,y:c,right:x+d,bottom:u+m},this.emit("selecting",this._selectRect)),s.preventDefault())}}},{key:"_keyListener",value:function(s){this.ctrl=s.metaKey||s.ctrlKey}},{key:"isClick",value:function(s,a){var n=this._initialEventData,i=n.x,o=n.y,l=n.isTouch;return!l&&Math.abs(s-i)<=Ao&&Math.abs(a-o)<=Ao}}])}();function r5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Ot(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Ro(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=nr(e),n=a.top,i=a.left,o=a.right,l=o===void 0?i:o,c=a.bottom,d=c===void 0?n:c,m=nr(r),x=m.top,u=m.left,b=m.right,g=b===void 0?u:b,h=m.bottom,j=h===void 0?x:h;return!(d-s<x||n+s>j||l-s<u||i+s>g)}function nr(e){if(!e.getBoundingClientRect)return e;var r=e.getBoundingClientRect(),s=r.left+Io("left"),a=r.top+Io("top");return{top:a,left:s,right:(e.offsetWidth||0)+s,bottom:(e.offsetHeight||0)+a}}function Io(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var s5=function(e){function r(s,a){var n;return _e(this,r),n=Ge(this,r,[s,a]),n.state={selecting:!1},n.containerRef=N.createRef(),n}return qe(r,e),Pe(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,n=a.range,i=a.getNow,o=a.getters,l=a.date,c=a.components.dateCellWrapper,d=a.localizer,m=this.state,x=m.selecting,u=m.startIdx,b=m.endIdx,g=i();return _.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},n.map(function(h,j){var y=x&&j>=u&&j<=b,f=o.dayProp(h),C=f.className,p=f.style;return _.createElement(c,{key:j,value:h,range:n},_.createElement("div",{style:p,className:Oe("rbc-day-bg",C,y&&"rbc-selected-cell",d.isSameDate(h,g)&&"rbc-today",l&&d.neq(l,h,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,n=this.containerRef.current,i=this._selector=new Pc(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Fs(n,c)&&!e5(n,c)){var m=nr(n),x=a.props,u=x.range,b=x.rtl;if(qk(m,c)){var g=Mc(m,c.x,b,u.length);a._selectSlot({startIdx:g,endIdx:g,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};i.on("selecting",function(l){var c=a.props,d=c.range,m=c.rtl,x=-1,u=-1;if(a.state.selecting||(Ee(a.props.onSelectStart,[l]),a._initial={x:l.x,y:l.y}),i.isSelected(n)){var b=nr(n),g=Yk(a._initial,b,l,d.length,m);x=g.startIdx,u=g.endIdx}a.setState({selecting:!0,startIdx:x,endIdx:u})}),i.on("beforeSelect",function(l){if(a.props.selectable==="ignoreEvents")return!Fs(a.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){a._selectSlot(Se(Se({},a.state),{},{action:"select",bounds:l})),a._initial={},a.setState({selecting:!1}),Ee(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var n=a.endIdx,i=a.startIdx,o=a.action,l=a.bounds,c=a.box;n!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:n,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(_.Component),lt={propTypes:{slotMetrics:re.object.isRequired,selected:re.object,isAllDay:re.bool,accessors:re.object.isRequired,localizer:re.object.isRequired,components:re.object.isRequired,getters:re.object.isRequired,onSelect:re.func,onDoubleClick:re.func,onKeyPress:re.func},defaultProps:{segments:[],selected:{}},renderEvent:function(r,s){var a=r.selected;r.isAllDay;var n=r.accessors,i=r.getters,o=r.onSelect,l=r.onDoubleClick,c=r.onKeyPress,d=r.localizer,m=r.slotMetrics,x=r.components,u=r.resizable,b=m.continuesPrior(s),g=m.continuesAfter(s);return _.createElement(Tc,{event:s,getters:i,localizer:d,accessors:n,components:x,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:b,continuesAfter:g,slotStart:m.first,slotEnd:m.last,selected:la(s,a),resizable:u})},renderSpan:function(r,s,a){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(s)/r*100+"%";return _.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},n)}},Ac=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this,n=this.props,i=n.segments,o=n.slotMetrics.slots,l=n.className,c=1;return _.createElement("div",{className:Oe(l,"rbc-row")},i.reduce(function(d,m,x){var u=m.event,b=m.left,g=m.right,h=m.span,j="_lvl_"+x,y=b-c,f=lt.renderEvent(a.props,u);return y&&d.push(lt.renderSpan(o,y,"".concat(j,"_gap"))),d.push(lt.renderSpan(o,h,j,f)),c=g+1,d},[]))}}])}(_.Component);Ac.defaultProps=Se({},lt.defaultProps);function Rc(e){var r=e.dateRange,s=e.unit,a=s===void 0?"day":s,n=e.localizer;return{first:r[0],last:n.add(r[r.length-1],1,a)}}function a5(e,r,s,a){var n=Rc({dateRange:r,localizer:a}),i=n.first,o=n.last,l=a.diff(i,o,"day"),c=a.max(a.startOf(s.start(e),"day"),i),d=a.min(a.ceil(s.end(e),"day"),o),m=lj(r,function(u){return a.isSameDate(u,c)}),x=a.diff(c,d,"day");return x=Math.min(x,l),x=Math.max(x-a.segmentOffset,1),{event:e,span:x,left:m+1,right:Math.max(m+x,1)}}function Va(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,s,a,n,i=[],o=[];for(s=0;s<e.length;s++){for(n=e[s],a=0;a<i.length&&n5(n,i[a]);a++);a>=r?o.push(n):(i[a]||(i[a]=[])).push(n)}for(s=0;s<i.length;s++)i[s].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function rs(e,r,s,a,n){var i={start:a.start(e),end:a.end(e)},o={start:r,end:s};return n.inEventRange({event:i,range:o})}function n5(e,r){return r.some(function(s){return s.left<=e.right&&s.right>=e.left})}function i5(e,r,s){var a=ks(e),n=[],i=[];a.forEach(function(c){var d=r.start(c),m=r.end(c);s.daySpan(d,m)>1?n.push(c):i.push(c)});var o=n.sort(function(c,d){return Ka(c,d,r,s)}),l=i.sort(function(c,d){return Ka(c,d,r,s)});return[].concat(ks(o),ks(l))}function Ka(e,r,s,a){var n={start:s.start(e),end:s.end(e),allDay:s.allDay(e)},i={start:s.start(r),end:s.end(r),allDay:s.allDay(r)};return a.sortEvents({evtA:n,evtB:i})}var Xa=function(r,s){return r.left<=s&&r.right>=s},$a=function(r,s){return r.filter(function(a){return Xa(a,s)}).map(function(a){return a.event})},Ic=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){for(var a=this.props,n=a.segments,i=a.slotMetrics.slots,o=Va(n).levels[0],l=1,c=1,d=[];l<=i;){var m="_lvl_"+l,x=o.filter(function(p){return Xa(p,l)})[0]||{},u=x.event,b=x.left,g=x.right,h=x.span;if(!u){var j=this.getHiddenEventsForSlot(n,l);if(j.length>0){var y=l-c;y&&d.push(lt.renderSpan(i,y,m+"_gap")),d.push(lt.renderSpan(i,1,m,this.renderShowMore(n,l))),c=l=l+1;continue}l++;continue}var f=Math.max(0,b-c);if(this.canRenderSlotEvent(b,h)){var C=lt.renderEvent(this.props,u);f&&d.push(lt.renderSpan(i,f,m+"_gap")),d.push(lt.renderSpan(i,h,m,C)),c=l=g+1}else f&&d.push(lt.renderSpan(i,f,m+"_gap")),d.push(lt.renderSpan(i,1,m,this.renderShowMore(n,l))),c=l=l+1}return _.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,n){var i=$a(a,n),o=Va(a).levels[0],l=o.filter(function(c){return Xa(c,n)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,n){var i=this.props.segments;return yj(a,a+n).every(function(o){var l=$a(i,o).length;return l===1})}},{key:"renderShowMore",value:function(a,n){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,m=c.getEventsForSlot(n),x=$a(a,n),u=x.length;if(d!=null&&d.showMore){var b=d.showMore,g=c.getDateForSlot(n-1);return u?_.createElement(b,{localizer:l,slotDate:g,slot:n,count:u,events:m,remainingEvents:x}):!1}return u?_.createElement("button",{type:"button",key:"sm_"+n,className:Oe("rbc-button-link","rbc-show-more"),onClick:function(j){return i.showMore(n,j)}},l.messages.showMore(u,x,m)):!1}},{key:"showMore",value:function(a,n){n.preventDefault(),n.stopPropagation(),this.props.onShowMore(a,n.target)}}])}(_.Component);Ic.defaultProps=Se({},lt.defaultProps);var o5=function(r){var s=r.children;return _.createElement("div",{className:"rbc-row-content-scroll-container"},s)},l5=function(r,s){return r.left<=s&&r.right>=s},c5=function(r,s){return r[0].range===s[0].range&&r[0].events===s[0].events};function Lc(){return dc(function(e){for(var r=e.range,s=e.events,a=e.maxRows,n=e.minRows,i=e.accessors,o=e.localizer,l=Rc({dateRange:r,localizer:o}),c=l.first,d=l.last,m=s.map(function(h){return a5(h,r,i,o)}),x=Va(m,Math.max(a-1,1)),u=x.levels,b=x.extra,g=b.length>0?n-1:n;u.length<g;)u.push([]);return{first:c,last:d,levels:u,extra:b,range:r,slots:r.length,clone:function(j){var y=Lc();return y(Se(Se({},e),j))},getDateForSlot:function(j){return r[j]},getSlotForDate:function(j){return r.find(function(y){return o.isSameDate(y,j)})},getEventsForSlot:function(j){return m.filter(function(y){return l5(y,j)}).map(function(y){return y.event})},continuesPrior:function(j){return o.continuesPrior(i.start(j),c)},continuesAfter:function(j){var y=i.start(j),f=i.end(j);return o.continuesAfter(y,f,d)}}},c5)}var ss=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.handleSelectSlot=function(o){var l=s.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},s.handleShowMore=function(o,l){var c=s.props,d=c.range,m=c.onShowMore,x=s.slotMetrics(s.props),u=oh(s.containerRef.current,".rbc-row-bg")[0],b;u&&(b=u.children[o-1]);var g=x.getEventsForSlot(o);m(g,d[o-1],b,o,l)},s.getContainer=function(){var o=s.props.container;return o?o():s.containerRef.current},s.renderHeadingCell=function(o,l){var c=s.props,d=c.renderHeader,m=c.getNow,x=c.localizer;return d({date:o,key:"header_".concat(l),className:Oe("rbc-date-cell",x.isSameDate(o,m())&&"rbc-now")})},s.renderDummy=function(){var o=s.props,l=o.className,c=o.range,d=o.renderHeader,m=o.showAllEvents;return _.createElement("div",{className:l,ref:s.containerRef},_.createElement("div",{className:Oe("rbc-row-content",m&&"rbc-row-content-scrollable")},d&&_.createElement("div",{className:"rbc-row",ref:s.headingRowRef},c.map(s.renderHeadingCell)),_.createElement("div",{className:"rbc-row",ref:s.eventRowRef},_.createElement("div",{className:"rbc-row-segment"},_.createElement("div",{className:"rbc-event"},_.createElement("div",{className:"rbc-event-content"}," "))))))},s.containerRef=N.createRef(),s.headingRowRef=N.createRef(),s.eventRowRef=N.createRef(),s.slotMetrics=Lc(),s}return qe(r,e),Pe(r,[{key:"getRowLimit",value:function(){var a,n=Sa(this.eventRowRef.current),i=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?Sa(this.headingRowRef.current):0,o=Sa(this.containerRef.current)-i;return Math.max(Math.floor(o/n),1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.rtl,o=a.range,l=a.className,c=a.selected,d=a.selectable,m=a.renderForMeasure,x=a.accessors,u=a.getters,b=a.components,g=a.getNow,h=a.renderHeader,j=a.onSelect,y=a.localizer,f=a.onSelectStart,C=a.onSelectEnd,p=a.onDoubleClick,k=a.onKeyPress,E=a.resourceId,L=a.longPressThreshold,M=a.isAllDay,B=a.resizable,G=a.showAllEvents;if(m)return this.renderDummy();var A=this.slotMetrics(this.props),K=A.levels,Y=A.extra,ae=G?o5:vt,ie=b.weekWrapper,R={selected:c,accessors:x,getters:u,localizer:y,components:b,onSelect:j,onDoubleClick:p,onKeyPress:k,resourceId:E,slotMetrics:A,resizable:B};return _.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},_.createElement(s5,{localizer:y,date:n,getNow:g,rtl:i,range:o,selectable:d,container:this.getContainer,getters:u,onSelectStart:f,onSelectEnd:C,onSelectSlot:this.handleSelectSlot,components:b,longPressThreshold:L,resourceId:E}),_.createElement("div",{className:Oe("rbc-row-content",G&&"rbc-row-content-scrollable"),role:"row"},h&&_.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),_.createElement(ae,null,_.createElement(ie,Object.assign({isAllDay:M},R,{rtl:this.props.rtl}),K.map(function(D,U){return _.createElement(Ac,Object.assign({key:U,segments:D},R))}),!!Y.length&&_.createElement(Ic,Object.assign({segments:Y,onShowMore:this.handleShowMore},R))))))}}])}(_.Component);ss.defaultProps={minRows:0,maxRows:1/0};var Bn=function(r){var s=r.label;return _.createElement("span",{role:"columnheader","aria-sort":"none"},s)},d5=function(r){var s=r.label,a=r.drilldownView,n=r.onDrillDown;return a?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:n},s):_.createElement("span",null,s)},u5=["date","className"],m5=function(r,s,a,n,i){return r.filter(function(o){return rs(o,s,a,n,i)})},ca=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.getContainer=function(){return s.containerRef.current},s.renderWeek=function(o,l){var c=s.props,d=c.events,m=c.components,x=c.selectable,u=c.getNow,b=c.selected,g=c.date,h=c.localizer,j=c.longPressThreshold,y=c.accessors,f=c.getters,C=c.showAllEvents,p=s.state,k=p.needLimitMeasure,E=p.rowLimit,L=m5(ks(d),o[0],o[o.length-1],y,h),M=i5(L,y,h);return _.createElement(ss,{key:l,ref:l===0?s.slotRowRef:void 0,container:s.getContainer,className:"rbc-month-row",getNow:u,date:g,range:o,events:M,maxRows:C?1/0:E,selected:b,selectable:x,components:m,accessors:y,getters:f,localizer:h,renderHeader:s.readerDateHeading,renderForMeasure:k,onShowMore:s.handleShowMore,onSelect:s.handleSelectEvent,onDoubleClick:s.handleDoubleClickEvent,onKeyPress:s.handleKeyPressEvent,onSelectSlot:s.handleSelectSlot,longPressThreshold:j,rtl:s.props.rtl,resizable:s.props.resizable,showAllEvents:C})},s.readerDateHeading=function(o){var l=o.date,c=o.className,d=kt(o,u5),m=s.props,x=m.date,u=m.getDrilldownView,b=m.localizer,g=b.neq(x,l,"month"),h=b.isSameDate(l,x),j=u(l),y=b.format(l,"dateFormat"),f=s.props.components.dateHeader||d5;return _.createElement("div",Object.assign({},d,{className:Oe(c,g&&"rbc-off-range",h&&"rbc-current"),role:"cell"}),_.createElement(f,{label:y,date:l,drilldownView:j,isOffRange:g,onDrillDown:function(p){return s.handleHeadingClick(l,j,p)}}))},s.handleSelectSlot=function(o,l){s._pendingSelection=s._pendingSelection.concat(o),clearTimeout(s._selectTimer),s._selectTimer=setTimeout(function(){return s.selectDates(l)})},s.handleHeadingClick=function(o,l,c){c.preventDefault(),s.clearSelection(),Ee(s.props.onDrillDown,[o,l])},s.handleSelectEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onKeyPressEvent,l)},s.handleShowMore=function(o,l,c,d,m){var x=s.props,u=x.popup,b=x.onDrillDown,g=x.onShowMore,h=x.getDrilldownView,j=x.doShowMoreDrillDown;if(s.clearSelection(),u){var y=Ll(c,s.containerRef.current);s.setState({overlay:{date:l,events:o,position:y,target:m}})}else j&&Ee(b,[l,h(l)||Ve.DAY]);Ee(g,[o,l,d])},s.overlayDisplay=function(){s.setState({overlay:null})},s.state={rowLimit:5,needLimitMeasure:!0,date:null},s.containerRef=N.createRef(),s.slotRowRef=N.createRef(),s._bgRows=[],s._pendingSelection=[],s}return qe(r,e),Pe(r,[{key:"componentDidMount",value:function(){var a=this,n;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){n||Fl(function(){n=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.className,l=i.visibleDays(n,i),c=Gm(l,7);return this._weekCount=c.length,_.createElement("div",{className:Oe("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},_.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var n=this.props,i=n.localizer,o=n.components,l=a[0],c=a[a.length-1],d=o.header||Bn;return i.range(l,c,"day").map(function(m,x){return _.createElement("div",{key:"header_"+x,className:"rbc-header"},_.createElement(d,{date:m,localizer:i,label:i.format(m,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,m=l.components,x=l.getters,u=l.selected,b=l.popupOffset,g=l.handleDragStart,h=function(){return i.setState({overlay:null})};return _.createElement(Un,{overlay:o,accessors:c,localizer:d,components:m,getters:x,selected:u,popupOffset:b,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:g,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:h})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var n=this._pendingSelection.slice();this._pendingSelection=[],n.sort(function(l,c){return+l-+c});var i=new Date(n[0]),o=new Date(n[n.length-1]);o.setDate(n[n.length-1].getDate()+1),Ee(this.props.onSelectSlot,{slots:n,start:i,end:o,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,n){var i=a.date,o=a.localizer;return{date:i,needLimitMeasure:o.neq(i,n.date,"month")}}}])}(_.Component);ca.range=function(e,r){var s=r.localizer,a=s.firstVisibleDay(e,s),n=s.lastVisibleDay(e,s);return{start:a,end:n}};ca.navigate=function(e,r,s){var a=s.localizer;switch(r){case tt.PREVIOUS:return a.add(e,-1,"month");case tt.NEXT:return a.add(e,1,"month");default:return e}};ca.title=function(e,r){var s=r.localizer;return s.format(e,"monthHeaderFormat")};var Lo=function(r){var s=r.min,a=r.max,n=r.step,i=r.slots,o=r.localizer;return"".concat(+o.startOf(s,"minutes"))+"".concat(+o.startOf(a,"minutes"))+"".concat(n,"-").concat(i)};function Hn(e){for(var r=e.min,s=e.max,a=e.step,n=e.timeslots,i=e.localizer,o=Lo({step:a,localizer:i}),l=1+i.getTotalMin(r,s),c=i.getMinutesFromMidnight(r),d=Math.ceil((l-1)/(a*n)),m=d*n,x=new Array(d),u=new Array(m),b=0;b<d;b++){x[b]=new Array(n);for(var g=0;g<n;g++){var h=b*n+g,j=h*a;u[h]=x[b][g]=i.getSlotDate(r,c,j)}}var y=u.length*a;u.push(i.getSlotDate(r,c,y));function f(C){var p=i.diff(r,C,"minutes")+i.getDstOffset(r,C);return Math.min(p,l)}return{groups:x,update:function(p){return Lo(p)!==o?Hn(p):this},dateIsInGroup:function(p,k){var E=x[k+1];return i.inRange(p,x[k][0],E?E[0]:s,"minutes")},nextSlot:function(p){var k=u[Math.min(u.findIndex(function(E){return E===p||i.eq(E,p)})+1,u.length-1)];return i.eq(k,p)&&(k=i.add(p,a,"minutes")),k},closestSlotToPosition:function(p){var k=Math.min(u.length-1,Math.max(0,Math.floor(p*m)));return u[k]},closestSlotFromPoint:function(p,k){var E=Math.abs(k.top-k.bottom);return this.closestSlotToPosition((p.y-k.top)/E)},closestSlotFromDate:function(p){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(p,r,"minutes"))return u[0];if(i.gt(p,s,"minutes"))return u[u.length-1];var E=i.diff(r,p,"minutes");return u[(E-E%a)/a+k]},startsBeforeDay:function(p){return i.lt(p,r,"day")},startsAfterDay:function(p){return i.gt(p,s,"day")},startsBefore:function(p){return i.lt(i.merge(r,p),r,"minutes")},startsAfter:function(p){return i.gt(i.merge(s,p),s,"minutes")},getRange:function(p,k,E,L){E||(p=i.min(s,i.max(r,p))),L||(k=i.min(s,i.max(r,k)));var M=f(p),B=f(k),G=B>a*m&&!i.eq(s,k)?(M-a)/(a*m)*100:M/(a*m)*100;return{top:G,height:B/(a*m)*100-G,start:f(p),startDate:p,end:f(k),endDate:k}},getCurrentTimePosition:function(p){var k=f(p),E=k/(a*m)*100;return E}}}var h5=function(){function e(r,s){var a=s.accessors,n=s.slotMetrics;_e(this,e);var i=n.getRange(a.start(r),a.end(r)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,m=i.top,x=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=m,this.height=x,this.data=r}return Pe(e,[{key:"_width",get:function(){if(this.rows){var s=this.rows.reduce(function(n,i){return Math.max(n,i.leaves.length+1)},0)+1;return 100/s}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var s=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:s;var n=this.row.leaves,i=n.indexOf(this);return i===n.length-1?s:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var s=this.row,a=s.leaves,n=s.xOffset,i=s._width,o=a.indexOf(this)+1;return n+o*i}}])}();function f5(e,r,s){return Math.abs(r.start-e.start)<s||r.start>e.start&&r.start<e.end}function x5(e){for(var r=Ww(e,["startMs",function(l){return-l.endMs}]),s=[];r.length>0;){var a=r.shift();s.push(a);for(var n=0;n<r.length;n++){var i=r[n];if(!(a.endMs>i.startMs)){if(n>0){var o=r.splice(n,1)[0];s.push(o)}break}}}return s}function Fc(e){for(var r=e.events,s=e.minimumStartDifference,a=e.slotMetrics,n=e.accessors,i=r.map(function(m){return new h5(m,{slotMetrics:a,accessors:n})}),o=x5(i),l=[],c=function(){var x=o[d],u=l.find(function(h){return h.end>x.start||Math.abs(x.start-h.start)<s});if(!u)return x.rows=[],l.push(x),1;x.container=u;for(var b=null,g=u.rows.length-1;!b&&g>=0;g--)f5(u.rows[g],x,s)&&(b=u.rows[g]);b?(b.leaves.push(x),x.row=b):(x.leaves=[],u.rows.push(x))},d=0;d<o.length;d++)c();return o.map(function(m){return{event:m.data,style:{top:m.top,height:m.height,width:m.width,xOffset:Math.max(0,m.xOffset)}}})}function Wc(e,r,s){for(var a=0;a<e.friends.length;++a)if(!(s.indexOf(e.friends[a])>-1)){r=r>e.friends[a].idx?r:e.friends[a].idx,s.push(e.friends[a]);var n=Wc(e.friends[a],r,s);r=r>n?r:n}return r}function g5(e){var r=e.events,s=e.minimumStartDifference,a=e.slotMetrics,n=e.accessors,i=Fc({events:r,minimumStartDifference:s,slotMetrics:a,accessors:n});i.sort(function(ie,R){return ie=ie.style,R=R.style,ie.top!==R.top?ie.top>R.top?1:-1:ie.height!==R.height?ie.top+ie.height<R.top+R.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,m=c.style.top+c.style.height,x=l+1;x<i.length;++x){var u=i[x],b=u.style.top,g=u.style.top+u.style.height;(b>=d&&g<=m||g>d&&g<=m||b>=d&&b<m)&&(c.friends.push(u),u.friends.push(c))}for(var h=0;h<i.length;++h){for(var j=i[h],y=[],f=0;f<100;++f)y.push(1);for(var C=0;C<j.friends.length;++C)j.friends[C].idx!==void 0&&(y[j.friends[C].idx]=0);j.idx=y.indexOf(1)}for(var p=0;p<i.length;++p){var k=0;if(!i[p].size){var E=[],L=Wc(i[p],0,E);k=100/(L+1),i[p].size=k;for(var M=0;M<E.length;++M)E[M].size=k}}for(var B=0;B<i.length;++B){var G=i[B];G.style.left=G.idx*G.size;for(var A=0,K=0;K<G.friends.length;++K){var Y=G.friends[K].idx;A=A>Y?A:Y}A<=G.idx&&(G.size=100-G.idx*G.size);var ae=G.idx===0?0:3;G.style.width="calc(".concat(G.size,"% - ").concat(ae,"px)"),G.style.height="calc(".concat(G.style.height,"% - 2px)"),G.style.xOffset="calc(".concat(G.style.left,"% + ").concat(ae,"px)")}return i}var Fo={overlap:Fc,"no-overlap":g5};function p5(e){return!!(e&&e.constructor&&e.call&&e.apply)}function v5(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var r=e.dayLayoutAlgorithm,s=r;return r in Fo&&(s=Fo[r]),p5(s)?s.apply(this,arguments):[]}var Uc=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.renderSlot,i=a.resource,o=a.group,l=a.getters,c=a.components,d=c===void 0?{}:c,m=d.timeSlotWrapper,x=m===void 0?vt:m,u=l?l.slotGroupProp(o):{};return _.createElement("div",Object.assign({className:"rbc-timeslot-group"},u),o.map(function(b,g){var h=l?l.slotProp(b,i):{};return _.createElement(x,{key:g,value:b,resource:i},_.createElement("div",Object.assign({},h,{className:Oe("rbc-time-slot",h.className)}),n&&n(b,g)))}))}}])}(N.Component);function Ns(e){return typeof e=="string"?e:e+"%"}function b5(e){var r=e.style,s=e.className,a=e.event,n=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,m=e.getters,x=e.onClick,u=e.onDoubleClick,b=e.isBackgroundEvent,g=e.onKeyPress,h=e.components,j=h.event,y=h.eventWrapper,f=n.title(a),C=n.tooltip(a),p=n.end(a),k=n.start(a),E=m.eventProp(a,k,p,o),L=[_.createElement("div",{key:"1",className:"rbc-event-label"},l),_.createElement("div",{key:"2",className:"rbc-event-content"},j?_.createElement(j,{event:a,title:f}):f)],M=r.height,B=r.top,G=r.width,A=r.xOffset,K=Se(Se({},E.style),{},Vt({top:Ns(B),height:Ns(M),width:Ns(G)},i?"right":"left",Ns(A)));return _.createElement(y,Object.assign({type:"time"},e),_.createElement("div",{role:"button",tabIndex:0,onClick:x,onDoubleClick:u,style:K,onKeyDown:g,title:C?(typeof l=="string"?l+": ":"")+C:void 0,className:Oe(b?"rbc-background-event":"rbc-event",s,E.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},L))}var y5=function(r){var s=r.children,a=r.className,n=r.style,i=r.innerRef;return _.createElement("div",{className:a,style:n,ref:i},s)},j5=_.forwardRef(function(e,r){return _.createElement(y5,Object.assign({},e,{innerRef:r}))}),w5=["dayProp"],N5=["eventContainerWrapper","timeIndicatorWrapper"],Bc=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.state={selecting:!1,timeIndicatorPosition:null},s.intervalTriggered=!1,s.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=s.props,m=d.rtl,x=d.selected,u=d.accessors,b=d.localizer,g=d.getters,h=d.components,j=d.step,y=d.timeslots,f=d.dayLayoutAlgorithm,C=d.resizable,p=s,k=p.slotMetrics,E=b.messages,L=v5({events:l,accessors:u,slotMetrics:k,minimumStartDifference:Math.ceil(j*y/2),dayLayoutAlgorithm:f});return L.map(function(M,B){var G,A=M.event,K=M.style,Y=u.end(A),ae=u.start(A),ie=(G=u.eventId(A))!==null&&G!==void 0?G:"evt_"+B,R="eventTimeRangeFormat",D,U=k.startsBeforeDay(ae),V=k.startsAfterDay(Y);U?R="eventTimeRangeEndFormat":V&&(R="eventTimeRangeStartFormat"),U&&V?D=E.allDay:D=b.format({start:ae,end:Y},R);var T=U||k.startsBefore(ae),me=V||k.startsAfter(Y);return _.createElement(b5,{style:K,event:A,label:D,key:ie,getters:g,rtl:m,components:h,continuesPrior:T,continuesAfter:me,accessors:u,resource:s.props.resource,selected:la(A,x),onClick:function(fe){return s._select(Se(Se(Se({},A),s.props.resource&&{sourceResource:s.props.resource}),c&&{isBackgroundEvent:!0}),fe)},onDoubleClick:function(fe){return s._doubleClick(A,fe)},isBackgroundEvent:c,onKeyPress:function(fe){return s._keyPress(A,fe)},resizable:C})})},s._selectable=function(){var o=s.containerRef.current,l=s.props,c=l.longPressThreshold,d=l.localizer,m=s._selector=new Pc(function(){return o},{longPressThreshold:c}),x=function(h){var j=s.props.onSelecting,y=s.state||{},f=u(h),C=f.startDate,p=f.endDate;j&&(d.eq(y.startDate,C,"minutes")&&d.eq(y.endDate,p,"minutes")||j({start:C,end:p,resourceId:s.props.resource})===!1)||(s.state.start!==f.start||s.state.end!==f.end||s.state.selecting!==f.selecting)&&s.setState(f)},u=function(h){var j=s.slotMetrics.closestSlotFromPoint(h,nr(o));s.state.selecting||(s._initialSlot=j);var y=s._initialSlot;d.lte(y,j)?j=s.slotMetrics.nextSlot(j):d.gt(y,j)&&(y=s.slotMetrics.nextSlot(y));var f=s.slotMetrics.getRange(d.min(y,j),d.max(y,j));return Se(Se({},f),{},{selecting:!0,top:"".concat(f.top,"%"),height:"".concat(f.height,"%")})},b=function(h,j){if(!Fs(s.containerRef.current,h)){var y=u(h),f=y.startDate,C=y.endDate;s._selectSlot({startDate:f,endDate:C,action:j,box:h})}s.setState({selecting:!1})};m.on("selecting",x),m.on("selectStart",x),m.on("beforeSelect",function(g){if(s.props.selectable==="ignoreEvents")return!Fs(s.containerRef.current,g)}),m.on("click",function(g){return b(g,"click")}),m.on("doubleClick",function(g){return b(g,"doubleClick")}),m.on("select",function(g){s.state.selecting&&(s._selectSlot(Se(Se({},s.state),{},{action:"select",bounds:g})),s.setState({selecting:!1}))}),m.on("reset",function(){s.state.selecting&&s.setState({selecting:!1})})},s._teardownSelectable=function(){s._selector&&(s._selector.teardown(),s._selector=null)},s._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,m=o.bounds,x=o.box,u=l,b=[];s.props.localizer.lte(u,c);)b.push(u),u=new Date(+u+s.props.step*60*1e3);Ee(s.props.onSelectSlot,{slots:b,start:l,end:c,resourceId:s.props.resource,action:d,bounds:m,box:x})},s._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onSelectEvent,l)},s._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onDoubleClickEvent,l)},s._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onKeyPressEvent,l)},s.slotMetrics=Hn(s.props),s.containerRef=N.createRef(),s}return qe(r,e),Pe(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,n){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,m=i.min,x=i.max,u=c.neq(a.getNow(),o(),"minutes");if(a.isNow!==l||u){if(this.clearTimeIndicatorInterval(),l){var b=!u&&c.eq(a.date,d,"minutes")&&n.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(b)}}else l&&(c.neq(a.min,m,"minutes")||c.neq(a.max,x,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!n&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,n=a.min,i=a.max,o=a.getNow,l=o();if(l>=n&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,n=a.date,i=a.max,o=a.rtl,l=a.isNow,c=a.resource,d=a.accessors,m=a.localizer,x=a.getters,u=x.dayProp,b=kt(x,w5),g=a.components,h=g.eventContainerWrapper,j=g.timeIndicatorWrapper,y=kt(g,N5);this.slotMetrics=this.slotMetrics.update(this.props);var f=this.slotMetrics,C=this.state,p=C.selecting,k=C.top,E=C.height,L=C.startDate,M=C.endDate,B={start:L,end:M},G=u(i,c),A=G.className,K=G.style,Y={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},ae=y.dayColumnWrapper||j5;return _.createElement(ae,{ref:this.containerRef,date:n,style:K,className:Oe(A,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",p&&"rbc-slot-selecting"),slotMetrics:f,resource:c},f.groups.map(function(ie,R){return _.createElement(Uc,{key:R,group:ie,resource:c,getters:b,components:y})}),_.createElement(h,{localizer:m,resource:c,accessors:d,getters:b,components:y,slotMetrics:f},_.createElement("div",{className:Oe("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),p&&_.createElement("div",{className:"rbc-slot-selection",style:{top:k,height:E}},_.createElement("span",null,m.format(B,"selectRangeFormat"))),l&&this.intervalTriggered&&_.createElement(j,Y,_.createElement("div",Y)))}}])}(_.Component);Bc.defaultProps={dragThroughEvents:!0,timeslots:2};var Hc=function(r){var s=r.label;return _.createElement(_.Fragment,null,s)},S5=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Ee(s.props.onDrillDown,[o,l])},s.renderRow=function(o){var l=s.props,c=l.events,d=l.rtl,m=l.selectable,x=l.getNow,u=l.range,b=l.getters,g=l.localizer,h=l.accessors,j=l.components,y=l.resizable,f=h.resourceId(o),C=o?c.filter(function(p){return h.resource(p)===f}):c;return _.createElement(ss,{isAllDay:!0,rtl:d,getNow:x,minRows:2,maxRows:s.props.allDayMaxRows+1,range:u,events:C,resourceId:f,className:"rbc-allday-cell",selectable:m,selected:s.props.selected,components:j,accessors:h,getters:b,localizer:g,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyPress:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:y})},s}return qe(r,e),Pe(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,m=i.components.header,x=m===void 0?Bn:m,u=c();return a.map(function(b,g){var h=l(b),j=o.format(b,"dayFormat"),y=d(b),f=y.className,C=y.style,p=_.createElement(x,{date:b,label:j,localizer:o});return _.createElement("div",{key:g,style:C,className:Oe("rbc-header",f,o.isSameDate(b,u)&&"rbc-today")},h?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(E){return n.handleHeaderClick(b,h,E)}},p):_.createElement("span",null,p))})}},{key:"render",value:function(){var a=this,n=this.props,i=n.width,o=n.rtl,l=n.resources,c=n.range,d=n.events,m=n.getNow,x=n.accessors,u=n.selectable,b=n.components,g=n.getters,h=n.scrollRef,j=n.localizer,y=n.isOverflowing,f=n.components,C=f.timeGutterHeader,p=f.resourceHeader,k=p===void 0?Hc:p,E=n.resizable,L={};y&&(L[o?"marginLeft":"marginRight"]="".concat(jn()-1,"px"));var M=l.groupEvents(d);return _.createElement("div",{style:L,ref:h,className:Oe("rbc-time-header",y&&"rbc-overflowing")},_.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},C&&_.createElement(C,null)),l.map(function(B,G){var A=Qt(B,2),K=A[0],Y=A[1];return _.createElement("div",{className:"rbc-time-header-content",key:K||G},Y&&_.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(G)},_.createElement("div",{className:"rbc-header"},_.createElement(k,{index:G,label:x.resourceTitle(Y),resource:Y}))),_.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),_.createElement(ss,{isAllDay:!0,rtl:o,getNow:m,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:M.get(K)||[],resourceId:Y&&K,className:"rbc-allday-cell",selectable:u,selected:a.props.selected,components:b,accessors:x,getters:g,localizer:j,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:E}))}))}}])}(_.Component),k5=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Ee(s.props.onDrillDown,[o,l])},s}return qe(r,e),Pe(r,[{key:"renderHeaderCells",value:function(a){var n=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,m=i.components,x=m.header,u=x===void 0?Bn:x,b=m.resourceHeader,g=b===void 0?Hc:b,h=i.resources,j=i.accessors,y=i.events,f=i.rtl,C=i.selectable,p=i.components,k=i.getters,E=i.resizable,L=c(),M=h.groupEvents(y);return a.map(function(B,G){var A=l(B),K=o.format(B,"dayFormat"),Y=d(B),ae=Y.className,ie=Y.style,R=_.createElement(u,{date:B,label:K,localizer:o});return _.createElement("div",{key:G,className:"rbc-time-header-content rbc-resource-grouping"},_.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},_.createElement("div",{style:ie,className:Oe("rbc-header",ae,o.isSameDate(B,L)&&"rbc-today")},A?_.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(U){return n.handleHeaderClick(B,A,U)}},R):_.createElement("span",null,R))),_.createElement("div",{className:"rbc-row"},h.map(function(D,U){var V=Qt(D,2),T=V[0],me=V[1];return _.createElement("div",{key:"resource_".concat(T,"_").concat(U),className:Oe("rbc-header",ae,o.isSameDate(B,L)&&"rbc-today")},_.createElement(g,{index:U,label:j.resourceTitle(me),resource:me}))})),_.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},h.map(function(D,U){var V=Qt(D,2),T=V[0],me=V[1],ce=(M.get(T)||[]).filter(function(fe){return o.isSameDate(fe.start,B)||o.isSameDate(fe.end,B)});return _.createElement(ss,{key:"resource_".concat(T,"_").concat(U),isAllDay:!0,rtl:f,getNow:c,minRows:2,maxRows:n.props.allDayMaxRows+1,range:[B],events:ce,resourceId:me&&T,className:"rbc-allday-cell",selectable:C,selected:n.props.selected,components:p,accessors:j,getters:k,localizer:o,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:E})})))})}},{key:"render",value:function(){var a=this.props,n=a.width,i=a.rtl,o=a.range,l=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,m={};return c&&(m[i?"marginLeft":"marginRight"]="".concat(jn()-1,"px")),_.createElement("div",{style:m,ref:l,className:Oe("rbc-time-header",c&&"rbc-overflowing")},_.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:n,minWidth:n,maxWidth:n}},d&&_.createElement(d,null)),this.renderHeaderCells(o))}}])}(_.Component);function C5(e){var r=e.min,s=e.max,a=e.localizer;return a.getTimezoneOffset(r)!==a.getTimezoneOffset(s)?{start:a.add(r,-1,"day"),end:a.add(s,-1,"day")}:{start:r,end:s}}var $5=function(r){var s=r.min,a=r.max,n=r.timeslots,i=r.step,o=r.localizer,l=r.getNow,c=r.resource,d=r.components,m=r.getters,x=r.gutterRef,u=d.timeGutterWrapper,b=N.useMemo(function(){return C5({min:s,max:a,localizer:o})},[s==null?void 0:s.toISOString(),a==null?void 0:a.toISOString(),o]),g=b.start,h=b.end,j=N.useState(Hn({min:g,max:h,timeslots:n,step:i,localizer:o})),y=Qt(j,2),f=y[0],C=y[1];N.useEffect(function(){f&&C(f.update({min:g,max:h,timeslots:n,step:i,localizer:o}))},[g==null?void 0:g.toISOString(),h==null?void 0:h.toISOString(),n,i]);var p=N.useCallback(function(k,E){if(E)return null;var L=f.dateIsInGroup(l(),E);return _.createElement("span",{className:Oe("rbc-label",L&&"rbc-now")},o.format(k,"timeGutterFormat"))},[f,o,l]);return _.createElement(u,{slotMetrics:f},_.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:x},f.groups.map(function(k,E){return _.createElement(Uc,{key:E,group:k,resource:c,components:d,renderSlot:p,getters:m})})))},E5=_.forwardRef(function(e,r){return _.createElement($5,Object.assign({gutterRef:r},e))}),Ea={};function D5(e,r){return{map:function(a){return e?e.map(function(n,i){return a([r.resourceId(n),n],i)}):[a([Ea,null],0)]},groupEvents:function(a){var n=new Map;return e?(a.forEach(function(i){var o=r.resource(i)||Ea;if(Array.isArray(o))o.forEach(function(c){var d=n.get(c)||[];d.push(i),n.set(c,d)});else{var l=n.get(o)||[];l.push(i),n.set(o,l)}}),n):(n.set(Ea,a),n)}}}var Tr=function(e){function r(s){var a;return _e(this,r),a=Ge(this,r,[s]),a.handleScroll=function(n){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=n.target.scrollLeft)},a.handleResize=function(){Si(a.rafHandle),a.rafHandle=Fl(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Ee(a.props.onKeyPressEvent,i)},a.handleSelectEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Ee(a.props.onSelectEvent,i)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];Ee(a.props.onDoubleClickEvent,i)},a.handleShowMore=function(n,i,o,l,c){var d=a.props,m=d.popup,x=d.onDrillDown,u=d.onShowMore,b=d.getDrilldownView,g=d.doShowMoreDrillDown;if(a.clearSelection(),m){var h=Ll(o,a.containerRef.current);a.setState({overlay:{date:i,events:n,position:Se(Se({},h),{},{width:"200px"}),target:c}})}else g&&Ee(x,[i,b(i)||Ve.DAY]);Ee(u,[n,i,l])},a.handleSelectAllDaySlot=function(n,i){var o=a.props.onSelectSlot,l=new Date(n[0]),c=new Date(n[n.length-1]);c.setDate(n[n.length-1].getDate()+1),Ee(o,{slots:n,start:l,end:c,action:i.action,resourceId:i.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var n=a.contentRef.current;if(n!=null&&n.scrollHeight){var i=n.scrollHeight>n.clientHeight;a.state.isOverflowing!==i&&(a._updatingOverflow=!0,a.setState({isOverflowing:i},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=dc(function(n,i){return D5(n,i)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=_.createRef(),a.contentRef=_.createRef(),a.containerRef=_.createRef(),a._scrollRatio=null,a.gutterRef=N.createRef(),a}return qe(r,e),Pe(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Si(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,n,i,o,l,c,d,m,x,u){var b=this.props,g=b.min,h=b.max,j=(o.get(n)||[]).filter(function(f){return c.inRange(a,d.start(f),d.end(f),"day")}),y=(l.get(n)||[]).filter(function(f){return c.inRange(a,d.start(f),d.end(f),"day")});return _.createElement(Bc,Object.assign({},this.props,{localizer:c,min:c.merge(a,g),max:c.merge(a,h),resource:i&&n,components:m,isNow:c.isSameDate(a,u),key:"".concat(n,"-").concat(a),date:a,events:j,backgroundEvents:y,dayLayoutAlgorithm:x}))}},{key:"renderResourcesFirst",value:function(a,n,i,o,l,c,d,m,x){var u=this;return n.map(function(b){var g=Qt(b,2),h=g[0],j=g[1];return a.map(function(y){return u.renderDayColumn(y,h,j,i,o,l,c,m,x,d)})})}},{key:"renderRangeFirst",value:function(a,n,i,o,l,c,d,m,x){var u=this;return a.map(function(b){return _.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:b},n.map(function(g){var h=Qt(g,2),j=h[0],y=h[1];return _.createElement("div",{style:{flex:1},key:c.resourceId(y)},u.renderDayColumn(b,j,y,i,o,l,c,m,x,d))}))})}},{key:"renderEvents",value:function(a,n,i,o){var l=this.props,c=l.accessors,d=l.localizer,m=l.resourceGroupingLayout,x=l.components,u=l.dayLayoutAlgorithm,b=this.memoizedResources(this.props.resources,c),g=b.groupEvents(n),h=b.groupEvents(i);return m?this.renderRangeFirst(a,b,g,h,d,c,o,x,u):this.renderResourcesFirst(a,b,g,h,d,c,o,x,u)}},{key:"render",value:function(){var a,n=this.props,i=n.events,o=n.backgroundEvents,l=n.range,c=n.width,d=n.rtl,m=n.selected,x=n.getNow,u=n.resources,b=n.components,g=n.accessors,h=n.getters,j=n.localizer,y=n.min,f=n.max,C=n.showMultiDayTimes,p=n.longPressThreshold,k=n.resizable,E=n.resourceGroupingLayout;c=c||this.state.gutterWidth;var L=l[0],M=l[l.length-1];this.slots=l.length;var B=[],G=[],A=[];i.forEach(function(Y){if(rs(Y,L,M,g,j)){var ae=g.start(Y),ie=g.end(Y);g.allDay(Y)||j.startAndEndAreDateOnly(ae,ie)||!C&&!j.isSameDate(ae,ie)?B.push(Y):G.push(Y)}}),o.forEach(function(Y){rs(Y,L,M,g,j)&&A.push(Y)}),B.sort(function(Y,ae){return Ka(Y,ae,g,j)});var K={range:l,events:B,width:c,rtl:d,getNow:x,localizer:j,selected:m,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(u,g),selectable:this.props.selectable,accessors:g,getters:h,components:b,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:p,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:k};return _.createElement("div",{className:Oe("rbc-time-view",u&&"rbc-time-view-resources"),ref:this.containerRef},u&&u.length>1&&E?_.createElement(k5,K):_.createElement(S5,K),this.props.popup&&this.renderOverlay(),_.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},_.createElement(E5,{date:L,ref:this.gutterRef,localizer:j,min:j.merge(L,y),max:j.merge(L,f),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:b,className:"rbc-time-gutter",getters:h}),this.renderEvents(l,G,A,x())))}},{key:"renderOverlay",value:function(){var a,n,i=this,o=(a=(n=this.state)===null||n===void 0?void 0:n.overlay)!==null&&a!==void 0?a:{},l=this.props,c=l.accessors,d=l.localizer,m=l.components,x=l.getters,u=l.selected,b=l.popupOffset,g=l.handleDragStart,h=function(){return i.setState({overlay:null})};return _.createElement(Un,{overlay:o,accessors:c,localizer:d,components:m,getters:x,selected:u,popupOffset:b,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:g,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:h})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var n,i=(n=a.gutterRef)!==null&&n!==void 0&&n.current?qa(a.gutterRef.current):void 0;i&&a.state.gutterWidth!==i&&a.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,n=a.min,i=a.max,o=a.scrollToTime,l=a.localizer,c=l.diff(l.merge(o,n),o,"milliseconds"),d=l.diff(n,i,"milliseconds");this._scrollRatio=c/d}}])}(N.Component);Tr.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var T5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],da=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,x=m===void 0?i.startOf(new Date,"day"):m,u=a.enableAutoScroll,b=u===void 0?!0:u,g=kt(a,T5),h=r.range(n,{localizer:i});return _.createElement(Tr,Object.assign({},g,{range:h,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:x,enableAutoScroll:b}))}}])}(_.Component);da.range=function(e,r){var s=r.localizer;return[s.startOf(e,"day")]};da.navigate=function(e,r,s){var a=s.localizer;switch(r){case tt.PREVIOUS:return a.add(e,-1,"day");case tt.NEXT:return a.add(e,1,"day");default:return e}};da.title=function(e,r){var s=r.localizer;return s.format(e,"dayHeaderFormat")};var O5=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Bt=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,x=m===void 0?i.startOf(new Date,"day"):m,u=a.enableAutoScroll,b=u===void 0?!0:u,g=kt(a,O5),h=r.range(n,this.props);return _.createElement(Tr,Object.assign({},g,{range:h,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:x,enableAutoScroll:b}))}}])}(_.Component);Bt.defaultProps=Tr.defaultProps;Bt.navigate=function(e,r,s){var a=s.localizer;switch(r){case tt.PREVIOUS:return a.add(e,-1,"week");case tt.NEXT:return a.add(e,1,"week");default:return e}};Bt.range=function(e,r){var s=r.localizer,a=s.startOfWeek(),n=s.startOf(e,"week",a),i=s.endOf(e,"week",a);return s.range(n,i)};Bt.title=function(e,r){var s=r.localizer,a=Bt.range(e,{localizer:s}),n=pc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var M5=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function zn(e,r){return Bt.range(e,r).filter(function(s){return[6,0].indexOf(s.getDay())===-1})}var fs=function(e){function r(){return _e(this,r),Ge(this,r,arguments)}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.date,i=a.localizer,o=a.min,l=o===void 0?i.startOf(new Date,"day"):o,c=a.max,d=c===void 0?i.endOf(new Date,"day"):c,m=a.scrollToTime,x=m===void 0?i.startOf(new Date,"day"):m,u=a.enableAutoScroll,b=u===void 0?!0:u,g=kt(a,M5),h=zn(n,this.props);return _.createElement(Tr,Object.assign({},g,{range:h,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:x,enableAutoScroll:b}))}}])}(_.Component);fs.defaultProps=Tr.defaultProps;fs.range=zn;fs.navigate=Bt.navigate;fs.title=function(e,r){var s=r.localizer,a=zn(e,{localizer:s}),n=pc(a),i=n[0],o=n.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var ua=30;function ma(e){var r=e.accessors,s=e.components,a=e.date,n=e.events,i=e.getters,o=e.length,l=o===void 0?ua:o,c=e.localizer,d=e.onDoubleClickEvent,m=e.onSelectEvent,x=e.selected,u=N.useRef(null),b=N.useRef(null),g=N.useRef(null),h=N.useRef(null),j=N.useRef(null);N.useEffect(function(){C()});var y=function(M,B,G){var A=s.event,K=s.date;return B=B.filter(function(Y){return rs(Y,c.startOf(M,"day"),c.endOf(M,"day"),r,c)}),B.map(function(Y,ae){var ie=r.title(Y),R=r.end(Y),D=r.start(Y),U=i.eventProp(Y,D,R,la(Y,x)),V=ae===0&&c.format(M,"agendaDateFormat"),T=ae===0?_.createElement("td",{rowSpan:B.length,className:"rbc-agenda-date-cell"},K?_.createElement(K,{day:M,label:V}):V):!1;return _.createElement("tr",{key:G+"_"+ae,className:U.className,style:U.style},T,_.createElement("td",{className:"rbc-agenda-time-cell"},f(M,Y)),_.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(ce){return m&&m(Y,ce)},onDoubleClick:function(ce){return d&&d(Y,ce)}},A?_.createElement(A,{event:Y,title:ie}):ie))},[])},f=function(M,B){var G="",A=s.time,K=c.messages.allDay,Y=r.end(B),ae=r.start(B);return r.allDay(B)||(c.eq(ae,Y)?K=c.format(ae,"agendaTimeFormat"):c.isSameDate(ae,Y)?K=c.format({start:ae,end:Y},"agendaTimeRangeFormat"):c.isSameDate(M,ae)?K=c.format(ae,"agendaTimeFormat"):c.isSameDate(M,Y)&&(K=c.format(Y,"agendaTimeFormat"))),c.gt(M,ae,"day")&&(G="rbc-continues-prior"),c.lt(M,Y,"day")&&(G+=" rbc-continues-after"),_.createElement("span",{className:G.trim()},A?_.createElement(A,{event:B,day:M,label:K}):K)},C=function(){if(j.current){var M=u.current,B=j.current.firstChild;if(B){var G=h.current.scrollHeight>h.current.clientHeight,A=[],K=A;A=[qa(B.children[0]),qa(B.children[1])],(K[0]!==A[0]||K[1]!==A[1])&&(b.current.style.width=A[0]+"px",g.current.style.width=A[1]+"px"),G?(_f(M,"rbc-header-overflowing"),M.style.marginRight=jn()+"px"):Pf(M,"rbc-header-overflowing")}}},p=c.messages,k=c.add(a,l,"day"),E=c.range(a,k,"day");return n=n.filter(function(L){return rs(L,c.startOf(a,"day"),c.endOf(k,"day"),r,c)}),n.sort(function(L,M){return+r.start(L)-+r.start(M)}),_.createElement("div",{className:"rbc-agenda-view"},n.length!==0?_.createElement(_.Fragment,null,_.createElement("table",{ref:u,className:"rbc-agenda-table"},_.createElement("thead",null,_.createElement("tr",null,_.createElement("th",{className:"rbc-header",ref:b},p.date),_.createElement("th",{className:"rbc-header",ref:g},p.time),_.createElement("th",{className:"rbc-header"},p.event)))),_.createElement("div",{className:"rbc-agenda-content",ref:h},_.createElement("table",{className:"rbc-agenda-table"},_.createElement("tbody",{ref:j},E.map(function(L,M){return y(L,n,M)}))))):_.createElement("span",{className:"rbc-agenda-empty"},p.noEventsInRange))}ma.range=function(e,r){var s=r.length,a=s===void 0?ua:s,n=r.localizer,i=n.add(e,a,"day");return{start:e,end:i}};ma.navigate=function(e,r,s){var a=s.length,n=a===void 0?ua:a,i=s.localizer;switch(r){case tt.PREVIOUS:return i.add(e,-n,"day");case tt.NEXT:return i.add(e,n,"day");default:return e}};ma.title=function(e,r){var s=r.length,a=s===void 0?ua:s,n=r.localizer,i=n.add(e,a,"day");return n.format({start:e,end:i},"agendaHeaderFormat")};var Es=Vt(Vt(Vt(Vt(Vt({},Ve.MONTH,ca),Ve.WEEK,Bt),Ve.WORK_WEEK,fs),Ve.DAY,da),Ve.AGENDA,ma),_5=["action","date","today"];function P5(e,r){var s=r.action,a=r.date,n=r.today,i=kt(r,_5);switch(e=typeof e=="string"?Es[e]:e,s){case tt.TODAY:a=n||new Date;break;case tt.DATE:break;default:zr(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=e.navigate(a,s,i)}return a}function A5(e,r){var s=null;return typeof r=="function"?s=r(e):typeof r=="string"&&Ot(e)==="object"&&e!=null&&r in e&&(s=e[r]),s}var Et=function(r){return function(s){return A5(s,r)}},R5=["view","date","getNow","onNavigate"],I5=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function zc(e){if(Array.isArray(e))return e;for(var r=[],s=0,a=Object.entries(e);s<a.length;s++){var n=Qt(a[s],2),i=n[0],o=n[1];o&&r.push(i)}return r}function L5(e,r){var s=r.views,a=zc(s);return a.indexOf(e)!==-1}var Gc=function(e){function r(){var s;_e(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return s=Ge(this,r,[].concat(n)),s.getViews=function(){var o=s.props.views;return Array.isArray(o)?fk(o,function(l,c){return l[c]=Es[c]},{}):Ot(o)==="object"?fN(o,function(l,c){return l===!0?Es[c]:l}):Es},s.getView=function(){var o=s.getViews();return o[s.props.view]},s.getDrilldownView=function(o){var l=s.props,c=l.view,d=l.drilldownView,m=l.getDrilldownView;return m?m(o,c,Object.keys(s.getViews())):d},s.handleRangeChange=function(o,l,c){var d=s.props,m=d.onRangeChange,x=d.localizer;m&&l.range&&m(l.range(o,{localizer:x}),c)},s.handleNavigate=function(o,l){var c=s.props,d=c.view,m=c.date,x=c.getNow,u=c.onNavigate,b=kt(c,R5),g=s.getView(),h=x();m=P5(g,Se(Se({},b),{},{action:o,date:l||m||h,today:h})),u(m,d,o),s.handleRangeChange(m,g)},s.handleViewChange=function(o){o!==s.props.view&&L5(o,s.props)&&s.props.onView(o);var l=s.getViews();s.handleRangeChange(s.props.date||s.props.getNow(),l[o],o)},s.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Ee(s.props.onKeyPressEvent,l)},s.handleSelectSlot=function(o){Ee(s.props.onSelectSlot,o)},s.handleDrillDown=function(o,l){var c=s.props.onDrillDown;if(c){c(o,l,s.drilldownView);return}l&&s.handleViewChange(l),s.handleNavigate(tt.DATE,o)},s.state={context:r.getContext(s.props)},s}return qe(r,e),Pe(r,[{key:"render",value:function(){var a=this.props,n=a.view,i=a.toolbar,o=a.events,l=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,m=a.className,x=a.elementProps,u=a.date,b=a.getNow,g=a.length,h=a.showMultiDayTimes,j=a.onShowMore,y=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var f=kt(a,I5);u=u||b();var C=this.getView(),p=this.state.context,k=p.accessors,E=p.components,L=p.getters,M=p.localizer,B=p.viewNames,G=E.toolbar||Uk,A=C.title(u,{localizer:M,length:g});return _.createElement("div",Object.assign({},x,{className:Oe(m,"rbc-calendar",f.rtl&&"rbc-rtl"),style:d}),i&&_.createElement(G,{date:u,view:n,views:B,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:M}),_.createElement(C,Object.assign({},f,{events:o,backgroundEvents:l,date:u,getNow:b,length:g,localizer:M,getters:L,components:E,accessors:k,showMultiDayTimes:h,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:j,doShowMoreDrillDown:y,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:r.getContext(a)}}},{key:"getContext",value:function(a){var n=a.startAccessor,i=a.endAccessor,o=a.allDayAccessor,l=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,m=a.resourceIdAccessor,x=a.resourceTitleAccessor,u=a.eventIdAccessor,b=a.eventPropGetter,g=a.backgroundEventPropGetter,h=a.slotPropGetter,j=a.slotGroupPropGetter,y=a.dayPropGetter,f=a.view,C=a.views,p=a.localizer,k=a.culture,E=a.messages,L=E===void 0?{}:E,M=a.components,B=M===void 0?{}:M,G=a.formats,A=G===void 0?{}:G,K=zc(C),Y=Hk(L);return{viewNames:K,localizer:Wk(p,k,A,Y),getters:{eventProp:function(){return b&&b.apply(void 0,arguments)||{}},backgroundEventProp:function(){return g&&g.apply(void 0,arguments)||{}},slotProp:function(){return h&&h.apply(void 0,arguments)||{}},slotGroupProp:function(){return j&&j.apply(void 0,arguments)||{}},dayProp:function(){return y&&y.apply(void 0,arguments)||{}}},components:oN(B[f]||{},tk(B,K),{eventWrapper:vt,backgroundEventWrapper:vt,eventContainerWrapper:vt,dateCellWrapper:vt,weekWrapper:vt,timeSlotWrapper:vt,timeGutterWrapper:vt,timeIndicatorWrapper:vt}),accessors:{start:Et(n),end:Et(i),allDay:Et(o),tooltip:Et(l),title:Et(c),resource:Et(d),resourceId:Et(m),resourceTitle:Et(x),eventId:Et(u)}}}}])}(_.Component);Gc.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Ve.MONTH,views:[Ve.MONTH,Ve.WEEK,Ve.DAY,Ve.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Ve.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Gn=vl(Gc,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),F5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"P",s)," – ").concat(a.format(i,"P",s))},Da=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"p",s)," – ").concat(a.format(i,"p",s))},W5=function(r,s,a){var n=r.start;return"".concat(a.format(n,"h:mma",s)," – ")},U5=function(r,s,a){var n=r.end;return" – ".concat(a.format(n,"h:mma",s))},B5=function(r,s,a){var n=r.start,i=r.end;return"".concat(a.format(n,"MMMM dd",s)," – ").concat(a.format(i,yr(n,i,"month")?"dd":"MMMM dd",s))},H5={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Da,eventTimeRangeFormat:Da,eventTimeRangeStartFormat:W5,eventTimeRangeEndFormat:U5,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:B5,agendaHeaderFormat:F5,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Da},qn=function(r){var s=r.startOfWeek,a=r.getDay,n=r.format,i=r.locales;return new Fk({formats:H5,firstOfWeek:function(l){return a(s(new Date,{locale:i[l]}))},format:function(l,c,d){return n(new Date(l),c,{locale:i[d]})}})};function it(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function _t(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}function z5(e,r){const s=it(e);return isNaN(r)?_t(e,NaN):(s.setDate(s.getDate()+r),s)}const qc=6048e5,G5=864e5;let q5={};function ha(){return q5}function Ct(e,r){var l,c,d,m;const s=ha(),a=(r==null?void 0:r.weekStartsOn)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((m=(d=s.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,n=it(e),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Ws(e){return Ct(e,{weekStartsOn:1})}function Yc(e){const r=it(e),s=r.getFullYear(),a=_t(e,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const n=Ws(a),i=_t(e,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=Ws(i);return r.getTime()>=n.getTime()?s+1:r.getTime()>=o.getTime()?s:s-1}function Us(e){const r=it(e);return r.setHours(0,0,0,0),r}function Wo(e){const r=it(e),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+e-+s}function Y5(e,r){const s=Us(e),a=Us(r),n=+s-Wo(s),i=+a-Wo(a);return Math.round((n-i)/G5)}function V5(e){const r=Yc(e),s=_t(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Ws(s)}function Yn(e){return _t(e,Date.now())}function Vc(e,r){const s=Us(e),a=Us(r);return+s==+a}function K5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function X5(e){if(!K5(e)&&typeof e!="number")return!1;const r=it(e);return!isNaN(Number(r))}function J5(e){const r=it(e),s=_t(e,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}const Q5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Z5=(e,r,s)=>{let a;const n=Q5[e];return typeof n=="string"?a=n:r===1?a=n.one:a=n.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function ur(e){return(r={})=>{const s=r.width?String(r.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const eC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sC={date:ur({formats:eC,defaultWidth:"full"}),time:ur({formats:tC,defaultWidth:"full"}),dateTime:ur({formats:rC,defaultWidth:"full"})},aC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nC=(e,r,s,a)=>aC[e];function bt(e){return(r,s)=>{const a=s!=null&&s.context?String(s.context):"standalone";let n;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;n=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;n=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(r):r;return n[i]}}const iC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mC=(e,r)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},hC={ordinalNumber:mC,era:bt({values:iC,defaultWidth:"wide"}),quarter:bt({values:oC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bt({values:lC,defaultWidth:"wide"}),day:bt({values:cC,defaultWidth:"wide"}),dayPeriod:bt({values:dC,defaultWidth:"wide",formattingValues:uC,defaultFormattingWidth:"wide"})};function yt(e){return(r,s={})=>{const a=s.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=r.match(n);if(!i)return null;const o=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xC(l,x=>x.test(o)):fC(l,x=>x.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const m=r.slice(o.length);return{value:d,rest:m}}}function fC(e,r){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&r(e[s]))return s}function xC(e,r){for(let s=0;s<e.length;s++)if(r(e[s]))return s}function Kc(e){return(r,s={})=>{const a=r.match(e.matchPattern);if(!a)return null;const n=a[0],i=r.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=r.slice(n.length);return{value:o,rest:l}}}const gC=/^(\d+)(th|st|nd|rd)?/i,pC=/\d+/i,vC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bC={any:[/^b/i,/^(a|c)/i]},yC={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jC={any:[/1/i,/2/i,/3/i,/4/i]},wC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$C={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EC={ordinalNumber:Kc({matchPattern:gC,parsePattern:pC,valueCallback:e=>parseInt(e,10)}),era:yt({matchPatterns:vC,defaultMatchWidth:"wide",parsePatterns:bC,defaultParseWidth:"any"}),quarter:yt({matchPatterns:yC,defaultMatchWidth:"wide",parsePatterns:jC,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yt({matchPatterns:wC,defaultMatchWidth:"wide",parsePatterns:NC,defaultParseWidth:"any"}),day:yt({matchPatterns:SC,defaultMatchWidth:"wide",parsePatterns:kC,defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:CC,defaultMatchWidth:"any",parsePatterns:$C,defaultParseWidth:"any"})},DC={code:"en-US",formatDistance:Z5,formatLong:sC,formatRelative:nC,localize:hC,match:EC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function TC(e){const r=it(e);return Y5(r,J5(r))+1}function OC(e){const r=it(e),s=+Ws(r)-+V5(r);return Math.round(s/qc)+1}function Xc(e,r){var m,x,u,b;const s=it(e),a=s.getFullYear(),n=ha(),i=(r==null?void 0:r.firstWeekContainsDate)??((x=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(u=n.locale)==null?void 0:u.options)==null?void 0:b.firstWeekContainsDate)??1,o=_t(e,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=Ct(o,r),c=_t(e,0);c.setFullYear(a,0,i),c.setHours(0,0,0,0);const d=Ct(c,r);return s.getTime()>=l.getTime()?a+1:s.getTime()>=d.getTime()?a:a-1}function MC(e,r){var l,c,d,m;const s=ha(),a=(r==null?void 0:r.firstWeekContainsDate)??((c=(l=r==null?void 0:r.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(d=s.locale)==null?void 0:d.options)==null?void 0:m.firstWeekContainsDate)??1,n=Xc(e,r),i=_t(e,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Ct(i,r)}function _C(e,r){const s=it(e),a=+Ct(s,r)-+MC(s,r);return Math.round(a/qc)+1}function we(e,r){const s=e<0?"-":"",a=Math.abs(e).toString().padStart(r,"0");return s+a}const It={y(e,r){const s=e.getFullYear(),a=s>0?s:1-s;return we(r==="yy"?a%100:a,r.length)},M(e,r){const s=e.getMonth();return r==="M"?String(s+1):we(s+1,2)},d(e,r){return we(e.getDate(),r.length)},a(e,r){const s=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,r){return we(e.getHours()%12||12,r.length)},H(e,r){return we(e.getHours(),r.length)},m(e,r){return we(e.getMinutes(),r.length)},s(e,r){return we(e.getSeconds(),r.length)},S(e,r){const s=r.length,a=e.getMilliseconds(),n=Math.trunc(a*Math.pow(10,s-3));return we(n,r.length)}},lr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Uo={G:function(e,r,s){const a=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(e,r,s){if(r==="yo"){const a=e.getFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return It.y(e,r)},Y:function(e,r,s,a){const n=Xc(e,a),i=n>0?n:1-n;if(r==="YY"){const o=i%100;return we(o,2)}return r==="Yo"?s.ordinalNumber(i,{unit:"year"}):we(i,r.length)},R:function(e,r){const s=Yc(e);return we(s,r.length)},u:function(e,r){const s=e.getFullYear();return we(s,r.length)},Q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return we(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,r,s){const a=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return we(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,r,s){const a=e.getMonth();switch(r){case"M":case"MM":return It.M(e,r);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,r,s){const a=e.getMonth();switch(r){case"L":return String(a+1);case"LL":return we(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,r,s,a){const n=_C(e,a);return r==="wo"?s.ordinalNumber(n,{unit:"week"}):we(n,r.length)},I:function(e,r,s){const a=OC(e);return r==="Io"?s.ordinalNumber(a,{unit:"week"}):we(a,r.length)},d:function(e,r,s){return r==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):It.d(e,r)},D:function(e,r,s){const a=TC(e);return r==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):we(a,r.length)},E:function(e,r,s){const a=e.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,r,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return we(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(e,r,s,a){const n=e.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return we(i,r.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(e,r,s){const a=e.getDay(),n=a===0?7:a;switch(r){case"i":return String(n);case"ii":return we(n,r.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,r,s){const n=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,r,s){const a=e.getHours();let n;switch(a===12?n=lr.noon:a===0?n=lr.midnight:n=a/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,r,s){const a=e.getHours();let n;switch(a>=17?n=lr.evening:a>=12?n=lr.afternoon:a>=4?n=lr.morning:n=lr.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,r,s){if(r==="ho"){let a=e.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return It.h(e,r)},H:function(e,r,s){return r==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):It.H(e,r)},K:function(e,r,s){const a=e.getHours()%12;return r==="Ko"?s.ordinalNumber(a,{unit:"hour"}):we(a,r.length)},k:function(e,r,s){let a=e.getHours();return a===0&&(a=24),r==="ko"?s.ordinalNumber(a,{unit:"hour"}):we(a,r.length)},m:function(e,r,s){return r==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):It.m(e,r)},s:function(e,r,s){return r==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):It.s(e,r)},S:function(e,r){return It.S(e,r)},X:function(e,r,s){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Ho(a);case"XXXX":case"XX":return Yt(a);case"XXXXX":case"XXX":default:return Yt(a,":")}},x:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"x":return Ho(a);case"xxxx":case"xx":return Yt(a);case"xxxxx":case"xxx":default:return Yt(a,":")}},O:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Bo(a,":");case"OOOO":default:return"GMT"+Yt(a,":")}},z:function(e,r,s){const a=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Bo(a,":");case"zzzz":default:return"GMT"+Yt(a,":")}},t:function(e,r,s){const a=Math.trunc(e.getTime()/1e3);return we(a,r.length)},T:function(e,r,s){const a=e.getTime();return we(a,r.length)}};function Bo(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),i=a%60;return i===0?s+String(n):s+String(n)+r+we(i,2)}function Ho(e,r){return e%60===0?(e>0?"-":"+")+we(Math.abs(e)/60,2):Yt(e,r)}function Yt(e,r=""){const s=e>0?"-":"+",a=Math.abs(e),n=we(Math.trunc(a/60),2),i=we(a%60,2);return s+n+r+i}const zo=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Jc=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},PC=(e,r)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return zo(e,r);let i;switch(a){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",zo(a,r)).replace("{{time}}",Jc(n,r))},AC={p:Jc,P:PC},RC=/^D+$/,IC=/^Y+$/,LC=["D","DD","YY","YYYY"];function FC(e){return RC.test(e)}function WC(e){return IC.test(e)}function UC(e,r,s){const a=BC(e,r,s);if(console.warn(a),LC.includes(e))throw new RangeError(a)}function BC(e,r,s){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const HC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GC=/^'([^]*?)'?$/,qC=/''/g,YC=/[a-zA-Z]/;function Re(e,r,s){var m,x,u,b,g,h,j,y;const a=ha(),n=(s==null?void 0:s.locale)??a.locale??DC,i=(s==null?void 0:s.firstWeekContainsDate)??((x=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(u=a.locale)==null?void 0:u.options)==null?void 0:b.firstWeekContainsDate)??1,o=(s==null?void 0:s.weekStartsOn)??((h=(g=s==null?void 0:s.locale)==null?void 0:g.options)==null?void 0:h.weekStartsOn)??a.weekStartsOn??((y=(j=a.locale)==null?void 0:j.options)==null?void 0:y.weekStartsOn)??0,l=it(e);if(!X5(l))throw new RangeError("Invalid time value");let c=r.match(zC).map(f=>{const C=f[0];if(C==="p"||C==="P"){const p=AC[C];return p(f,n.formatLong)}return f}).join("").match(HC).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const C=f[0];if(C==="'")return{isToken:!1,value:VC(f)};if(Uo[C])return{isToken:!0,value:f};if(C.match(YC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:f}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return c.map(f=>{if(!f.isToken)return f.value;const C=f.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&WC(C)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&FC(C))&&UC(C,r,String(e));const p=Uo[C[0]];return p(l,C,n.localize,d)}).join("")}function VC(e){const r=e.match(GC);return r?r[1].replace(qC,"'"):e}function Vn(e){return it(e).getDay()}function Ja(e,r,s){const a=Ct(e,s),n=Ct(r,s);return+a==+n}function KC(e,r){return Ja(e,Yn(e),r)}function Go(e){return Vc(e,Yn(e))}function XC(e,r){return z5(e,-1)}function qo(e){return Vc(e,XC(Yn(e)))}function Ar(e,r){if(e.one!==void 0&&r===1)return e.one;const s=r%10,a=r%100;return s===1&&a!==11?e.singularNominative.replace("{{count}}",String(r)):s>=2&&s<=4&&(a<10||a>20)?e.singularGenitive.replace("{{count}}",String(r)):e.pluralGenitive.replace("{{count}}",String(r))}function Ye(e){return(r,s)=>s!=null&&s.addSuffix?s.comparison&&s.comparison>0?e.future?Ar(e.future,r):"через "+Ar(e.regular,r):e.past?Ar(e.past,r):Ar(e.regular,r)+" назад":Ar(e.regular,r)}const JC={lessThanXSeconds:Ye({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:Ye({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:Ye({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:Ye({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:Ye({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:Ye({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:Ye({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:Ye({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:Ye({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:Ye({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:Ye({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:Ye({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:Ye({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:Ye({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:Ye({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},QC=(e,r,s)=>JC[e](r,s),ZC={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},e3={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},t3={any:"{{date}}, {{time}}"},r3={date:ur({formats:ZC,defaultWidth:"full"}),time:ur({formats:e3,defaultWidth:"full"}),dateTime:ur({formats:t3,defaultWidth:"any"})},Kn=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function s3(e){const r=Kn[e];switch(e){case 0:return"'в прошлое "+r+" в' p";case 1:case 2:case 4:return"'в прошлый "+r+" в' p";case 3:case 5:case 6:return"'в прошлую "+r+" в' p"}}function Yo(e){const r=Kn[e];return e===2?"'во "+r+" в' p":"'в "+r+" в' p"}function a3(e){const r=Kn[e];switch(e){case 0:return"'в следующее "+r+" в' p";case 1:case 2:case 4:return"'в следующий "+r+" в' p";case 3:case 5:case 6:return"'в следующую "+r+" в' p"}}const n3={lastWeek:(e,r,s)=>{const a=e.getDay();return Ja(e,r,s)?Yo(a):s3(a)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,r,s)=>{const a=e.getDay();return Ja(e,r,s)?Yo(a):a3(a)},other:"P"},i3=(e,r,s,a)=>{const n=n3[e];return typeof n=="function"?n(r,s,a):n},o3={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},l3={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},c3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},d3={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},u3={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},m3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},h3={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},f3=(e,r)=>{const s=Number(e),a=r==null?void 0:r.unit;let n;return a==="date"?n="-е":a==="week"||a==="minute"||a==="second"?n="-я":n="-й",s+n},x3={ordinalNumber:f3,era:bt({values:o3,defaultWidth:"wide"}),quarter:bt({values:l3,defaultWidth:"wide",argumentCallback:e=>e-1}),month:bt({values:c3,defaultWidth:"wide",formattingValues:d3,defaultFormattingWidth:"wide"}),day:bt({values:u3,defaultWidth:"wide"}),dayPeriod:bt({values:m3,defaultWidth:"any",formattingValues:h3,defaultFormattingWidth:"wide"})},g3=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,p3=/\d+/i,v3={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},b3={any:[/^д/i,/^н/i]},y3={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},j3={any:[/1/i,/2/i,/3/i,/4/i]},w3={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},N3={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},S3={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},k3={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},C3={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},$3={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},E3={ordinalNumber:Kc({matchPattern:g3,parsePattern:p3,valueCallback:e=>parseInt(e,10)}),era:yt({matchPatterns:v3,defaultMatchWidth:"wide",parsePatterns:b3,defaultParseWidth:"any"}),quarter:yt({matchPatterns:y3,defaultMatchWidth:"wide",parsePatterns:j3,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yt({matchPatterns:w3,defaultMatchWidth:"wide",parsePatterns:N3,defaultParseWidth:"any"}),day:yt({matchPatterns:S3,defaultMatchWidth:"wide",parsePatterns:k3,defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:C3,defaultMatchWidth:"wide",parsePatterns:$3,defaultParseWidth:"any"})},ct={code:"ru",formatDistance:QC,formatLong:r3,formatRelative:i3,localize:x3,match:E3,options:{weekStartsOn:1,firstWeekContainsDate:1}},Xn=({isOpen:e,onClose:r,onConfirm:s,slot:a,teacher:n,student:i})=>{var g;const[o,l]=N.useState(""),[c,d]=N.useState(!1),m=async()=>{d(!0);try{await s(o),r()}catch{}finally{d(!1)}},x=h=>{switch(h){case"online":return t.jsx(Ie,{className:"h-4 w-4"});case"offline":return t.jsx(jt,{className:"h-4 w-4"});case"mini-group":return t.jsx(sn,{className:"h-4 w-4"});default:return t.jsx(Ie,{className:"h-4 w-4"})}},u=h=>{switch(h){case"online":return"Онлайн";case"offline":return"Очно";case"mini-group":return"Мини-группа";default:return h}},b=h=>{switch(h){case"regular":return"Обычный урок";case"consultation":return"Консультация";case"exam_prep":return"Подготовка к экзамену";case"homework_help":return"Помощь с домашним заданием";default:return h}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Подтверждение бронирования"}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Qe,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Преподаватель"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[n!=null&&n.avatar?t.jsx("img",{src:n.avatar,alt:n.name,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(be,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:(n==null?void 0:n.name)||"Преподаватель"}),t.jsx("p",{className:"text-sm text-gray-600",children:a==null?void 0:a.subject}),((g=n==null?void 0:n.profile)==null?void 0:g.rating)&&t.jsxs("div",{className:"flex items-center mt-1",children:[t.jsx("span",{className:"text-yellow-500",children:"★"}),t.jsx("span",{className:"text-sm text-gray-600 ml-1",children:n.profile.rating})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Детали урока"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(He,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Дата: ",new Date(a==null?void 0:a.date).toLocaleDateString("ru-RU")]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(Wt,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Время: ",a==null?void 0:a.startTime," - ",a==null?void 0:a.endTime]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(Ie,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Предмет: ",a==null?void 0:a.subject]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[x(a==null?void 0:a.format),t.jsxs("span",{className:"text-sm",children:["Формат: ",u(a==null?void 0:a.format)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(Ad,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Тип: ",b(a==null?void 0:a.lessonType)]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[t.jsx(rl,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-sm",children:["Стоимость: ",a==null?void 0:a.price," ₽"]})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Студент"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[i!=null&&i.avatar?t.jsx("img",{src:i.avatar,alt:i.name,className:"w-12 h-12 rounded-full object-cover"}):t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(be,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:i==null?void 0:i.name}),t.jsx("p",{className:"text-sm text-gray-600",children:"Студент"})]})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Примечание к уроку"}),t.jsx("textarea",{value:o,onChange:h=>l(h.target.value),placeholder:"Опишите ваши цели, задачи или особые пожелания к уроку...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4}),t.jsx("p",{className:"text-sm text-gray-500",children:"Это поможет преподавателю лучше подготовиться к уроку"})]})]}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Отмена"}),t.jsx("button",{onClick:m,disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Бронирование..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать урок"})]})})]})]})}):null},Qc=({teacher:e,onClose:r,onBookLesson:s,onMessage:a})=>{var ge;const{user:n}=ze(),{timeSlots:i,bookLesson:o,posts:l,createPost:c,addReaction:d,addComment:m,sharePost:x,bookmarkPost:u,editPost:b,deletePost:g}=rt(),[h,j]=N.useState(!1),[y,f]=N.useState(!1),[C,p]=N.useState(!1),[k,E]=N.useState(!1),[L,M]=N.useState(!1),[B,G]=N.useState(null),[A,K]=N.useState("about"),[Y,ae]=N.useState(null),[ie,R]=N.useState({}),D=i.filter(ee=>ee.teacherId===e.id),U=D.filter(ee=>!ee.isBooked),V=D.filter(ee=>ee.isBooked),T=e.profile,me=l.filter(ee=>ee.userId===e.id),ce=ee=>{switch(ee){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ee}},fe=ee=>{switch(ee){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ee}},xe=ee=>{G(ee),M(!0)},De=async ee=>{n&&B&&(o(B.id,n.id,n.name,ee),M(!1),G(null))},Q=(ee,pe)=>new Date(`${ee}T${pe}`).toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return t.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Za,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>f(!y),className:`p-2 rounded-full transition-colors ${y?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Hs,{className:`w-5 h-5 ${y?"fill-current":""}`})}),t.jsx("button",{onClick:()=>j(!h),className:`p-2 rounded-full transition-colors ${h?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(ut,{className:`w-5 h-5 ${h?"fill-current":""}`})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ft,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),t.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{className:"text-white flex-1 mr-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(T==null?void 0:T.name)||e.name||"Репетитор"}),t.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[(T==null?void 0:T.experience)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Lt,{className:"h-4 w-4 text-yellow-300"}),t.jsx("span",{className:"font-semibold text-xs",children:ce(T.experience)})]}),(T==null?void 0:T.rating)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(wt,{className:"h-4 w-4 text-yellow-300 fill-current"}),t.jsx("span",{className:"font-semibold text-xs",children:T.rating})]}),(T==null?void 0:T.city)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(jt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-semibold text-xs",children:T.city})]})]})]}),t.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:(T==null?void 0:T.lessonsCount)||0}),t.jsx("div",{className:"text-sm opacity-80",children:"уроков"})]})]})})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[t.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[t.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),T!=null&&T.avatar&&T.avatar.trim()!==""&&T.avatar!=="undefined"&&T.avatar!=="null"?t.jsx("img",{src:T.avatar,alt:(T==null?void 0:T.name)||e.name||"Репетитор",className:"w-36 h-36 object-cover rounded-full",onError:ee=>{const pe=ee.target;pe.style.display="none";const ve=pe.nextElementSibling;ve&&ve.classList.remove("hidden")},onLoad:ee=>{const ve=ee.target.nextElementSibling;ve&&ve.classList.add("hidden")}}):null,t.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${T!=null&&T.avatar&&T.avatar.trim()!==""&&T.avatar!=="undefined"&&T.avatar!=="null"?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx(be,{className:"h-16 w-16 text-white mb-2"}),t.jsx("div",{className:"text-white text-sm font-semibold",children:((T==null?void 0:T.name)||e.name||"Репетитор").charAt(0).toUpperCase()})]})})]}),t.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>j(!h),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${h?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:t.jsx(ut,{className:`w-5 h-5 ${h?"fill-current":""}`})}),t.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:t.jsx(Ft,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[t.jsxs("button",{onClick:()=>s(e.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Ie,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),a&&t.jsxs("button",{onClick:()=>a(e.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Me,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),t.jsxs("button",{onClick:()=>E(!k),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(He,{className:"h-6 w-6"}),t.jsxs("span",{className:"text-lg",children:["Слоты (",U.length,")"]})]}),t.jsxs("button",{onClick:()=>p(!C),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(mr,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]})]})]}),C&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.phone&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(hr,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:e.phone})]}),e.email&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(tn,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:e.email})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(T==null?void 0:T.lessonsCount)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Проведено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:((ge=T==null?void 0:T.students)==null?void 0:ge.length)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Учеников"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(T==null?void 0:T.rating)||0}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Рейтинг"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:U.length}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Свободных слотов"})]})]}),me.length>0&&t.jsxs("div",{className:"mb-8 mt-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[t.jsx(Jt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Записи ",(T==null?void 0:T.name)||e.name,t.jsx("span",{className:"ml-2 bg-blue-100 text-blue-800 py-0.5 px-2 rounded-full text-sm",children:me.length})]})}),t.jsxs("div",{className:"space-y-4",children:[me.slice(0,3).map(ee=>t.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-semibold text-sm",children:((T==null?void 0:T.name)||e.name).charAt(0).toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:(T==null?void 0:T.name)||e.name}),t.jsx("span",{className:"text-gray-500 text-sm",children:new Date(ee.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),t.jsx("div",{className:"text-gray-700 mb-3 whitespace-pre-line",children:ee.text.length>200?`${ee.text.substring(0,200)}...`:ee.text}),ee.tags&&ee.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[ee.tags.slice(0,3).map((pe,ve)=>t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs font-medium",children:["#",pe]},ve)),ee.tags.length>3&&t.jsxs("span",{className:"text-gray-500 text-xs",children:["+",ee.tags.length-3," еще"]})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ut,{className:"w-4 h-4"}),t.jsx("span",{children:ee.likes||ee.reactions.length})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Me,{className:"w-4 h-4"}),t.jsx("span",{children:ee.comments.length})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(mr,{className:"w-4 h-4"}),t.jsx("span",{children:ee.views||0})]})]})]})]})},ee.id)),me.length>3&&t.jsx("div",{className:"text-center",children:t.jsxs("button",{className:"text-blue-600 hover:text-blue-800 font-medium",children:["Показать все записи (",me.length,")"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"about",label:"О преподавателе",count:null},{id:"slots",label:"Расписание",count:U.length},{id:"reviews",label:"Отзывы",count:0}].map(ee=>t.jsxs("button",{onClick:()=>K(ee.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A===ee.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[ee.label,ee.count!==null&&t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:ee.count})]},ee.id))})}),t.jsxs("div",{className:"min-h-[400px]",children:[A==="about"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Основная информация"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(be,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Имя"}),t.jsx("div",{className:"font-semibold text-gray-900",children:(T==null?void 0:T.name)||e.name||"Репетитор"})]})]}),(T==null?void 0:T.experience)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Lt,{className:"w-5 h-5 text-yellow-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Опыт"}),t.jsx("div",{className:"font-semibold text-gray-900",children:ce(T.experience)})]})]}),(T==null?void 0:T.experienceYears)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(cl,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Лет преподавания"}),t.jsx("div",{className:"font-semibold text-gray-900",children:T.experienceYears})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[(T==null?void 0:T.rating)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(wt,{className:"w-5 h-5 text-yellow-500 fill-current"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Рейтинг"}),t.jsxs("div",{className:"font-semibold text-gray-900",children:[T.rating,"/5"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Ie,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Проведено уроков"}),t.jsx("div",{className:"font-semibold text-gray-900",children:(T==null?void 0:T.lessonsCount)||0})]})]}),(T==null?void 0:T.hourlyRate)&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-green-600 font-bold text-lg",children:"₽"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Стоимость урока"}),t.jsxs("div",{className:"font-semibold text-gray-900",children:[T.hourlyRate," ₽/час"]})]})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(T==null?void 0:T.subjects)&&T.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-green-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Предметы"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:T.subjects.map((ee,pe)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-green-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-green-200/50 shadow-sm",children:ee},pe))})]}),(T==null?void 0:T.grades)&&T.grades.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-pink-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Классы"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:T.grades.map((ee,pe)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-purple-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-purple-200/50 shadow-sm",children:ee},pe))})]})]}),(T==null?void 0:T.education)&&t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-orange-500 to-red-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Образование"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[T.education.university&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"🎓"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Университет"}),t.jsx("div",{className:"font-semibold text-gray-900",children:T.education.university})]})]}),T.education.degree&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📜"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Степень"}),t.jsx("div",{className:"font-semibold text-gray-900",children:T.education.degree})]})]}),T.education.graduationYear&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-5 h-5 text-orange-600 font-bold text-lg",children:"📅"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Год выпуска"}),t.jsx("div",{className:"font-semibold text-gray-900",children:T.education.graduationYear})]})]})]})]}),(T==null?void 0:T.bio)&&t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-indigo-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"О преподавателе"]}),t.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-4 border border-indigo-200/50",children:t.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line",children:T.bio})})]}),(T==null?void 0:T.formats)&&T.formats.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border border-teal-200 rounded-xl p-6 shadow-sm",children:[t.jsxs("h3",{className:"text-lg font-bold text-teal-900 mb-4 flex items-center",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-teal-500 to-cyan-600 rounded flex items-center justify-center mr-3",children:t.jsx("div",{className:"w-3 h-3 bg-white rounded-sm"})}),"Форматы обучения"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:T.formats.map((ee,pe)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-teal-800 px-3 py-1.5 rounded-lg text-sm font-medium border border-teal-200/50 shadow-sm",children:fe(ee)},pe))})]})]}),A==="slots"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Доступные слоты"}),U.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(ee=>t.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ee.subject}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Wt,{className:"h-4 w-4"}),t.jsx("span",{children:Q(ee.date,ee.startTime)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(jt,{className:"h-4 w-4"}),t.jsx("span",{children:fe(ee.format)})]})]}),t.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-3",children:[ee.price," ₽"]})]})}),t.jsxs("button",{onClick:()=>xe(ee),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Ie,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать"})]})]},ee.id))}):t.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8 text-center",children:[t.jsx(He,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"Нет доступных слотов"}),t.jsx("p",{className:"text-gray-500",children:"Попробуйте позже или свяжитесь с преподавателем"})]})]}),V.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Забронированные уроки"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(ee=>t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:ee.subject}),t.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Wt,{className:"h-4 w-4"}),t.jsx("span",{children:Q(ee.date,ee.startTime)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(jt,{className:"h-4 w-4"}),t.jsx("span",{children:fe(ee.format)})]})]}),t.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-3",children:[ee.price," ₽"]})]})}),t.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-xl text-sm font-medium text-center",children:"Забронировано"})]},ee.id))})]})]}),A==="reviews"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(wt,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),t.jsx("p",{className:"text-gray-500",children:"Будьте первым, кто оставит отзыв о преподавателе"})]})]})]})]}),L&&B&&t.jsx(Xn,{isOpen:L,slot:B,onClose:()=>M(!1),onConfirm:De,teacher:e,student:n})]})},Vo="https://tutoring-platform-1756666331-zjfl.onrender.com",D3=({teacher:e,onClose:r,onBookLesson:s,onMessage:a})=>{var K,Y,ae,ie;const{user:n}=ze(),{timeSlots:i,posts:o,lessons:l,refreshUsers:c}=rt(),[d,m]=N.useState(!1),[x,u]=N.useState(!1),[b,g]=N.useState("about"),[h,j]=N.useState(!1),y=async()=>{var R,D;j(!0);try{const U=await fetch(`${Vo}/api/users/${e.id}`);if(U.ok){const V=await U.json();console.log("Fresh teacher data from refresh button:",V);const me=JSON.parse(localStorage.getItem("allUsers")||"[]").map(fe=>fe.id===V.id?V:fe);localStorage.setItem("allUsers",JSON.stringify(me)),c();const ce={...e,name:V.name||e.name,email:V.email||e.email,avatar:((R=V.profile)==null?void 0:R.avatar)||V.avatar||e.avatar,profile:{...e.profile,...V.profile,avatar:((D=V.profile)==null?void 0:D.avatar)||V.avatar||e.avatar,name:V.name||e.name,email:V.email||e.email}};console.log("Updated teacher data in modal:",ce)}else console.warn("Failed to refresh teacher data:",U.status)}catch(U){console.error("Error refreshing teacher data:",U)}finally{j(!1)}},f=e.profile;console.log("Teacher in modal:",e),console.log("Profile in modal:",f),N.useEffect(()=>{(async()=>{var D,U;try{const V=await fetch(`${Vo}/api/users/${e.id}`);if(V.ok){const T=await V.json();console.log("Fresh teacher data in modal:",T);const ce=JSON.parse(localStorage.getItem("allUsers")||"[]").map(xe=>xe.id===T.id?T:xe);localStorage.setItem("allUsers",JSON.stringify(ce)),c();const fe={...e,name:T.name||e.name,email:T.email||e.email,avatar:((D=T.profile)==null?void 0:D.avatar)||T.avatar||e.avatar,profile:{...e.profile,...T.profile,avatar:((U=T.profile)==null?void 0:U.avatar)||T.avatar||e.avatar,name:T.name||e.name,email:T.email||e.email}};console.log("Updated teacher data in modal useEffect:",fe)}else console.warn("Failed to refresh teacher data in modal:",V.status)}catch(V){console.error("Error refreshing teacher data in modal:",V)}})()},[e.id]);const C=i.filter(R=>R.teacherId===e.id),p=C.filter(R=>!R.isBooked),k=o.filter(R=>R.userId===e.id),L=l.filter(R=>R.teacherId===e.id).filter(R=>R.status==="completed");console.log("Teacher ID:",e.id),console.log("All timeSlots:",i),console.log("Teacher slots:",C),console.log("Available slots:",p);const M=R=>{switch(R){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return R}},B=R=>{switch(R){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return R}},G=R=>{const D=new Date(R),V=Math.floor((new Date().getTime()-D.getTime())/(1e3*60*60));return V<1?"только что":V<24?`${V}ч назад`:V<48?"вчера":D.toLocaleDateString("ru-RU")},A=R=>new Date(R).toLocaleDateString("ru-RU",{weekday:"short",month:"short",day:"numeric"});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-y-auto relative",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Qe,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>u(!x),className:`p-2 rounded-full transition-colors ${x?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Hs,{className:`w-5 h-5 ${x?"fill-current":""}`})}),t.jsx("button",{onClick:()=>m(!d),className:`p-2 rounded-full transition-colors ${d?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(ut,{className:`w-5 h-5 ${d?"fill-current":""}`})}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ft,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[t.jsx("div",{className:"relative",children:t.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative",children:[t.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full shadow-sm"}),(()=>{const R=(f==null?void 0:f.avatar)||e.avatar;return R&&R.trim()!==""&&R!=="undefined"&&R!=="null"?t.jsx("img",{src:R,alt:e.name,className:"w-24 h-24 object-cover rounded-full",onError:U=>{const V=U.target;V.style.display="none";const T=V.nextElementSibling;T&&T.classList.remove("hidden")},onLoad:U=>{const T=U.target.nextElementSibling;T&&T.classList.add("hidden")}}):null})(),t.jsx("div",{className:`w-24 h-24 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const R=(f==null?void 0:f.avatar)||e.avatar;return R&&R.trim()!==""&&R!=="undefined"&&R!=="null"?"hidden":""})()}`,children:t.jsx(be,{className:"h-12 w-12 text-white"})})]})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.name}),t.jsxs("p",{className:"text-gray-500",children:["@",e.id]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:y,disabled:h,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors disabled:opacity-50",title:"Обновить данные",children:t.jsx(_a,{className:`w-5 h-5 ${h?"animate-spin":""}`})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ft,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(f==null?void 0:f.rating)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(wt,{className:"w-4 h-4 text-yellow-400 fill-current"}),t.jsx("span",{children:f.rating})]}),(f==null?void 0:f.lessonsCount)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ie,{className:"w-4 h-4"}),t.jsxs("span",{children:[f.lessonsCount," уроков"]})]}),(f==null?void 0:f.experienceYears)&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Lt,{className:"w-4 h-4"}),t.jsxs("span",{children:[f.experienceYears," лет опыта"]})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900 mb-3",children:"Статистика"}),t.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[t.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-blue-600 mb-1",children:L.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Проведено уроков"})]}),t.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-green-600 mb-1",children:p.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Свободных слотов"})]}),t.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-purple-600 mb-1",children:k.length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Записей"})]}),t.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[t.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:(f==null?void 0:f.reviewsCount)||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Отзывов"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>s(e.id),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[t.jsx(Ie,{className:"w-5 h-5"}),t.jsx("span",{children:"Записаться на урок"})]}),t.jsxs("button",{onClick:()=>a(e.id),className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center space-x-2",children:[t.jsx(Me,{className:"w-5 h-5"}),t.jsx("span",{children:"Написать сообщение"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(be,{className:"w-4 h-4 mr-2"}),"О преподавателе"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Предметы:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((K=f==null?void 0:f.subjects)==null?void 0:K.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:f.subjects.map((R,D)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:R},D))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(ci,{className:"w-3 h-3 mr-1"}),"Классы:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((Y=f==null?void 0:f.grades)==null?void 0:Y.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:f.grades.map((R,D)=>t.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded-full text-xs font-medium",children:R},D))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(ol,{className:"w-3 h-3 mr-1"}),"Цели обучения:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:((ae=f==null?void 0:f.goals)==null?void 0:ae.length)>0?t.jsx("div",{className:"flex flex-wrap gap-1",children:f.goals.map((R,D)=>t.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full text-xs font-medium",children:R},D))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Опыт:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.experience?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full text-xs font-medium",children:M(f.experience)}),f.experienceYears&&t.jsxs("span",{className:"text-gray-600 text-xs",children:["(",f.experienceYears," лет)"]})]}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(jt,{className:"w-3 h-3 mr-1"}),"Город:"]}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.city?t.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-0.5 rounded-full text-xs font-medium",children:f.city}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]}),t.jsxs("div",{children:[t.jsxs("span",{className:"text-xs font-semibold text-gray-500 flex items-center",children:[t.jsx(Td,{className:"w-3 h-3 mr-1"}),"Форматы обучения:"]}),t.jsx("div",{className:"text-base text-gray-900 mt-2",children:((ie=f==null?void 0:f.formats)==null?void 0:ie.length)>0?t.jsx("div",{className:"flex flex-wrap gap-2",children:f.formats.map((R,D)=>t.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium",children:B(R)},D))}):t.jsx("span",{className:"text-gray-500",children:"Не указано"})})]})]})]})]}),(f==null?void 0:f.education)&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(ci,{className:"w-4 h-4 mr-2"}),"Образование"]}),t.jsxs("div",{className:"space-y-2",children:[f.education.university&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Университет:"}),t.jsx("div",{className:"text-sm text-gray-900",children:f.education.university})]}),f.education.degree&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Специальность:"}),t.jsx("div",{className:"text-sm text-gray-900",children:f.education.degree})]}),f.education.graduationYear&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Год выпуска:"}),t.jsx("div",{className:"text-sm text-gray-900",children:f.education.graduationYear})]}),f.education.courses&&f.education.courses.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Курсы:"}),t.jsx("div",{className:"space-y-1 mt-1",children:f.education.courses.map((R,D)=>t.jsxs("div",{className:"text-xs text-gray-700",children:["• ",R.name," (",R.institution,", ",R.year,")"]},D))})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(rl,{className:"w-4 h-4 mr-2"}),"Стоимость и услуги"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Базовая стоимость:"}),t.jsx("div",{className:"text-xl font-bold text-blue-600 mt-1",children:f!=null&&f.hourlyRate?`${f.hourlyRate} ₽/час`:"Не указана"})]}),(f==null?void 0:f.durations)&&f.durations.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Длительности занятий:"}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:f.durations.map((R,D)=>t.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:[R," мин"]},D))})]}),(f==null?void 0:f.lessonTypes)&&f.lessonTypes.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Типы уроков:"}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:f.lessonTypes.map((R,D)=>t.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded-lg text-xs font-medium",children:R},D))})]})]}),t.jsxs("div",{className:"space-y-3",children:[(f==null?void 0:f.rating)&&t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Рейтинг:"}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(R=>t.jsx(wt,{className:`w-4 h-4 ${R<=(f.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},R))}),t.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[f.rating,"/5"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Автоподбор:"}),t.jsx("div",{className:"text-sm text-gray-900 mt-1",children:f!=null&&f.overbookingEnabled?t.jsx("span",{className:"text-green-600 font-medium",children:"✓ Доступен"}):t.jsx("span",{className:"text-gray-500",children:"Недоступен"})})]})]})]}),t.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:t.jsx("p",{className:"text-xs text-blue-700",children:"💡 Стоимость может варьироваться в зависимости от формата, длительности занятия и сложности материала"})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-3 flex items-center",children:[t.jsx(He,{className:"w-4 h-4 mr-2"}),"Доступные слоты (",p.length,")"]}),p.length>0?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Сводка по ценам:"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Минимальная цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.min(...p.map(R=>R.price))," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Максимальная цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.max(...p.map(R=>R.price))," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Средняя цена:"}),t.jsxs("div",{className:"font-semibold text-green-600",children:[Math.round(p.reduce((R,D)=>R+D.price,0)/p.length)," ₽"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Всего слотов:"}),t.jsx("div",{className:"font-semibold text-blue-600",children:p.length})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.slice(0,6).map(R=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ie,{className:"w-3 h-3 text-blue-600"}),t.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:R.subject})]}),t.jsxs("span",{className:"text-base font-bold text-green-600",children:[R.price," ₽"]})]}),t.jsxs("div",{className:"space-y-1 mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(Wt,{className:"w-3 h-3"}),t.jsxs("span",{children:[A(R.date)," • ",R.startTime,"-",R.endTime]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(jt,{className:"w-3 h-3"}),t.jsxs("span",{children:[B(R.format)," • ",R.duration," мин"]})]}),R.experience&&t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[t.jsx(Lt,{className:"w-3 h-3"}),t.jsxs("span",{children:["Опыт: ",M(R.experience)]})]})]}),t.jsxs("button",{onClick:()=>s(e.id),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 text-sm font-semibold",children:["Записаться за ",R.price," ₽"]})]},R.id))}),p.length>6&&t.jsx("div",{className:"text-center pt-4",children:t.jsxs("p",{className:"text-gray-600 text-sm",children:["И еще ",p.length-6," доступных слотов"]})})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(He,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500 mb-2",children:"Нет доступных слотов"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Следите за обновлениями расписания"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("h3",{className:"text-base font-bold text-gray-900 flex items-center",children:[t.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Записи преподавателя (",k.length,")"]})}),k.length>0?t.jsxs("div",{className:"space-y-3",children:[k.slice(0,3).map(R=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center flex-shrink-0",children:t.jsx(be,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:R.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:G(R.date)})]}),t.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed text-sm",children:R.text}),R.tags&&R.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:R.tags.map((D,U)=>t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs font-medium",children:D},U))}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[t.jsx(ll,{className:"w-3 h-3"}),t.jsx("span",{children:R.reactions.length})]}),t.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:[t.jsx(Me,{className:"w-3 h-3"}),t.jsx("span",{children:R.comments.length})]}),t.jsx("button",{className:"flex items-center space-x-1 hover:text-blue-600 transition-colors",children:t.jsx(Ft,{className:"w-3 h-3"})})]})]})]})},R.id)),k.length>3&&t.jsx("div",{className:"text-center pt-3",children:t.jsxs("p",{className:"text-gray-600 text-xs",children:["И еще ",k.length-3," записей"]})})]}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx(Jt,{className:"w-6 h-6 text-gray-400"})}),t.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:"У преподавателя пока нет записей"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Записи появятся здесь, когда преподаватель начнет публиковать контент"})]})]})]})]})})},T3={ru:ct},O3=qn({format:Re,startOfWeek:Ct,getDay:Vn,locales:T3}),Zc=({onClose:e})=>{const{timeSlots:r,bookLesson:s}=rt(),{user:a}=ze(),[n,i]=N.useState(null),[o,l]=N.useState(!1),[c,d]=N.useState(!1),[m,x]=N.useState(null),b=r.filter(p=>!p.isBooked).map(p=>({id:p.id,title:`${p.teacherName} - ${p.subject}`,start:new Date(`${p.date}T${p.startTime}`),end:new Date(`${p.date}T${p.endTime}`),slot:p,teacherName:p.teacherName,subject:p.subject,price:p.price,format:p.format,experience:p.experience,rating:p.rating,city:p.city,teacherAvatar:p.teacherAvatar})),g=N.useCallback(p=>{let k={backgroundColor:"#3B82F6",borderRadius:"6px",opacity:.95,color:"white",border:"0px",display:"block",padding:"3px 6px",fontSize:"11px",fontWeight:"500",margin:"1px 0",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",transition:"all 0.2s ease"};return p.format==="offline"?k.backgroundColor="#10B981":p.format==="mini-group"&&(k.backgroundColor="#8B5CF6"),{style:k}},[]),h=N.useCallback(p=>{i(p),l(!0)},[]),j=p=>{if(!a){alert("Пожалуйста, войдите в систему для бронирования");return}x(p),d(!0),l(!1)},y=async p=>{if(a&&m)try{await s(m.id,a.id,a.name,p),d(!1),x(null),window.location.reload()}catch{alert("Произошла ошибка при бронировании. Попробуйте еще раз.")}},f=p=>{switch(p){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return p}},C=p=>{switch(p){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return p}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden relative",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 p-6 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Календарь свободных слотов"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Выберите удобное время для занятия с преподавателем"})]}),t.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Qe,{className:"w-6 h-6 text-gray-600"})})]})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:t.jsx(Gn,{localizer:O3,events:b,startAccessor:"start",endAccessor:"end",style:{height:600},eventPropGetter:g,onSelectEvent:h,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет свободных слотов в выбранном диапазоне",showMore:p=>`+${p} еще`}})})}),o&&n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",onClick:p=>{p.target===p.currentTarget&&l(!1)},children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Детали слота"}),t.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Qe,{className:"w-5 h-5 text-gray-600"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden",children:n.teacherAvatar?t.jsx("img",{src:n.teacherAvatar,alt:n.teacherName,className:"w-12 h-12 object-cover rounded-full"}):t.jsx(be,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:n.teacherName}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.rating&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(wt,{className:"h-3 w-3 text-yellow-400 fill-current"}),t.jsx("span",{children:n.rating})]}),n.experience&&t.jsx("span",{className:"text-blue-600",children:f(n.experience)})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ie,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"font-medium",children:n.subject})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Wt,{className:"h-4 w-4 text-gray-500"}),t.jsxs("span",{className:"text-gray-700",children:[Re(n.start,"dd MMMM yyyy, HH:mm",{locale:ct})," - ",Re(n.end,"HH:mm",{locale:ct})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(jt,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-gray-700",children:C(n.format)})]}),t.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[n.price," ₽"]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsxs("button",{onClick:()=>j(n.slot),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Ie,{className:"h-4 w-4"}),t.jsx("span",{children:"Забронировать"})]}),t.jsx("button",{onClick:()=>l(!1),className:"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})]})}),c&&m&&t.jsx(Xn,{slot:m,onClose:()=>d(!1),onConfirm:y})]})})},M3=({title:e,description:r,actionPrimary:s,actionSecondary:a,icon:n})=>t.jsx("div",{className:"col-span-full text-center py-14 card-gradient",children:t.jsxs("div",{className:"flex flex-col items-center",children:[n&&t.jsx("div",{className:"mb-3 text-blue-500",children:n}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),r&&t.jsx("p",{className:"text-gray-500 max-w-xl mx-auto mb-5",children:r}),t.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[s&&t.jsx("button",{type:"button",onClick:s.onClick,className:`btn-primary px-5 py-2 rounded-lg ${s.variant==="secondary"?"btn-secondary":""}`,"aria-label":s.label,children:s.label}),a&&t.jsx("button",{type:"button",onClick:a.onClick,className:`btn-secondary px-5 py-2 rounded-lg ${a.variant==="primary"?"btn-primary":""}`,"aria-label":a.label,children:a.label})]})]})}),Ta=({setActiveTab:e})=>{var ei;const{getFilteredSlots:r,bookLesson:s,timeSlots:a,isConnected:n,allUsers:i,refreshUsers:o,refreshAllData:l,forceSyncData:c,getOrCreateChat:d,sendMessage:m}=rt(),{user:x}=ze(),[u,b]=N.useState({}),[g,h]=N.useState(!1),[j,y]=N.useState([]),[f,C]=N.useState(!1),[p,k]=N.useState(!1),[E,L]=N.useState({grade:"",subject:"",goals:[],experience:"",duration:60,format:"online",city:"",date:"",startTime:"",comment:""}),[M,B]=N.useState(!1),[G,A]=N.useState(null),[K,Y]=N.useState(!1),[ae,ie]=N.useState(!1),[R,D]=N.useState(null),[U,V]=N.useState(()=>{const S=new Date,H=S.getDay(),Z=S.getDate()-H+(H===0?-6:1);return new Date(S.setDate(Z))}),[T,me]=N.useState(null),[ce,fe]=N.useState(null),[xe,De]=N.useState(""),Q=["Математика","Русский язык","Английский язык"],ge=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],ee=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],pe=["beginner","experienced","professional"],ve=["online","offline","mini-group"],Ae=[45,60],Le=qn({format:Re,startOfWeek:Ct,getDay:Vn,locales:{ru:ct}}),[Fe,q]=N.useState([]),ye=async()=>{try{await c();const S=await fetch(`${at}/api/teachers`);if(S.ok){const Z=S.headers.get("content-type");if(Z&&Z.includes("application/json")){const le=await S.json();console.log("Teachers loaded from server:",le),q(Array.isArray(le)?le:[])}else console.warn("Server returned non-JSON response for teachers"),q([])}else console.warn("Failed to load teachers from server:",S.status),q([]);const H=await fetch(`${at}/api/users`);if(H.ok){const Z=H.headers.get("content-type");if(Z&&Z.includes("application/json")){const le=await H.json();console.log("Users loaded from server:",le);const Ce=le.filter(se=>se.role==="teacher");console.log("Teachers from users API:",Ce),o()}else console.warn("Server returned non-JSON response for users")}else console.warn("Failed to load users from server:",H.status)}catch(S){console.error("Error loading teachers/users from server:",S),q([])}};N.useEffect(()=>{ye()},[c,o]);const de=async()=>{C(!0);try{await c(),await ye(),console.log("Force sync completed successfully")}catch(S){console.error("Error during force sync:",S)}finally{C(!1)}},O=_.useRef(null);_.useEffect(()=>{O.current||(O.current=Xo(pd),O.current.on("slotCreated",S=>{setTimeout(()=>{z()},100)}),O.current.on("userRegistered",S=>{setTimeout(()=>{l(),z()},100)}),O.current.on("profileUpdated",S=>{console.log("Profile updated via WebSocket:",S),setTimeout(()=>{l(),z()},100)}))},[]);const z=()=>{const S=a.filter(H=>{if(H.isBooked)return!1;const Z=new Date(H.date),le=new Date;return le.setHours(0,0,0,0),!(Z<le)});return y(S),S},W=()=>{C(!0);try{let S=a.filter(H=>{if(H.isBooked)return!1;const Z=new Date(H.date),le=new Date;return le.setHours(0,0,0,0),!(Z<le)});if(u.grade&&u.grade!==""&&(S=S.filter(H=>H.grades&&H.grades.includes(u.grade))),u.subject&&u.subject!==""&&(S=S.filter(H=>H.subject===u.subject)),u.experience&&u.experience!==""&&(S=S.filter(H=>H.experience===u.experience)),u.format&&u.format!==""&&(S=S.filter(H=>H.format===u.format)),u.duration&&u.duration>0&&(S=S.filter(H=>H.duration===u.duration)),u.minRating&&u.minRating>0&&(S=S.filter(H=>(H.rating||0)>=u.minRating)),u.goals&&u.goals.length>0&&(S=S.filter(H=>H.goals&&u.goals.some(Z=>H.goals.includes(Z)))),T){const H=Re(T,"yyyy-MM-dd");S=S.filter(Z=>Z.date===H)}ce&&(S=S.filter(H=>{const Z=parseInt(H.startTime.split(":")[0]),le=parseInt(ce.start.split(":")[0]),Ce=parseInt(ce.end.split(":")[0]);return Z>=le&&Z<Ce})),y(S),h(!1)}catch(S){console.error("Error applying filters:",S)}finally{C(!1)}},I=()=>{b({}),me(null),fe(null),De(""),z(),h(!1)},w=()=>{C(!0),l(),setTimeout(()=>{Object.keys(u).length===0&&!T&&!ce?z():W(),C(!1)},1e3)},F=async S=>{x&&G&&(s(G.id,x.id,x.name,S),setTimeout(()=>{Object.keys(u).length===0&&!T&&!ce?z():W()},100))},v=()=>{if(k(!1),O.current){const S={studentId:x==null?void 0:x.id,studentName:x==null?void 0:x.name,...E};O.current.emit("overbookingRequest",S)}alert("Заявка на овербукинг отправлена! Мы подберем лучшего преподавателя за 5 часов до занятия.")},$=S=>{switch(S){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return S}},X=_.useMemo(()=>{const S=Fe.map(se=>{var Ne,Ke,Xe;return{id:se.id,name:se.name||((Ne=se.profile)==null?void 0:Ne.name)||"Репетитор",avatar:se.avatar||((Ke=se.profile)==null?void 0:Ke.avatar)||"",rating:(Xe=se.profile)==null?void 0:Xe.rating,profile:se.profile}}),H=(i==null?void 0:i.filter(se=>se.role==="teacher").map(se=>{var Ne,Ke,Xe;return{id:se.id,name:se.name||((Ne=se.profile)==null?void 0:Ne.name)||"Репетитор",avatar:se.avatar||((Ke=se.profile)==null?void 0:Ke.avatar)||"",rating:(Xe=se.profile)==null?void 0:Xe.rating,profile:se.profile}}))||[],Z=a.filter(se=>se.teacherId&&se.teacherName).map(se=>({id:se.teacherId,name:se.teacherName,avatar:se.teacherAvatar||"",rating:se.rating,profile:{subjects:se.subject?[se.subject]:[],experience:se.experience||"beginner",grades:se.grades||[],goals:se.goals||[],city:"",bio:"",rating:se.rating||0,hourlyRate:se.price||0}})),le=new Map;[...S,...H,...Z].forEach(se=>{const Ne=le.get(se.id);if(!Ne)le.set(se.id,se);else{const Ke=se.avatar&&se.avatar.trim()!==""&&se.avatar!=="undefined"&&se.avatar!=="null",Xe=Ne.avatar&&Ne.avatar.trim()!==""&&Ne.avatar!=="undefined"&&Ne.avatar!=="null";Ke&&!Xe&&le.set(se.id,se)}});const Ce=Array.from(le.values());return console.log("All teachers processed:",Ce.map(se=>({id:se.id,name:se.name,hasAvatar:!!(se.avatar&&se.avatar.trim()!==""&&se.avatar!=="undefined"&&se.avatar!=="null"),avatar:se.avatar}))),Ce},[Fe,i,a]),te=_.useMemo(()=>{let S=X;if((Object.keys(u).length>0||T||ce)&&(console.log("Применяем фильтры:",u),console.log("Всего преподавателей до фильтрации:",X.length),S=X.filter(H=>{const Z=H.profile;let le=!0;return u.subject&&u.subject!==""&&(!(Z!=null&&Z.subjects)||!Z.subjects.includes(u.subject))&&(console.log(`Преподаватель ${H.name} отфильтрован: не преподает ${u.subject}`),le=!1),u.experience&&u.experience!==""&&le&&(Z==null?void 0:Z.experience)!==u.experience&&(console.log(`Преподаватель ${H.name} отфильтрован: опыт не совпадает`),le=!1),u.format&&u.format!==""&&le&&(!(Z!=null&&Z.formats)||!Z.formats.includes(u.format))&&(console.log(`Преподаватель ${H.name} отфильтрован: формат не совпадает`),le=!1),u.city&&u.city!==""&&le&&(!(Z!=null&&Z.city)||!Z.city.toLowerCase().includes(u.city.toLowerCase()))&&(console.log(`Преподаватель ${H.name} отфильтрован: город не совпадает`),le=!1),u.minRating&&u.minRating>0&&le&&((Z==null?void 0:Z.rating)||0)<u.minRating&&(console.log(`Преподаватель ${H.name} отфильтрован: рейтинг ниже ${u.minRating}`),le=!1),u.duration&&u.duration>0&&le&&(!(Z!=null&&Z.durations)||!Z.durations.includes(u.duration))&&(console.log(`Преподаватель ${H.name} отфильтрован: длительность не совпадает`),le=!1),u.grade&&u.grade!==""&&le&&(!(Z!=null&&Z.grades)||!Z.grades.includes(u.grade))&&(console.log(`Преподаватель ${H.name} отфильтрован: класс не совпадает`),le=!1),u.goals&&u.goals.length>0&&le&&(!(Z!=null&&Z.goals)||!u.goals.some(Ce=>Z.goals.includes(Ce)))&&(console.log(`Преподаватель ${H.name} отфильтрован: цели не совпадают`),le=!1),(T||ce)&&le&&j.filter(se=>se.teacherId===H.id).length===0&&(console.log(`Преподаватель ${H.name} отфильтрован: нет подходящих слотов по дате/времени`),le=!1),le&&console.log(`Преподаватель ${H.name} прошел все фильтры`),le}),console.log("Преподавателей после фильтрации:",S.length)),xe.trim()){const H=xe.toLowerCase().trim();S=S.filter(Z=>{const le=Z.profile;return!!(Z.name.toLowerCase().includes(H)||le!=null&&le.subjects&&le.subjects.some(Ce=>Ce.toLowerCase().includes(H))||le!=null&&le.city&&le.city.toLowerCase().includes(H))})}return S},[X,u,T,ce,j,xe]);function P(S){try{return JSON.parse(localStorage.getItem("tutoring_users")||"[]").find(Z=>Z.id===S&&Z.role==="teacher")||null}catch{return null}}const[J,ue]=N.useState(null),[he,st]=N.useState(null),[xs,At]=N.useState(!1),[je,or]=N.useState(!1),[fa,td]=N.useState([]);N.useEffect(()=>{if(!he)return;function S(){const H=P(he.id);td((H==null?void 0:H.posts)||[])}return S(),window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)},[he]),_.useEffect(()=>{Object.keys(u).length>0||T||ce?W():z()},[u,T,ce,a]),_.useEffect(()=>{z()},[i]),_.useEffect(()=>{const S=Z=>{Z.key==="tutoring_users"&&(o(),q([]),fetch(`${at}/api/teachers`).then(le=>le.json()).then(le=>q(Array.isArray(le)?le:[])).catch(()=>q([])),z())},H=Z=>{var le;((le=Z.detail)==null?void 0:le.key)==="tutoring_users"&&(o(),q([]),fetch(`${at}/api/teachers`).then(Ce=>Ce.json()).then(Ce=>q(Array.isArray(Ce)?Ce:[])).catch(()=>q([])),z())};return window.addEventListener("storage",S),window.addEventListener("customStorage",H),()=>{window.removeEventListener("storage",S),window.removeEventListener("customStorage",H)}},[]),_.useEffect(()=>{z()},[a]);const xa=async S=>{var Z,le,Ce,se,Ne,Ke,Xe,Rt,ti,ri;console.log("Teacher clicked:",S);try{const gs=await fetch(`${at}/api/users/${S.id}`);if(gs.ok){const Je=await gs.json();if(console.log("Fresh teacher data from server:",Je),Je){const rd=JSON.parse(localStorage.getItem("allUsers")||"[]").map(ai=>ai.id===Je.id?Je:ai);localStorage.setItem("allUsers",JSON.stringify(rd));const si={id:Je.id,name:Je.name,email:Je.email,avatar:((Z=Je.profile)==null?void 0:Z.avatar)||Je.avatar,role:"teacher",profile:{...Je.profile,avatar:((le=Je.profile)==null?void 0:le.avatar)||Je.avatar,name:Je.name,email:Je.email}};console.log("Updated teacher data for modal:",si),st(si),At(!0);return}}}catch(gs){console.error("Error fetching fresh teacher data:",gs)}let H=P(S.id);H?H={...H,name:S.name||H.name,email:((Xe=S.profile)==null?void 0:Xe.email)||S.email||H.email,avatar:((Rt=S.profile)==null?void 0:Rt.avatar)||S.avatar||H.avatar,profile:{...H.profile,...S.profile,avatar:((ti=S.profile)==null?void 0:ti.avatar)||S.avatar||H.avatar,name:S.name||H.name,email:((ri=S.profile)==null?void 0:ri.email)||S.email||H.email}}:H={id:S.id,name:S.name,email:((Ce=S.profile)==null?void 0:Ce.email)||S.email||"",avatar:((se=S.profile)==null?void 0:se.avatar)||S.avatar,role:"teacher",profile:{...S.profile,avatar:((Ne=S.profile)==null?void 0:Ne.avatar)||S.avatar,name:S.name,email:((Ke=S.profile)==null?void 0:Ke.email)||S.email}},console.log("Fallback teacher data for modal:",H),st(H),At(!0)},Qn=S=>{const H=i.find(Z=>Z.id===S);H&&(D(H),ie(!0)),or(!1)},Zn=S=>{const H=i.find(Z=>Z.id===S);if(H&&x){const Z=d(x.id,S,x.name,H.name);setTimeout(()=>{m(Z,x.id,x.name,`Привет! Меня зовут ${x.name}. Можете ли вы помочь мне с обучением?`)},100),e("chats")}or(!1)};return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3",children:"Найди своего идеального репетитора"}),t.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Изучай профили преподавателей, читай их записи и записывайся на уроки"})]}),t.jsx("div",{className:"flex items-center justify-center mb-6",children:n?t.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-full px-4 py-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx(ui,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-700",children:"Подключено в реальном времени"})]}):t.jsxs("div",{className:"flex items-center space-x-2 bg-amber-50 border border-amber-200 rounded-full px-4 py-2",children:[t.jsx(Yd,{className:"h-4 w-4 text-amber-600"}),t.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Офлайн режим (кэшированные данные)"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"ml-2 text-xs bg-amber-100 text-amber-700 px-3 py-1 rounded-full hover:bg-amber-200 transition-colors",children:"Переподключиться"})]})})]}),t.jsxs("div",{className:"mb-6 flex flex-wrap justify-center gap-4",children:[t.jsxs("button",{onClick:()=>k(!0),className:"group bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:via-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(Ie,{className:"h-5 w-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Овербукинг"}),t.jsx("div",{className:"text-xs opacity-90",children:"Автоподбор"})]})]}),t.jsxs("button",{onClick:()=>Y(!0),className:"group bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white px-6 py-3 rounded-xl font-semibold text-base hover:from-purple-600 hover:via-pink-600 hover:to-rose-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(He,{className:"h-5 w-5"})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Календарь"}),t.jsx("div",{className:"text-xs opacity-90",children:"Слоты"})]})]}),t.jsxs("button",{onClick:w,disabled:f,className:"group bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(_a,{className:`h-5 w-5 ${f?"animate-spin":""}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Обновить"}),t.jsx("div",{className:"text-xs opacity-90",children:"Данные"})]})]}),t.jsxs("button",{onClick:de,disabled:f,className:"group bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none",children:[t.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors",children:t.jsx(ui,{className:`h-5 w-5 ${f?"animate-pulse":""}`})}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold",children:"Синхронизация"}),t.jsx("div",{className:"text-xs opacity-90",children:"Сервер"})]})]})]}),t.jsxs("div",{className:"mb-6 space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[t.jsxs("div",{className:"flex-1 relative group",children:[t.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),t.jsx("input",{type:"text",value:xe,onChange:S=>De(S.target.value),placeholder:"🔍 Поиск по предмету, преподавателю или городу...",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base placeholder-gray-400"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>h(!g),className:`flex items-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm ${g?"bg-blue-600 text-white shadow-md":"bg-white border-2 border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:[t.jsx(en,{className:"h-4 w-4"}),t.jsx("span",{children:"Фильтры"}),(Object.keys(u).length>0||T||ce||xe.trim())&&t.jsx("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded-full text-xs font-bold",children:Object.keys(u).length+(T?1:0)+(ce?1:0)+(xe.trim()?1:0)})]}),t.jsx("button",{onClick:W,disabled:f,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2.5 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 flex items-center space-x-2 text-sm",children:f?t.jsxs(t.Fragment,{children:[t.jsx(_a,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Применение..."})]}):t.jsx(t.Fragment,{children:t.jsx("span",{children:"Применить"})})}),(Object.keys(u).length>0||T||ce||xe.trim())&&t.jsx("button",{onClick:I,className:"bg-white border-2 border-gray-300 text-gray-700 px-4 py-2.5 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 text-sm",children:"Сбросить"})]})]}),g&&t.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-100 shadow-lg",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Класс"}),t.jsxs("select",{value:u.grade||"",onChange:S=>b({...u,grade:S.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой класс"}),ge.map(S=>t.jsx("option",{value:S,children:S},S))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Предмет"}),t.jsxs("select",{value:u.subject||"",onChange:S=>b({...u,subject:S.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой предмет"}),Q.map(S=>t.jsx("option",{value:S,children:S},S))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Опыт"}),t.jsxs("select",{value:u.experience||"",onChange:S=>b({...u,experience:S.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой опыт"}),pe.map(S=>t.jsx("option",{value:S,children:$(S)},S))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Формат"}),t.jsxs("select",{value:u.format||"",onChange:S=>b({...u,format:S.target.value}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой формат"}),ve.map(S=>t.jsx("option",{value:S,children:S==="online"?"Онлайн":S==="offline"?"Оффлайн":"Мини-группа"},S))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Длительность"}),t.jsxs("select",{value:u.duration||"",onChange:S=>b({...u,duration:S.target.value?parseInt(S.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любая длительность"}),Ae.map(S=>t.jsxs("option",{value:S,children:[S," мин"]},S))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Мин. рейтинг"}),t.jsxs("select",{value:u.minRating||"",onChange:S=>b({...u,minRating:S.target.value?parseFloat(S.target.value):void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любой рейтинг"}),t.jsx("option",{value:"4",children:"4+ звезды"}),t.jsx("option",{value:"4.5",children:"4.5+ звезды"}),t.jsx("option",{value:"5",children:"5 звезд"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Город"}),t.jsx("input",{type:"text",value:u.city||"",onChange:S=>b({...u,city:S.target.value}),placeholder:"Введите город",className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Цели обучения"}),t.jsxs("select",{value:((ei=u.goals)==null?void 0:ei[0])||"",onChange:S=>b({...u,goals:S.target.value?[S.target.value]:void 0}),className:"w-full p-2.5 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200",children:[t.jsx("option",{value:"",children:"Любые цели"}),ee.map(S=>t.jsx("option",{value:S,children:S},S))]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"Выберите дату и время"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Дата"}),t.jsx("div",{className:"border-2 border-gray-200 rounded-2xl overflow-hidden shadow-lg",children:t.jsx(Gn,{localizer:Le,events:[],startAccessor:"start",endAccessor:"end",style:{height:280},views:["month"],view:"month",selectable:!0,onSelectSlot:S=>{me(S.start)},onSelectEvent:()=>{}})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Время"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Начало"}),t.jsx("input",{type:"time",value:(ce==null?void 0:ce.start)||"",onChange:S=>fe(H=>({start:S.target.value,end:(H==null?void 0:H.end)||"23:00"})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Конец"}),t.jsx("input",{type:"time",value:(ce==null?void 0:ce.end)||"",onChange:S=>fe(H=>({start:(H==null?void 0:H.start)||"00:00",end:S.target.value})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-base"})]})]}),T&&t.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(He,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Выбрана дата:"})]}),t.jsx("p",{className:"text-base font-medium text-blue-900",children:Re(T,"dd MMMM yyyy",{locale:ct})})]})]})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:te.length>0?`Найдено ${te.length} преподавателей`:"Преподаватели"}),t.jsx("p",{className:"text-gray-500 text-sm",children:te.length>0?"Выберите подходящего преподавателя и забронируйте урок":"Попробуйте изменить фильтры или воспользоваться овербукингом"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:te.length===0?t.jsx(M3,{title:Object.keys(u).length>0||T||ce?"Нет преподавателей подходящих под фильтры":"Нет зарегистрированных преподавателей",description:Object.keys(u).length>0||T||ce?"Попробуйте изменить фильтры или воспользоваться овербукингом":"Попробуйте воспользоваться овербукингом или обратитесь к администратору",actionPrimary:{label:"Овербукинг",onClick:()=>k(!0)},actionSecondary:{label:"Сбросить фильтры",onClick:I,variant:"secondary"}}):t.jsx(t.Fragment,{children:te.map(S=>{const H=S.profile,Z=a.filter(se=>se.teacherId===S.id),le=Z.filter(se=>!se.isBooked);Z.length>0?Math.min(...Z.map(se=>se.price)):H!=null&&H.hourlyRate,Z.length>0?Math.max(...Z.map(se=>se.price)):H!=null&&H.hourlyRate;const Ce=le.length>0;return t.jsxs("div",{className:"bg-white rounded-3xl border border-gray-200 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden transform hover:-translate-y-2",onClick:()=>xa(S),children:[t.jsxs("div",{className:"h-32 relative overflow-hidden",style:{background:H!=null&&H.cardBackground?H.cardBackground.startsWith("http")||H.cardBackground.startsWith("data:")?`url(${H.cardBackground}) center/cover`:H.cardBackground:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),t.jsxs("div",{className:"absolute top-3 right-3 flex items-center space-x-2",children:[t.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:se=>{se.stopPropagation()},children:t.jsx(ut,{className:"h-3 w-3"})}),t.jsx("button",{className:"p-1.5 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors border border-white/30",onClick:se=>{se.stopPropagation()},children:t.jsx(Ft,{className:"h-3 w-3"})})]})]}),t.jsx("div",{className:"relative -mt-12 flex justify-center",children:t.jsxs("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-4 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-2 border-white rounded-full shadow-lg"}),(()=>{const se=(H==null?void 0:H.avatar)||S.avatar;return se&&se.trim()!==""&&se!=="undefined"&&se!=="null"?t.jsx("img",{src:se,alt:S.name,className:"w-32 h-32 object-cover rounded-full",onError:Ke=>{const Xe=Ke.target;Xe.style.display="none";const Rt=Xe.nextElementSibling;Rt&&Rt.classList.remove("hidden")},onLoad:Ke=>{const Rt=Ke.target.nextElementSibling;Rt&&Rt.classList.add("hidden")}}):null})(),t.jsx("div",{className:`w-32 h-32 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${(()=>{const se=(H==null?void 0:H.avatar)||S.avatar;return se&&se.trim()!==""&&se!=="undefined"&&se!=="null"?"hidden":""})()}`,children:t.jsx(be,{className:"h-16 w-16 text-white"})})]})}),t.jsxs("div",{className:"px-6 pb-6 pt-4",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:(H==null?void 0:H.name)||S.name||"Репетитор"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Частный преподаватель"})]}),t.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600 mb-4",children:[(H==null?void 0:H.age)&&t.jsxs("span",{children:["возраст ",H.age," лет"]}),(H==null?void 0:H.experienceYears)&&t.jsxs("span",{children:["стаж ",H.experienceYears," лет"]})]}),t.jsx("div",{className:"flex items-center justify-center mb-4",children:t.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-3 py-1.5 rounded-full",children:[t.jsx(Me,{className:"h-4 w-4 text-green-600"}),t.jsx("span",{className:"text-sm font-medium text-green-700",children:H!=null&&H.reviewsCount&&H.reviewsCount>0?`${H.reviewsCount} отзывов`:"отзывов нет"})]})}),t.jsx("div",{className:"text-center mb-4",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1 text-sm text-gray-600",children:[t.jsx(jt,{className:"h-4 w-4"}),t.jsx("span",{children:(H==null?void 0:H.city)||"Город не указан"})]})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:se=>{se.stopPropagation(),Ce?(D(S),ie(!0)):xa(S)},className:`w-full py-3 rounded-xl font-semibold transition-all duration-200 text-base ${Ce?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1"}`,children:Ce?"Забронировать":"Профиль"}),t.jsx("button",{onClick:se=>{se.stopPropagation(),xa(S)},className:"w-full py-2 text-gray-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"Подробнее →"})]})]})]},S.id)})})})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Овербукинг - Автоподбор преподавателя"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Заполните форму, и мы автоматически подберем лучшего доступного преподавателя за 5 часов до занятия"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Класс"}),t.jsxs("select",{value:E.grade,onChange:S=>L({...E,grade:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Выберите класс"}),ge.map(S=>t.jsx("option",{value:S,children:S},S))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предмет"}),t.jsxs("select",{value:E.subject,onChange:S=>L({...E,subject:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Выберите предмет"}),Q.map(S=>t.jsx("option",{value:S,children:S},S))]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата занятия"}),t.jsx("input",{type:"date",value:E.date,onChange:S=>L({...E,date:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Время начала"}),t.jsx("input",{type:"time",value:E.startTime,onChange:S=>L({...E,startTime:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цель занятий"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.map(S=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:E.goals.includes(S),onChange:H=>{H.target.checked?L({...E,goals:[...E.goals,S]}):L({...E,goals:E.goals.filter(Z=>Z!==S)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:S})]},S))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавателя"}),t.jsxs("select",{value:E.experience,onChange:S=>L({...E,experience:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Любой"}),pe.map(S=>t.jsx("option",{value:S,children:$(S)},S))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность"}),t.jsx("select",{value:E.duration,onChange:S=>L({...E,duration:Number(S.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:Ae.map(S=>t.jsxs("option",{value:S,children:[S," мин"]},S))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Формат"}),t.jsx("select",{value:E.format,onChange:S=>L({...E,format:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:ve.map(S=>t.jsx("option",{value:S,children:S==="online"?"Онлайн":S==="offline"?"Оффлайн":"Мини-группа"},S))})]})]}),E.format==="offline"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:E.city,onChange:S=>L({...E,city:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Примечание"}),t.jsx("textarea",{value:E.comment,onChange:S=>L({...E,comment:S.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Например: хочу разобрать домашнее задание или подготовиться к контрольной..."})]})]}),t.jsxs("div",{className:"flex space-x-4 mt-6",children:[t.jsx("button",{onClick:v,disabled:!E.grade||!E.subject||!E.date||!E.startTime,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-3 px-4 rounded-lg font-medium hover:from-green-600 hover:to-emerald-600 transition-all duration-200 disabled:opacity-50",children:"Отправить заявку"}),t.jsx("button",{onClick:()=>k(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Отмена"})]})]})})}),xs&&he&&t.jsx(D3,{teacher:he,onClose:()=>At(!1),onBookLesson:S=>{At(!1),Qn(S)},onMessage:S=>{At(!1),Zn(S)}}),M&&G&&x&&t.jsx(Xn,{isOpen:M,onClose:()=>{B(!1),A(null)},onConfirm:F,slot:G,teacher:P(G.teacherId),student:x}),je&&he&&t.jsx(Qc,{teacher:he,onClose:()=>or(!1),onBookLesson:Qn,onMessage:Zn}),K&&t.jsx(Zc,{onClose:()=>Y(!1)}),ae&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:t.jsx(be,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Календарь ",(R==null?void 0:R.name)||"Преподавателя"]}),t.jsx("p",{className:"text-gray-600",children:"Выберите удобное время для занятия"})]})]}),t.jsx("button",{onClick:()=>{ie(!1),D(null)},className:"p-2 rounded-full hover:bg-gray-100",children:t.jsx(Qe,{className:"w-5 h-5 text-gray-600"})})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>{const S=new Date(U);S.setDate(S.getDate()-7),V(S)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[U.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})," — ",new Date(U.getTime()+6*24*60*60*1e3).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})]}),t.jsx("button",{onClick:()=>{const S=new Date(U);S.setDate(S.getDate()+7),V(S)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsx("button",{onClick:()=>{const S=new Date,H=S.getDay(),Z=S.getDate()-H+(H===0?-6:1);V(new Date(S.setDate(Z)))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Сегодня"})]}),t.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[t.jsx("div",{className:"w-20 p-3 border-r border-gray-200"}),Array.from({length:7},(S,H)=>{const Z=new Date(U);return Z.setDate(Z.getDate()+H),t.jsxs("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 text-center",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.toLocaleDateString("ru-RU",{weekday:"short"})}),t.jsx("div",{className:"text-xs text-gray-600",children:Z.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})})]},H)})]}),t.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:Array.from({length:24},(S,H)=>H).map(S=>t.jsxs("div",{className:"flex border-b border-gray-200 last:border-b-0",children:[t.jsxs("div",{className:"w-20 bg-gray-50 p-3 border-r border-gray-200 flex items-center justify-center text-sm font-medium text-gray-600 sticky left-0",children:[S.toString().padStart(2,"0"),":00"]}),Array.from({length:7},(H,Z)=>{const le=new Date(U);le.setDate(le.getDate()+Z);const Ce=le.toISOString().split("T")[0],se=a.filter(Ne=>Ne.teacherId===(R==null?void 0:R.id)&&!Ne.isBooked&&Ne.date===Ce&&parseInt(Ne.startTime.split(":")[0])===S);return t.jsx("div",{className:"flex-1 p-3 border-r border-gray-200 last:border-r-0 min-h-[60px]",children:se.map(Ne=>t.jsxs("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-2 mb-2 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>{x&&(A(Ne),B(!0),ie(!1),D(null))},children:[t.jsxs("div",{className:"text-xs font-medium text-blue-900",children:[Ne.startTime," - ",Ne.endTime]}),t.jsx("div",{className:"text-xs text-blue-700",children:Ne.subject}),t.jsxs("div",{className:"text-xs text-blue-600",children:[Ne.price," ₽"]})]},Ne.id))},Z)})]},S))})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[t.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Доступные слоты: ",a.filter(S=>S.teacherId===(R==null?void 0:R.id)&&!S.isBooked).length]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите на любой слот в календаре для бронирования"})]})]})]})})]})},Oa=()=>{const{timeSlots:e,lessons:r,createSlot:s,cancelLesson:a,getOrCreateChat:n,completeLesson:i,deleteSlot:o,isConnected:l,socketRef:c}=rt(),{user:d}=ze(),[m,x]=N.useState(!1),[u,b]=N.useState({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3}),[g,h]=_.useState(null),[j,y]=_.useState(!1),[f,C]=_.useState(null),[p,k]=N.useState(!1),[E,L]=N.useState([]),[M,B]=N.useState(null),[G,A]=N.useState(!1);_.useEffect(()=>{c.current&&(d!=null&&d.id)&&l&&c.current.emit("subscribeOverbooking",d.id)},[c.current,d==null?void 0:d.id,l]),_.useEffect(()=>{if(!c.current)return;const q=()=>{d!=null&&d.id&&(d!=null&&d.profile)&&l&&c.current.emit("subscribeOverbooking",d.id)};return c.current.off("connect",q),c.current.on("connect",q),d!=null&&d.id&&(d!=null&&d.profile)&&(c.current.emit("subscribeOverbooking",d.id),c.current.on("overbookingRequests",ye=>{L(ye),setTimeout(()=>{},100)}),c.current.on("newOverbookingRequest",ye=>{L(de=>[...de,ye])}),c.current.on("overbookingRequestAccepted",ye=>{L(de=>de.filter(O=>O.id!==ye.id))})),()=>{c.current&&(c.current.off("overbookingRequests"),c.current.off("newOverbookingRequest"),c.current.off("overbookingRequestAccepted"),c.current.off("connect",q))}},[d==null?void 0:d.id,d==null?void 0:d.profile,l]),_.useEffect(()=>{d&&d.profile&&Array.isArray(d.profile.subjects)&&d.profile.subjects.length>=1&&b(q=>({...q,subject:d.profile.subjects[0]}))},[d]);const Y=e.filter(q=>q.teacherId===(d==null?void 0:d.id)).filter(q=>!q.isBooked),ae=r.filter(q=>q.teacherId===(d==null?void 0:d.id)),ie=ae.filter(q=>q.status==="scheduled"),R=ae.filter(q=>q.status==="completed"),D=(q,ye)=>{const de=new Date(`${q.date}T${q.startTime}`),O=new Date(`${ye.date}T${ye.startTime}`);return de.getTime()-O.getTime()},U=[...Y].sort(D),V=[...ie].sort(D),T=[...R].sort(D),me=()=>{if(!d||!u.date||!u.startTime||!u.subject){alert("Пожалуйста, заполните все обязательные поля");return}const q=new Date(`2000-01-01T${u.startTime}`),ye=new Date(q.getTime()+u.duration*6e4);let de;d.profile&&d.role==="teacher"&&(de=d.profile);const O={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar,date:u.date,startTime:u.startTime,endTime:ye.toTimeString().slice(0,5),duration:u.duration,subject:u.subject,lessonType:u.lessonType,format:u.format,price:u.price,experience:(de==null?void 0:de.experience)||"beginner",goals:(de==null?void 0:de.goals)||[],grades:(de==null?void 0:de.grades)||[],rating:de==null?void 0:de.rating,bio:(de==null?void 0:de.bio)||"",...u.format==="offline"&&(de!=null&&de.city)?{city:de.city}:{}};s(O),x(!1),b({date:"",startTime:"",duration:60,subject:"",lessonType:"regular",format:"online",price:1e3})},ce=q=>{d&&(h(q),C(null),y(!0))},fe=q=>{d&&(C(q),h(null),y(!0))},xe=()=>{y(!1),h(null),C(null)},De=async q=>{var de,O,z,W,I,w;if(!d)return;c.current&&c.current.emit("acceptOverbookingRequest",{requestId:q.id,teacherId:d.id});const ye={teacherId:d.id,teacherName:d.name,teacherAvatar:d.avatar||"",date:q.date||new Date().toISOString().slice(0,10),startTime:q.startTime||"15:00",endTime:q.endTime||"16:00",duration:q.duration||60,subject:q.subject,lessonType:"regular",format:q.format,price:1e3,experience:((de=d.profile)==null?void 0:de.experience)||"beginner",goals:((O=d.profile)==null?void 0:O.goals)||[],grades:((z=d.profile)==null?void 0:z.grades)||[],rating:(W=d.profile)==null?void 0:W.rating,bio:((I=d.profile)==null?void 0:I.bio)||"",city:((w=d.profile)==null?void 0:w.city)||""};await s(ye,q.studentId,q.studentName),k(!1),alert("Вы приняли заявку. Слот создан и забронирован!")},Q=q=>{switch(q){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return q}},ge=q=>{switch(q){case"trial":return"Пробный";case"regular":return"Обычный";default:return q}},ee=({slot:q,isBooked:ye,onClick:de})=>t.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${ye?"border-green-500":"border-blue-500"} cursor-pointer`,onClick:de,children:t.jsxs("div",{className:"p-3",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:q.subject}),t.jsxs("div",{className:"text-xs text-gray-500",children:[q.date," • ",q.startTime,"–",q.endTime]})]})}),pe=({lesson:q,status:ye,onClick:de})=>t.jsx("div",{className:`card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden border-l-4 ${ye==="completed"?"border-gray-400":"border-green-500"} cursor-pointer`,onClick:de,children:t.jsxs("div",{className:"p-3",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight mb-1",children:q.subject}),t.jsxs("div",{className:"text-xs text-gray-500",children:[q.date," • ",q.startTime,"–",q.endTime]})]})}),ve=(d==null?void 0:d.profile)&&"overbookingEnabled"in d.profile&&d.profile.overbookingEnabled,Ae=d!=null&&d.profile&&"subjects"in d.profile?d.profile.subjects:[],gt=[45,60,90],Le=["regular","trial"],Fe=["online","offline","mini-group"];return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8 relative",children:[ve&&t.jsxs("button",{className:"absolute top-0 right-0 p-2 rounded-full hover:bg-gray-100 transition z-10",title:"Уведомления",onClick:()=>k(!0),children:[t.jsx(Ir,{className:"w-7 h-7 text-blue-500"}),E.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs px-1.5 py-0.5",children:E.length})]}),t.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Управление слотами"}),t.jsx("p",{className:"text-gray-600",children:"Создавайте временные слоты для уроков и управляйте своим расписанием"})]}),p&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>k(!1),title:"Закрыть",children:t.jsx(Qe,{className:"w-6 h-6"})}),t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Заявки на овербукинг"}),E.length===0?t.jsx("div",{className:"text-gray-500 text-center",children:"Нет новых заявок"}):t.jsx("div",{className:"space-y-2",children:E.map(q=>t.jsxs("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-2 bg-purple-50 cursor-pointer hover:bg-purple-100 transition",onClick:()=>{B(q),A(!0)},children:[t.jsx("span",{className:"font-semibold text-purple-800",children:q.studentName}),t.jsx("span",{className:"text-xs text-gray-500",children:q.subject}),t.jsx("span",{className:"text-xs text-gray-500",children:q.startTime||"—"})]},q.id))})]})}),t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:()=>x(!0),className:"btn-primary flex items-center space-x-2",children:[t.jsx(Ur,{className:"h-5 w-5"}),t.jsx("span",{children:"Создать новый слот"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Свободные слоты"}),U.length>0?t.jsx("div",{className:"space-y-4",children:U.map(q=>t.jsx(ee,{slot:q,isBooked:!1,onClick:()=>ce(q)},q.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет свободных слотов"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-green-700 mb-4",children:"Забронированные уроки"}),V.length>0?t.jsx("div",{className:"space-y-4",children:V.map(q=>t.jsx(pe,{lesson:q,status:"scheduled",onClick:()=>fe(q)},q.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет забронированных уроков"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Завершённые уроки"}),T.length>0?t.jsx("div",{className:"space-y-4",children:T.map(q=>t.jsx(pe,{lesson:q,status:"completed",onClick:()=>fe(q)},q.id))}):t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет завершённых уроков"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-purple-700 mb-4",children:"Овербукинг"}),t.jsx("div",{className:"text-gray-400 text-center py-8",children:"Нет новых заявок"})]})]}),m&&t.jsx("div",{className:"fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"modal-content bg-white rounded-2xl shadow-2xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold gradient-text",children:"Создать новый слот"}),t.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Предмет *"}),t.jsxs("select",{value:u.subject,onChange:q=>b({...u,subject:q.target.value}),className:"input-modern w-full",children:[t.jsx("option",{value:"",children:"Выберите предмет"}),Ae.map(q=>t.jsx("option",{value:q,children:q},q))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Дата *"}),t.jsx("input",{type:"date",value:u.date,onChange:q=>b({...u,date:q.target.value}),className:"input-modern w-full",min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Время начала *"}),t.jsx("input",{type:"time",value:u.startTime,onChange:q=>b({...u,startTime:q.target.value}),className:"input-modern w-full"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Длительность"}),t.jsx("select",{value:u.duration,onChange:q=>b({...u,duration:parseInt(q.target.value)}),className:"input-modern w-full",children:gt.map(q=>t.jsxs("option",{value:q,children:[q," минут"]},q))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Цена (₽)"}),t.jsx("input",{type:"number",value:u.price,onChange:q=>b({...u,price:parseInt(q.target.value)}),className:"input-modern w-full",min:"100",step:"100"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Тип урока"}),t.jsx("select",{value:u.lessonType,onChange:q=>b({...u,lessonType:q.target.value}),className:"input-modern w-full",children:Le.map(q=>t.jsx("option",{value:q,children:ge(q)},q))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Формат"}),t.jsx("select",{value:u.format,onChange:q=>b({...u,format:q.target.value}),className:"input-modern w-full",children:Fe.map(q=>t.jsx("option",{value:q,children:Q(q)},q))})]})]}),t.jsxs("div",{className:"flex space-x-4 pt-4",children:[t.jsx("button",{onClick:me,className:"btn-primary flex-1",children:"Создать слот"}),t.jsx("button",{onClick:()=>x(!1),className:"btn-secondary flex-1",children:"Отмена"})]})]})]})})}),j&&(g||f)&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[t.jsx("button",{onClick:xe,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h3",{className:"text-xl font-bold mb-4",children:g?"Детали слота":"Детали урока"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Предмет:"})," ",(g||f).subject]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Дата:"})," ",(g||f).date," ",(g||f).startTime," - ",(g||f).endTime]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Формат:"})," ",(g||f).format]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Цена:"})," ",(g||f).price,"₽"]}),g&&g.studentName&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",g.studentName]}),f&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",f.studentName]}),((f==null?void 0:f.comment)||(g==null?void 0:g.comment))&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[t.jsx("span",{className:"font-medium",children:"Комментарий ученика:"})," ",(f==null?void 0:f.comment)||(g==null?void 0:g.comment)]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[g&&g.isBooked&&g.studentId&&d&&t.jsxs("button",{onClick:()=>{n(d.id,g.studentId,d.name,g.studentName),xe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[t.jsx(Me,{className:"w-5 h-5"})," Чат с учеником"]}),g&&g.isBooked&&g.format==="online"&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[t.jsx(Tt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Видеозвонок"})]})}),g&&g.isBooked&&t.jsxs("button",{onClick:()=>{i(g.lessonId),xe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[t.jsx(Lr,{className:"w-5 h-5"})," Завершить урок"]}),g&&t.jsx("button",{onClick:()=>{o(g.id),xe()},className:"absolute top-4 left-4 text-red-500 hover:text-red-700",children:t.jsx(Hr,{className:"w-6 h-6"})}),f&&f.status==="scheduled"&&d&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{n(d.id,f.studentId,d.name,f.studentName),xe()},className:"flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200",children:[t.jsx(Me,{className:"w-5 h-5"})," Чат с учеником"]}),f.format==="online"&&t.jsxs("div",{className:"flex items-center space-x-1 px-3 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[t.jsx(Tt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:"Видеозвонок"})]}),t.jsxs("button",{onClick:()=>{i(f.id),xe()},className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg hover:bg-amber-200",children:[t.jsx(Lr,{className:"w-5 h-5"})," Завершить урок"]})]}),f&&f.status==="completed"&&t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-center text-gray-800",children:"Урок завершён"})]})]})}),G&&M&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[t.jsx("button",{onClick:()=>{A(!1),B(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("h3",{className:"text-xl font-bold mb-4",children:"Заявка на овербукинг"}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Ученик:"})," ",M.studentName]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Предмет:"})," ",M.subject]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Класс:"})," ",M.grade]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Формат:"})," ",M.format]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Длительность:"})," ",M.duration," мин"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Время:"})," ",M.startTime||"—"," - ",M.endTime||"—"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Цели:"})," ",Array.isArray(M.goals)?M.goals.join(", "):M.goals]}),M.comment&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-blue-900",children:[t.jsx("span",{className:"font-medium",children:"Комментарий:"})," ",M.comment]})]}),t.jsx("button",{className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",onClick:()=>{De(M),A(!1),B(null)},children:"Забронировать слот"})]})})]})},_3={ru:ct},P3=qn({format:Re,startOfWeek:Ct,getDay:Vn,locales:_3}),ed=({mode:e,student:r,onAssign:s})=>{const{timeSlots:a,lessons:n,bookLesson:i,createSlot:o}=rt(),{user:l}=ze(),[c,d]=N.useState(null),[m,x]=N.useState(!1),[u,b]=N.useState(""),[g,h]=N.useState(!1),[j,y]=N.useState(!1),[f,C]=N.useState({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),[p,k]=N.useState(!1),[E,L]=N.useState(null),[M,B]=N.useState(!1),[G,A]=N.useState(""),K=a.filter(Q=>{if(Q.teacherId!==(l==null?void 0:l.id)||Q.status==="completed")return!1;if(e==="assign"&&r){if(Q.isBooked&&Q.bookedStudentId!==r.id)return!1}else if(Q.isBooked)return!1;return!0}),Y=n.filter(Q=>Q.teacherId===(l==null?void 0:l.id)&&Q.status!=="completed"),ae=e==="assign"?a.filter(Q=>Q.teacherId===(l==null?void 0:l.id)&&Q.status!=="completed"):K,ie=e==="assign"?n.filter(Q=>Q.teacherId===(l==null?void 0:l.id)&&Q.status!=="completed"):Y,R=ae.map(Q=>({id:Q.id,title:`${Q.subject} - ${Q.isBooked?"Забронирован":"Свободен"}`,start:new Date(`${Q.date}T${Q.startTime}`),end:new Date(`${Q.date}T${Q.endTime}`),resource:Q,type:"slot",isBooked:Q.isBooked,subject:Q.subject,price:Q.price,format:Q.format,lessonType:Q.lessonType})),D=ie.map(Q=>({id:Q.id,title:`${Q.subject} - ${Q.studentName}`,start:new Date(`${Q.date}T${Q.startTime}`),end:new Date(`${Q.date}T${Q.endTime}`),resource:Q,type:"lesson",studentName:Q.studentName,subject:Q.subject,price:Q.price,format:Q.format,status:Q.status})),U=[...R,...D],V=N.useCallback(Q=>{let ge={borderRadius:"8px",border:"none",padding:"4px 8px",fontSize:"12px",fontWeight:"500",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"};return Q.type==="slot"?Q.isBooked?(ge.backgroundColor="#10b981",ge.color="white"):(ge.backgroundColor="#3b82f6",ge.color="white"):Q.type==="lesson"&&(ge.backgroundColor="#f59e0b",ge.color="white"),{style:ge}},[]),T=N.useCallback(Q=>{d(Q),x(!0),b("")},[]),me=()=>{x(!1),d(null),b("")},ce=async Q=>{e==="assign"&&r&&(await i(Q.id,r.id,r.name),s&&s())},fe=N.useCallback(Q=>{const{start:ge,end:ee}=Q,pe=Re(ge,"yyyy-MM-dd"),ve=Re(ge,"HH:mm"),Ae=Re(ee,"HH:mm");C({date:pe,startTime:ve,endTime:Ae,subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),y(!0)},[]),xe=async()=>{if(!l||!f.subject.trim()){alert("Пожалуйста, заполните все обязательные поля");return}if(!f.startTime||!f.endTime||f.startTime>=f.endTime){alert("Проверьте корректность времени начала и окончания");return}k(!0);try{if(e==="assign"&&r){await o({...f,teacherId:l.id,teacherName:l.name,duration:60,lessonType:f.lessonType,format:f.format,experience:f.experience,goals:f.goals||[],grades:f.grades||[]},r.id,r.name,{mode:"assign"}),y(!1),C({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]});return}await o({...f,teacherId:l.id,teacherName:l.name,duration:60,lessonType:f.lessonType,format:f.format,experience:f.experience,goals:f.goals||[],grades:f.grades||[]}),y(!1),C({date:"",startTime:"",endTime:"",subject:"",lessonType:"regular",format:"online",price:1e3,experience:"beginner",goals:[],grades:[]}),alert("Слот успешно создан!")}catch{alert("Ошибка при создании слота")}finally{k(!1)}},De=async Q=>{if(r){B(!0);try{await i(Q.id,r.id,r.name),A(`Урок назначен для ${r.name}`),setTimeout(()=>{A(""),L(null),s&&s()},1200)}catch{alert("Ошибка при бронировании слота")}finally{B(!1)}}};return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-2",children:[t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"Календарь занятий"}),t.jsx("p",{className:"text-xs text-gray-600",children:"Управляйте своим расписанием и отслеживайте забронированные уроки"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:t.jsx("div",{className:"p-3",children:t.jsx(Gn,{localizer:P3,events:U,startAccessor:"start",endAccessor:"end",style:{height:400},eventPropGetter:V,onSelectEvent:T,onSelectSlot:fe,selectable:!0,views:["month","week","day"],messages:{next:"Следующий",previous:"Предыдущий",today:"Сегодня",month:"Месяц",week:"Неделя",day:"День",noEventsInRange:"Нет событий в выбранном диапазоне",showMore:Q=>`+${Q} еще`},className:"custom-calendar"})})}),t.jsxs("div",{className:"mt-3 bg-white rounded-lg shadow-sm border border-gray-100 p-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Легенда"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Свободные слоты"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Забронированные слоты"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded"}),t.jsx("span",{className:"text-xs text-gray-700",children:"Запланированные уроки"})]})]})]})]}),m&&c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-xs w-full p-3 transform transition-all duration-300 scale-100",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900",children:c.type==="slot"?"Детали слота":"Детали урока"}),t.jsx("button",{onClick:me,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Предмет:"}),t.jsx("p",{className:"text-xs text-gray-900",children:c.subject})]}),c.type==="slot"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),t.jsx("p",{className:`text-xs font-medium ${c.isBooked?"text-green-600":"text-blue-600"}`,children:c.isBooked?"Забронирован":"Свободен"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Тип урока:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.lessonType})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),t.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]}),!c.isBooked&&t.jsxs("div",{className:"mt-3",children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Имя студента для бронирования:"}),t.jsx("input",{type:"text",value:u,onChange:Q=>b(Q.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Введите имя студента"}),t.jsx("button",{onClick:()=>ce(c.resource),disabled:g,className:"mt-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:g?"Бронирую...":"Забронировать слот"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Ученик:"}),t.jsx("p",{className:"text-xs text-gray-900",children:c.studentName})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Статус:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.status})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Формат:"}),t.jsx("p",{className:"text-xs text-gray-900 capitalize",children:c.format})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Цена:"}),t.jsxs("p",{className:"text-xs text-gray-900",children:[c.price," ₽"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Время:"}),t.jsxs("p",{className:"text-gray-900 text-xs",children:[Re(c.start,"HH:mm")," - ",Re(c.end,"HH:mm")]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-medium text-gray-500",children:"Дата:"}),t.jsx("p",{className:"text-gray-900 text-xs",children:Re(c.start,"dd MMMM yyyy",{locale:ct})})]})]}),t.jsx("div",{className:"mt-4 flex justify-end",children:t.jsx("button",{onClick:me,className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Закрыть"})})]})}),j&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-4 transform transition-all duration-300 scale-100",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Создать новый слот"}),t.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Предмет *"}),t.jsx("input",{type:"text",value:f.subject,onChange:Q=>C({...f,subject:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"Например: Математика",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время начала"}),t.jsx("input",{type:"time",value:f.startTime,onChange:Q=>C({...f,startTime:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Время окончания"}),t.jsx("input",{type:"time",value:f.endTime,onChange:Q=>C({...f,endTime:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Тип урока"}),t.jsxs("select",{value:f.lessonType,onChange:Q=>C({...f,lessonType:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"regular",children:"Обычный"}),t.jsx("option",{value:"trial",children:"Пробный"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Формат"}),t.jsxs("select",{value:f.format,onChange:Q=>C({...f,format:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"online",children:"Онлайн"}),t.jsx("option",{value:"offline",children:"Офлайн"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Цена (₽)"}),t.jsx("input",{type:"number",value:f.price,onChange:Q=>C({...f,price:parseInt(Q.target.value)||0}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",placeholder:"1000",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Опыт"}),t.jsxs("select",{value:f.experience,onChange:Q=>C({...f,experience:Q.target.value}),className:"w-full border border-gray-300 rounded-md shadow-sm p-1.5 text-xs",children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"experienced",children:"Опытный"})]})]})]}),t.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-xs",children:"Отмена"}),t.jsx("button",{onClick:xe,disabled:p||!f.subject.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:p?"Создаю...":"Создать слот"})]})]})}),e==="assign"&&r&&E&&!E.isBooked&&t.jsx("button",{onClick:()=>De(E),disabled:M,style:{marginTop:12,padding:"6px 16px",fontSize:14},children:M?"Назначение...":`Забронировать для ${r.name}`}),G&&t.jsx("div",{style:{color:"green",marginTop:8,fontSize:14},children:G})]})},A3={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},R3={background:"#fff",borderRadius:12,boxShadow:"0 2px 16px rgba(0,0,0,0.15)",padding:24,minWidth:320,maxHeight:"90vh",overflowY:"auto",position:"relative"},I3={position:"absolute",top:12,right:16,fontSize:24,background:"none",border:"none",cursor:"pointer",color:"#888"},dr=({open:e,onClose:r,children:s,style:a})=>e?t.jsx("div",{style:A3,onClick:r,children:t.jsxs("div",{style:{...R3,...a},onClick:n=>n.stopPropagation(),children:[t.jsx("button",{style:I3,onClick:r,"aria-label":"Закрыть",children:"×"}),s]})}):null,Jn=({onSubmit:e,onCancel:r,initialText:s="",isEditing:a=!1,userName:n="U",userAvatar:i})=>{const[o,l]=N.useState(s),[c,d]=N.useState([]),[m,x]=N.useState([]),u=N.useRef(null),b=y=>{const f=Array.from(y.target.files||[]);if(f.length===0)return;const C=[...c,...f];d(C);const p=f.map(k=>URL.createObjectURL(k));x([...m,...p]),u.current&&(u.current.value="")},g=y=>{const f=c.filter((p,k)=>k!==y),C=m.filter((p,k)=>k!==y);d(f),x(C)},h=()=>{if(!o.trim()&&c.length===0)return;const y=c.length>0?c.some(C=>C.type.startsWith("video/"))?"video":"image":"text",f={text:o.trim(),media:c,type:y};e(f),m.forEach(C=>URL.revokeObjectURL(C))},j=!o.trim()&&c.length===0;return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center overflow-hidden",children:i?t.jsx("img",{src:i,alt:n,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:n.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("textarea",{value:o,onChange:y=>l(y.target.value),placeholder:a?"Редактировать запись...":"Что нового?",className:"w-full border-none resize-none focus:ring-0 text-gray-900 placeholder-gray-500",rows:3}),m.length>0&&t.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:m.map((y,f)=>{var C;return t.jsxs("div",{className:"relative group",children:[(C=c[f])!=null&&C.type.startsWith("video/")?t.jsx("video",{src:y,className:"w-full h-24 object-cover rounded-lg",controls:!0}):t.jsx("img",{src:y,alt:"Preview",className:"w-full h-24 object-cover rounded-lg"}),t.jsx("button",{onClick:()=>g(f),className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Qe,{className:"w-3 h-3"})})]},f)})}),t.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>{var y;return(y=u.current)==null?void 0:y.click()},className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",title:"Добавить фото или видео",children:t.jsx(Ma,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-500 transition-colors",children:t.jsx(rn,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Отмена"}),t.jsx("button",{onClick:h,disabled:j,className:`px-4 py-2 rounded-lg font-medium transition-colors ${j?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:a?"Сохранить":"Опубликовать"})]})]})]})]}),t.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*,video/*",onChange:b,className:"hidden"})]})},Qa=({post:e,onReaction:r,onComment:s,onShare:a,onBookmark:n,onEdit:i,onDelete:o})=>{const[l,c]=N.useState(!1),[d,m]=N.useState(""),[x,u]=N.useState(!1),[b,g]=N.useState(!1),h=p=>{r(e.id,p),g(!1)},j=()=>{d.trim()&&(s(e.id,d.trim()),m(""))},y=p=>{i&&(i(e.id,p),u(!1))},f=()=>{o&&o(e.id)},C=p=>{const k=new Date(p),L=Math.floor((new Date().getTime()-k.getTime())/(1e3*60*60));return L<1?"только что":L<24?`${L}ч назад`:L<48?"вчера":k.toLocaleDateString("ru-RU")};return e.reactions.reduce((p,k)=>p+k.count,0),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-4",children:[t.jsx("div",{className:"p-4 pb-2",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:e.userAvatar?t.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full rounded-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:e.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.userName}),t.jsx("div",{className:"text-sm text-gray-500",children:C(e.date)})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(al,{className:"w-5 h-5"})}),t.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10",children:[i&&t.jsx("button",{onClick:()=>u(!0),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50",children:"Редактировать"}),o&&t.jsx("button",{onClick:f,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Удалить"})]})]})]})}),x&&i&&t.jsx("div",{className:"px-4 pb-4",children:t.jsx(Jn,{onSubmit:({text:p})=>y(p),onCancel:()=>u(!1),initialText:e.text,isEditing:!0})}),!x&&t.jsxs(t.Fragment,{children:[e.text&&t.jsxs("div",{className:"px-4 pb-3",children:[t.jsx("p",{className:"text-gray-900 whitespace-pre-line",children:e.text}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:e.tags.map(p=>t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 font-medium",children:["#",p]},p))})]}),e.media&&e.media.length>0&&t.jsx("div",{className:"px-4 pb-3",children:e.type==="video"?t.jsxs("div",{className:"relative",children:[t.jsx("video",{src:e.media[0],className:"w-full rounded-lg",controls:!0}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(Wd,{className:"w-12 h-12 text-white opacity-80"})})]}):t.jsx("div",{className:`grid gap-2 ${e.media.length===1?"grid-cols-1":e.media.length===2?"grid-cols-2":"grid-cols-3"}`,children:e.media.map((p,k)=>t.jsx("div",{className:"relative aspect-square",children:t.jsx("img",{src:p,alt:"Post media",className:"w-full h-full object-cover rounded-lg"})},k))})}),(e.likes&&e.likes>0||e.comments.length>0||e.views&&e.views>0)&&t.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[e.likes&&e.likes>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ut,{className:"w-4 h-4 text-red-500 fill-current"}),t.jsx("span",{children:e.likes})]}),e.comments.length>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Me,{className:"w-4 h-4 text-blue-500"}),t.jsx("span",{children:e.comments.length})]}),e.views&&e.views>0&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(mr,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{children:e.views})]})]}),e.editedAt&&t.jsx("span",{className:"text-xs text-gray-400",children:"ред."})]})}),t.jsx("div",{className:"px-4 py-2 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>g(!b),className:`flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ${e.reactions.some(p=>p.userReacted)?"text-red-500 bg-red-50":"text-gray-500 hover:bg-gray-50"}`,children:[t.jsx(ut,{className:`w-5 h-5 ${e.reactions.some(p=>p.userReacted)?"fill-current":""}`}),t.jsx("span",{className:"text-sm",children:"Нравится"})]}),b&&t.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>h("like"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Нравится",children:t.jsx(ll,{className:"w-6 h-6 text-blue-500"})}),t.jsx("button",{onClick:()=>h("love"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Любовь",children:t.jsx(ut,{className:"w-6 h-6 text-red-500"})}),t.jsx("button",{onClick:()=>h("smile"),className:"p-2 hover:bg-gray-50 rounded-full transition-colors",title:"Улыбка",children:t.jsx(rn,{className:"w-6 h-6 text-yellow-500"})})]})]}),t.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[t.jsx(Me,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm",children:"Комментировать"})]}),t.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center space-x-1 px-3 py-1 rounded-full text-gray-500 hover:bg-gray-50 transition-colors",children:[t.jsx(Bd,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm",children:"Поделиться"})]})]}),t.jsx("button",{onClick:()=>n(e.id),className:`p-2 rounded-full transition-colors ${e.isBookmarked?"text-blue-500 bg-blue-50":"text-gray-500 hover:bg-gray-50"}`,children:t.jsx(Hs,{className:`w-5 h-5 ${e.isBookmarked?"fill-current":""}`})})]})}),l&&t.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:[t.jsx("div",{className:"space-y-3 mb-3",children:e.comments.map(p=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:p.userAvatar?t.jsx("img",{src:p.userAvatar,alt:p.userName,className:"w-full h-full rounded-full object-cover"}):t.jsx("span",{className:"text-white text-xs font-medium",children:p.userName.charAt(0).toUpperCase()})}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"bg-white rounded-lg p-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-gray-900",children:p.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:C(p.date)})]}),t.jsx("p",{className:"text-sm text-gray-800",children:p.text})]})})]},p.id))}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs font-medium",children:"U"})}),t.jsxs("div",{className:"flex-1 flex items-center space-x-2 bg-white rounded-full px-3 py-2",children:[t.jsx("input",{type:"text",value:d,onChange:p=>m(p.target.value),placeholder:"Написать комментарий...",className:"flex-1 border-none outline-none text-sm",onKeyPress:p=>p.key==="Enter"&&j()}),t.jsx("button",{onClick:j,disabled:!d.trim(),className:`p-1 rounded-full transition-colors ${d.trim()?"text-blue-500 hover:bg-blue-50":"text-gray-400"}`,children:t.jsx(nl,{className:"w-4 h-4"})})]})]})]})]})]})},L3=({onSearchResults:e,onClose:r,className:s=""})=>{var R;const{posts:a,searchPosts:n}=rt(),[i,o]=N.useState(""),[l,c]=N.useState([]),[d,m]=N.useState("all"),[x,u]=N.useState(""),[b,g]=N.useState(""),[h,j]=N.useState(""),[y,f]=N.useState("date"),[C,p]=N.useState(!1),[k,E]=N.useState([]),[L,M]=N.useState(!1),B=N.useRef(),G=Array.from(new Set(a.flatMap(D=>D.tags||[]))).sort(),A=Array.from(new Set(a.map(D=>({id:D.userId,name:D.userName})))).filter((D,U,V)=>U===V.findIndex(T=>T.id===D.id)),K=()=>{M(!0);const D={query:i.trim()||void 0,tags:l.length>0?l:void 0,userId:x||void 0,dateFrom:b||void 0,dateTo:h||void 0,type:d==="all"?void 0:d,limit:50};let U=[...a];if(D.query){const V=D.query.toLowerCase();U=U.filter(T=>T.text.toLowerCase().includes(V)||T.userName.toLowerCase().includes(V))}D.tags&&D.tags.length>0&&(U=U.filter(V=>V.tags&&D.tags.some(T=>V.tags.includes(T)))),D.userId&&(U=U.filter(V=>V.userId===D.userId)),D.type&&(U=U.filter(V=>V.type===D.type)),D.dateFrom&&(U=U.filter(V=>V.date>=D.dateFrom)),D.dateTo&&(U=U.filter(V=>V.date<=D.dateTo)),U.sort((V,T)=>{switch(y){case"likes":return(T.likes||0)-(V.likes||0);case"comments":return T.comments.length-V.comments.length;case"views":return(T.views||0)-(V.views||0);case"date":default:return new Date(T.date).getTime()-new Date(V.date).getTime()}}),E(U),M(!1),e&&e(U),n(D)};N.useEffect(()=>(B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{i.trim()||l.length>0||x||d!=="all"||b||h?K():(E([]),e&&e([]))},300),()=>{B.current&&clearTimeout(B.current)}),[i,l,x,d,b,h,y]);const Y=()=>{o(""),c([]),u(""),m("all"),g(""),j(""),f("date"),E([]),e&&e([])},ae=D=>{c(U=>U.includes(D)?U.filter(V=>V!==D):[...U,D])},ie=D=>{const U=new Date(D),T=Math.floor((new Date().getTime()-U.getTime())/(1e3*60*60));return T<1?"только что":T<24?`${T}ч назад`:T<48?"вчера":U.toLocaleDateString("ru-RU")};return t.jsxs("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200 ${s}`,children:[t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Поиск записей"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>p(!C),className:`p-2 rounded-full transition-colors ${C?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,title:"Фильтры",children:t.jsx(en,{className:"w-5 h-5"})}),t.jsx("button",{onClick:Y,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Очистить поиск",children:t.jsx(Qe,{className:"w-5 h-5"})}),r&&t.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Закрыть",children:t.jsx(Qe,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"mt-4 relative",children:[t.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",value:i,onChange:D=>o(D.target.value),placeholder:"Поиск по записям...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),L&&t.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),(l.length>0||x||d!=="all"||b||h)&&t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[l.map(D=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700",children:[t.jsx(Od,{className:"w-3 h-3 mr-1"}),D,t.jsx("button",{onClick:()=>ae(D),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:t.jsx(Qe,{className:"w-3 h-3"})})]},D)),x&&t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-700",children:[t.jsx(be,{className:"w-3 h-3 mr-1"}),((R=A.find(D=>D.id===x))==null?void 0:R.name)||x,t.jsx("button",{onClick:()=>u(""),className:"ml-2 hover:bg-green-200 rounded-full p-0.5",children:t.jsx(Qe,{className:"w-3 h-3"})})]}),d!=="all"&&t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-700",children:[d==="text"&&t.jsx(Jt,{className:"w-3 h-3 mr-1"}),d==="image"&&t.jsx(Ma,{className:"w-3 h-3 mr-1"}),d==="video"&&t.jsx(Tt,{className:"w-3 h-3 mr-1"}),d==="text"?"Текст":d==="image"?"Изображения":"Видео",t.jsx("button",{onClick:()=>m("all"),className:"ml-2 hover:bg-purple-200 rounded-full p-0.5",children:t.jsx(Qe,{className:"w-3 h-3"})})]})]})]}),C&&t.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Тип контента"}),t.jsxs("select",{value:d,onChange:D=>m(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"all",children:"Все типы"}),t.jsx("option",{value:"text",children:"Только текст"}),t.jsx("option",{value:"image",children:"С изображениями"}),t.jsx("option",{value:"video",children:"С видео"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Автор"}),t.jsxs("select",{value:x,onChange:D=>u(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Все авторы"}),A.map(D=>t.jsx("option",{value:D.id,children:D.name},D.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сортировка"}),t.jsxs("select",{value:y,onChange:D=>f(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"date",children:"По дате"}),t.jsx("option",{value:"likes",children:"По лайкам"}),t.jsx("option",{value:"comments",children:"По комментариям"}),t.jsx("option",{value:"views",children:"По просмотрам"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата от"}),t.jsx("input",{type:"date",value:b,onChange:D=>g(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дата до"}),t.jsx("input",{type:"date",value:h,onChange:D=>j(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),G.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Популярные теги"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:G.slice(0,10).map(D=>t.jsxs("button",{onClick:()=>ae(D),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${l.includes(D)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["#",D]},D))})]})]}),k.length>0&&t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Найдено ",k.length," записей"]})}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:k.map(D=>t.jsx("div",{className:"p-3 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors cursor-pointer",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center flex-shrink-0",children:D.userAvatar?t.jsx("img",{src:D.userAvatar,alt:D.userName,className:"w-10 h-10 rounded-full object-cover"}):t.jsx("span",{className:"text-white text-sm font-medium",children:D.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-gray-900",children:D.userName}),t.jsx("span",{className:"text-xs text-gray-500",children:ie(D.date)}),D.type!=="text"&&t.jsx("span",{className:"text-xs text-gray-500",children:D.type==="image"?t.jsx(Ma,{className:"w-3 h-3 inline"}):t.jsx(Tt,{className:"w-3 h-3 inline"})})]}),t.jsx("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:D.text}),D.tags&&D.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[D.tags.slice(0,3).map(U=>t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["#",U]},U)),D.tags.length>3&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",D.tags.length-3]})]}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(ut,{className:"w-3 h-3"}),t.jsx("span",{children:D.likes||0})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(Me,{className:"w-3 h-3"}),t.jsx("span",{children:D.comments.length})]}),D.views&&t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(mr,{className:"w-3 h-3"}),t.jsx("span",{children:D.views})]})]})]})]})},D.id))})]}),i.trim()&&k.length===0&&!L&&t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Br,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"По вашему запросу ничего не найдено"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Попробуйте изменить параметры поиска"})]})]})},F3=({className:e=""})=>{const{notifications:r,markNotificationAsRead:s,markAllNotificationsAsRead:a,deleteNotification:n}=rt(),{user:i}=ze(),[o,l]=N.useState(!1),[c,d]=N.useState(!1),[m,x]=N.useState("all"),u=N.useRef(null),b=r.filter(p=>!p.isRead).length;N.useEffect(()=>{const p=k=>{u.current&&!u.current.contains(k.target)&&l(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const g=r.filter(p=>m==="unread"?!p.isRead:m==="read"?p.isRead:!0),h=c?g:g.slice(0,5),j=p=>{switch(p){case"new_post":return t.jsx(Jt,{className:"w-5 h-5 text-blue-500"});case"reaction":return t.jsx(ut,{className:"w-5 h-5 text-red-500"});case"comment":return t.jsx(Me,{className:"w-5 h-5 text-green-500"});case"new_message":return t.jsx(Me,{className:"w-5 h-5 text-blue-500"});case"follow":return t.jsx(sn,{className:"w-5 h-5 text-purple-500"});case"lesson_reminder":return t.jsx(He,{className:"w-5 h-5 text-orange-500"});case"system":return t.jsx(zs,{className:"w-5 h-5 text-gray-500"});default:return t.jsx(Ir,{className:"w-5 h-5 text-gray-500"})}},y=p=>{const k=new Date(p),L=Math.floor((new Date().getTime()-k.getTime())/(1e3*60));return L<1?"только что":L<60?`${L}м назад`:L<1440?`${Math.floor(L/60)}ч назад`:k.toLocaleDateString("ru-RU")},f=()=>{i&&a(i.id)},C=p=>{var k,E;p.isRead||s(p.id),p.type==="new_message"&&((k=p.data)!=null&&k.chatId)?(window.location.href=`#chat-${p.data.chatId}`,l(!1)):(E=p.data)!=null&&E.postId};return t.jsxs("div",{className:`relative ${e}`,ref:u,children:[t.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[t.jsx(Ir,{className:"w-6 h-6 text-gray-600"}),b>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:b>99?"99+":b})]}),o&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-[600px] overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Уведомления"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[b>0&&t.jsx("button",{onClick:f,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Отметить все как прочитанные"}),t.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Qe,{className:"w-4 h-4 text-gray-500"})})]})]}),t.jsx("div",{className:"flex items-center space-x-2 mt-3",children:[{key:"all",label:"Все",count:r.length},{key:"unread",label:"Непрочитанные",count:b},{key:"read",label:"Прочитанные",count:r.length-b}].map(({key:p,label:k,count:E})=>t.jsxs("button",{onClick:()=>x(p),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${m===p?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[k," (",E,")"]},p))})]}),t.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:h.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx(Ir,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsxs("p",{className:"text-gray-500",children:[m==="all"&&"Нет уведомлений",m==="unread"&&"Нет непрочитанных уведомлений",m==="read"&&"Нет прочитанных уведомлений"]})]}):t.jsx("div",{className:"divide-y divide-gray-100",children:h.map(p=>t.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${p.isRead?"":"bg-blue-50"}`,onClick:()=>C(p),children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:j(p.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:y(p.createdAt)})]}),!p.isRead&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})}),t.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1",children:[!p.isRead&&t.jsx("button",{onClick:k=>{k.stopPropagation(),s(p.id)},className:"p-1 rounded-full hover:bg-green-100 transition-colors",title:"Отметить как прочитанное",children:t.jsx(Cd,{className:"w-4 h-4 text-green-600"})}),t.jsx("button",{onClick:k=>{k.stopPropagation(),n(p.id)},className:"p-1 rounded-full hover:bg-red-100 transition-colors",title:"Удалить",children:t.jsx(Hr,{className:"w-4 h-4 text-red-600"})})]})]})},p.id))})}),g.length>5&&t.jsx("div",{className:"p-4 border-t border-gray-100",children:t.jsx("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Ed,{className:"w-4 h-4"}),t.jsx("span",{children:"Показать меньше"})]}):t.jsxs(t.Fragment,{children:[t.jsx($d,{className:"w-4 h-4"}),t.jsxs("span",{children:["Показать все (",g.length,")"]})]})})})]})]})},W3=({posts:e,currentUserId:r,currentUserName:s,currentUserAvatar:a,onCreatePost:n,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m,showCreateButton:x=!0,title:u="Записи",showSearch:b=!0,showNotifications:g=!0,showTrending:h=!0,showBookmarks:j=!0})=>{const[y,f]=N.useState(!1),[C,p]=N.useState(!1),[k,E]=N.useState("all"),[L,M]=N.useState(e),[B,G]=N.useState([]);N.useEffect(()=>{let K=e;k==="my"?K=e.filter(Y=>Y.userId===r):k==="others"?K=e.filter(Y=>Y.userId!==r):k==="trending"?K=[...e].sort((Y,ae)=>{const ie=(Y.likes||0)+Y.comments.length;return(ae.likes||0)+ae.comments.length-ie}).slice(0,20):k==="bookmarks"&&(K=e.filter(Y=>{var ae;return(ae=Y.bookmarks)==null?void 0:ae.includes(r)})),M(K)},[e,k,r]);const A=K=>{n(K),f(!1)};return t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:u}),t.jsxs("div",{className:"flex items-center space-x-2",children:[g&&t.jsx(F3,{className:"mr-2"}),b&&t.jsx("button",{onClick:()=>p(!C),className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Поиск",children:t.jsx(Br,{className:"w-5 h-5"})}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:k,onChange:K=>E(K.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"Все записи"}),t.jsx("option",{value:"my",children:"Мои записи"}),t.jsx("option",{value:"others",children:"Записи других"}),h&&t.jsx("option",{value:"trending",children:"Популярные"}),j&&t.jsx("option",{value:"bookmarks",children:"Закладки"})]}),t.jsx(en,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),x&&t.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Ur,{className:"w-4 h-4"}),t.jsx("span",{children:"Создать запись"})]})]})]}),C&&t.jsx("div",{className:"mb-6",children:t.jsx(L3,{onSearchResults:G,onClose:()=>p(!1)})}),y&&t.jsx("div",{className:"mb-6",children:t.jsx(Jn,{onSubmit:A,onCancel:()=>f(!1),userName:s,userAvatar:a})}),t.jsxs("div",{className:"space-y-4",children:[B.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Результаты поиска (",B.length,")"]}),t.jsx("div",{className:"space-y-4",children:B.map(K=>t.jsx(Qa,{post:K,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m},K.id))})]}),L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsxs("div",{className:"text-gray-400 text-lg mb-2",children:[k==="all"&&"Пока нет записей",k==="my"&&"У вас пока нет записей",k==="others"&&"Пока нет записей от других",k==="trending"&&"Пока нет популярных записей",k==="bookmarks"&&"У вас пока нет закладок"]}),t.jsxs("p",{className:"text-gray-500",children:[k==="my"&&x&&"Создайте первую запись!",k==="others"&&"Записи от других пользователей появятся здесь",k==="trending"&&"Популярные записи появятся здесь",k==="bookmarks"&&"Добавляйте записи в закладки!"]})]}):L.map(K=>t.jsx(Qa,{post:K,currentUserId:r,onReaction:i,onComment:o,onShare:l,onBookmark:c,onEdit:d,onDelete:m},K.id))]})]})},U3=({userId:e,onClose:r,onMessage:s,onBookLesson:a,isModal:n=!1})=>{const{user:i}=ze(),{posts:o,createPost:l,addReaction:c,addComment:d,sharePost:m,bookmarkPost:x,editPost:u,deletePost:b,allUsers:g}=rt(),[h,j]=N.useState(!1),[y,f]=N.useState(!1),[C,p]=N.useState(!1),[k,E]=N.useState("posts"),L=g.find(ie=>ie.id===e),M=(i==null?void 0:i.id)===e,B=(L==null?void 0:L.role)==="teacher",G=o.filter(ie=>ie.userId===e),A=L==null?void 0:L.profile,K=ie=>{switch(ie){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return ie}},Y=ie=>{switch(ie){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return ie}};if(!L)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(be,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пользователь не найден"}),t.jsx("p",{className:"text-gray-500",children:"Пользователь с таким ID не существует"})]})});const ae=()=>{var ie;return t.jsx("div",{className:`${n?"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4":""}`,children:t.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-y-auto relative ${n?"":"border border-gray-200"}`,children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-3xl z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[r&&t.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:t.jsx(Za,{className:"w-6 h-6 text-gray-600"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!M&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>f(!y),className:`p-2 rounded-full transition-colors ${y?"text-blue-500 bg-blue-50":"text-gray-400 hover:text-blue-500"}`,children:t.jsx(Hs,{className:`w-5 h-5 ${y?"fill-current":""}`})}),t.jsx("button",{onClick:()=>j(!h),className:`p-2 rounded-full transition-colors ${h?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500"}`,children:t.jsx(ut,{className:`w-5 h-5 ${h?"fill-current":""}`})})]}),t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ft,{className:"w-5 h-5"})}),M&&t.jsx("button",{className:"p-2 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(zs,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsxs("div",{className:"h-56 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-3xl relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/20 to-transparent"}),t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),t.jsx("div",{className:"absolute bottom-6 left-8 right-8",children:t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsxs("div",{className:"text-white flex-1 mr-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-3 leading-tight",children:(A==null?void 0:A.name)||L.name||"Пользователь"}),t.jsxs("div",{className:"flex items-center space-x-4 flex-wrap",children:[B&&(A==null?void 0:A.experience)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(Lt,{className:"h-4 w-4 text-yellow-300"}),t.jsx("span",{className:"font-semibold text-xs",children:K(A.experience)})]}),(A==null?void 0:A.rating)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(wt,{className:"h-4 w-4 text-yellow-300 fill-current"}),t.jsx("span",{className:"font-semibold text-xs",children:A.rating})]}),(A==null?void 0:A.city)&&t.jsxs("div",{className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white/30",children:[t.jsx(jt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-semibold text-xs",children:A.city})]})]})]}),t.jsxs("div",{className:"text-right text-white/90 flex-shrink-0",children:[t.jsx("div",{className:"text-2xl font-bold mb-1",children:G.length}),t.jsx("div",{className:"text-sm opacity-80",children:"записей"})]})]})})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start mt-8",children:[t.jsxs("div",{className:"flex-shrink-0 -mt-12 ml-8 relative",children:[t.jsxs("div",{className:"w-36 h-36 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden border-6 border-white shadow-2xl relative",children:[t.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-green-500 border-3 border-white rounded-full shadow-lg"}),A!=null&&A.avatar&&A.avatar.trim()!==""?t.jsx("img",{src:A.avatar,alt:L.name,className:"w-36 h-36 object-cover rounded-full",onError:R=>{var U;const D=R.target;D.style.display="none",(U=D.nextElementSibling)==null||U.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-36 h-36 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center ${A!=null&&A.avatar&&A.avatar.trim()!==""?"hidden":""}`,children:t.jsx(be,{className:"h-20 w-20 text-white"})})]}),!M&&t.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-2",children:[t.jsx("button",{onClick:()=>j(!h),className:`w-10 h-10 rounded-full flex items-center justify-center shadow-lg transition-all duration-200 ${h?"bg-red-500 text-white scale-110":"bg-white text-gray-600 hover:bg-red-50 hover:text-red-500"}`,children:t.jsx(ut,{className:`w-5 h-5 ${h?"fill-current":""}`})}),t.jsx("button",{className:"w-10 h-10 rounded-full bg-white text-gray-600 hover:bg-gray-50 shadow-lg transition-all duration-200 flex items-center justify-center",children:t.jsx(Ft,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 flex flex-wrap gap-4 mt-12 lg:mt-0",children:[!M&&t.jsxs(t.Fragment,{children:[B&&a&&t.jsxs("button",{onClick:()=>a(L.id),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Ie,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Записаться на урок"})]}),s&&t.jsxs("button",{onClick:()=>s(L.id),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-2xl font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Me,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Написать сообщение"})]}),t.jsxs("button",{onClick:()=>p(!C),className:"border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-2xl font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center space-x-2 transform hover:-translate-y-1",children:[t.jsx(mr,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Контактная информация"})]})]}),M&&t.jsxs("button",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-2xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(il,{className:"h-6 w-6"}),t.jsx("span",{className:"text-lg",children:"Редактировать профиль"})]})]})]})]}),C&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-8 mt-8 border border-blue-200",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Контактная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[L.phone&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(hr,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:L.phone})]}),L.email&&t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white rounded-lg border border-blue-200",children:[t.jsx(tn,{className:"h-5 w-5 text-blue-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:L.email})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6 mt-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:G.length}),t.jsx("div",{className:"text-blue-100 text-xs",children:"Записей"})]}),B&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(A==null?void 0:A.lessonsCount)||0}),t.jsx("div",{className:"text-green-100 text-xs",children:"Проведено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:((ie=A==null?void 0:A.students)==null?void 0:ie.length)||0}),t.jsx("div",{className:"text-purple-100 text-xs",children:"Учеников"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:(A==null?void 0:A.rating)||0}),t.jsx("div",{className:"text-orange-100 text-xs",children:"Рейтинг"})]})]}),!B&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-green-100 text-xs",children:"Посещено уроков"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-purple-100 text-xs",children:"Преподавателей"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-700 text-white rounded-lg p-3 text-center shadow-md",children:[t.jsx("div",{className:"text-xl font-bold mb-1",children:"0"}),t.jsx("div",{className:"text-orange-100 text-xs",children:"Дней в системе"})]})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-8 mt-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"posts",label:"Записи",count:G.length},{id:"about",label:"О пользователе",count:null},{id:"lessons",label:B?"Расписание":"Мои уроки",count:0},{id:"reviews",label:"Отзывы",count:0}].map(R=>t.jsxs("button",{onClick:()=>E(R.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${k===R.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[R.label,R.count!==null&&t.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs",children:R.count})]},R.id))})}),t.jsxs("div",{className:"min-h-[400px]",children:[k==="posts"&&t.jsx("div",{className:"space-y-6",children:t.jsx(W3,{posts:G,currentUserId:(i==null?void 0:i.id)||"",currentUserName:(i==null?void 0:i.name)||"",currentUserAvatar:i==null?void 0:i.avatar,onCreatePost:l,onReaction:c,onComment:d,onShare:m,onBookmark:x,onEdit:u,onDelete:b,showCreateButton:M,title:`Записи ${(A==null?void 0:A.name)||L.name}`,showSearch:!0,showNotifications:!1,showTrending:!1,showBookmarks:!0})}),k==="about"&&t.jsxs("div",{className:"space-y-3",children:[(A==null?void 0:A.bio)&&t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-indigo-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"О пользователе"]}),t.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-md p-2 border border-indigo-200/50",children:t.jsx("p",{className:"text-indigo-800 leading-relaxed whitespace-pre-line text-xs",children:A.bio})})]}),B&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[(A==null?void 0:A.subjects)&&A.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Предметы"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.subjects.map((R,D)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:R},D))})]}),(A==null?void 0:A.grades)&&A.grades.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Классы"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.grades.map((R,D)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-0.5 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:R},D))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2.5",children:[(A==null?void 0:A.hourlyRate)&&t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border border-purple-200 rounded-lg p-2.5 text-center shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-purple-900 mb-1.5 flex items-center justify-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-purple-500 to-violet-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Стоимость"]}),t.jsxs("div",{className:"text-base font-bold text-purple-700 bg-white/60 backdrop-blur-sm rounded-md py-1 px-1.5 border border-purple-200/50",children:[A.hourlyRate," ₽/час"]})]}),(A==null?void 0:A.formats)&&A.formats.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-orange-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-orange-500 to-amber-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Форматы"]}),t.jsx("div",{className:"space-y-1",children:A.formats.map((R,D)=>t.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-orange-200/50",children:[t.jsx(Wt,{className:"h-3 w-3 text-orange-600"}),t.jsx("span",{className:"text-orange-800 text-xs font-medium",children:Y(R)})]},D))})]}),(A==null?void 0:A.durations)&&A.durations.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 border border-cyan-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-cyan-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-cyan-500 to-blue-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Длительность"]}),t.jsx("div",{className:"space-y-1",children:A.durations.map((R,D)=>t.jsxs("div",{className:"flex items-center space-x-1.5 p-1 bg-white/60 backdrop-blur-sm rounded border border-cyan-200/50",children:[t.jsx(Wt,{className:"h-3 w-3 text-cyan-600"}),t.jsxs("span",{className:"text-cyan-800 text-xs font-medium",children:[R," минут"]})]},D))})]})]})]}),!B&&A&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:[A.subjects&&A.subjects.length>0&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-blue-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Интересуется предметами"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:A.subjects.map((R,D)=>t.jsx("span",{className:"bg-white/80 backdrop-blur-sm text-blue-800 px-2 py-0.5 rounded-md text-xs font-medium border border-blue-200/50 shadow-sm",children:R},D))})]}),A.grade&&t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-2.5 shadow-sm",children:[t.jsxs("h3",{className:"text-sm font-bold text-emerald-900 mb-1.5 flex items-center",children:[t.jsx("div",{className:"w-4 h-4 bg-gradient-to-br from-emerald-500 to-teal-600 rounded flex items-center justify-center mr-1.5",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})}),"Класс"]}),t.jsx("div",{className:"bg-white/80 backdrop-blur-sm text-emerald-800 px-2 py-1 rounded-md text-xs font-medium border border-emerald-200/50 shadow-sm",children:A.grade})]})]})]}),k==="lessons"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(He,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:B?"Расписание пока не настроено":"Уроки пока не запланированы"}),t.jsx("p",{className:"text-gray-500",children:B?"Настройте расписание для проведения уроков":"Запишитесь на уроки к преподавателям"})]}),k==="reviews"&&t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(wt,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Пока нет отзывов"}),t.jsx("p",{className:"text-gray-500",children:"Отзывы о пользователе появятся здесь"})]})]})]})]})})};return n?t.jsx(ae,{}):t.jsx(ae,{})},B3=()=>{const{lessons:e,studentProfiles:r,createSlot:s,bookLesson:a}=rt(),{user:n}=ze(),[i,o]=N.useState(),[l,c]=N.useState(!1),[d,m]=N.useState(!1),[x,u]=N.useState(null),[b,g]=N.useState({subject:"",date:"",startTime:"",endTime:"",duration:60,lessonType:"regular",format:"online",price:1e3,experience:"beginner",grades:[],goals:[]}),[h,j]=N.useState(!1),[y,f]=N.useState(""),[C,p]=N.useState(!1),[k,E]=N.useState(null),[L,M]=N.useState(null),B=e.filter(U=>U.teacherId===(n==null?void 0:n.id)),G={};B.forEach(U=>{G[U.studentId]||(G[U.studentId]={studentName:U.studentName,studentId:U.studentId,lessons:[]}),G[U.studentId].lessons.push(U)});const A=Object.values(G),K=(U,V)=>{alert(`Чат с ${V} открыт! Перейдите в раздел 'Чаты' для общения.`)},Y=U=>{o(U),c(!0)},ae=()=>{c(!1),o(null)},ie=U=>{E(U),p(!0)},R=async()=>{if(!(!n||!x)){j(!0),f("");try{await s({...b,teacherId:n.id,teacherName:n.name},x.id,x.name,{mode:"assign"}),m(!1)}catch{f("Ошибка при создании или бронировании слота")}finally{j(!1)}}},D=i?r[i.studentId]:void 0;return t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ученики"}),t.jsx("p",{className:"text-gray-600",children:"Здесь отображаются все ученики, которые бронировали у вас уроки, и история ваших занятий с ними"})]}),A.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(be,{className:"h-6 w-6 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Пока нет учеников"}),t.jsx("p",{className:"text-gray-600",children:"Ученики появятся здесь после бронирования уроков"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(U=>t.jsx("div",{className:"card-gradient hover:shadow-lg transition-shadow duration-200 overflow-hidden cursor-pointer",onClick:()=>Y(U),children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:t.jsx(be,{className:"h-6 w-6 text-white"})}),t.jsx("div",{children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:U.studentName})}),t.jsxs("div",{className:"ml-auto flex items-center space-x-1",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Просмотреть записи",onClick:V=>{V.stopPropagation(),M(U.studentId)},children:t.jsx(Jt,{className:"h-5 w-5"})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600",title:"Подробнее о профиле",onClick:V=>{V.stopPropagation(),Y(U)},children:t.jsx(_d,{className:"h-5 w-5"})})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-md font-bold text-gray-800 mb-2 flex items-center",children:[t.jsx(He,{className:"h-4 w-4 mr-1 text-blue-500"}),"Забронированные уроки"]}),U.lessons.length===0?t.jsx("div",{className:"text-gray-500 text-sm",children:"Нет уроков"}):t.jsx("ul",{className:"space-y-2",children:U.lessons.map(V=>t.jsxs("li",{className:"flex items-center justify-between bg-gray-50 rounded px-3 py-2",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:V.subject}),t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:[V.date," ",V.startTime,"-",V.endTime]}),t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",V.status==="completed"?"Завершен":"Запланирован",")"]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{onClick:T=>{T.stopPropagation(),K(U.studentId,U.studentName)},className:"p-1 text-blue-600 hover:bg-blue-50 rounded-full",title:"Чат с учеником",children:t.jsx(Me,{className:"h-4 w-4"})})})]},V.id))})]})]})},U.studentId))}),l&&i&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:ae,title:"Закрыть",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"flex flex-col items-center mb-6",children:[D!=null&&D.avatar&&D.avatar.trim()!==""?t.jsx("img",{src:D.avatar,alt:"avatar",className:"w-20 h-20 rounded-full object-cover mb-2",onError:U=>{var T;const V=U.target;V.style.display="none",(T=V.nextElementSibling)==null||T.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-20 h-20 rounded-full bg-gradient-to-r from-blue-400 to-indigo-500 flex items-center justify-center mb-2 ${D!=null&&D.avatar&&D.avatar.trim()!==""?"hidden":""}`,children:t.jsx(be,{className:"h-10 w-10 text-white"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.studentName})]}),t.jsxs("div",{className:"space-y-2",children:[(D==null?void 0:D.grade)&&t.jsxs("div",{className:"flex items-center text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"Класс:"})," ",D.grade]}),(D==null?void 0:D.subjects)&&D.subjects.length>0&&t.jsxs("div",{className:"flex items-center text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"Предметы:"})," ",D.subjects.join(", ")]}),(D==null?void 0:D.bio)&&t.jsxs("div",{className:"text-gray-700",children:[t.jsx("span",{className:"font-semibold mr-2",children:"О себе:"})," ",D.bio]}),!D&&t.jsx("div",{className:"text-gray-400 text-sm",children:"Профиль не заполнен"}),t.jsx("button",{onClick:()=>ie({id:i.studentId,name:i.studentName}),className:"btn btn-primary mt-4",children:"Назначить урок"})]})]})}),d&&x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative",children:[t.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-700",onClick:()=>m(!1),title:"Закрыть",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("h3",{children:["Назначить урок для ",x.name]}),t.jsxs("form",{className:"flex flex-col gap-2",children:[t.jsx("input",{type:"text",placeholder:"Предмет",value:b.subject,onChange:U=>g({...b,subject:U.target.value}),required:!0}),t.jsx("input",{type:"date",value:b.date,onChange:U=>g({...b,date:U.target.value}),required:!0}),t.jsx("input",{type:"time",value:b.startTime,onChange:U=>g({...b,startTime:U.target.value}),required:!0}),t.jsx("input",{type:"time",value:b.endTime,onChange:U=>g({...b,endTime:U.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Цена",value:b.price,onChange:U=>g({...b,price:Number(U.target.value)})}),t.jsxs("select",{value:b.lessonType,onChange:U=>g({...b,lessonType:U.target.value}),children:[t.jsx("option",{value:"regular",children:"Обычный"}),t.jsx("option",{value:"trial",children:"Пробный"})]}),t.jsxs("select",{value:b.format,onChange:U=>g({...b,format:U.target.value}),children:[t.jsx("option",{value:"online",children:"Онлайн"}),t.jsx("option",{value:"offline",children:"Оффлайн"})]}),t.jsxs("select",{value:b.experience,onChange:U=>g({...b,experience:U.target.value}),children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"experienced",children:"Опытный"})]}),y&&t.jsx("div",{className:"text-red-500",children:y}),t.jsx("button",{type:"button",className:"btn btn-success mt-2",onClick:R,disabled:h,children:h?"Назначение...":"Назначить"})]})]})}),C&&k&&t.jsx(dr,{open:C,onClose:()=>p(!1),children:t.jsxs("div",{style:{minWidth:1100,minHeight:600,maxWidth:"98vw"},children:[t.jsxs("h2",{style:{marginBottom:16},children:["Назначить урок для ",k.name]}),t.jsx(ed,{mode:"assign",student:k,onAssign:()=>p(!1)})]})}),L&&t.jsx(U3,{userId:L,onClose:()=>M(null),onMessage:U=>{M(null)},onBookLesson:U=>{M(null)},isModal:!0})]})},H3=()=>{const{lessons:e,cancelLesson:r,rescheduleLesson:s,getOrCreateChat:a}=rt(),{user:n}=ze(),[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,m]=N.useState(""),[x,u]=N.useState(""),b=e.filter(M=>M.studentId===(n==null?void 0:n.id)),g=b.filter(M=>M.status==="scheduled"),h=b.filter(M=>M.status==="completed"),j=(M,B)=>{n&&a(n.id,M,n.name,B)},y=M=>{window.confirm("Вы уверены, что хотите отменить урок?")&&r(M)},f=()=>{l&&d&&x&&(s(l.id,d,x),o(!1),c(null),m(""),u(""))},C=M=>{c(M),m(M.date),u(M.startTime),o(!0)},p=M=>{switch(M){case"online":return t.jsx(Tt,{className:"h-5 w-5"});case"offline":return t.jsx(jt,{className:"h-5 w-5"});case"mini-group":return t.jsx(sn,{className:"h-5 w-5"});default:return t.jsx(Tt,{className:"h-5 w-5"})}},k=M=>{switch(M){case"online":return"Онлайн";case"offline":return"Оффлайн";case"mini-group":return"Мини-группа";default:return M}},E=M=>M==="scheduled"?t.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:[t.jsx(Hd,{className:"h-4 w-4 mr-2"}),"Запланирован"]}):t.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-gradient-to-r from-green-500 to-green-600 text-white shadow-sm",children:[t.jsx(Lr,{className:"h-4 w-4 mr-2"}),"Завершен"]}),L=({lesson:M,isScheduled:B})=>t.jsxs("div",{className:"group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-blue-200",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-6 text-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -translate-y-16 translate-x-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white opacity-10 rounded-full translate-y-12 -translate-x-12"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold mb-2",children:M.subject}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(be,{className:"h-5 w-5 text-blue-200"}),t.jsx("span",{className:"text-blue-100 font-medium",children:M.teacherName})]})]}),E(M.status)]}),t.jsxs("div",{className:"flex items-center space-x-3 text-blue-100",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[p(M.format),t.jsx("span",{className:"text-sm font-medium",children:k(M.format)})]}),M.lessonType==="trial"&&t.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-400 bg-opacity-20 px-2 py-1 rounded-full",children:[t.jsx(wt,{className:"h-4 w-4 text-yellow-300"}),t.jsx("span",{className:"text-yellow-200 text-xs font-medium",children:"Пробный"})]})]})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(He,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Дата"}),t.jsx("p",{className:"text-sm font-semibold text-gray-900",children:M.date})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(Wt,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Время"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[M.startTime," - ",M.endTime]})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(zd,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Длительность"}),t.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[M.duration," мин"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Стоимость"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[M.price,"₽"]})]})]}),B&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>j(M.teacherId,M.teacherName),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[t.jsx(Me,{className:"h-5 w-5"}),t.jsx("span",{children:"Чат"})]}),M.format==="online"&&t.jsxs("button",{className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl font-medium hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[t.jsx(Tt,{className:"h-5 w-5"}),t.jsx("span",{children:"Видеозвонок"})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-3 border-t border-gray-100",children:[t.jsxs("button",{onClick:()=>C(M),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2.5 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-xl font-medium transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[t.jsx(il,{className:"h-4 w-4"}),t.jsx("span",{children:"Перенести"})]}),t.jsxs("button",{onClick:()=>y(M.id),className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2.5 text-red-600 bg-red-50 hover:bg-red-100 rounded-xl font-medium transition-all duration-200 border border-red-200 hover:border-red-300",children:[t.jsx(Hr,{className:"h-4 w-4"}),t.jsx("span",{children:"Отменить"})]})]})]}),!B&&t.jsxs("div",{className:"flex items-center justify-center space-x-2 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200",children:[t.jsx(Lr,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{className:"text-green-700 font-medium",children:"Урок успешно завершен"})]})]}),t.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]});return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Мои уроки"}),t.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Управляйте вашими запланированными и завершенными уроками. Отслеживайте прогресс и достигайте новых высот в обучении."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[t.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:t.jsx(He,{className:"h-8 w-8 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.length}),t.jsx("p",{className:"text-gray-600",children:"Запланировано"})]})]})}),t.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:t.jsx(Lr,{className:"h-8 w-8 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.length}),t.jsx("p",{className:"text-gray-600",children:"Завершено"})]})]})}),t.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:t.jsx(cl,{className:"h-8 w-8 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.length}),t.jsx("p",{className:"text-gray-600",children:"Всего уроков"})]})]})})]}),t.jsxs("div",{className:"mb-16",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:t.jsx(He,{className:"h-8 w-8 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Запланированные уроки"}),t.jsx("p",{className:"text-gray-600",children:"Ваши предстоящие занятия"})]})]}),g.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:g.map(M=>t.jsx(L,{lesson:M,isScheduled:!0},M.id))}):t.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-100",children:[t.jsx("div",{className:"mx-auto h-20 w-20 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mb-6",children:t.jsx(He,{className:"h-10 w-10 text-blue-600"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Нет запланированных уроков"}),t.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Забронируйте свой первый урок на главной странице и начните свой путь к знаниям"}),t.jsxs("button",{className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[t.jsx(Vd,{className:"h-5 w-5"}),t.jsx("span",{children:"Забронировать урок"})]})]})]}),t.jsxs("div",{className:"mb-16",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:t.jsx(Lt,{className:"h-8 w-8 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Завершенные уроки"}),t.jsx("p",{className:"text-gray-600",children:"Ваши достижения и пройденный материал"})]})]}),h.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(M=>t.jsx(L,{lesson:M,isScheduled:!1},M.id))}):t.jsxs("div",{className:"text-center py-16 bg-white rounded-2xl shadow-lg border border-gray-100",children:[t.jsx("div",{className:"mx-auto h-20 w-20 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mb-6",children:t.jsx(Lt,{className:"h-10 w-10 text-green-600"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Нет завершенных уроков"}),t.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"После завершения уроков здесь будут отображаться ваши достижения и прогресс"}),t.jsxs("div",{className:"inline-flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium",children:[t.jsx(ol,{className:"h-5 w-5"}),t.jsx("span",{children:"Достижения появятся здесь"})]})]})]}),t.jsx("div",{className:"text-center py-16 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-3xl text-white shadow-2xl",children:t.jsxs("div",{className:"max-w-2xl mx-auto px-6",children:[t.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Готовы к следующему уроку?"}),t.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Продолжайте обучение и достигайте новых высот вместе с нашими преподавателями"}),t.jsxs("button",{className:"inline-flex items-center space-x-3 px-8 py-4 bg-white text-blue-600 rounded-xl font-bold text-lg hover:bg-gray-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[t.jsx(Fd,{className:"h-6 w-6"}),t.jsx("span",{children:"Найти преподавателя"})]})]})})]}),i&&l&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Перенести урок"}),t.jsx("button",{onClick:()=>o(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx(Qe,{className:"h-6 w-6"})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"p-4 bg-blue-50 rounded-xl border border-blue-200",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Урок:"})," ",l.subject," с ",l.teacherName]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новая дата"}),t.jsx("input",{type:"date",value:d,onChange:M=>m(M.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",min:new Date().toISOString().split("T")[0]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Новое время"}),t.jsx("input",{type:"time",value:x,onChange:M=>u(M.target.value),className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),t.jsxs("div",{className:"flex space-x-4 mt-8",children:[t.jsx("button",{onClick:f,disabled:!d||!x,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Перенести урок"}),t.jsx("button",{onClick:()=>o(!1),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:"Отмена"})]})]})})})]})},z3=()=>{const{chats:e,sendMessage:r,allUsers:s,setAllUsers:a,teacherProfiles:n,studentProfiles:i,lessons:o,deleteChat:l,markChatAsRead:c,clearChatMessages:d,archiveChat:m,unarchiveChat:x,getOrCreateChat:u,loadChatsFromServer:b}=rt(),{user:g}=ze(),[h,j]=N.useState(null),[y,f]=N.useState(""),[C,p]=N.useState(""),[k,E]=N.useState(!1),[L,M]=N.useState(null),[B,G]=N.useState([]),[A,K]=N.useState(null),[Y,ae]=N.useState(null),[ie,R]=N.useState(!1),[D,U]=N.useState(!1),[V,T]=N.useState(!1),[me,ce]=N.useState(!1),fe=N.useRef(null),xe=N.useRef(null),{socketRef:De}=rt(),Q=()=>{var P;(P=fe.current)==null||P.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{Q()},[h,e]),N.useEffect(()=>{g&&b()},[g,b]),N.useEffect(()=>{if(e.length>0&&!h){const P=e.find(J=>J.participants.includes((g==null?void 0:g.id)||"")&&!J.archived);P&&j(P.id)}},[e,h,g]),N.useEffect(()=>{var P;if(h&&g){const J=e.find(ue=>ue.id===h);J&&((P=J.messages)!=null&&P.some(he=>he.senderId!==g.id&&!he.isRead))&&c(h)}},[h,e,g,c]);const ge=P=>{let J=s.find(ue=>ue.id===P);if(!J){const ue=n?n[P]:null;ue&&(J={id:P,role:"teacher",profile:ue,avatar:ue.avatar||"",name:ue.name||"",email:ue.email||"",nickname:""});const he=i?i[P]:null;if(!J&&he&&(J={id:P,role:"student",profile:he,avatar:he.avatar||"",name:he.name||"",email:he.email||"",nickname:""}),J){const st=[...s,J];a(st),localStorage.setItem("tutoring_users",JSON.stringify(st))}}return J||null},pe=e.filter(P=>P.participants.includes((g==null?void 0:g.id)||"")).filter(P=>{if(P.archived&&!me||!P.archived&&me)return!1;const J=P.participantNames.find(ue=>ue!==(g==null?void 0:g.name));return J==null?void 0:J.toLowerCase().includes(C.toLowerCase())}),ve=h?e.find(P=>P.id===h):null,Ae=()=>{!y.trim()||!h||!g||(r(h,g.id,g.name,y.trim()),f(""),R(!1))},gt=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),Ae())},Le=P=>P.participantNames.find(J=>J!==(g==null?void 0:g.name))||"Неизвестный пользователь",Fe=P=>P.participants.find(J=>J!==(g==null?void 0:g.id))||"",q=P=>{try{const J=new Date(P);return Go(J)?Re(J,"HH:mm",{locale:ct}):qo(J)?"Вчера":KC(J)?Re(J,"EEEE",{locale:ct}):Re(J,"dd.MM.yyyy",{locale:ct})}catch{return""}},ye=P=>{try{const J=new Date(P);return Go(J)?Re(J,"HH:mm",{locale:ct}):qo(J)?"Вчера":Re(J,"dd.MM",{locale:ct})}catch{return""}},de=P=>{console.log("handleDeleteChat called with chatId:",P),console.log("Current chats in component:",e.length);const J=e.find(he=>he.id===P),ue=J?Le(J):"пользователем";if(confirm(`Вы уверены, что хотите удалить чат с ${ue}? Это действие нельзя отменить.`))try{console.log("User confirmed deletion. Deleting chat:",P),l(P),h===P&&(console.log("Removing selection from deleted chat"),j(null)),K(null),ae(null),setTimeout(()=>{console.log("Forcing state update after chat deletion"),K(null)},100),console.log("Chat deletion process completed")}catch(he){console.error("Error deleting chat:",he),alert("Ошибка при удалении чата. Попробуйте еще раз.")}else console.log("User cancelled chat deletion")},O=P=>{console.log("handleMarkAsRead called with chatId:",P);try{c(P),K(null),console.log("Chat marked as read successfully")}catch(J){console.error("Error marking chat as read:",J),alert("Ошибка при отметке чата как прочитанного.")}},z=P=>{var he;console.log("handleClearMessages called with chatId:",P);const J=e.find(st=>st.id===P),ue=((he=J==null?void 0:J.messages)==null?void 0:he.length)||0;if(ue===0){alert("В этом чате нет сообщений для очистки."),K(null);return}if(confirm(`Вы уверены, что хотите очистить все ${ue} сообщений в этом чате? Это действие нельзя отменить.`))try{console.log("Clearing messages for chat:",P),d(P),K(null),console.log("Messages cleared successfully")}catch(st){console.error("Error clearing messages:",st),alert("Ошибка при очистке сообщений.")}},W=P=>{console.log("handleArchiveChat called with chatId:",P);try{m(P),K(null),h===P&&j(null),console.log("Chat archived successfully")}catch(J){console.error("Error archiving chat:",J),alert("Ошибка при архивировании чата.")}},I=P=>{console.log("handleUnarchiveChat called with chatId:",P);try{x(P),K(null),console.log("Chat unarchived successfully")}catch(J){console.error("Error unarchiving chat:",J),alert("Ошибка при восстановлении чата.")}},w=()=>{alert("Функция создания нового чата будет добавлена в следующем обновлении.")},F=P=>{const J=P.target.files;J&&J.length>0&&console.log("Files to upload:",J),T(!1)},v=P=>{console.log("handleShowProfile called with chatId:",P);try{const J=e.find(ue=>ue.id===P);if(console.log("Found chat:",J),J){const ue=Fe(J);console.log("Other participant ID:",ue),ue?(M(ue),E(!0),console.log("Profile modal opened for user:",ue)):alert("Не удалось определить пользователя для показа профиля.")}else alert("Чат не найден.");K(null)}catch(J){console.error("Error showing profile:",J),alert("Ошибка при открытии профиля пользователя."),K(null)}},$=()=>{e.filter(J=>{var ue;return J.participants.includes((g==null?void 0:g.id)||"")&&!J.archived&&((ue=J.messages)==null?void 0:ue.some(he=>he.senderId!==(g==null?void 0:g.id)&&!he.isRead))}).forEach(J=>{c(J.id)})};N.useEffect(()=>{const P=J=>{const ue=J.target,he=ue.closest('button[onClick*="setShowChatMenu"]'),st=ue.closest(".chat-menu");A&&!he&&!st&&(console.log("Click outside menu detected, closing menu"),K(null))};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[A]);const te=e.filter(P=>{var J;return P.participants.includes((g==null?void 0:g.id)||"")&&!P.archived&&((J=P.messages)==null?void 0:J.some(ue=>ue.senderId!==(g==null?void 0:g.id)&&!ue.isRead))}).length;return t.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Мои чаты"}),t.jsx("p",{className:"text-gray-600 text-sm",children:te>0?`${te} непрочитанных сообщений`:"Общайтесь с преподавателями и учениками"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[te>0&&t.jsx("button",{onClick:$,className:"px-3 py-1 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:"Отметить все как прочитанные"}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(zs,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>ce(!me),className:`px-3 py-1 text-sm rounded-lg transition-colors ${me?"bg-gray-200 text-gray-700":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:me?"Активные":"Архив"}),t.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Создать новый чат",children:t.jsx(Ur,{className:"w-5 h-5"})})]})]})}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[t.jsx("div",{className:"p-4 border-b border-gray-200",children:t.jsxs("div",{className:"relative",children:[t.jsx(Br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Поиск чатов...",value:C,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:pe.length>0?pe.map(P=>{var xs,At;const J=Fe(P),ue=ge(J),he=h===P.id,st=(xs=P.messages)==null?void 0:xs.some(je=>je.senderId!==(g==null?void 0:g.id)&&!je.isRead);return t.jsxs("div",{className:`relative p-4 hover:bg-gray-50 cursor-pointer transition-colors chat-menu ${he?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>j(P.id),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"relative",children:[ue!=null&&ue.avatar?t.jsx("img",{src:ue.avatar,alt:"avatar",className:"h-12 w-12 rounded-full object-cover",onError:je=>{var fa;const or=je.target;or.style.display="none",(fa=or.nextElementSibling)==null||fa.classList.remove("hidden")}}):t.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:Le(P).charAt(0).toUpperCase()})}),st&&t.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-xs font-medium",children:((At=P.messages)==null?void 0:At.filter(je=>je.senderId!==(g==null?void 0:g.id)&&!je.isRead).length)||0})})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:[Le(P),P.archived&&t.jsx("span",{className:"ml-2 text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded",children:"Архив"})]}),P.lastMessage&&t.jsx("span",{className:"text-xs text-gray-400",children:ye(P.lastMessage.timestamp)})]}),P.lastMessage?t.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:P.lastMessage.content}):t.jsx("p",{className:"text-sm text-gray-400 italic mt-1",children:"Нет сообщений"})]}),t.jsx("button",{onClick:je=>{console.log("Menu button clicked for chat:",P.id),je.stopPropagation(),K(A===P.id?null:P.id)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(al,{className:"w-4 h-4"})})]}),A===P.id&&t.jsxs("div",{className:"absolute right-2 top-12 bg-white border border-gray-200 rounded-lg shadow-xl py-1 z-50 min-w-[180px]",children:[t.jsxs("button",{onClick:je=>{console.log("Profile button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),v(P.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(be,{className:"w-4 h-4"}),t.jsx("span",{children:"Профиль"})]}),t.jsxs("button",{onClick:je=>{console.log("Mark as read button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),O(P.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(mr,{className:"w-4 h-4"}),t.jsx("span",{children:"Отметить как прочитанное"})]}),t.jsxs("button",{onClick:je=>{console.log("Archive button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),W(P.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(li,{className:"w-4 h-4"}),t.jsx("span",{children:"Архивировать"})]}),P.archived&&t.jsxs("button",{onClick:je=>{console.log("Unarchive button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),I(P.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(li,{className:"w-4 h-4"}),t.jsx("span",{children:"Восстановить"})]}),t.jsxs("button",{onClick:je=>{console.log("Clear messages button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),z(P.id)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 transition-colors",children:[t.jsx(Hr,{className:"w-4 h-4"}),t.jsx("span",{children:"Очистить сообщения"})]}),t.jsx("hr",{className:"my-1"}),t.jsxs("button",{onClick:je=>{console.log("Delete chat button clicked for chat:",P.id),je.preventDefault(),je.stopPropagation(),de(P.id)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2 transition-colors",children:[t.jsx(Hr,{className:"w-4 h-4"}),t.jsx("span",{children:"Удалить чат"})]})]})]},P.id)}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[t.jsx(Me,{className:"w-16 h-16 mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"Нет чатов"}),t.jsx("p",{className:"text-sm text-center",children:"Начните общение с преподавателями или учениками"})]})})]}),t.jsx("div",{className:"flex-1 flex flex-col bg-white",children:ve?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const P=Fe(ve),J=ge(P);return J!=null&&J.avatar?t.jsx("img",{src:J.avatar,alt:"avatar",className:"h-10 w-10 rounded-full object-cover"}):t.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium",children:Le(ve).charAt(0).toUpperCase()})})})(),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:Le(ve)}),t.jsx("p",{className:"text-sm text-gray-500",children:(()=>{const P=Fe(ve),J=ge(P);return(J==null?void 0:J.role)==="teacher"?"Преподаватель":"Ученик"})()})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(hr,{className:"w-5 h-5"})}),t.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(Tt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{const P=Fe(ve);M(P),E(!0)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(be,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[ve.messages&&ve.messages.length>0?ve.messages.map(P=>t.jsx("div",{className:`flex ${P.senderId===(g==null?void 0:g.id)?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${P.senderId===(g==null?void 0:g.id)?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"}`,children:[t.jsx("p",{className:"text-sm",children:P.content}),t.jsxs("div",{className:`flex items-center justify-end mt-1 space-x-1 ${P.senderId===(g==null?void 0:g.id)?"text-blue-100":"text-gray-400"}`,children:[t.jsx("span",{className:"text-xs",children:q(P.timestamp)}),P.senderId===(g==null?void 0:g.id)&&t.jsx(kd,{className:"w-3 h-3"})]})]})},P.id)):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[t.jsx(Me,{className:"w-16 h-16 mb-4 text-gray-300"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"Начните общение"}),t.jsx("p",{className:"text-sm text-center",children:"Отправьте первое сообщение"})]}),t.jsx("div",{ref:fe})]}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white",children:[t.jsxs("div",{className:"flex items-end space-x-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("textarea",{value:y,onChange:P=>{f(P.target.value),R(P.target.value.length>0)},onKeyPress:gt,placeholder:"Введите сообщение...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"44px",maxHeight:"120px"}}),t.jsxs("div",{className:"absolute right-3 bottom-3 flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>U(!D),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(rn,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>T(!V),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(di,{className:"w-5 h-5"})})]})]}),t.jsx("button",{onClick:Ae,disabled:!y.trim(),className:"p-3 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:t.jsx(nl,{className:"w-5 h-5"})})]}),V&&t.jsx("div",{className:"mt-2 p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>{var P;return(P=xe.current)==null?void 0:P.click()},className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx(di,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Файл"})]}),t.jsxs("button",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx(Rd,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Голосовое"})]})]})}),t.jsx("input",{ref:xe,type:"file",multiple:!0,onChange:F,className:"hidden"})]})]}):t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500",children:[t.jsx(Me,{className:"w-24 h-24 mb-6 text-gray-300"}),t.jsx("h2",{className:"text-2xl font-medium mb-2",children:"Выберите чат"}),t.jsx("p",{className:"text-center",children:"Выберите чат из списка слева, чтобы начать общение"})]})})]}),k&&L&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Профиль пользователя"}),t.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:t.jsx(Za,{className:"w-5 h-5"})})]}),(()=>{var J;const P=ge(L);return P?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[P.avatar?t.jsx("img",{src:P.avatar,alt:"avatar",className:"h-16 w-16 rounded-full object-cover"}):t.jsx("div",{className:"h-16 w-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-medium text-lg",children:((J=P.name)==null?void 0:J.charAt(0).toUpperCase())||"U"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:P.name||"Неизвестный пользователь"}),t.jsx("p",{className:"text-gray-500",children:P.role==="teacher"?"Преподаватель":"Ученик"}),P.email&&t.jsx("p",{className:"text-sm text-gray-400",children:P.email})]})]}),P.profile&&t.jsxs("div",{className:"space-y-4",children:[P.profile.bio&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"О себе"}),t.jsx("p",{className:"text-gray-600",children:P.profile.bio})]}),P.profile.subjects&&P.profile.subjects.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Предметы"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:P.profile.subjects.map((ue,he)=>t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:ue},he))})]}),P.profile.experience&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Опыт"}),t.jsxs("p",{className:"text-gray-600",children:[P.profile.experience==="beginner"&&"Начинающий",P.profile.experience==="experienced"&&"Опытный",P.profile.experience==="professional"&&"Профессионал"]})]}),P.profile.city&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Город"}),t.jsx("p",{className:"text-gray-600",children:P.profile.city})]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4 border-t",children:[t.jsxs("button",{onClick:()=>{E(!1)},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(hr,{className:"w-4 h-4"}),t.jsx("span",{children:"Позвонить"})]}),t.jsxs("button",{onClick:()=>{E(!1)},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(Tt,{className:"w-4 h-4"}),t.jsx("span",{children:"Видео"})]})]})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"Профиль пользователя не найден"})})})()]})})})]})},G3=()=>{var ge,ee,pe,ve,Ae,gt,Le,Fe,q,ye,de,O,z,W,I,w,F;const{user:e,updateProfile:r}=ze(),{updateStudentProfile:s,updateTeacherProfile:a,lessons:n,posts:i,createPost:o,addReaction:l,addComment:c,sharePost:d,bookmarkPost:m,editPost:x,deletePost:u}=rt(),[b,g]=N.useState(!1),[h,j]=N.useState({grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""}),[y,f]=N.useState({subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}),[C,p]=N.useState(!1),[k,E]=N.useState(!1),[L,M]=N.useState(!1),[B,G]=N.useState(!1),[A]=N.useState([{id:1,avatar:((ge=e==null?void 0:e.profile)==null?void 0:ge.avatar)||"",name:(e==null?void 0:e.name)||""}]),[K,Y]=N.useState(!1),[ae,ie]=N.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),R=["Математика","Русский язык","Английский язык"],D=["1","2","3","4","5","6","7","8","9","10","11","Студент","Взрослый"],U=["подготовка к экзаменам","помощь с домашним заданием","углубленное изучение","разговорная практика"],V=["beginner","experienced","professional"],T=[45,60],me=["online","offline","mini-group"];N.useEffect(()=>{if(e!=null&&e.profile)if(e.role==="student"){const v=e.profile;j({...h,...v,goals:v.goals||[],interests:v.interests||[],preferredFormats:v.preferredFormats||[],preferredDurations:v.preferredDurations||[]})}else{const v=e.profile;f({...y,...v,formats:v.formats||[],subjects:v.subjects||[],grades:v.grades||[],goals:v.goals||[],lessonTypes:v.lessonTypes||[],durations:v.durations||[],education:v.education||{university:"",degree:"",graduationYear:void 0,courses:[]}})}else if(e&&!e.profile){const v=e.role==="teacher"?{subjects:[],experience:"experienced",grades:[],goals:[],lessonTypes:[],durations:[],formats:[],offlineAvailable:!1,city:"",overbookingEnabled:!1,bio:"",avatar:"",rating:0,hourlyRate:1500,age:void 0,experienceYears:void 0,education:{university:"",degree:"",graduationYear:void 0,courses:[]}}:{grade:"",bio:"",avatar:"",subjects:[],age:void 0,school:"",city:"",phone:"",parentName:"",parentPhone:"",goals:[],interests:[],learningStyle:"mixed",experience:"beginner",preferredFormats:[],preferredDurations:[],timeZone:""};r(v)}},[e]);const ce=()=>{if(!e)return;const v=e.role==="student"?h:y;r(v),e.role==="student"?s(e.id,h):e.role==="teacher"&&a(e.id,{...y,name:e.name,email:e.email}),g(!1),alert("Профиль сохранен!")},fe=v=>{switch(v){case"beginner":return"Начинающий";case"experienced":return"Опытный";case"professional":return"Профессионал";default:return v}};let xe=0,De=0;if(e&&e.role==="student"&&Array.isArray(n)){const v=n.filter($=>$.studentId===e.id);xe=v.length,De=Array.from(new Set(v.map($=>$.teacherId))).length}if(!e)return null;const Q=v=>{var X;const $=(X=v.target.files)==null?void 0:X[0];if($){const te=new FileReader;te.onload=P=>{var ue;const J=(ue=P.target)==null?void 0:ue.result;if(e.role==="student"){const he={...h,avatar:J};j(he),r(he),s(e.id,he)}else{const he={...y,avatar:J};f(he),r(he),a(e.id,{...he,name:e.name,email:e.email})}},te.readAsDataURL($)}};return t.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[t.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center overflow-hidden shadow-lg",children:(ee=e.profile)!=null&&ee.avatar?t.jsx("img",{src:e.profile.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):t.jsx(be,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg font-bold text-gray-900",children:e?e.name:""}),e&&e.nickname&&t.jsxs("span",{className:"text-gray-400 text-sm",children:["@",e.nickname]})]}),e&&e.role==="student"&&t.jsxs("div",{className:"flex gap-4 mt-2",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[t.jsx(Ie,{className:"w-5 h-5 text-blue-500 mr-1"}),xe]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Пройдено уроков"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-base font-bold text-gray-900 flex items-center justify-center gap-1",children:[t.jsx(be,{className:"w-5 h-5 text-green-500 mr-1"}),De]}),t.jsx("div",{className:"text-xs text-gray-500",children:"Учителей"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsx("button",{className:"btn-primary text-sm px-3 py-2",onClick:()=>g(!0),children:"Редактировать"}),t.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-blue-600 rounded-full p-2 shadow transition-colors duration-150 focus:outline-none",style:{width:36,height:36},"aria-label":"Настройки",onClick:()=>E(!0),children:t.jsx(zs,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:t.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:t.jsx("div",{className:"flex-1 space-y-1"})})}),t.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 mb-6 text-sm flex flex-col gap-2 card-gradient",children:[t.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"О себе"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-line leading-relaxed mb-2",children:e.role==="student"?h.bio||"—":((pe=e.profile)==null?void 0:pe.bio)||"—"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Предметы:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Ae=(ve=e.profile)==null?void 0:ve.subjects)==null?void 0:Ae.join(", "))||"—"})]}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Классы:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Le=(gt=e.profile)==null?void 0:gt.grades)==null?void 0:Le.join(", "))||"—"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Страна:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:((Fe=e.profile)==null?void 0:Fe.country)||"—"})]})]})]}),e.role==="teacher"&&((q=e.profile)==null?void 0:q.experience)&&t.jsxs("div",{className:"mt-2",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-500",children:"Опыт:"})," ",t.jsx("span",{className:"text-base text-gray-900",children:e.profile.experience})]})]}),t.jsxs(dr,{open:C,onClose:()=>p(!1),children:[t.jsx("div",{className:"text-base font-bold mb-2",children:"Контактная информация"}),t.jsxs("div",{className:"mb-2 text-sm",children:[t.jsx("span",{className:"font-semibold",children:"Email:"})," ",e.email]})]}),t.jsx(dr,{open:k,onClose:()=>E(!1),children:t.jsxs("div",{className:"w-[320px] max-w-full",children:[t.jsx("div",{className:"text-lg font-bold mb-4 text-center",children:"Настройки"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{E(!1),M(!0)},children:[t.jsx(Ir,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"flex-1",children:"Push-уведомления"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(sl,{className:"w-5 h-5 text-gray-700"}),t.jsx("span",{className:"flex-1",children:"Конфиденциальность"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",onClick:()=>{E(!1),G(!0)},children:[t.jsx(be,{className:"w-5 h-5 text-blue-500"}),t.jsx("span",{className:"flex-1",children:"Аккаунт"})]}),t.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ld,{className:"w-5 h-5 text-purple-500"}),t.jsx("span",{className:"flex-1",children:"Тема"})]}),t.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${ae==="dark"?"bg-gray-900":"bg-gray-300"}`,onClick:()=>{const v=ae==="dark"?"light":"dark";ie(v),v==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",v)},"aria-pressed":ae==="dark",type:"button",children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${ae==="dark"?"translate-x-5":"translate-x-1"}`})})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Dd,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"flex-1",children:"Память"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Id,{className:"w-5 h-5 text-indigo-500"}),t.jsx("span",{className:"flex-1",children:"Устройства"})]}),t.jsx("div",{className:"border-t my-2"}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Ie,{className:"w-5 h-5 text-blue-400"}),t.jsx("span",{className:"flex-1",children:"База знаний"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Me,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"flex-1",children:"Поддержка"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(Jt,{className:"w-5 h-5 text-blue-700"}),t.jsx("span",{className:"flex-1",children:"Документация"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors w-full text-left",children:[t.jsx(wt,{className:"w-5 h-5 text-yellow-500"}),t.jsx("span",{className:"flex-1",children:"Оценить приложение"})]})]})]})}),t.jsx(dr,{open:L,onClose:()=>M(!1),children:t.jsxs("div",{className:"w-[340px] max-w-full",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("button",{onClick:()=>M(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:t.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[t.jsx("path",{d:"M19 12H5"}),t.jsx("path",{d:"m12 19-7-7 7-7"})]})}),t.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Уведомления"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"СООБЩЕНИЯ"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Dt,{label:"Личные сообщения"}),t.jsx(Dt,{label:"Инфобот"}),t.jsx(Dt,{label:"Лиды"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПУБЛИКАЦИИ ОТ ПОДПИСОК"}),t.jsx("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:t.jsx(Dt,{label:"Новые публикации"})}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ПОДПИСЧИКИ И ДЕЛОВЫЕ СВЯЗИ"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Dt,{label:"Новые подписчики"}),t.jsx(Dt,{label:"Установлена деловая связь"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"МАРКЕТСПЕЙС"}),t.jsxs("div",{className:"bg-gray-50 rounded-xl mb-4 overflow-hidden",children:[t.jsx(Dt,{label:"Отклики"}),t.jsx(Dt,{label:"Рекомендации"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ГОСЗАКУПКИ"}),t.jsx("div",{className:"bg-gray-50 rounded-xl mb-2 overflow-hidden",children:t.jsx(Dt,{label:"Подборка тендеров по ИНН"})})]})}),t.jsx(dr,{open:B,onClose:()=>G(!1),children:t.jsxs("div",{className:"w-[340px] max-w-full flex flex-col min-h-[340px]",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("button",{onClick:()=>G(!1),className:"mr-2 p-1 rounded hover:bg-gray-100",children:t.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-arrow-left w-5 h-5 text-gray-500",children:[t.jsx("path",{d:"M19 12H5"}),t.jsx("path",{d:"m12 19-7-7 7-7"})]})}),t.jsx("div",{className:"text-lg font-bold text-center flex-1",children:"Аккаунт"})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"НОМЕР ТЕЛЕФОНА"}),t.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:"Изменить номер"}),t.jsx("span",{className:"text-gray-400 text-sm",children:e.phone||"+7 (999) 300-18-02"}),t.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 18l6-6-6-6"})})]}),t.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1 mt-2",children:"ЭЛЕКТРОННАЯ ПОЧТА"}),t.jsxs("div",{className:"bg-white rounded-xl mb-4 overflow-hidden flex items-center justify-between px-4 py-3",children:[t.jsx("span",{className:"text-sm text-gray-900",children:"Изменить эл. почту"}),t.jsx("span",{className:"text-gray-400 text-sm truncate max-w-[120px]",children:e.email}),t.jsx("svg",{className:"w-4 h-4 text-gray-400 ml-2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M9 18l6-6-6-6"})})]}),t.jsx("div",{className:"flex-1"}),t.jsx("button",{className:"w-full mt-8 mb-2 py-3 rounded-xl bg-red-50 text-red-600 font-bold text-base hover:bg-red-100 transition",children:"Удалить аккаунт"})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"font-bold text-base",children:"Истории"}),t.jsx("button",{className:"text-blue-500 text-xs font-medium hover:underline",onClick:()=>alert("Скоро можно будет добавлять истории!"),children:"Добавить"})]}),t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-2",children:[t.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[t.jsxs("div",{className:"relative h-14 w-14 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 flex items-center justify-center overflow-hidden border-2 border-blue-400 group-hover:scale-105 transition",children:[(e.role==="student"?h.avatar:(ye=e.profile)!=null&&ye.avatar)?t.jsx("img",{src:e.role==="student"?h.avatar:(de=e.profile)==null?void 0:de.avatar,alt:"avatar",className:"h-14 w-14 object-cover rounded-full"}):t.jsx(be,{className:"h-7 w-7 text-white"}),t.jsx("span",{className:"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs border-2 border-white",children:"+"})]}),t.jsx("span",{className:"text-xs mt-1 text-gray-700",children:"Ваша история"})]}),A.map(v=>t.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",children:[t.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-tr from-pink-400 to-yellow-400 flex items-center justify-center overflow-hidden border-2 border-pink-400 group-hover:scale-105 transition",children:v.avatar?t.jsx("img",{src:v.avatar,alt:v.name,className:"h-14 w-14 object-cover rounded-full"}):t.jsx(be,{className:"h-7 w-7 text-white"})}),t.jsx("span",{className:"text-xs mt-1 text-gray-700 truncate max-w-[60px]",children:v.name})]},v.id))]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow p-4 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"font-bold text-base",children:"Мои записи"}),t.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(Ur,{className:"w-4 h-4"}),t.jsx("span",{children:"Создать запись"})]})]}),K&&t.jsx("div",{className:"mb-6",children:t.jsx(Jn,{onSubmit:v=>{o(v),Y(!1)},onCancel:()=>Y(!1),userName:(e==null?void 0:e.name)||"Пользователь",userAvatar:e==null?void 0:e.avatar})}),t.jsx("div",{className:"space-y-4",children:i.filter(v=>v.userId===(e==null?void 0:e.id)).length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"У вас пока нет записей"}),t.jsx("p",{className:"text-gray-500",children:"Создайте первую запись!"})]}):i.filter(v=>v.userId===(e==null?void 0:e.id)).map(v=>t.jsx(Qa,{post:v,onReaction:l,onComment:c,onShare:d,onBookmark:m,onEdit:x,onDelete:u},v.id))})]}),t.jsx(dr,{open:b,onClose:()=>g(!1),children:t.jsx("div",{className:"w-[720px] max-w-full max-h-[80vh] overflow-y-auto",children:t.jsxs("div",{className:"space-y-8 p-4",children:[t.jsxs("div",{className:"flex items-center gap-8",children:[t.jsx("div",{className:"h-20 w-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center overflow-hidden",children:(e.role==="student"?h.avatar:y.avatar)?t.jsx("img",{src:e.role==="student"?h.avatar:y.avatar,alt:"Avatar",className:"h-20 w-20 rounded-full object-cover"}):t.jsx(be,{className:"h-10 w-10 text-white"})}),t.jsxs("div",{children:[t.jsxs("label",{className:"btn-primary cursor-pointer",children:[t.jsx(Gd,{className:"h-4 w-4"}),t.jsx("span",{children:"Загрузить фото"}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Q})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Рекомендуемый размер: 200x200px"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя"}),t.jsx("input",{type:"text",value:e==null?void 0:e.name,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Никнейм"}),t.jsx("input",{type:"text",value:`@${e==null?void 0:e.nickname}`,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:e==null?void 0:e.email,disabled:!0,className:"input-modern w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Номер телефона"}),t.jsx("input",{type:"tel",value:(e==null?void 0:e.phone)||"",onChange:v=>{if(e)try{const $=JSON.parse(localStorage.getItem("tutoring_users")||"[]"),X=$.findIndex(te=>te.id===e.id);X!==-1&&($[X].phone=v.target.value,localStorage.setItem("tutoring_users",JSON.stringify($)))}catch{}},className:"input-modern w-full",placeholder:"+7 (999) 123-45-67"})]})]}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предметы, которые вы преподаете"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:R.map(v=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.subjects.includes(v),onChange:$=>{$.target.checked?f({...y,subjects:[...y.subjects,v]}):f({...y,subjects:y.subjects.filter(X=>X!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v})]},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Классы, с которыми работаете"}),t.jsx("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-2",children:D.map(v=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.grades.includes(v),onChange:$=>{$.target.checked?f({...y,grades:[...y.grades,v]}):f({...y,grades:y.grades.filter(X=>X!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v})]},v))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Опыт преподавания"}),t.jsx("select",{value:y.experience,onChange:v=>f({...y,experience:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:V.map(v=>t.jsx("option",{value:v,children:fe(v)},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),t.jsx("input",{type:"number",value:y.age||"",onChange:v=>f({...y,age:v.target.value?Number(v.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"18",max:"100",placeholder:"Укажите возраст"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Лет опыта"}),t.jsx("input",{type:"number",value:y.experienceYears||"",onChange:v=>f({...y,experienceYears:v.target.value?Number(v.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",max:"50",placeholder:"Количество лет"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стоимость часа (₽)"}),t.jsx("input",{type:"number",value:y.hourlyRate,onChange:v=>f({...y,hourlyRate:Number(v.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"0"})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели занятий"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(v=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.goals.includes(v),onChange:$=>{$.target.checked?f({...y,goals:[...y.goals,v]}):f({...y,goals:y.goals.filter(X=>X!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v})]},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Продолжительность уроков"}),t.jsx("div",{className:"flex space-x-4",children:T.map(v=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.durations.includes(v),onChange:$=>{$.target.checked?f({...y,durations:[...y.durations,v]}):f({...y,durations:y.durations.filter(X=>X!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[v," мин"]})]},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Форматы проведения"}),t.jsx("div",{className:"flex space-x-4",children:me.map(v=>{var $;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:(($=y.formats)==null?void 0:$.includes(v))||!1,onChange:X=>{X.target.checked?f({...y,formats:[...y.formats||[],v]}):f({...y,formats:(y.formats||[]).filter(te=>te!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v==="online"?"Онлайн":v==="offline"?"Оффлайн":"Мини-группа"})]},v)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.offlineAvailable,onChange:v=>f({...y,offlineAvailable:v.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Провожу оффлайн занятия"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:y.overbookingEnabled,onChange:v=>f({...y,overbookingEnabled:v.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Участвую в овербукинге"})]})})]})]}),y.offlineAvailable&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:y.city,onChange:v=>f({...y,city:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Введите ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"О себе"}),t.jsx("textarea",{value:e.role==="student"?h.bio:y.bio,onChange:v=>{e.role==="student"?j({...h,bio:v.target.value}):f({...y,bio:v.target.value})},rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Расскажите о себе..."})]}),e.role==="student"&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Дополнительная информация"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Возраст"}),t.jsx("input",{type:"number",value:h.age||"",onChange:v=>j({...h,age:v.target.value?Number(v.target.value):void 0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"5",max:"25",placeholder:"Укажите возраст"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Школа"}),t.jsx("input",{type:"text",value:h.school||"",onChange:v=>j({...h,school:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название школы"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Город"}),t.jsx("input",{type:"text",value:h.city||"",onChange:v=>j({...h,city:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваш город"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон"}),t.jsx("input",{type:"tel",value:h.phone||"",onChange:v=>j({...h,phone:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Имя родителя"}),t.jsx("input",{type:"text",value:h.parentName||"",onChange:v=>j({...h,parentName:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Имя родителя"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Телефон родителя"}),t.jsx("input",{type:"tel",value:h.parentPhone||"",onChange:v=>j({...h,parentPhone:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+7 (999) 123-45-67"})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цели обучения"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(v=>{var $;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:(($=h.goals)==null?void 0:$.includes(v))||!1,onChange:X=>{X.target.checked?j({...h,goals:[...h.goals||[],v]}):j({...h,goals:(h.goals||[]).filter(te=>te!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v})]},v)})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Интересы и хобби"}),t.jsx("textarea",{value:((O=h.interests)==null?void 0:O.join(", "))||"",onChange:v=>j({...h,interests:v.target.value.split(",").map($=>$.trim()).filter($=>$)}),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Напишите через запятую: спорт, музыка, рисование..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Стиль обучения"}),t.jsxs("select",{value:h.learningStyle||"mixed",onChange:v=>j({...h,learningStyle:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"visual",children:"Визуальный"}),t.jsx("option",{value:"auditory",children:"Аудиальный"}),t.jsx("option",{value:"kinesthetic",children:"Кинестетический"}),t.jsx("option",{value:"mixed",children:"Смешанный"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Уровень знаний"}),t.jsxs("select",{value:h.experience||"beginner",onChange:v=>j({...h,experience:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"beginner",children:"Начинающий"}),t.jsx("option",{value:"intermediate",children:"Средний"}),t.jsx("option",{value:"advanced",children:"Продвинутый"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемые форматы занятий"}),t.jsx("div",{className:"flex space-x-4",children:me.map(v=>{var $;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:(($=h.preferredFormats)==null?void 0:$.includes(v))||!1,onChange:X=>{X.target.checked?j({...h,preferredFormats:[...h.preferredFormats||[],v]}):j({...h,preferredFormats:(h.preferredFormats||[]).filter(te=>te!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:v==="online"?"Онлайн":v==="offline"?"Оффлайн":"Мини-группа"})]},v)})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Предпочитаемая длительность занятий"}),t.jsx("div",{className:"flex space-x-4",children:T.map(v=>{var $;return t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:(($=h.preferredDurations)==null?void 0:$.includes(v))||!1,onChange:X=>{X.target.checked?j({...h,preferredDurations:[...h.preferredDurations||[],v]}):j({...h,preferredDurations:(h.preferredDurations||[]).filter(te=>te!==v)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[v," мин"]})]},v)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Часовой пояс"}),t.jsx("input",{type:"text",value:h.timeZone||"",onChange:v=>j({...h,timeZone:v.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"UTC+3 (Москва)"})]})]})}),e.role==="teacher"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Образование"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Университет"}),t.jsx("input",{type:"text",value:((z=y.education)==null?void 0:z.university)||"",onChange:v=>f({...y,education:{...y.education,university:v.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Название университета"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Специальность/Степень"}),t.jsx("input",{type:"text",value:((W=y.education)==null?void 0:W.degree)||"",onChange:v=>f({...y,education:{...y.education,degree:v.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ваша специальность"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Год окончания"}),t.jsx("input",{type:"number",value:((I=y.education)==null?void 0:I.graduationYear)||"",onChange:v=>f({...y,education:{...y.education,graduationYear:v.target.value?Number(v.target.value):void 0}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год окончания"})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Курсы и сертификаты"}),t.jsxs("div",{className:"space-y-4",children:[(F=(w=y.education)==null?void 0:w.courses)==null?void 0:F.map((v,$)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Название курса"}),t.jsx("input",{type:"text",value:v.name,onChange:X=>{var P;const te=[...((P=y.education)==null?void 0:P.courses)||[]];te[$]={...v,name:X.target.value},f({...y,education:{...y.education,courses:te}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название курса"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Учреждение"}),t.jsx("input",{type:"text",value:v.institution,onChange:X=>{var P;const te=[...((P=y.education)==null?void 0:P.courses)||[]];te[$]={...v,institution:X.target.value},f({...y,education:{...y.education,courses:te}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Название учреждения"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Год прохождения"}),t.jsx("input",{type:"number",value:v.year,onChange:X=>{var P;const te=[...((P=y.education)==null?void 0:P.courses)||[]];te[$]={...v,year:Number(X.target.value)},f({...y,education:{...y.education,courses:te}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"1950",max:new Date().getFullYear(),placeholder:"Год"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ссылка на сертификат"}),t.jsx("input",{type:"url",value:v.certificate||"",onChange:X=>{var P;const te=[...((P=y.education)==null?void 0:P.courses)||[]];te[$]={...v,certificate:X.target.value},f({...y,education:{...y.education,courses:te}})},className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/certificate.pdf"})]})]}),t.jsx("button",{type:"button",onClick:()=>{var te,P;const X=((P=(te=y.education)==null?void 0:te.courses)==null?void 0:P.filter((J,ue)=>ue!==$))||[];f({...y,education:{...y.education,courses:X}})},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Удалить курс"})]},$)),t.jsxs("button",{type:"button",onClick:()=>{var $;const v={name:"",institution:"",year:new Date().getFullYear(),certificate:""};f({...y,education:{...y.education,courses:[...(($=y.education)==null?void 0:$.courses)||[],v]}})},className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-800 transition-colors flex items-center justify-center gap-2",children:[t.jsx(Ur,{className:"h-5 w-5"}),"Добавить курс"]})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-4",children:[t.jsxs("button",{onClick:ce,className:"btn-primary flex items-center gap-2",children:[t.jsx(Ud,{className:"h-5 w-5"}),t.jsx("span",{children:"Сохранить профиль"})]}),t.jsx("button",{onClick:()=>g(!1),className:"btn-secondary",children:"Отмена"})]})]})})})]})},Dt=({label:e})=>{const[r,s]=N.useState(!0);return t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b last:border-b-0",children:[t.jsx("span",{className:"text-sm text-gray-900",children:e}),t.jsx("button",{className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none ${r?"bg-green-500":"bg-gray-300"}`,onClick:()=>s(a=>!a),"aria-pressed":r,type:"button",children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-200 ${r?"translate-x-5":"translate-x-1"}`})})]})},q3=()=>{const[e,r]=N.useState(null),[s,a]=N.useState(!0),[n,i]=N.useState(!1);try{const{user:o}=ze(),[l,c]=N.useState((o==null?void 0:o.role)==="teacher"?"slots":"home");if(N.useEffect(()=>{if(o&&!n){const m=o.role==="teacher"?"slots":"home";c(m),i(!0)}a(!1)},[o,n]),s)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Загрузка приложения..."})]})});if(!o)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Добро пожаловать в Nauchi"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Платформа для репетиторов и учеников"}),t.jsx(Kd,{onSuccess:()=>{}})]})});const d=()=>{try{switch(l){case"home":return o.role==="student"?t.jsx(Ta,{setActiveTab:c}):t.jsx(Oa,{});case"slots":return o.role==="teacher"?t.jsx(Oa,{}):t.jsx(Ta,{setActiveTab:c});case"calendar":return o.role==="student"?t.jsx(Zc,{onClose:()=>c("home")}):t.jsx(ed,{});case"lessons":return o.role==="student"?t.jsx(H3,{}):null;case"students":return o.role==="teacher"?t.jsx(B3,{}):null;case"chats":return t.jsx(z3,{});case"profile":return t.jsx(G3,{});default:return o.role==="student"?t.jsx(Ta,{setActiveTab:c}):t.jsx(Oa,{})}}catch(m){return console.error("Error rendering content:",m),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки контента"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Попробуйте перезагрузить страницу"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить"})]})})}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Xd,{activeTab:l,onTabChange:c}),t.jsx("main",{className:"container mx-auto px-4 py-8",children:d()})]})}catch(o){return console.error("Error in AppContent:",o),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Ошибка загрузки"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Произошла ошибка при загрузке приложения"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Перезагрузить страницу"})]})})}},Y3=()=>t.jsx("div",{className:"App",children:t.jsx(yd,{children:t.jsx(jd,{children:t.jsxs(ad,{children:[t.jsx(ni,{path:"/teacher/:teacherId",element:t.jsx(Qc,{teacher:{},onClose:()=>{},onBookLesson:()=>{}})}),t.jsx(ni,{path:"*",element:t.jsx(q3,{})})]})})})});Zo(document.getElementById("root")).render(t.jsx(N.StrictMode,{children:t.jsx(nd,{children:t.jsx(Y3,{})})}));
