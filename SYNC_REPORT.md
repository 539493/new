# üîÑ –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–†–µ–ø–µ—Ç–∏—Ç–æ—Ä —Å–æ–∑–¥–∞–≤–∞–ª —Å–ª–æ—Ç—ã, –æ–±–Ω–æ–≤–ª—è–ª –ø—Ä–æ—Ñ–∏–ª—å –∏ –∑–∞–≥—Ä—É–∂–∞–ª —Ñ–æ—Ç–æ –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ, –Ω–æ —É—á–µ–Ω–∏–∫ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–µ –≤–∏–¥–µ–ª —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–ª—É—á—à–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ WebSocket —Å–æ–±—ã—Ç–∏–π

#### –ù–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ `backend/server.cjs`:
- **`dataUpdated`** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- **`slotCreated`** - —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **`teacherProfileUpdated`** - —É–ª—É—á—à–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- **`slotDeleted`** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ª–æ—Ç–æ–≤

#### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:
```javascript
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
io.emit('dataUpdated', {
  type: 'slotCreated',
  timeSlots: timeSlots,
  teacherProfiles: teacherProfiles,
  studentProfiles: studentProfiles
});
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π API endpoint

#### `/api/sync` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
```javascript
app.get('/api/sync', (req, res) => {
  const syncData = {
    timeSlots: timeSlots,
    teacherProfiles: teacherProfiles,
    studentProfiles: studentProfiles,
    lessons: lessons,
    chats: chats,
    posts: posts,
    overbookingRequests: overbookingRequests
  };
  res.json(syncData);
});
```

### 3. –£–ª—É—á—à–µ–Ω DataContext

#### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `src/contexts/DataContext.tsx`:
- **`forceSyncData()`** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ `dataUpdated`** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π:
```typescript
newSocket.on('dataUpdated', (data) => {
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã
  if (data.timeSlots) {
    setTimeSlots(data.timeSlots);
    saveToStorage('tutoring_timeSlots', data.timeSlots);
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
  if (data.teacherProfiles) {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    const users = JSON.parse(localStorage.getItem('tutoring_users') || '[]');
    const updatedUsers = users.map((u: User) => {
      if (u.role === 'teacher' && data.teacherProfiles[u.id]) {
        return { ...u, profile: data.teacherProfiles[u.id] };
      }
      return u;
    });
    setAllUsers(updatedUsers);
    saveToStorage('tutoring_users', updatedUsers);
  }
});
```

### 4. –£–ª—É—á—à–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å StudentHome

#### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `src/components/Student/StudentHome.tsx`:
- **`handleForceSync()`** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### –ö–Ω–æ–ø–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```jsx
<button
  onClick={handleForceSync}
  disabled={loading}
  className="group bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-3 rounded-xl font-semibold text-base hover:from-green-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center space-x-2 disabled:opacity-50 disabled:transform-none"
>
  <div className="p-1.5 bg-white/20 rounded-lg group-hover:bg-white/30 transition-colors">
    <Wifi className={`h-5 w-5 ${loading ? 'animate-pulse' : ''}`} />
  </div>
  <div className="text-left">
    <div className="font-bold">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
    <div className="text-xs opacity-90">–°–µ—Ä–≤–µ—Ä</div>
  </div>
</button>
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°–æ–±—ã—Ç–∏—è WebSocket:
1. **`slotCreated`** ‚Üí `dataUpdated` - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ª–æ—Ç–∞
2. **`teacherProfileUpdated`** ‚Üí `dataUpdated` - –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
3. **`slotDeleted`** ‚Üí `dataUpdated` - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ª–æ—Ç–∞

### API Endpoints:
- **`GET /api/sync`** - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- **`GET /api/teachers`** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- **`GET /api/users/:id`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:
- **`tutoring_timeSlots`** - —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
- **`tutoring_users`** - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **`tutoring_teacherProfiles`** - –ø—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- **`tutoring_studentProfiles`** - –ø—Ä–æ—Ñ–∏–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. **–ù–∞–¥–µ–∂–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö** - —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket —Å–æ–±—ã—Ç–∏–π
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

### üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:
- –†–µ–ø–µ—Ç–∏—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–ª–æ—Ç ‚Üí —É—á–µ–Ω–∏–∫ –≤–∏–¥–∏—Ç –µ–≥–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –†–µ–ø–µ—Ç–∏—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å ‚Üí —É—á–µ–Ω–∏–∫ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É
- –†–µ–ø–µ—Ç–∏—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ ‚Üí —É—á–µ–Ω–∏–∫ –≤–∏–¥–∏—Ç –Ω–æ–≤–æ–µ —Ñ–æ—Ç–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è" –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å GitHub

### –ö–æ–º–º–∏—Ç:
```
"–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏: –¥–æ–±–∞–≤–ª–µ–Ω—ã WebSocket —Å–æ–±—ã—Ç–∏—è dataUpdated, –Ω–æ–≤—ã–π endpoint /api/sync –∏ –∫–Ω–æ–ø–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏"
```

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `backend/server.cjs` - —É–ª—É—á—à–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ WebSocket —Å–æ–±—ã—Ç–∏–π
- `src/contexts/DataContext.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è forceSyncData
- `src/components/Student/StudentHome.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

**–°—Ç–∞—Ç—É—Å:** üü¢ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
