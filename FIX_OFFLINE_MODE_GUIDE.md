# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
```
–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
```

–ò –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ:
```
üë®‚Äçüéì –°—Ç—É–¥–µ–Ω—Ç–æ–≤: 0
```

## üéØ –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞** –≤ `src/config.ts` (3001 –≤–º–µ—Å—Ç–æ 10000)
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CORS –¥–ª—è Vite dev server** (–ø–æ—Ä—Ç 5173)
3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ Socket.IO

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`src/config.ts`):
```typescript
// URL —Å–µ—Ä–≤–µ—Ä–∞
export const SERVER_URL = isProd 
  ? 'https://nauchi.onrender.com' 
  : 'http://localhost:10000';  // ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å 3001 –Ω–∞ 10000

// URL WebSocket
export const WEBSOCKET_URL = isProd 
  ? 'https://nauchi.onrender.com' 
  : 'http://localhost:10000';  // ‚Üê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å 3001 –Ω–∞ 10000
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`backend/production-server.cjs`):
```javascript
const allowedOrigins = [
  "http://localhost:3000",
  "http://localhost:3001",
  "http://localhost:3002",
  "http://localhost:3003",
  "http://localhost:3004",
  "http://localhost:4173",
  "http://localhost:5173", // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω Vite dev server
  "https://*.vercel.app",
  "https://*.onrender.com",
  "https://na-uchi.onrender.com",
  "https://nauchi.onrender.com", // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –¥–æ–º–µ–Ω
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã
];
```

### 3. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Socket.IO:
```javascript
console.log('üîç Socket.IO CORS check for origin:', origin);
console.log('‚úÖ Socket.IO CORS allowed:', isAllowed);
```

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
./scripts/test-online-connection.sh
```

### –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```bash
# 1. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
npm run build

# 2. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
git add .
git commit -m "Fix offline mode - correct server port and CORS"
git push origin main

# 3. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm start

# 2. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
npm run dev

# 3. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
# http://localhost:5173 (Vite dev server)
# –∏–ª–∏
# http://localhost:10000 (Production server)
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –°—Ç–∞—Ç—É—Å: "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏" (–∑–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- ‚úÖ Socket.IO –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç:
```
‚úÖ config.ts –Ω–∞–π–¥–µ–Ω
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (10000)
‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
‚úÖ API /api/status —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ API /api/health —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ API /api/socket-test —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã
‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è assets —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

## üõ† –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Console
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Network
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ò—â–∏—Ç–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   npm start
   # –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   grep -n "localhost:10000" src/config.ts
   ```

## üåê –î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Render

–ü–æ—Å–ª–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
   ```bash
   git add .
   git commit -m "Fix offline mode for students"
   git push origin main
   ```

2. **–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏** –Ω–∞ Render (5-10 –º–∏–Ω—É—Ç)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É** –Ω–∞ https://nauchi.onrender.com

## üì± –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **`scripts/test-online-connection.sh`** - –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **`FIX_OFFLINE_MODE_GUIDE.md`** - –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –æ–Ω–ª–∞–π–Ω
- ‚úÖ –°—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"
- ‚úÖ Socket.IO —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

---

**üéâ –ì–æ—Ç–æ–≤–æ! –°—Ç—É–¥–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –æ–Ω–ª–∞–π–Ω –∏ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É!**
